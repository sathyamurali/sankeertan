var pT=Object.defineProperty;var o0=e=>{throw TypeError(e)};var mT=(e,t,n)=>t in e?pT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Xa=(e,t,n)=>mT(e,typeof t!="symbol"?t+"":t,n),bh=(e,t,n)=>t.has(e)||o0("Cannot "+n);var G=(e,t,n)=>(bh(e,t,"read from private field"),n?n.call(e):t.get(e)),Ve=(e,t,n)=>t.has(e)?o0("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Ne=(e,t,n,r)=>(bh(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),st=(e,t,n)=>(bh(e,t,"access private method"),n);var gc=(e,t,n,r)=>({set _(i){Ne(e,t,i,n)},get _(){return G(e,t,r)}});function gT(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Yt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function nf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function yT(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var J_={exports:{}},rf={},Z_={exports:{}},nt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Su=Symbol.for("react.element"),vT=Symbol.for("react.portal"),wT=Symbol.for("react.fragment"),bT=Symbol.for("react.strict_mode"),_T=Symbol.for("react.profiler"),xT=Symbol.for("react.provider"),ST=Symbol.for("react.context"),kT=Symbol.for("react.forward_ref"),ET=Symbol.for("react.suspense"),CT=Symbol.for("react.memo"),TT=Symbol.for("react.lazy"),a0=Symbol.iterator;function PT(e){return e===null||typeof e!="object"?null:(e=a0&&e[a0]||e["@@iterator"],typeof e=="function"?e:null)}var X_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ex=Object.assign,tx={};function Ra(e,t,n){this.props=e,this.context=t,this.refs=tx,this.updater=n||X_}Ra.prototype.isReactComponent={};Ra.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ra.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function nx(){}nx.prototype=Ra.prototype;function Eg(e,t,n){this.props=e,this.context=t,this.refs=tx,this.updater=n||X_}var Cg=Eg.prototype=new nx;Cg.constructor=Eg;ex(Cg,Ra.prototype);Cg.isPureReactComponent=!0;var l0=Array.isArray,rx=Object.prototype.hasOwnProperty,Tg={current:null},ix={key:!0,ref:!0,__self:!0,__source:!0};function sx(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)rx.call(t,r)&&!ix.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Su,type:e,key:s,ref:o,props:i,_owner:Tg.current}}function AT(e,t){return{$$typeof:Su,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Pg(e){return typeof e=="object"&&e!==null&&e.$$typeof===Su}function jT(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var u0=/\/+/g;function _h(e,t){return typeof e=="object"&&e!==null&&e.key!=null?jT(""+e.key):t.toString(36)}function qc(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Su:case vT:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+_h(o,0):r,l0(i)?(n="",e!=null&&(n=e.replace(u0,"$&/")+"/"),qc(i,t,n,"",function(u){return u})):i!=null&&(Pg(i)&&(i=AT(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(u0,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",l0(e))for(var a=0;a<e.length;a++){s=e[a];var l=r+_h(s,a);o+=qc(s,t,n,l,i)}else if(l=PT(e),typeof l=="function")for(e=l.call(e),a=0;!(s=e.next()).done;)s=s.value,l=r+_h(s,a++),o+=qc(s,t,n,l,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function yc(e,t,n){if(e==null)return e;var r=[],i=0;return qc(e,r,"","",function(s){return t.call(n,s,i++)}),r}function OT(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var _n={current:null},Gc={transition:null},RT={ReactCurrentDispatcher:_n,ReactCurrentBatchConfig:Gc,ReactCurrentOwner:Tg};function ox(){throw Error("act(...) is not supported in production builds of React.")}nt.Children={map:yc,forEach:function(e,t,n){yc(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return yc(e,function(){t++}),t},toArray:function(e){return yc(e,function(t){return t})||[]},only:function(e){if(!Pg(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};nt.Component=Ra;nt.Fragment=wT;nt.Profiler=_T;nt.PureComponent=Eg;nt.StrictMode=bT;nt.Suspense=ET;nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RT;nt.act=ox;nt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=ex({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=Tg.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)rx.call(t,l)&&!ix.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Su,type:e.type,key:i,ref:s,props:r,_owner:o}};nt.createContext=function(e){return e={$$typeof:ST,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:xT,_context:e},e.Consumer=e};nt.createElement=sx;nt.createFactory=function(e){var t=sx.bind(null,e);return t.type=e,t};nt.createRef=function(){return{current:null}};nt.forwardRef=function(e){return{$$typeof:kT,render:e}};nt.isValidElement=Pg;nt.lazy=function(e){return{$$typeof:TT,_payload:{_status:-1,_result:e},_init:OT}};nt.memo=function(e,t){return{$$typeof:CT,type:e,compare:t===void 0?null:t}};nt.startTransition=function(e){var t=Gc.transition;Gc.transition={};try{e()}finally{Gc.transition=t}};nt.unstable_act=ox;nt.useCallback=function(e,t){return _n.current.useCallback(e,t)};nt.useContext=function(e){return _n.current.useContext(e)};nt.useDebugValue=function(){};nt.useDeferredValue=function(e){return _n.current.useDeferredValue(e)};nt.useEffect=function(e,t){return _n.current.useEffect(e,t)};nt.useId=function(){return _n.current.useId()};nt.useImperativeHandle=function(e,t,n){return _n.current.useImperativeHandle(e,t,n)};nt.useInsertionEffect=function(e,t){return _n.current.useInsertionEffect(e,t)};nt.useLayoutEffect=function(e,t){return _n.current.useLayoutEffect(e,t)};nt.useMemo=function(e,t){return _n.current.useMemo(e,t)};nt.useReducer=function(e,t,n){return _n.current.useReducer(e,t,n)};nt.useRef=function(e){return _n.current.useRef(e)};nt.useState=function(e){return _n.current.useState(e)};nt.useSyncExternalStore=function(e,t,n){return _n.current.useSyncExternalStore(e,t,n)};nt.useTransition=function(){return _n.current.useTransition()};nt.version="18.3.1";Z_.exports=nt;var E=Z_.exports;const Ke=nf(E),c0=gT({__proto__:null,default:Ke},[E]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IT=E,DT=Symbol.for("react.element"),NT=Symbol.for("react.fragment"),LT=Object.prototype.hasOwnProperty,$T=IT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,MT={key:!0,ref:!0,__self:!0,__source:!0};function ax(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)LT.call(t,r)&&!MT.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:DT,type:e,key:s,ref:o,props:i,_owner:$T.current}}rf.Fragment=NT;rf.jsx=ax;rf.jsxs=ax;J_.exports=rf;var k=J_.exports,Ep={},lx={exports:{}},Wn={},ux={exports:{}},cx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ue,L){var ie=ue.length;ue.push(L);e:for(;0<ie;){var K=ie-1>>>1,W=ue[K];if(0<i(W,L))ue[K]=L,ue[ie]=W,ie=K;else break e}}function n(ue){return ue.length===0?null:ue[0]}function r(ue){if(ue.length===0)return null;var L=ue[0],ie=ue.pop();if(ie!==L){ue[0]=ie;e:for(var K=0,W=ue.length,me=W>>>1;K<me;){var ce=2*(K+1)-1,de=ue[ce],Be=ce+1,We=ue[Be];if(0>i(de,ie))Be<W&&0>i(We,de)?(ue[K]=We,ue[Be]=ie,K=Be):(ue[K]=de,ue[ce]=ie,K=ce);else if(Be<W&&0>i(We,ie))ue[K]=We,ue[Be]=ie,K=Be;else break e}}return L}function i(ue,L){var ie=ue.sortIndex-L.sortIndex;return ie!==0?ie:ue.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,f=null,p=3,m=!1,w=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(ue){for(var L=n(u);L!==null;){if(L.callback===null)r(u);else if(L.startTime<=ue)r(u),L.sortIndex=L.expirationTime,t(l,L);else break;L=n(u)}}function T(ue){if(v=!1,_(ue),!w)if(n(l)!==null)w=!0,Ce(O);else{var L=n(u);L!==null&&le(T,L.startTime-ue)}}function O(ue,L){w=!1,v&&(v=!1,g($),$=-1),m=!0;var ie=p;try{for(_(L),f=n(l);f!==null&&(!(f.expirationTime>L)||ue&&!ge());){var K=f.callback;if(typeof K=="function"){f.callback=null,p=f.priorityLevel;var W=K(f.expirationTime<=L);L=e.unstable_now(),typeof W=="function"?f.callback=W:f===n(l)&&r(l),_(L)}else r(l);f=n(l)}if(f!==null)var me=!0;else{var ce=n(u);ce!==null&&le(T,ce.startTime-L),me=!1}return me}finally{f=null,p=ie,m=!1}}var R=!1,I=null,$=-1,U=5,V=-1;function ge(){return!(e.unstable_now()-V<U)}function M(){if(I!==null){var ue=e.unstable_now();V=ue;var L=!0;try{L=I(!0,ue)}finally{L?Y():(R=!1,I=null)}}else R=!1}var Y;if(typeof y=="function")Y=function(){y(M)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,te=P.port2;P.port1.onmessage=M,Y=function(){te.postMessage(null)}}else Y=function(){x(M,0)};function Ce(ue){I=ue,R||(R=!0,Y())}function le(ue,L){$=x(function(){ue(e.unstable_now())},L)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ue){ue.callback=null},e.unstable_continueExecution=function(){w||m||(w=!0,Ce(O))},e.unstable_forceFrameRate=function(ue){0>ue||125<ue?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<ue?Math.floor(1e3/ue):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(ue){switch(p){case 1:case 2:case 3:var L=3;break;default:L=p}var ie=p;p=L;try{return ue()}finally{p=ie}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ue,L){switch(ue){case 1:case 2:case 3:case 4:case 5:break;default:ue=3}var ie=p;p=ue;try{return L()}finally{p=ie}},e.unstable_scheduleCallback=function(ue,L,ie){var K=e.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?K+ie:K):ie=K,ue){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=ie+W,ue={id:c++,callback:L,priorityLevel:ue,startTime:ie,expirationTime:W,sortIndex:-1},ie>K?(ue.sortIndex=ie,t(u,ue),n(l)===null&&ue===n(u)&&(v?(g($),$=-1):v=!0,le(T,ie-K))):(ue.sortIndex=W,t(l,ue),w||m||(w=!0,Ce(O))),ue},e.unstable_shouldYield=ge,e.unstable_wrapCallback=function(ue){var L=p;return function(){var ie=p;p=L;try{return ue.apply(this,arguments)}finally{p=ie}}}})(cx);ux.exports=cx;var FT=ux.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BT=E,Vn=FT;function Se(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var dx=new Set,Kl={};function mo(e,t){xa(e,t),xa(e+"Capture",t)}function xa(e,t){for(Kl[e]=t,e=0;e<t.length;e++)dx.add(t[e])}var hi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cp=Object.prototype.hasOwnProperty,UT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d0={},f0={};function zT(e){return Cp.call(f0,e)?!0:Cp.call(d0,e)?!1:UT.test(e)?f0[e]=!0:(d0[e]=!0,!1)}function VT(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function KT(e,t,n,r){if(t===null||typeof t>"u"||VT(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function xn(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var nn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){nn[e]=new xn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];nn[t]=new xn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){nn[e]=new xn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){nn[e]=new xn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){nn[e]=new xn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){nn[e]=new xn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){nn[e]=new xn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){nn[e]=new xn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){nn[e]=new xn(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ag=/[\-:]([a-z])/g;function jg(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ag,jg);nn[t]=new xn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ag,jg);nn[t]=new xn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ag,jg);nn[t]=new xn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){nn[e]=new xn(e,1,!1,e.toLowerCase(),null,!1,!1)});nn.xlinkHref=new xn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){nn[e]=new xn(e,1,!1,e.toLowerCase(),null,!0,!0)});function Og(e,t,n,r){var i=nn.hasOwnProperty(t)?nn[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(KT(t,n,i,r)&&(n=null),r||i===null?zT(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var xi=BT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vc=Symbol.for("react.element"),Fo=Symbol.for("react.portal"),Bo=Symbol.for("react.fragment"),Rg=Symbol.for("react.strict_mode"),Tp=Symbol.for("react.profiler"),fx=Symbol.for("react.provider"),hx=Symbol.for("react.context"),Ig=Symbol.for("react.forward_ref"),Pp=Symbol.for("react.suspense"),Ap=Symbol.for("react.suspense_list"),Dg=Symbol.for("react.memo"),$i=Symbol.for("react.lazy"),px=Symbol.for("react.offscreen"),h0=Symbol.iterator;function el(e){return e===null||typeof e!="object"?null:(e=h0&&e[h0]||e["@@iterator"],typeof e=="function"?e:null)}var Tt=Object.assign,xh;function pl(e){if(xh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);xh=t&&t[1]||""}return`
`+xh+e}var Sh=!1;function kh(e,t){if(!e||Sh)return"";Sh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{Sh=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?pl(e):""}function WT(e){switch(e.tag){case 5:return pl(e.type);case 16:return pl("Lazy");case 13:return pl("Suspense");case 19:return pl("SuspenseList");case 0:case 2:case 15:return e=kh(e.type,!1),e;case 11:return e=kh(e.type.render,!1),e;case 1:return e=kh(e.type,!0),e;default:return""}}function jp(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Bo:return"Fragment";case Fo:return"Portal";case Tp:return"Profiler";case Rg:return"StrictMode";case Pp:return"Suspense";case Ap:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case hx:return(e.displayName||"Context")+".Consumer";case fx:return(e._context.displayName||"Context")+".Provider";case Ig:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Dg:return t=e.displayName||null,t!==null?t:jp(e.type)||"Memo";case $i:t=e._payload,e=e._init;try{return jp(e(t))}catch{}}return null}function HT(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return jp(t);case 8:return t===Rg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function fs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function mx(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function qT(e){var t=mx(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function wc(e){e._valueTracker||(e._valueTracker=qT(e))}function gx(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=mx(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function pd(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Op(e,t){var n=t.checked;return Tt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function p0(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=fs(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function yx(e,t){t=t.checked,t!=null&&Og(e,"checked",t,!1)}function Rp(e,t){yx(e,t);var n=fs(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ip(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ip(e,t.type,fs(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function m0(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ip(e,t,n){(t!=="number"||pd(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ml=Array.isArray;function na(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+fs(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Dp(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Se(91));return Tt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function g0(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Se(92));if(ml(n)){if(1<n.length)throw Error(Se(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:fs(n)}}function vx(e,t){var n=fs(t.value),r=fs(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function y0(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function wx(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Np(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?wx(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var bc,bx=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(bc=bc||document.createElement("div"),bc.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=bc.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Wl(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var kl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},GT=["Webkit","ms","Moz","O"];Object.keys(kl).forEach(function(e){GT.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),kl[t]=kl[e]})});function _x(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||kl.hasOwnProperty(e)&&kl[e]?(""+t).trim():t+"px"}function xx(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=_x(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var QT=Tt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Lp(e,t){if(t){if(QT[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Se(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Se(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Se(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Se(62))}}function $p(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mp=null;function Ng(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Fp=null,ra=null,ia=null;function v0(e){if(e=Cu(e)){if(typeof Fp!="function")throw Error(Se(280));var t=e.stateNode;t&&(t=uf(t),Fp(e.stateNode,e.type,t))}}function Sx(e){ra?ia?ia.push(e):ia=[e]:ra=e}function kx(){if(ra){var e=ra,t=ia;if(ia=ra=null,v0(e),t)for(e=0;e<t.length;e++)v0(t[e])}}function Ex(e,t){return e(t)}function Cx(){}var Eh=!1;function Tx(e,t,n){if(Eh)return e(t,n);Eh=!0;try{return Ex(e,t,n)}finally{Eh=!1,(ra!==null||ia!==null)&&(Cx(),kx())}}function Hl(e,t){var n=e.stateNode;if(n===null)return null;var r=uf(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Se(231,t,typeof n));return n}var Bp=!1;if(hi)try{var tl={};Object.defineProperty(tl,"passive",{get:function(){Bp=!0}}),window.addEventListener("test",tl,tl),window.removeEventListener("test",tl,tl)}catch{Bp=!1}function YT(e,t,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var El=!1,md=null,gd=!1,Up=null,JT={onError:function(e){El=!0,md=e}};function ZT(e,t,n,r,i,s,o,a,l){El=!1,md=null,YT.apply(JT,arguments)}function XT(e,t,n,r,i,s,o,a,l){if(ZT.apply(this,arguments),El){if(El){var u=md;El=!1,md=null}else throw Error(Se(198));gd||(gd=!0,Up=u)}}function go(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Px(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function w0(e){if(go(e)!==e)throw Error(Se(188))}function eP(e){var t=e.alternate;if(!t){if(t=go(e),t===null)throw Error(Se(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return w0(i),e;if(s===r)return w0(i),t;s=s.sibling}throw Error(Se(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Se(189))}}if(n.alternate!==r)throw Error(Se(190))}if(n.tag!==3)throw Error(Se(188));return n.stateNode.current===n?e:t}function Ax(e){return e=eP(e),e!==null?jx(e):null}function jx(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=jx(e);if(t!==null)return t;e=e.sibling}return null}var Ox=Vn.unstable_scheduleCallback,b0=Vn.unstable_cancelCallback,tP=Vn.unstable_shouldYield,nP=Vn.unstable_requestPaint,Nt=Vn.unstable_now,rP=Vn.unstable_getCurrentPriorityLevel,Lg=Vn.unstable_ImmediatePriority,Rx=Vn.unstable_UserBlockingPriority,yd=Vn.unstable_NormalPriority,iP=Vn.unstable_LowPriority,Ix=Vn.unstable_IdlePriority,sf=null,Wr=null;function sP(e){if(Wr&&typeof Wr.onCommitFiberRoot=="function")try{Wr.onCommitFiberRoot(sf,e,void 0,(e.current.flags&128)===128)}catch{}}var Er=Math.clz32?Math.clz32:lP,oP=Math.log,aP=Math.LN2;function lP(e){return e>>>=0,e===0?32:31-(oP(e)/aP|0)|0}var _c=64,xc=4194304;function gl(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function vd(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=gl(a):(s&=o,s!==0&&(r=gl(s)))}else o=n&~i,o!==0?r=gl(o):s!==0&&(r=gl(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Er(t),i=1<<n,r|=e[n],t&=~i;return r}function uP(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cP(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Er(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=uP(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}function zp(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Dx(){var e=_c;return _c<<=1,!(_c&4194240)&&(_c=64),e}function Ch(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ku(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Er(t),e[t]=n}function dP(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Er(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function $g(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Er(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var dt=0;function Nx(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Lx,Mg,$x,Mx,Fx,Vp=!1,Sc=[],ns=null,rs=null,is=null,ql=new Map,Gl=new Map,Fi=[],fP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _0(e,t){switch(e){case"focusin":case"focusout":ns=null;break;case"dragenter":case"dragleave":rs=null;break;case"mouseover":case"mouseout":is=null;break;case"pointerover":case"pointerout":ql.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gl.delete(t.pointerId)}}function nl(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=Cu(t),t!==null&&Mg(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function hP(e,t,n,r,i){switch(t){case"focusin":return ns=nl(ns,e,t,n,r,i),!0;case"dragenter":return rs=nl(rs,e,t,n,r,i),!0;case"mouseover":return is=nl(is,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return ql.set(s,nl(ql.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Gl.set(s,nl(Gl.get(s)||null,e,t,n,r,i)),!0}return!1}function Bx(e){var t=Bs(e.target);if(t!==null){var n=go(t);if(n!==null){if(t=n.tag,t===13){if(t=Px(n),t!==null){e.blockedOn=t,Fx(e.priority,function(){$x(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Qc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Kp(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Mp=r,n.target.dispatchEvent(r),Mp=null}else return t=Cu(n),t!==null&&Mg(t),e.blockedOn=n,!1;t.shift()}return!0}function x0(e,t,n){Qc(e)&&n.delete(t)}function pP(){Vp=!1,ns!==null&&Qc(ns)&&(ns=null),rs!==null&&Qc(rs)&&(rs=null),is!==null&&Qc(is)&&(is=null),ql.forEach(x0),Gl.forEach(x0)}function rl(e,t){e.blockedOn===t&&(e.blockedOn=null,Vp||(Vp=!0,Vn.unstable_scheduleCallback(Vn.unstable_NormalPriority,pP)))}function Ql(e){function t(i){return rl(i,e)}if(0<Sc.length){rl(Sc[0],e);for(var n=1;n<Sc.length;n++){var r=Sc[n];r.blockedOn===e&&(r.blockedOn=null)}}for(ns!==null&&rl(ns,e),rs!==null&&rl(rs,e),is!==null&&rl(is,e),ql.forEach(t),Gl.forEach(t),n=0;n<Fi.length;n++)r=Fi[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Fi.length&&(n=Fi[0],n.blockedOn===null);)Bx(n),n.blockedOn===null&&Fi.shift()}var sa=xi.ReactCurrentBatchConfig,wd=!0;function mP(e,t,n,r){var i=dt,s=sa.transition;sa.transition=null;try{dt=1,Fg(e,t,n,r)}finally{dt=i,sa.transition=s}}function gP(e,t,n,r){var i=dt,s=sa.transition;sa.transition=null;try{dt=4,Fg(e,t,n,r)}finally{dt=i,sa.transition=s}}function Fg(e,t,n,r){if(wd){var i=Kp(e,t,n,r);if(i===null)Lh(e,t,r,bd,n),_0(e,r);else if(hP(i,e,t,n,r))r.stopPropagation();else if(_0(e,r),t&4&&-1<fP.indexOf(e)){for(;i!==null;){var s=Cu(i);if(s!==null&&Lx(s),s=Kp(e,t,n,r),s===null&&Lh(e,t,r,bd,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Lh(e,t,r,null,n)}}var bd=null;function Kp(e,t,n,r){if(bd=null,e=Ng(r),e=Bs(e),e!==null)if(t=go(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Px(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return bd=e,null}function Ux(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rP()){case Lg:return 1;case Rx:return 4;case yd:case iP:return 16;case Ix:return 536870912;default:return 16}default:return 16}}var Zi=null,Bg=null,Yc=null;function zx(){if(Yc)return Yc;var e,t=Bg,n=t.length,r,i="value"in Zi?Zi.value:Zi.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return Yc=i.slice(e,1<r?1-r:void 0)}function Jc(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function kc(){return!0}function S0(){return!1}function Hn(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?kc:S0,this.isPropagationStopped=S0,this}return Tt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=kc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=kc)},persist:function(){},isPersistent:kc}),t}var Ia={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ug=Hn(Ia),Eu=Tt({},Ia,{view:0,detail:0}),yP=Hn(Eu),Th,Ph,il,of=Tt({},Eu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zg,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==il&&(il&&e.type==="mousemove"?(Th=e.screenX-il.screenX,Ph=e.screenY-il.screenY):Ph=Th=0,il=e),Th)},movementY:function(e){return"movementY"in e?e.movementY:Ph}}),k0=Hn(of),vP=Tt({},of,{dataTransfer:0}),wP=Hn(vP),bP=Tt({},Eu,{relatedTarget:0}),Ah=Hn(bP),_P=Tt({},Ia,{animationName:0,elapsedTime:0,pseudoElement:0}),xP=Hn(_P),SP=Tt({},Ia,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kP=Hn(SP),EP=Tt({},Ia,{data:0}),E0=Hn(EP),CP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},TP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},PP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function AP(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=PP[e])?!!t[e]:!1}function zg(){return AP}var jP=Tt({},Eu,{key:function(e){if(e.key){var t=CP[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Jc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?TP[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zg,charCode:function(e){return e.type==="keypress"?Jc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Jc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),OP=Hn(jP),RP=Tt({},of,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),C0=Hn(RP),IP=Tt({},Eu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zg}),DP=Hn(IP),NP=Tt({},Ia,{propertyName:0,elapsedTime:0,pseudoElement:0}),LP=Hn(NP),$P=Tt({},of,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),MP=Hn($P),FP=[9,13,27,32],Vg=hi&&"CompositionEvent"in window,Cl=null;hi&&"documentMode"in document&&(Cl=document.documentMode);var BP=hi&&"TextEvent"in window&&!Cl,Vx=hi&&(!Vg||Cl&&8<Cl&&11>=Cl),T0=" ",P0=!1;function Kx(e,t){switch(e){case"keyup":return FP.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wx(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Uo=!1;function UP(e,t){switch(e){case"compositionend":return Wx(t);case"keypress":return t.which!==32?null:(P0=!0,T0);case"textInput":return e=t.data,e===T0&&P0?null:e;default:return null}}function zP(e,t){if(Uo)return e==="compositionend"||!Vg&&Kx(e,t)?(e=zx(),Yc=Bg=Zi=null,Uo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Vx&&t.locale!=="ko"?null:t.data;default:return null}}var VP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function A0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!VP[e.type]:t==="textarea"}function Hx(e,t,n,r){Sx(r),t=_d(t,"onChange"),0<t.length&&(n=new Ug("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Tl=null,Yl=null;function KP(e){r1(e,0)}function af(e){var t=Ko(e);if(gx(t))return e}function WP(e,t){if(e==="change")return t}var qx=!1;if(hi){var jh;if(hi){var Oh="oninput"in document;if(!Oh){var j0=document.createElement("div");j0.setAttribute("oninput","return;"),Oh=typeof j0.oninput=="function"}jh=Oh}else jh=!1;qx=jh&&(!document.documentMode||9<document.documentMode)}function O0(){Tl&&(Tl.detachEvent("onpropertychange",Gx),Yl=Tl=null)}function Gx(e){if(e.propertyName==="value"&&af(Yl)){var t=[];Hx(t,Yl,e,Ng(e)),Tx(KP,t)}}function HP(e,t,n){e==="focusin"?(O0(),Tl=t,Yl=n,Tl.attachEvent("onpropertychange",Gx)):e==="focusout"&&O0()}function qP(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return af(Yl)}function GP(e,t){if(e==="click")return af(t)}function QP(e,t){if(e==="input"||e==="change")return af(t)}function YP(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Tr=typeof Object.is=="function"?Object.is:YP;function Jl(e,t){if(Tr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Cp.call(t,i)||!Tr(e[i],t[i]))return!1}return!0}function R0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function I0(e,t){var n=R0(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=R0(n)}}function Qx(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Qx(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Yx(){for(var e=window,t=pd();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=pd(e.document)}return t}function Kg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function JP(e){var t=Yx(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Qx(n.ownerDocument.documentElement,n)){if(r!==null&&Kg(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=I0(n,s);var o=I0(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ZP=hi&&"documentMode"in document&&11>=document.documentMode,zo=null,Wp=null,Pl=null,Hp=!1;function D0(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Hp||zo==null||zo!==pd(r)||(r=zo,"selectionStart"in r&&Kg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Pl&&Jl(Pl,r)||(Pl=r,r=_d(Wp,"onSelect"),0<r.length&&(t=new Ug("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=zo)))}function Ec(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Vo={animationend:Ec("Animation","AnimationEnd"),animationiteration:Ec("Animation","AnimationIteration"),animationstart:Ec("Animation","AnimationStart"),transitionend:Ec("Transition","TransitionEnd")},Rh={},Jx={};hi&&(Jx=document.createElement("div").style,"AnimationEvent"in window||(delete Vo.animationend.animation,delete Vo.animationiteration.animation,delete Vo.animationstart.animation),"TransitionEvent"in window||delete Vo.transitionend.transition);function lf(e){if(Rh[e])return Rh[e];if(!Vo[e])return e;var t=Vo[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Jx)return Rh[e]=t[n];return e}var Zx=lf("animationend"),Xx=lf("animationiteration"),e1=lf("animationstart"),t1=lf("transitionend"),n1=new Map,N0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gs(e,t){n1.set(e,t),mo(t,[e])}for(var Ih=0;Ih<N0.length;Ih++){var Dh=N0[Ih],XP=Dh.toLowerCase(),e2=Dh[0].toUpperCase()+Dh.slice(1);gs(XP,"on"+e2)}gs(Zx,"onAnimationEnd");gs(Xx,"onAnimationIteration");gs(e1,"onAnimationStart");gs("dblclick","onDoubleClick");gs("focusin","onFocus");gs("focusout","onBlur");gs(t1,"onTransitionEnd");xa("onMouseEnter",["mouseout","mouseover"]);xa("onMouseLeave",["mouseout","mouseover"]);xa("onPointerEnter",["pointerout","pointerover"]);xa("onPointerLeave",["pointerout","pointerover"]);mo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));mo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));mo("onBeforeInput",["compositionend","keypress","textInput","paste"]);mo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));mo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));mo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),t2=new Set("cancel close invalid load scroll toggle".split(" ").concat(yl));function L0(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,XT(r,t,void 0,e),e.currentTarget=null}function r1(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;L0(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;L0(i,a,u),s=l}}}if(gd)throw e=Up,gd=!1,Up=null,e}function gt(e,t){var n=t[Jp];n===void 0&&(n=t[Jp]=new Set);var r=e+"__bubble";n.has(r)||(i1(t,e,2,!1),n.add(r))}function Nh(e,t,n){var r=0;t&&(r|=4),i1(n,e,r,t)}var Cc="_reactListening"+Math.random().toString(36).slice(2);function Zl(e){if(!e[Cc]){e[Cc]=!0,dx.forEach(function(n){n!=="selectionchange"&&(t2.has(n)||Nh(n,!1,e),Nh(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Cc]||(t[Cc]=!0,Nh("selectionchange",!1,t))}}function i1(e,t,n,r){switch(Ux(t)){case 1:var i=mP;break;case 4:i=gP;break;default:i=Fg}n=i.bind(null,t,n,e),i=void 0,!Bp||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Lh(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Bs(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Tx(function(){var u=s,c=Ng(n),f=[];e:{var p=n1.get(e);if(p!==void 0){var m=Ug,w=e;switch(e){case"keypress":if(Jc(n)===0)break e;case"keydown":case"keyup":m=OP;break;case"focusin":w="focus",m=Ah;break;case"focusout":w="blur",m=Ah;break;case"beforeblur":case"afterblur":m=Ah;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=k0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=wP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=DP;break;case Zx:case Xx:case e1:m=xP;break;case t1:m=LP;break;case"scroll":m=yP;break;case"wheel":m=MP;break;case"copy":case"cut":case"paste":m=kP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=C0}var v=(t&4)!==0,x=!v&&e==="scroll",g=v?p!==null?p+"Capture":null:p;v=[];for(var y=u,_;y!==null;){_=y;var T=_.stateNode;if(_.tag===5&&T!==null&&(_=T,g!==null&&(T=Hl(y,g),T!=null&&v.push(Xl(y,T,_)))),x)break;y=y.return}0<v.length&&(p=new m(p,w,null,n,c),f.push({event:p,listeners:v}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",p&&n!==Mp&&(w=n.relatedTarget||n.fromElement)&&(Bs(w)||w[pi]))break e;if((m||p)&&(p=c.window===c?c:(p=c.ownerDocument)?p.defaultView||p.parentWindow:window,m?(w=n.relatedTarget||n.toElement,m=u,w=w?Bs(w):null,w!==null&&(x=go(w),w!==x||w.tag!==5&&w.tag!==6)&&(w=null)):(m=null,w=u),m!==w)){if(v=k0,T="onMouseLeave",g="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(v=C0,T="onPointerLeave",g="onPointerEnter",y="pointer"),x=m==null?p:Ko(m),_=w==null?p:Ko(w),p=new v(T,y+"leave",m,n,c),p.target=x,p.relatedTarget=_,T=null,Bs(c)===u&&(v=new v(g,y+"enter",w,n,c),v.target=_,v.relatedTarget=x,T=v),x=T,m&&w)t:{for(v=m,g=w,y=0,_=v;_;_=Ao(_))y++;for(_=0,T=g;T;T=Ao(T))_++;for(;0<y-_;)v=Ao(v),y--;for(;0<_-y;)g=Ao(g),_--;for(;y--;){if(v===g||g!==null&&v===g.alternate)break t;v=Ao(v),g=Ao(g)}v=null}else v=null;m!==null&&$0(f,p,m,v,!1),w!==null&&x!==null&&$0(f,x,w,v,!0)}}e:{if(p=u?Ko(u):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var O=WP;else if(A0(p))if(qx)O=QP;else{O=qP;var R=HP}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(O=GP);if(O&&(O=O(e,u))){Hx(f,O,n,c);break e}R&&R(e,p,u),e==="focusout"&&(R=p._wrapperState)&&R.controlled&&p.type==="number"&&Ip(p,"number",p.value)}switch(R=u?Ko(u):window,e){case"focusin":(A0(R)||R.contentEditable==="true")&&(zo=R,Wp=u,Pl=null);break;case"focusout":Pl=Wp=zo=null;break;case"mousedown":Hp=!0;break;case"contextmenu":case"mouseup":case"dragend":Hp=!1,D0(f,n,c);break;case"selectionchange":if(ZP)break;case"keydown":case"keyup":D0(f,n,c)}var I;if(Vg)e:{switch(e){case"compositionstart":var $="onCompositionStart";break e;case"compositionend":$="onCompositionEnd";break e;case"compositionupdate":$="onCompositionUpdate";break e}$=void 0}else Uo?Kx(e,n)&&($="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&($="onCompositionStart");$&&(Vx&&n.locale!=="ko"&&(Uo||$!=="onCompositionStart"?$==="onCompositionEnd"&&Uo&&(I=zx()):(Zi=c,Bg="value"in Zi?Zi.value:Zi.textContent,Uo=!0)),R=_d(u,$),0<R.length&&($=new E0($,e,null,n,c),f.push({event:$,listeners:R}),I?$.data=I:(I=Wx(n),I!==null&&($.data=I)))),(I=BP?UP(e,n):zP(e,n))&&(u=_d(u,"onBeforeInput"),0<u.length&&(c=new E0("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:u}),c.data=I))}r1(f,t)})}function Xl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function _d(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Hl(e,n),s!=null&&r.unshift(Xl(e,s,i)),s=Hl(e,t),s!=null&&r.push(Xl(e,s,i))),e=e.return}return r}function Ao(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function $0(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Hl(n,s),l!=null&&o.unshift(Xl(n,l,a))):i||(l=Hl(n,s),l!=null&&o.push(Xl(n,l,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var n2=/\r\n?/g,r2=/\u0000|\uFFFD/g;function M0(e){return(typeof e=="string"?e:""+e).replace(n2,`
`).replace(r2,"")}function Tc(e,t,n){if(t=M0(t),M0(e)!==t&&n)throw Error(Se(425))}function xd(){}var qp=null,Gp=null;function Qp(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Yp=typeof setTimeout=="function"?setTimeout:void 0,i2=typeof clearTimeout=="function"?clearTimeout:void 0,F0=typeof Promise=="function"?Promise:void 0,s2=typeof queueMicrotask=="function"?queueMicrotask:typeof F0<"u"?function(e){return F0.resolve(null).then(e).catch(o2)}:Yp;function o2(e){setTimeout(function(){throw e})}function $h(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Ql(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ql(t)}function ss(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function B0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Da=Math.random().toString(36).slice(2),Vr="__reactFiber$"+Da,eu="__reactProps$"+Da,pi="__reactContainer$"+Da,Jp="__reactEvents$"+Da,a2="__reactListeners$"+Da,l2="__reactHandles$"+Da;function Bs(e){var t=e[Vr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[Vr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=B0(e);e!==null;){if(n=e[Vr])return n;e=B0(e)}return t}e=n,n=e.parentNode}return null}function Cu(e){return e=e[Vr]||e[pi],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ko(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Se(33))}function uf(e){return e[eu]||null}var Zp=[],Wo=-1;function ys(e){return{current:e}}function yt(e){0>Wo||(e.current=Zp[Wo],Zp[Wo]=null,Wo--)}function mt(e,t){Wo++,Zp[Wo]=e.current,e.current=t}var hs={},hn=ys(hs),Rn=ys(!1),ao=hs;function Sa(e,t){var n=e.type.contextTypes;if(!n)return hs;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function In(e){return e=e.childContextTypes,e!=null}function Sd(){yt(Rn),yt(hn)}function U0(e,t,n){if(hn.current!==hs)throw Error(Se(168));mt(hn,t),mt(Rn,n)}function s1(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(Se(108,HT(e)||"Unknown",i));return Tt({},n,r)}function kd(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hs,ao=hn.current,mt(hn,e),mt(Rn,Rn.current),!0}function z0(e,t,n){var r=e.stateNode;if(!r)throw Error(Se(169));n?(e=s1(e,t,ao),r.__reactInternalMemoizedMergedChildContext=e,yt(Rn),yt(hn),mt(hn,e)):yt(Rn),mt(Rn,n)}var ii=null,cf=!1,Mh=!1;function o1(e){ii===null?ii=[e]:ii.push(e)}function u2(e){cf=!0,o1(e)}function vs(){if(!Mh&&ii!==null){Mh=!0;var e=0,t=dt;try{var n=ii;for(dt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}ii=null,cf=!1}catch(i){throw ii!==null&&(ii=ii.slice(e+1)),Ox(Lg,vs),i}finally{dt=t,Mh=!1}}return null}var Ho=[],qo=0,Ed=null,Cd=0,tr=[],nr=0,lo=null,li=1,ui="";function Rs(e,t){Ho[qo++]=Cd,Ho[qo++]=Ed,Ed=e,Cd=t}function a1(e,t,n){tr[nr++]=li,tr[nr++]=ui,tr[nr++]=lo,lo=e;var r=li;e=ui;var i=32-Er(r)-1;r&=~(1<<i),n+=1;var s=32-Er(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,li=1<<32-Er(t)+i|n<<i|r,ui=s+e}else li=1<<s|n<<i|r,ui=e}function Wg(e){e.return!==null&&(Rs(e,1),a1(e,1,0))}function Hg(e){for(;e===Ed;)Ed=Ho[--qo],Ho[qo]=null,Cd=Ho[--qo],Ho[qo]=null;for(;e===lo;)lo=tr[--nr],tr[nr]=null,ui=tr[--nr],tr[nr]=null,li=tr[--nr],tr[nr]=null}var zn=null,Un=null,wt=!1,Sr=null;function l1(e,t){var n=sr(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function V0(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,zn=e,Un=ss(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,zn=e,Un=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=lo!==null?{id:li,overflow:ui}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=sr(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,zn=e,Un=null,!0):!1;default:return!1}}function Xp(e){return(e.mode&1)!==0&&(e.flags&128)===0}function em(e){if(wt){var t=Un;if(t){var n=t;if(!V0(e,t)){if(Xp(e))throw Error(Se(418));t=ss(n.nextSibling);var r=zn;t&&V0(e,t)?l1(r,n):(e.flags=e.flags&-4097|2,wt=!1,zn=e)}}else{if(Xp(e))throw Error(Se(418));e.flags=e.flags&-4097|2,wt=!1,zn=e}}}function K0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;zn=e}function Pc(e){if(e!==zn)return!1;if(!wt)return K0(e),wt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Qp(e.type,e.memoizedProps)),t&&(t=Un)){if(Xp(e))throw u1(),Error(Se(418));for(;t;)l1(e,t),t=ss(t.nextSibling)}if(K0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Se(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Un=ss(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Un=null}}else Un=zn?ss(e.stateNode.nextSibling):null;return!0}function u1(){for(var e=Un;e;)e=ss(e.nextSibling)}function ka(){Un=zn=null,wt=!1}function qg(e){Sr===null?Sr=[e]:Sr.push(e)}var c2=xi.ReactCurrentBatchConfig;function sl(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Se(309));var r=n.stateNode}if(!r)throw Error(Se(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(Se(284));if(!n._owner)throw Error(Se(290,e))}return e}function Ac(e,t){throw e=Object.prototype.toString.call(t),Error(Se(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function W0(e){var t=e._init;return t(e._payload)}function c1(e){function t(g,y){if(e){var _=g.deletions;_===null?(g.deletions=[y],g.flags|=16):_.push(y)}}function n(g,y){if(!e)return null;for(;y!==null;)t(g,y),y=y.sibling;return null}function r(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function i(g,y){return g=us(g,y),g.index=0,g.sibling=null,g}function s(g,y,_){return g.index=_,e?(_=g.alternate,_!==null?(_=_.index,_<y?(g.flags|=2,y):_):(g.flags|=2,y)):(g.flags|=1048576,y)}function o(g){return e&&g.alternate===null&&(g.flags|=2),g}function a(g,y,_,T){return y===null||y.tag!==6?(y=Wh(_,g.mode,T),y.return=g,y):(y=i(y,_),y.return=g,y)}function l(g,y,_,T){var O=_.type;return O===Bo?c(g,y,_.props.children,T,_.key):y!==null&&(y.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===$i&&W0(O)===y.type)?(T=i(y,_.props),T.ref=sl(g,y,_),T.return=g,T):(T=id(_.type,_.key,_.props,null,g.mode,T),T.ref=sl(g,y,_),T.return=g,T)}function u(g,y,_,T){return y===null||y.tag!==4||y.stateNode.containerInfo!==_.containerInfo||y.stateNode.implementation!==_.implementation?(y=Hh(_,g.mode,T),y.return=g,y):(y=i(y,_.children||[]),y.return=g,y)}function c(g,y,_,T,O){return y===null||y.tag!==7?(y=io(_,g.mode,T,O),y.return=g,y):(y=i(y,_),y.return=g,y)}function f(g,y,_){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Wh(""+y,g.mode,_),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case vc:return _=id(y.type,y.key,y.props,null,g.mode,_),_.ref=sl(g,null,y),_.return=g,_;case Fo:return y=Hh(y,g.mode,_),y.return=g,y;case $i:var T=y._init;return f(g,T(y._payload),_)}if(ml(y)||el(y))return y=io(y,g.mode,_,null),y.return=g,y;Ac(g,y)}return null}function p(g,y,_,T){var O=y!==null?y.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return O!==null?null:a(g,y,""+_,T);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case vc:return _.key===O?l(g,y,_,T):null;case Fo:return _.key===O?u(g,y,_,T):null;case $i:return O=_._init,p(g,y,O(_._payload),T)}if(ml(_)||el(_))return O!==null?null:c(g,y,_,T,null);Ac(g,_)}return null}function m(g,y,_,T,O){if(typeof T=="string"&&T!==""||typeof T=="number")return g=g.get(_)||null,a(y,g,""+T,O);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case vc:return g=g.get(T.key===null?_:T.key)||null,l(y,g,T,O);case Fo:return g=g.get(T.key===null?_:T.key)||null,u(y,g,T,O);case $i:var R=T._init;return m(g,y,_,R(T._payload),O)}if(ml(T)||el(T))return g=g.get(_)||null,c(y,g,T,O,null);Ac(y,T)}return null}function w(g,y,_,T){for(var O=null,R=null,I=y,$=y=0,U=null;I!==null&&$<_.length;$++){I.index>$?(U=I,I=null):U=I.sibling;var V=p(g,I,_[$],T);if(V===null){I===null&&(I=U);break}e&&I&&V.alternate===null&&t(g,I),y=s(V,y,$),R===null?O=V:R.sibling=V,R=V,I=U}if($===_.length)return n(g,I),wt&&Rs(g,$),O;if(I===null){for(;$<_.length;$++)I=f(g,_[$],T),I!==null&&(y=s(I,y,$),R===null?O=I:R.sibling=I,R=I);return wt&&Rs(g,$),O}for(I=r(g,I);$<_.length;$++)U=m(I,g,$,_[$],T),U!==null&&(e&&U.alternate!==null&&I.delete(U.key===null?$:U.key),y=s(U,y,$),R===null?O=U:R.sibling=U,R=U);return e&&I.forEach(function(ge){return t(g,ge)}),wt&&Rs(g,$),O}function v(g,y,_,T){var O=el(_);if(typeof O!="function")throw Error(Se(150));if(_=O.call(_),_==null)throw Error(Se(151));for(var R=O=null,I=y,$=y=0,U=null,V=_.next();I!==null&&!V.done;$++,V=_.next()){I.index>$?(U=I,I=null):U=I.sibling;var ge=p(g,I,V.value,T);if(ge===null){I===null&&(I=U);break}e&&I&&ge.alternate===null&&t(g,I),y=s(ge,y,$),R===null?O=ge:R.sibling=ge,R=ge,I=U}if(V.done)return n(g,I),wt&&Rs(g,$),O;if(I===null){for(;!V.done;$++,V=_.next())V=f(g,V.value,T),V!==null&&(y=s(V,y,$),R===null?O=V:R.sibling=V,R=V);return wt&&Rs(g,$),O}for(I=r(g,I);!V.done;$++,V=_.next())V=m(I,g,$,V.value,T),V!==null&&(e&&V.alternate!==null&&I.delete(V.key===null?$:V.key),y=s(V,y,$),R===null?O=V:R.sibling=V,R=V);return e&&I.forEach(function(M){return t(g,M)}),wt&&Rs(g,$),O}function x(g,y,_,T){if(typeof _=="object"&&_!==null&&_.type===Bo&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case vc:e:{for(var O=_.key,R=y;R!==null;){if(R.key===O){if(O=_.type,O===Bo){if(R.tag===7){n(g,R.sibling),y=i(R,_.props.children),y.return=g,g=y;break e}}else if(R.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===$i&&W0(O)===R.type){n(g,R.sibling),y=i(R,_.props),y.ref=sl(g,R,_),y.return=g,g=y;break e}n(g,R);break}else t(g,R);R=R.sibling}_.type===Bo?(y=io(_.props.children,g.mode,T,_.key),y.return=g,g=y):(T=id(_.type,_.key,_.props,null,g.mode,T),T.ref=sl(g,y,_),T.return=g,g=T)}return o(g);case Fo:e:{for(R=_.key;y!==null;){if(y.key===R)if(y.tag===4&&y.stateNode.containerInfo===_.containerInfo&&y.stateNode.implementation===_.implementation){n(g,y.sibling),y=i(y,_.children||[]),y.return=g,g=y;break e}else{n(g,y);break}else t(g,y);y=y.sibling}y=Hh(_,g.mode,T),y.return=g,g=y}return o(g);case $i:return R=_._init,x(g,y,R(_._payload),T)}if(ml(_))return w(g,y,_,T);if(el(_))return v(g,y,_,T);Ac(g,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,y!==null&&y.tag===6?(n(g,y.sibling),y=i(y,_),y.return=g,g=y):(n(g,y),y=Wh(_,g.mode,T),y.return=g,g=y),o(g)):n(g,y)}return x}var Ea=c1(!0),d1=c1(!1),Td=ys(null),Pd=null,Go=null,Gg=null;function Qg(){Gg=Go=Pd=null}function Yg(e){var t=Td.current;yt(Td),e._currentValue=t}function tm(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function oa(e,t){Pd=e,Gg=Go=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(jn=!0),e.firstContext=null)}function ur(e){var t=e._currentValue;if(Gg!==e)if(e={context:e,memoizedValue:t,next:null},Go===null){if(Pd===null)throw Error(Se(308));Go=e,Pd.dependencies={lanes:0,firstContext:e}}else Go=Go.next=e;return t}var Us=null;function Jg(e){Us===null?Us=[e]:Us.push(e)}function f1(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Jg(t)):(n.next=i.next,i.next=n),t.interleaved=n,mi(e,r)}function mi(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Mi=!1;function Zg(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function h1(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ci(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function os(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,at&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,mi(e,n)}return i=r.interleaved,i===null?(t.next=t,Jg(r)):(t.next=i.next,i.next=t),r.interleaved=t,mi(e,n)}function Zc(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,$g(e,n)}}function H0(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ad(e,t,n,r){var i=e.updateQueue;Mi=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,c=u=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((r&p)===p){c!==null&&(c=c.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=e,v=a;switch(p=t,m=n,v.tag){case 1:if(w=v.payload,typeof w=="function"){f=w.call(m,f,p);break e}f=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=v.payload,p=typeof w=="function"?w.call(m,f,p):w,p==null)break e;f=Tt({},f,p);break e;case 2:Mi=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=m,l=f):c=c.next=m,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(c===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);co|=o,e.lanes=o,e.memoizedState=f}}function q0(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Se(191,i));i.call(r)}}}var Tu={},Hr=ys(Tu),tu=ys(Tu),nu=ys(Tu);function zs(e){if(e===Tu)throw Error(Se(174));return e}function Xg(e,t){switch(mt(nu,t),mt(tu,e),mt(Hr,Tu),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Np(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Np(t,e)}yt(Hr),mt(Hr,t)}function Ca(){yt(Hr),yt(tu),yt(nu)}function p1(e){zs(nu.current);var t=zs(Hr.current),n=Np(t,e.type);t!==n&&(mt(tu,e),mt(Hr,n))}function ey(e){tu.current===e&&(yt(Hr),yt(tu))}var St=ys(0);function jd(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Fh=[];function ty(){for(var e=0;e<Fh.length;e++)Fh[e]._workInProgressVersionPrimary=null;Fh.length=0}var Xc=xi.ReactCurrentDispatcher,Bh=xi.ReactCurrentBatchConfig,uo=0,Ct=null,zt=null,Gt=null,Od=!1,Al=!1,ru=0,d2=0;function an(){throw Error(Se(321))}function ny(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Tr(e[n],t[n]))return!1;return!0}function ry(e,t,n,r,i,s){if(uo=s,Ct=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Xc.current=e===null||e.memoizedState===null?m2:g2,e=n(r,i),Al){s=0;do{if(Al=!1,ru=0,25<=s)throw Error(Se(301));s+=1,Gt=zt=null,t.updateQueue=null,Xc.current=y2,e=n(r,i)}while(Al)}if(Xc.current=Rd,t=zt!==null&&zt.next!==null,uo=0,Gt=zt=Ct=null,Od=!1,t)throw Error(Se(300));return e}function iy(){var e=ru!==0;return ru=0,e}function Mr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?Ct.memoizedState=Gt=e:Gt=Gt.next=e,Gt}function cr(){if(zt===null){var e=Ct.alternate;e=e!==null?e.memoizedState:null}else e=zt.next;var t=Gt===null?Ct.memoizedState:Gt.next;if(t!==null)Gt=t,zt=e;else{if(e===null)throw Error(Se(310));zt=e,e={memoizedState:zt.memoizedState,baseState:zt.baseState,baseQueue:zt.baseQueue,queue:zt.queue,next:null},Gt===null?Ct.memoizedState=Gt=e:Gt=Gt.next=e}return Gt}function iu(e,t){return typeof t=="function"?t(e):t}function Uh(e){var t=cr(),n=t.queue;if(n===null)throw Error(Se(311));n.lastRenderedReducer=e;var r=zt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((uo&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Ct.lanes|=c,co|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Tr(r,t.memoizedState)||(jn=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Ct.lanes|=s,co|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function zh(e){var t=cr(),n=t.queue;if(n===null)throw Error(Se(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);Tr(s,t.memoizedState)||(jn=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function m1(){}function g1(e,t){var n=Ct,r=cr(),i=t(),s=!Tr(r.memoizedState,i);if(s&&(r.memoizedState=i,jn=!0),r=r.queue,sy(w1.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Gt!==null&&Gt.memoizedState.tag&1){if(n.flags|=2048,su(9,v1.bind(null,n,r,i,t),void 0,null),Jt===null)throw Error(Se(349));uo&30||y1(n,t,i)}return i}function y1(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ct.updateQueue,t===null?(t={lastEffect:null,stores:null},Ct.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function v1(e,t,n,r){t.value=n,t.getSnapshot=r,b1(t)&&_1(e)}function w1(e,t,n){return n(function(){b1(t)&&_1(e)})}function b1(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Tr(e,n)}catch{return!0}}function _1(e){var t=mi(e,1);t!==null&&Cr(t,e,1,-1)}function G0(e){var t=Mr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:iu,lastRenderedState:e},t.queue=e,e=e.dispatch=p2.bind(null,Ct,e),[t.memoizedState,e]}function su(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ct.updateQueue,t===null?(t={lastEffect:null,stores:null},Ct.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function x1(){return cr().memoizedState}function ed(e,t,n,r){var i=Mr();Ct.flags|=e,i.memoizedState=su(1|t,n,void 0,r===void 0?null:r)}function df(e,t,n,r){var i=cr();r=r===void 0?null:r;var s=void 0;if(zt!==null){var o=zt.memoizedState;if(s=o.destroy,r!==null&&ny(r,o.deps)){i.memoizedState=su(t,n,s,r);return}}Ct.flags|=e,i.memoizedState=su(1|t,n,s,r)}function Q0(e,t){return ed(8390656,8,e,t)}function sy(e,t){return df(2048,8,e,t)}function S1(e,t){return df(4,2,e,t)}function k1(e,t){return df(4,4,e,t)}function E1(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function C1(e,t,n){return n=n!=null?n.concat([e]):null,df(4,4,E1.bind(null,t,e),n)}function oy(){}function T1(e,t){var n=cr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ny(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function P1(e,t){var n=cr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ny(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function A1(e,t,n){return uo&21?(Tr(n,t)||(n=Dx(),Ct.lanes|=n,co|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,jn=!0),e.memoizedState=n)}function f2(e,t){var n=dt;dt=n!==0&&4>n?n:4,e(!0);var r=Bh.transition;Bh.transition={};try{e(!1),t()}finally{dt=n,Bh.transition=r}}function j1(){return cr().memoizedState}function h2(e,t,n){var r=ls(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},O1(e))R1(t,n);else if(n=f1(e,t,n,r),n!==null){var i=bn();Cr(n,e,r,i),I1(n,t,r)}}function p2(e,t,n){var r=ls(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(O1(e))R1(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Tr(a,o)){var l=t.interleaved;l===null?(i.next=i,Jg(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=f1(e,t,i,r),n!==null&&(i=bn(),Cr(n,e,r,i),I1(n,t,r))}}function O1(e){var t=e.alternate;return e===Ct||t!==null&&t===Ct}function R1(e,t){Al=Od=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function I1(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,$g(e,n)}}var Rd={readContext:ur,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useInsertionEffect:an,useLayoutEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an,useDeferredValue:an,useTransition:an,useMutableSource:an,useSyncExternalStore:an,useId:an,unstable_isNewReconciler:!1},m2={readContext:ur,useCallback:function(e,t){return Mr().memoizedState=[e,t===void 0?null:t],e},useContext:ur,useEffect:Q0,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ed(4194308,4,E1.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ed(4194308,4,e,t)},useInsertionEffect:function(e,t){return ed(4,2,e,t)},useMemo:function(e,t){var n=Mr();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Mr();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=h2.bind(null,Ct,e),[r.memoizedState,e]},useRef:function(e){var t=Mr();return e={current:e},t.memoizedState=e},useState:G0,useDebugValue:oy,useDeferredValue:function(e){return Mr().memoizedState=e},useTransition:function(){var e=G0(!1),t=e[0];return e=f2.bind(null,e[1]),Mr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ct,i=Mr();if(wt){if(n===void 0)throw Error(Se(407));n=n()}else{if(n=t(),Jt===null)throw Error(Se(349));uo&30||y1(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Q0(w1.bind(null,r,s,e),[e]),r.flags|=2048,su(9,v1.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Mr(),t=Jt.identifierPrefix;if(wt){var n=ui,r=li;n=(r&~(1<<32-Er(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ru++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=d2++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},g2={readContext:ur,useCallback:T1,useContext:ur,useEffect:sy,useImperativeHandle:C1,useInsertionEffect:S1,useLayoutEffect:k1,useMemo:P1,useReducer:Uh,useRef:x1,useState:function(){return Uh(iu)},useDebugValue:oy,useDeferredValue:function(e){var t=cr();return A1(t,zt.memoizedState,e)},useTransition:function(){var e=Uh(iu)[0],t=cr().memoizedState;return[e,t]},useMutableSource:m1,useSyncExternalStore:g1,useId:j1,unstable_isNewReconciler:!1},y2={readContext:ur,useCallback:T1,useContext:ur,useEffect:sy,useImperativeHandle:C1,useInsertionEffect:S1,useLayoutEffect:k1,useMemo:P1,useReducer:zh,useRef:x1,useState:function(){return zh(iu)},useDebugValue:oy,useDeferredValue:function(e){var t=cr();return zt===null?t.memoizedState=e:A1(t,zt.memoizedState,e)},useTransition:function(){var e=zh(iu)[0],t=cr().memoizedState;return[e,t]},useMutableSource:m1,useSyncExternalStore:g1,useId:j1,unstable_isNewReconciler:!1};function vr(e,t){if(e&&e.defaultProps){t=Tt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function nm(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Tt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ff={isMounted:function(e){return(e=e._reactInternals)?go(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=bn(),i=ls(e),s=ci(r,i);s.payload=t,n!=null&&(s.callback=n),t=os(e,s,i),t!==null&&(Cr(t,e,i,r),Zc(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=bn(),i=ls(e),s=ci(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=os(e,s,i),t!==null&&(Cr(t,e,i,r),Zc(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=bn(),r=ls(e),i=ci(n,r);i.tag=2,t!=null&&(i.callback=t),t=os(e,i,r),t!==null&&(Cr(t,e,r,n),Zc(t,e,r))}};function Y0(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!Jl(n,r)||!Jl(i,s):!0}function D1(e,t,n){var r=!1,i=hs,s=t.contextType;return typeof s=="object"&&s!==null?s=ur(s):(i=In(t)?ao:hn.current,r=t.contextTypes,s=(r=r!=null)?Sa(e,i):hs),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ff,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function J0(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ff.enqueueReplaceState(t,t.state,null)}function rm(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Zg(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=ur(s):(s=In(t)?ao:hn.current,i.context=Sa(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(nm(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&ff.enqueueReplaceState(i,i.state,null),Ad(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Ta(e,t){try{var n="",r=t;do n+=WT(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function Vh(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function im(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var v2=typeof WeakMap=="function"?WeakMap:Map;function N1(e,t,n){n=ci(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Dd||(Dd=!0,pm=r),im(e,t)},n}function L1(e,t,n){n=ci(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){im(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){im(e,t),typeof r!="function"&&(as===null?as=new Set([this]):as.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Z0(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new v2;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=R2.bind(null,e,t,n),t.then(e,e))}function X0(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ew(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ci(-1,1),t.tag=2,os(n,t,1))),n.lanes|=1),e)}var w2=xi.ReactCurrentOwner,jn=!1;function vn(e,t,n,r){t.child=e===null?d1(t,null,n,r):Ea(t,e.child,n,r)}function tw(e,t,n,r,i){n=n.render;var s=t.ref;return oa(t,i),r=ry(e,t,n,r,s,i),n=iy(),e!==null&&!jn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,gi(e,t,i)):(wt&&n&&Wg(t),t.flags|=1,vn(e,t,r,i),t.child)}function nw(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!py(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,$1(e,t,s,r,i)):(e=id(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Jl,n(o,r)&&e.ref===t.ref)return gi(e,t,i)}return t.flags|=1,e=us(s,r),e.ref=t.ref,e.return=t,t.child=e}function $1(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(Jl(s,r)&&e.ref===t.ref)if(jn=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(jn=!0);else return t.lanes=e.lanes,gi(e,t,i)}return sm(e,t,n,r,i)}function M1(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},mt(Yo,Bn),Bn|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,mt(Yo,Bn),Bn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,mt(Yo,Bn),Bn|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,mt(Yo,Bn),Bn|=r;return vn(e,t,i,n),t.child}function F1(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function sm(e,t,n,r,i){var s=In(n)?ao:hn.current;return s=Sa(t,s),oa(t,i),n=ry(e,t,n,r,s,i),r=iy(),e!==null&&!jn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,gi(e,t,i)):(wt&&r&&Wg(t),t.flags|=1,vn(e,t,n,i),t.child)}function rw(e,t,n,r,i){if(In(n)){var s=!0;kd(t)}else s=!1;if(oa(t,i),t.stateNode===null)td(e,t),D1(t,n,r),rm(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=ur(u):(u=In(n)?ao:hn.current,u=Sa(t,u));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&J0(t,o,r,u),Mi=!1;var p=t.memoizedState;o.state=p,Ad(t,r,o,i),l=t.memoizedState,a!==r||p!==l||Rn.current||Mi?(typeof c=="function"&&(nm(t,n,c,r),l=t.memoizedState),(a=Mi||Y0(t,n,a,r,p,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,h1(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:vr(t.type,a),o.props=u,f=t.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=ur(l):(l=In(n)?ao:hn.current,l=Sa(t,l));var m=n.getDerivedStateFromProps;(c=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&J0(t,o,r,l),Mi=!1,p=t.memoizedState,o.state=p,Ad(t,r,o,i);var w=t.memoizedState;a!==f||p!==w||Rn.current||Mi?(typeof m=="function"&&(nm(t,n,m,r),w=t.memoizedState),(u=Mi||Y0(t,n,u,r,p,w,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),o.props=r,o.state=w,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return om(e,t,n,r,s,i)}function om(e,t,n,r,i,s){F1(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&z0(t,n,!1),gi(e,t,s);r=t.stateNode,w2.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Ea(t,e.child,null,s),t.child=Ea(t,null,a,s)):vn(e,t,a,s),t.memoizedState=r.state,i&&z0(t,n,!0),t.child}function B1(e){var t=e.stateNode;t.pendingContext?U0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&U0(e,t.context,!1),Xg(e,t.containerInfo)}function iw(e,t,n,r,i){return ka(),qg(i),t.flags|=256,vn(e,t,n,r),t.child}var am={dehydrated:null,treeContext:null,retryLane:0};function lm(e){return{baseLanes:e,cachePool:null,transitions:null}}function U1(e,t,n){var r=t.pendingProps,i=St.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),mt(St,i&1),e===null)return em(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=mf(o,r,0,null),e=io(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=lm(n),t.memoizedState=am,e):ay(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return b2(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=us(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=us(a,s):(s=io(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?lm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=am,r}return s=e.child,e=s.sibling,r=us(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function ay(e,t){return t=mf({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function jc(e,t,n,r){return r!==null&&qg(r),Ea(t,e.child,null,n),e=ay(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function b2(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=Vh(Error(Se(422))),jc(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=mf({mode:"visible",children:r.children},i,0,null),s=io(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&Ea(t,e.child,null,o),t.child.memoizedState=lm(o),t.memoizedState=am,s);if(!(t.mode&1))return jc(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Se(419)),r=Vh(s,r,void 0),jc(e,t,o,r)}if(a=(o&e.childLanes)!==0,jn||a){if(r=Jt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,mi(e,i),Cr(r,e,i,-1))}return hy(),r=Vh(Error(Se(421))),jc(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=I2.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Un=ss(i.nextSibling),zn=t,wt=!0,Sr=null,e!==null&&(tr[nr++]=li,tr[nr++]=ui,tr[nr++]=lo,li=e.id,ui=e.overflow,lo=t),t=ay(t,r.children),t.flags|=4096,t)}function sw(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),tm(e.return,t,n)}function Kh(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function z1(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(vn(e,t,r.children,n),r=St.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&sw(e,n,t);else if(e.tag===19)sw(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(mt(St,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&jd(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Kh(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&jd(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Kh(t,!0,n,null,s);break;case"together":Kh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function td(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function gi(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),co|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Se(153));if(t.child!==null){for(e=t.child,n=us(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=us(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function _2(e,t,n){switch(t.tag){case 3:B1(t),ka();break;case 5:p1(t);break;case 1:In(t.type)&&kd(t);break;case 4:Xg(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;mt(Td,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(mt(St,St.current&1),t.flags|=128,null):n&t.child.childLanes?U1(e,t,n):(mt(St,St.current&1),e=gi(e,t,n),e!==null?e.sibling:null);mt(St,St.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return z1(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),mt(St,St.current),r)break;return null;case 22:case 23:return t.lanes=0,M1(e,t,n)}return gi(e,t,n)}var V1,um,K1,W1;V1=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};um=function(){};K1=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,zs(Hr.current);var s=null;switch(n){case"input":i=Op(e,i),r=Op(e,r),s=[];break;case"select":i=Tt({},i,{value:void 0}),r=Tt({},r,{value:void 0}),s=[];break;case"textarea":i=Dp(e,i),r=Dp(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=xd)}Lp(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Kl.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Kl.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&gt("scroll",e),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};W1=function(e,t,n,r){n!==r&&(t.flags|=4)};function ol(e,t){if(!wt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ln(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function x2(e,t,n){var r=t.pendingProps;switch(Hg(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ln(t),null;case 1:return In(t.type)&&Sd(),ln(t),null;case 3:return r=t.stateNode,Ca(),yt(Rn),yt(hn),ty(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Pc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Sr!==null&&(ym(Sr),Sr=null))),um(e,t),ln(t),null;case 5:ey(t);var i=zs(nu.current);if(n=t.type,e!==null&&t.stateNode!=null)K1(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Se(166));return ln(t),null}if(e=zs(Hr.current),Pc(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Vr]=t,r[eu]=s,e=(t.mode&1)!==0,n){case"dialog":gt("cancel",r),gt("close",r);break;case"iframe":case"object":case"embed":gt("load",r);break;case"video":case"audio":for(i=0;i<yl.length;i++)gt(yl[i],r);break;case"source":gt("error",r);break;case"img":case"image":case"link":gt("error",r),gt("load",r);break;case"details":gt("toggle",r);break;case"input":p0(r,s),gt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},gt("invalid",r);break;case"textarea":g0(r,s),gt("invalid",r)}Lp(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Tc(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Tc(r.textContent,a,e),i=["children",""+a]):Kl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&gt("scroll",r)}switch(n){case"input":wc(r),m0(r,s,!0);break;case"textarea":wc(r),y0(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=xd)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=wx(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Vr]=t,e[eu]=r,V1(e,t,!1,!1),t.stateNode=e;e:{switch(o=$p(n,r),n){case"dialog":gt("cancel",e),gt("close",e),i=r;break;case"iframe":case"object":case"embed":gt("load",e),i=r;break;case"video":case"audio":for(i=0;i<yl.length;i++)gt(yl[i],e);i=r;break;case"source":gt("error",e),i=r;break;case"img":case"image":case"link":gt("error",e),gt("load",e),i=r;break;case"details":gt("toggle",e),i=r;break;case"input":p0(e,r),i=Op(e,r),gt("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Tt({},r,{value:void 0}),gt("invalid",e);break;case"textarea":g0(e,r),i=Dp(e,r),gt("invalid",e);break;default:i=r}Lp(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?xx(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&bx(e,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Wl(e,l):typeof l=="number"&&Wl(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Kl.hasOwnProperty(s)?l!=null&&s==="onScroll"&&gt("scroll",e):l!=null&&Og(e,s,l,o))}switch(n){case"input":wc(e),m0(e,r,!1);break;case"textarea":wc(e),y0(e);break;case"option":r.value!=null&&e.setAttribute("value",""+fs(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?na(e,!!r.multiple,s,!1):r.defaultValue!=null&&na(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=xd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ln(t),null;case 6:if(e&&t.stateNode!=null)W1(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Se(166));if(n=zs(nu.current),zs(Hr.current),Pc(t)){if(r=t.stateNode,n=t.memoizedProps,r[Vr]=t,(s=r.nodeValue!==n)&&(e=zn,e!==null))switch(e.tag){case 3:Tc(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Tc(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Vr]=t,t.stateNode=r}return ln(t),null;case 13:if(yt(St),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(wt&&Un!==null&&t.mode&1&&!(t.flags&128))u1(),ka(),t.flags|=98560,s=!1;else if(s=Pc(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(Se(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Se(317));s[Vr]=t}else ka(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ln(t),s=!1}else Sr!==null&&(ym(Sr),Sr=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||St.current&1?Kt===0&&(Kt=3):hy())),t.updateQueue!==null&&(t.flags|=4),ln(t),null);case 4:return Ca(),um(e,t),e===null&&Zl(t.stateNode.containerInfo),ln(t),null;case 10:return Yg(t.type._context),ln(t),null;case 17:return In(t.type)&&Sd(),ln(t),null;case 19:if(yt(St),s=t.memoizedState,s===null)return ln(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)ol(s,!1);else{if(Kt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=jd(e),o!==null){for(t.flags|=128,ol(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return mt(St,St.current&1|2),t.child}e=e.sibling}s.tail!==null&&Nt()>Pa&&(t.flags|=128,r=!0,ol(s,!1),t.lanes=4194304)}else{if(!r)if(e=jd(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ol(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!wt)return ln(t),null}else 2*Nt()-s.renderingStartTime>Pa&&n!==1073741824&&(t.flags|=128,r=!0,ol(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Nt(),t.sibling=null,n=St.current,mt(St,r?n&1|2:n&1),t):(ln(t),null);case 22:case 23:return fy(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Bn&1073741824&&(ln(t),t.subtreeFlags&6&&(t.flags|=8192)):ln(t),null;case 24:return null;case 25:return null}throw Error(Se(156,t.tag))}function S2(e,t){switch(Hg(t),t.tag){case 1:return In(t.type)&&Sd(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ca(),yt(Rn),yt(hn),ty(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ey(t),null;case 13:if(yt(St),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Se(340));ka()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return yt(St),null;case 4:return Ca(),null;case 10:return Yg(t.type._context),null;case 22:case 23:return fy(),null;case 24:return null;default:return null}}var Oc=!1,cn=!1,k2=typeof WeakSet=="function"?WeakSet:Set,$e=null;function Qo(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){jt(e,t,r)}else n.current=null}function cm(e,t,n){try{n()}catch(r){jt(e,t,r)}}var ow=!1;function E2(e,t){if(qp=wd,e=Yx(),Kg(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,f=e,p=null;t:for(;;){for(var m;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===e)break t;if(p===n&&++u===i&&(a=o),p===s&&++c===r&&(l=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Gp={focusedElem:e,selectionRange:n},wd=!1,$e=t;$e!==null;)if(t=$e,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,$e=e;else for(;$e!==null;){t=$e;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var v=w.memoizedProps,x=w.memoizedState,g=t.stateNode,y=g.getSnapshotBeforeUpdate(t.elementType===t.type?v:vr(t.type,v),x);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Se(163))}}catch(T){jt(t,t.return,T)}if(e=t.sibling,e!==null){e.return=t.return,$e=e;break}$e=t.return}return w=ow,ow=!1,w}function jl(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&cm(t,n,s)}i=i.next}while(i!==r)}}function hf(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function dm(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function H1(e){var t=e.alternate;t!==null&&(e.alternate=null,H1(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Vr],delete t[eu],delete t[Jp],delete t[a2],delete t[l2])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function q1(e){return e.tag===5||e.tag===3||e.tag===4}function aw(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||q1(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function fm(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=xd));else if(r!==4&&(e=e.child,e!==null))for(fm(e,t,n),e=e.sibling;e!==null;)fm(e,t,n),e=e.sibling}function hm(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(hm(e,t,n),e=e.sibling;e!==null;)hm(e,t,n),e=e.sibling}var Zt=null,_r=!1;function Oi(e,t,n){for(n=n.child;n!==null;)G1(e,t,n),n=n.sibling}function G1(e,t,n){if(Wr&&typeof Wr.onCommitFiberUnmount=="function")try{Wr.onCommitFiberUnmount(sf,n)}catch{}switch(n.tag){case 5:cn||Qo(n,t);case 6:var r=Zt,i=_r;Zt=null,Oi(e,t,n),Zt=r,_r=i,Zt!==null&&(_r?(e=Zt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Zt.removeChild(n.stateNode));break;case 18:Zt!==null&&(_r?(e=Zt,n=n.stateNode,e.nodeType===8?$h(e.parentNode,n):e.nodeType===1&&$h(e,n),Ql(e)):$h(Zt,n.stateNode));break;case 4:r=Zt,i=_r,Zt=n.stateNode.containerInfo,_r=!0,Oi(e,t,n),Zt=r,_r=i;break;case 0:case 11:case 14:case 15:if(!cn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&cm(n,t,o),i=i.next}while(i!==r)}Oi(e,t,n);break;case 1:if(!cn&&(Qo(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){jt(n,t,a)}Oi(e,t,n);break;case 21:Oi(e,t,n);break;case 22:n.mode&1?(cn=(r=cn)||n.memoizedState!==null,Oi(e,t,n),cn=r):Oi(e,t,n);break;default:Oi(e,t,n)}}function lw(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new k2),t.forEach(function(r){var i=D2.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function pr(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Zt=a.stateNode,_r=!1;break e;case 3:Zt=a.stateNode.containerInfo,_r=!0;break e;case 4:Zt=a.stateNode.containerInfo,_r=!0;break e}a=a.return}if(Zt===null)throw Error(Se(160));G1(s,o,i),Zt=null,_r=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){jt(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Q1(t,e),t=t.sibling}function Q1(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pr(t,e),Nr(e),r&4){try{jl(3,e,e.return),hf(3,e)}catch(v){jt(e,e.return,v)}try{jl(5,e,e.return)}catch(v){jt(e,e.return,v)}}break;case 1:pr(t,e),Nr(e),r&512&&n!==null&&Qo(n,n.return);break;case 5:if(pr(t,e),Nr(e),r&512&&n!==null&&Qo(n,n.return),e.flags&32){var i=e.stateNode;try{Wl(i,"")}catch(v){jt(e,e.return,v)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&yx(i,s),$p(a,o);var u=$p(a,s);for(o=0;o<l.length;o+=2){var c=l[o],f=l[o+1];c==="style"?xx(i,f):c==="dangerouslySetInnerHTML"?bx(i,f):c==="children"?Wl(i,f):Og(i,c,f,u)}switch(a){case"input":Rp(i,s);break;case"textarea":vx(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?na(i,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?na(i,!!s.multiple,s.defaultValue,!0):na(i,!!s.multiple,s.multiple?[]:"",!1))}i[eu]=s}catch(v){jt(e,e.return,v)}}break;case 6:if(pr(t,e),Nr(e),r&4){if(e.stateNode===null)throw Error(Se(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(v){jt(e,e.return,v)}}break;case 3:if(pr(t,e),Nr(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ql(t.containerInfo)}catch(v){jt(e,e.return,v)}break;case 4:pr(t,e),Nr(e);break;case 13:pr(t,e),Nr(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(cy=Nt())),r&4&&lw(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(cn=(u=cn)||c,pr(t,e),cn=u):pr(t,e),Nr(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for($e=e,c=e.child;c!==null;){for(f=$e=c;$e!==null;){switch(p=$e,m=p.child,p.tag){case 0:case 11:case 14:case 15:jl(4,p,p.return);break;case 1:Qo(p,p.return);var w=p.stateNode;if(typeof w.componentWillUnmount=="function"){r=p,n=p.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(v){jt(r,n,v)}}break;case 5:Qo(p,p.return);break;case 22:if(p.memoizedState!==null){cw(f);continue}}m!==null?(m.return=p,$e=m):cw(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=_x("display",o))}catch(v){jt(e,e.return,v)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(v){jt(e,e.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:pr(t,e),Nr(e),r&4&&lw(e);break;case 21:break;default:pr(t,e),Nr(e)}}function Nr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(q1(n)){var r=n;break e}n=n.return}throw Error(Se(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Wl(i,""),r.flags&=-33);var s=aw(e);hm(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=aw(e);fm(e,a,o);break;default:throw Error(Se(161))}}catch(l){jt(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function C2(e,t,n){$e=e,Y1(e)}function Y1(e,t,n){for(var r=(e.mode&1)!==0;$e!==null;){var i=$e,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Oc;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||cn;a=Oc;var u=cn;if(Oc=o,(cn=l)&&!u)for($e=i;$e!==null;)o=$e,l=o.child,o.tag===22&&o.memoizedState!==null?dw(i):l!==null?(l.return=o,$e=l):dw(i);for(;s!==null;)$e=s,Y1(s),s=s.sibling;$e=i,Oc=a,cn=u}uw(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,$e=s):uw(e)}}function uw(e){for(;$e!==null;){var t=$e;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:cn||hf(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!cn)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:vr(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&q0(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}q0(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&Ql(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Se(163))}cn||t.flags&512&&dm(t)}catch(p){jt(t,t.return,p)}}if(t===e){$e=null;break}if(n=t.sibling,n!==null){n.return=t.return,$e=n;break}$e=t.return}}function cw(e){for(;$e!==null;){var t=$e;if(t===e){$e=null;break}var n=t.sibling;if(n!==null){n.return=t.return,$e=n;break}$e=t.return}}function dw(e){for(;$e!==null;){var t=$e;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{hf(4,t)}catch(l){jt(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){jt(t,i,l)}}var s=t.return;try{dm(t)}catch(l){jt(t,s,l)}break;case 5:var o=t.return;try{dm(t)}catch(l){jt(t,o,l)}}}catch(l){jt(t,t.return,l)}if(t===e){$e=null;break}var a=t.sibling;if(a!==null){a.return=t.return,$e=a;break}$e=t.return}}var T2=Math.ceil,Id=xi.ReactCurrentDispatcher,ly=xi.ReactCurrentOwner,ar=xi.ReactCurrentBatchConfig,at=0,Jt=null,Ft=null,tn=0,Bn=0,Yo=ys(0),Kt=0,ou=null,co=0,pf=0,uy=0,Ol=null,Pn=null,cy=0,Pa=1/0,ni=null,Dd=!1,pm=null,as=null,Rc=!1,Xi=null,Nd=0,Rl=0,mm=null,nd=-1,rd=0;function bn(){return at&6?Nt():nd!==-1?nd:nd=Nt()}function ls(e){return e.mode&1?at&2&&tn!==0?tn&-tn:c2.transition!==null?(rd===0&&(rd=Dx()),rd):(e=dt,e!==0||(e=window.event,e=e===void 0?16:Ux(e.type)),e):1}function Cr(e,t,n,r){if(50<Rl)throw Rl=0,mm=null,Error(Se(185));ku(e,n,r),(!(at&2)||e!==Jt)&&(e===Jt&&(!(at&2)&&(pf|=n),Kt===4&&Bi(e,tn)),Dn(e,r),n===1&&at===0&&!(t.mode&1)&&(Pa=Nt()+500,cf&&vs()))}function Dn(e,t){var n=e.callbackNode;cP(e,t);var r=vd(e,e===Jt?tn:0);if(r===0)n!==null&&b0(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&b0(n),t===1)e.tag===0?u2(fw.bind(null,e)):o1(fw.bind(null,e)),s2(function(){!(at&6)&&vs()}),n=null;else{switch(Nx(r)){case 1:n=Lg;break;case 4:n=Rx;break;case 16:n=yd;break;case 536870912:n=Ix;break;default:n=yd}n=iS(n,J1.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function J1(e,t){if(nd=-1,rd=0,at&6)throw Error(Se(327));var n=e.callbackNode;if(aa()&&e.callbackNode!==n)return null;var r=vd(e,e===Jt?tn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Ld(e,r);else{t=r;var i=at;at|=2;var s=X1();(Jt!==e||tn!==t)&&(ni=null,Pa=Nt()+500,ro(e,t));do try{j2();break}catch(a){Z1(e,a)}while(!0);Qg(),Id.current=s,at=i,Ft!==null?t=0:(Jt=null,tn=0,t=Kt)}if(t!==0){if(t===2&&(i=zp(e),i!==0&&(r=i,t=gm(e,i))),t===1)throw n=ou,ro(e,0),Bi(e,r),Dn(e,Nt()),n;if(t===6)Bi(e,r);else{if(i=e.current.alternate,!(r&30)&&!P2(i)&&(t=Ld(e,r),t===2&&(s=zp(e),s!==0&&(r=s,t=gm(e,s))),t===1))throw n=ou,ro(e,0),Bi(e,r),Dn(e,Nt()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(Se(345));case 2:Is(e,Pn,ni);break;case 3:if(Bi(e,r),(r&130023424)===r&&(t=cy+500-Nt(),10<t)){if(vd(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){bn(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Yp(Is.bind(null,e,Pn,ni),t);break}Is(e,Pn,ni);break;case 4:if(Bi(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-Er(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=Nt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*T2(r/1960))-r,10<r){e.timeoutHandle=Yp(Is.bind(null,e,Pn,ni),r);break}Is(e,Pn,ni);break;case 5:Is(e,Pn,ni);break;default:throw Error(Se(329))}}}return Dn(e,Nt()),e.callbackNode===n?J1.bind(null,e):null}function gm(e,t){var n=Ol;return e.current.memoizedState.isDehydrated&&(ro(e,t).flags|=256),e=Ld(e,t),e!==2&&(t=Pn,Pn=n,t!==null&&ym(t)),e}function ym(e){Pn===null?Pn=e:Pn.push.apply(Pn,e)}function P2(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Tr(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Bi(e,t){for(t&=~uy,t&=~pf,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Er(t),r=1<<n;e[n]=-1,t&=~r}}function fw(e){if(at&6)throw Error(Se(327));aa();var t=vd(e,0);if(!(t&1))return Dn(e,Nt()),null;var n=Ld(e,t);if(e.tag!==0&&n===2){var r=zp(e);r!==0&&(t=r,n=gm(e,r))}if(n===1)throw n=ou,ro(e,0),Bi(e,t),Dn(e,Nt()),n;if(n===6)throw Error(Se(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Is(e,Pn,ni),Dn(e,Nt()),null}function dy(e,t){var n=at;at|=1;try{return e(t)}finally{at=n,at===0&&(Pa=Nt()+500,cf&&vs())}}function fo(e){Xi!==null&&Xi.tag===0&&!(at&6)&&aa();var t=at;at|=1;var n=ar.transition,r=dt;try{if(ar.transition=null,dt=1,e)return e()}finally{dt=r,ar.transition=n,at=t,!(at&6)&&vs()}}function fy(){Bn=Yo.current,yt(Yo)}function ro(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,i2(n)),Ft!==null)for(n=Ft.return;n!==null;){var r=n;switch(Hg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Sd();break;case 3:Ca(),yt(Rn),yt(hn),ty();break;case 5:ey(r);break;case 4:Ca();break;case 13:yt(St);break;case 19:yt(St);break;case 10:Yg(r.type._context);break;case 22:case 23:fy()}n=n.return}if(Jt=e,Ft=e=us(e.current,null),tn=Bn=t,Kt=0,ou=null,uy=pf=co=0,Pn=Ol=null,Us!==null){for(t=0;t<Us.length;t++)if(n=Us[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Us=null}return e}function Z1(e,t){do{var n=Ft;try{if(Qg(),Xc.current=Rd,Od){for(var r=Ct.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Od=!1}if(uo=0,Gt=zt=Ct=null,Al=!1,ru=0,ly.current=null,n===null||n.return===null){Kt=1,ou=t,Ft=null;break}e:{var s=e,o=n.return,a=n,l=t;if(t=tn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var p=c.alternate;p?(c.updateQueue=p.updateQueue,c.memoizedState=p.memoizedState,c.lanes=p.lanes):(c.updateQueue=null,c.memoizedState=null)}var m=X0(o);if(m!==null){m.flags&=-257,ew(m,o,a,s,t),m.mode&1&&Z0(s,u,t),t=m,l=u;var w=t.updateQueue;if(w===null){var v=new Set;v.add(l),t.updateQueue=v}else w.add(l);break e}else{if(!(t&1)){Z0(s,u,t),hy();break e}l=Error(Se(426))}}else if(wt&&a.mode&1){var x=X0(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),ew(x,o,a,s,t),qg(Ta(l,a));break e}}s=l=Ta(l,a),Kt!==4&&(Kt=2),Ol===null?Ol=[s]:Ol.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var g=N1(s,l,t);H0(s,g);break e;case 1:a=l;var y=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(as===null||!as.has(_)))){s.flags|=65536,t&=-t,s.lanes|=t;var T=L1(s,a,t);H0(s,T);break e}}s=s.return}while(s!==null)}tS(n)}catch(O){t=O,Ft===n&&n!==null&&(Ft=n=n.return);continue}break}while(!0)}function X1(){var e=Id.current;return Id.current=Rd,e===null?Rd:e}function hy(){(Kt===0||Kt===3||Kt===2)&&(Kt=4),Jt===null||!(co&268435455)&&!(pf&268435455)||Bi(Jt,tn)}function Ld(e,t){var n=at;at|=2;var r=X1();(Jt!==e||tn!==t)&&(ni=null,ro(e,t));do try{A2();break}catch(i){Z1(e,i)}while(!0);if(Qg(),at=n,Id.current=r,Ft!==null)throw Error(Se(261));return Jt=null,tn=0,Kt}function A2(){for(;Ft!==null;)eS(Ft)}function j2(){for(;Ft!==null&&!tP();)eS(Ft)}function eS(e){var t=rS(e.alternate,e,Bn);e.memoizedProps=e.pendingProps,t===null?tS(e):Ft=t,ly.current=null}function tS(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=S2(n,t),n!==null){n.flags&=32767,Ft=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Kt=6,Ft=null;return}}else if(n=x2(n,t,Bn),n!==null){Ft=n;return}if(t=t.sibling,t!==null){Ft=t;return}Ft=t=e}while(t!==null);Kt===0&&(Kt=5)}function Is(e,t,n){var r=dt,i=ar.transition;try{ar.transition=null,dt=1,O2(e,t,n,r)}finally{ar.transition=i,dt=r}return null}function O2(e,t,n,r){do aa();while(Xi!==null);if(at&6)throw Error(Se(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Se(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(dP(e,s),e===Jt&&(Ft=Jt=null,tn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Rc||(Rc=!0,iS(yd,function(){return aa(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=ar.transition,ar.transition=null;var o=dt;dt=1;var a=at;at|=4,ly.current=null,E2(e,n),Q1(n,e),JP(Gp),wd=!!qp,Gp=qp=null,e.current=n,C2(n),nP(),at=a,dt=o,ar.transition=s}else e.current=n;if(Rc&&(Rc=!1,Xi=e,Nd=i),s=e.pendingLanes,s===0&&(as=null),sP(n.stateNode),Dn(e,Nt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Dd)throw Dd=!1,e=pm,pm=null,e;return Nd&1&&e.tag!==0&&aa(),s=e.pendingLanes,s&1?e===mm?Rl++:(Rl=0,mm=e):Rl=0,vs(),null}function aa(){if(Xi!==null){var e=Nx(Nd),t=ar.transition,n=dt;try{if(ar.transition=null,dt=16>e?16:e,Xi===null)var r=!1;else{if(e=Xi,Xi=null,Nd=0,at&6)throw Error(Se(331));var i=at;for(at|=4,$e=e.current;$e!==null;){var s=$e,o=s.child;if($e.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for($e=u;$e!==null;){var c=$e;switch(c.tag){case 0:case 11:case 15:jl(8,c,s)}var f=c.child;if(f!==null)f.return=c,$e=f;else for(;$e!==null;){c=$e;var p=c.sibling,m=c.return;if(H1(c),c===u){$e=null;break}if(p!==null){p.return=m,$e=p;break}$e=m}}}var w=s.alternate;if(w!==null){var v=w.child;if(v!==null){w.child=null;do{var x=v.sibling;v.sibling=null,v=x}while(v!==null)}}$e=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,$e=o;else e:for(;$e!==null;){if(s=$e,s.flags&2048)switch(s.tag){case 0:case 11:case 15:jl(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,$e=g;break e}$e=s.return}}var y=e.current;for($e=y;$e!==null;){o=$e;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,$e=_;else e:for(o=y;$e!==null;){if(a=$e,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:hf(9,a)}}catch(O){jt(a,a.return,O)}if(a===o){$e=null;break e}var T=a.sibling;if(T!==null){T.return=a.return,$e=T;break e}$e=a.return}}if(at=i,vs(),Wr&&typeof Wr.onPostCommitFiberRoot=="function")try{Wr.onPostCommitFiberRoot(sf,e)}catch{}r=!0}return r}finally{dt=n,ar.transition=t}}return!1}function hw(e,t,n){t=Ta(n,t),t=N1(e,t,1),e=os(e,t,1),t=bn(),e!==null&&(ku(e,1,t),Dn(e,t))}function jt(e,t,n){if(e.tag===3)hw(e,e,n);else for(;t!==null;){if(t.tag===3){hw(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(as===null||!as.has(r))){e=Ta(n,e),e=L1(t,e,1),t=os(t,e,1),e=bn(),t!==null&&(ku(t,1,e),Dn(t,e));break}}t=t.return}}function R2(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=bn(),e.pingedLanes|=e.suspendedLanes&n,Jt===e&&(tn&n)===n&&(Kt===4||Kt===3&&(tn&130023424)===tn&&500>Nt()-cy?ro(e,0):uy|=n),Dn(e,t)}function nS(e,t){t===0&&(e.mode&1?(t=xc,xc<<=1,!(xc&130023424)&&(xc=4194304)):t=1);var n=bn();e=mi(e,t),e!==null&&(ku(e,t,n),Dn(e,n))}function I2(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),nS(e,n)}function D2(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Se(314))}r!==null&&r.delete(t),nS(e,n)}var rS;rS=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Rn.current)jn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return jn=!1,_2(e,t,n);jn=!!(e.flags&131072)}else jn=!1,wt&&t.flags&1048576&&a1(t,Cd,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;td(e,t),e=t.pendingProps;var i=Sa(t,hn.current);oa(t,n),i=ry(null,t,r,e,i,n);var s=iy();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,In(r)?(s=!0,kd(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Zg(t),i.updater=ff,t.stateNode=i,i._reactInternals=t,rm(t,r,e,n),t=om(null,t,r,!0,s,n)):(t.tag=0,wt&&s&&Wg(t),vn(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(td(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=L2(r),e=vr(r,e),i){case 0:t=sm(null,t,r,e,n);break e;case 1:t=rw(null,t,r,e,n);break e;case 11:t=tw(null,t,r,e,n);break e;case 14:t=nw(null,t,r,vr(r.type,e),n);break e}throw Error(Se(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:vr(r,i),sm(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:vr(r,i),rw(e,t,r,i,n);case 3:e:{if(B1(t),e===null)throw Error(Se(387));r=t.pendingProps,s=t.memoizedState,i=s.element,h1(e,t),Ad(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=Ta(Error(Se(423)),t),t=iw(e,t,r,n,i);break e}else if(r!==i){i=Ta(Error(Se(424)),t),t=iw(e,t,r,n,i);break e}else for(Un=ss(t.stateNode.containerInfo.firstChild),zn=t,wt=!0,Sr=null,n=d1(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ka(),r===i){t=gi(e,t,n);break e}vn(e,t,r,n)}t=t.child}return t;case 5:return p1(t),e===null&&em(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,Qp(r,i)?o=null:s!==null&&Qp(r,s)&&(t.flags|=32),F1(e,t),vn(e,t,o,n),t.child;case 6:return e===null&&em(t),null;case 13:return U1(e,t,n);case 4:return Xg(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ea(t,null,r,n):vn(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:vr(r,i),tw(e,t,r,i,n);case 7:return vn(e,t,t.pendingProps,n),t.child;case 8:return vn(e,t,t.pendingProps.children,n),t.child;case 12:return vn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,mt(Td,r._currentValue),r._currentValue=o,s!==null)if(Tr(s.value,o)){if(s.children===i.children&&!Rn.current){t=gi(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=ci(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),tm(s.return,n,t),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Se(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),tm(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}vn(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,oa(t,n),i=ur(i),r=r(i),t.flags|=1,vn(e,t,r,n),t.child;case 14:return r=t.type,i=vr(r,t.pendingProps),i=vr(r.type,i),nw(e,t,r,i,n);case 15:return $1(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:vr(r,i),td(e,t),t.tag=1,In(r)?(e=!0,kd(t)):e=!1,oa(t,n),D1(t,r,i),rm(t,r,i,n),om(null,t,r,!0,e,n);case 19:return z1(e,t,n);case 22:return M1(e,t,n)}throw Error(Se(156,t.tag))};function iS(e,t){return Ox(e,t)}function N2(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sr(e,t,n,r){return new N2(e,t,n,r)}function py(e){return e=e.prototype,!(!e||!e.isReactComponent)}function L2(e){if(typeof e=="function")return py(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ig)return 11;if(e===Dg)return 14}return 2}function us(e,t){var n=e.alternate;return n===null?(n=sr(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function id(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")py(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Bo:return io(n.children,i,s,t);case Rg:o=8,i|=8;break;case Tp:return e=sr(12,n,t,i|2),e.elementType=Tp,e.lanes=s,e;case Pp:return e=sr(13,n,t,i),e.elementType=Pp,e.lanes=s,e;case Ap:return e=sr(19,n,t,i),e.elementType=Ap,e.lanes=s,e;case px:return mf(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case fx:o=10;break e;case hx:o=9;break e;case Ig:o=11;break e;case Dg:o=14;break e;case $i:o=16,r=null;break e}throw Error(Se(130,e==null?e:typeof e,""))}return t=sr(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function io(e,t,n,r){return e=sr(7,e,r,t),e.lanes=n,e}function mf(e,t,n,r){return e=sr(22,e,r,t),e.elementType=px,e.lanes=n,e.stateNode={isHidden:!1},e}function Wh(e,t,n){return e=sr(6,e,null,t),e.lanes=n,e}function Hh(e,t,n){return t=sr(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $2(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ch(0),this.expirationTimes=Ch(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ch(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function my(e,t,n,r,i,s,o,a,l){return e=new $2(e,t,n,a,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=sr(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zg(s),e}function M2(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fo,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function sS(e){if(!e)return hs;e=e._reactInternals;e:{if(go(e)!==e||e.tag!==1)throw Error(Se(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(In(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Se(171))}if(e.tag===1){var n=e.type;if(In(n))return s1(e,n,t)}return t}function oS(e,t,n,r,i,s,o,a,l){return e=my(n,r,!0,e,i,s,o,a,l),e.context=sS(null),n=e.current,r=bn(),i=ls(n),s=ci(r,i),s.callback=t??null,os(n,s,i),e.current.lanes=i,ku(e,i,r),Dn(e,r),e}function gf(e,t,n,r){var i=t.current,s=bn(),o=ls(i);return n=sS(n),t.context===null?t.context=n:t.pendingContext=n,t=ci(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=os(i,t,o),e!==null&&(Cr(e,i,o,s),Zc(e,i,o)),o}function $d(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function pw(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function gy(e,t){pw(e,t),(e=e.alternate)&&pw(e,t)}function F2(){return null}var aS=typeof reportError=="function"?reportError:function(e){console.error(e)};function yy(e){this._internalRoot=e}yf.prototype.render=yy.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Se(409));gf(e,t,null,null)};yf.prototype.unmount=yy.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;fo(function(){gf(null,e,null,null)}),t[pi]=null}};function yf(e){this._internalRoot=e}yf.prototype.unstable_scheduleHydration=function(e){if(e){var t=Mx();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Fi.length&&t!==0&&t<Fi[n].priority;n++);Fi.splice(n,0,e),n===0&&Bx(e)}};function vy(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function vf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function mw(){}function B2(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=$d(o);s.call(u)}}var o=oS(t,r,e,0,null,!1,!1,"",mw);return e._reactRootContainer=o,e[pi]=o.current,Zl(e.nodeType===8?e.parentNode:e),fo(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=$d(l);a.call(u)}}var l=my(e,0,!1,null,null,!1,!1,"",mw);return e._reactRootContainer=l,e[pi]=l.current,Zl(e.nodeType===8?e.parentNode:e),fo(function(){gf(t,l,n,r)}),l}function wf(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=$d(o);a.call(l)}}gf(t,o,e,i)}else o=B2(n,t,e,i,r);return $d(o)}Lx=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=gl(t.pendingLanes);n!==0&&($g(t,n|1),Dn(t,Nt()),!(at&6)&&(Pa=Nt()+500,vs()))}break;case 13:fo(function(){var r=mi(e,1);if(r!==null){var i=bn();Cr(r,e,1,i)}}),gy(e,1)}};Mg=function(e){if(e.tag===13){var t=mi(e,134217728);if(t!==null){var n=bn();Cr(t,e,134217728,n)}gy(e,134217728)}};$x=function(e){if(e.tag===13){var t=ls(e),n=mi(e,t);if(n!==null){var r=bn();Cr(n,e,t,r)}gy(e,t)}};Mx=function(){return dt};Fx=function(e,t){var n=dt;try{return dt=e,t()}finally{dt=n}};Fp=function(e,t,n){switch(t){case"input":if(Rp(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=uf(r);if(!i)throw Error(Se(90));gx(r),Rp(r,i)}}}break;case"textarea":vx(e,n);break;case"select":t=n.value,t!=null&&na(e,!!n.multiple,t,!1)}};Ex=dy;Cx=fo;var U2={usingClientEntryPoint:!1,Events:[Cu,Ko,uf,Sx,kx,dy]},al={findFiberByHostInstance:Bs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},z2={bundleType:al.bundleType,version:al.version,rendererPackageName:al.rendererPackageName,rendererConfig:al.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xi.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ax(e),e===null?null:e.stateNode},findFiberByHostInstance:al.findFiberByHostInstance||F2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ic.isDisabled&&Ic.supportsFiber)try{sf=Ic.inject(z2),Wr=Ic}catch{}}Wn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U2;Wn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vy(t))throw Error(Se(200));return M2(e,t,null,n)};Wn.createRoot=function(e,t){if(!vy(e))throw Error(Se(299));var n=!1,r="",i=aS;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=my(e,1,!1,null,null,n,!1,r,i),e[pi]=t.current,Zl(e.nodeType===8?e.parentNode:e),new yy(t)};Wn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Se(188)):(e=Object.keys(e).join(","),Error(Se(268,e)));return e=Ax(t),e=e===null?null:e.stateNode,e};Wn.flushSync=function(e){return fo(e)};Wn.hydrate=function(e,t,n){if(!vf(t))throw Error(Se(200));return wf(null,e,t,!0,n)};Wn.hydrateRoot=function(e,t,n){if(!vy(e))throw Error(Se(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=aS;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=oS(t,null,e,1,n??null,i,!1,s,o),e[pi]=t.current,Zl(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new yf(t)};Wn.render=function(e,t,n){if(!vf(t))throw Error(Se(200));return wf(null,e,t,!1,n)};Wn.unmountComponentAtNode=function(e){if(!vf(e))throw Error(Se(40));return e._reactRootContainer?(fo(function(){wf(null,null,e,!1,function(){e._reactRootContainer=null,e[pi]=null})}),!0):!1};Wn.unstable_batchedUpdates=dy;Wn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!vf(n))throw Error(Se(200));if(e==null||e._reactInternals===void 0)throw Error(Se(38));return wf(e,t,n,!1,r)};Wn.version="18.3.1-next-f1338f8080-20240426";function lS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(lS)}catch(e){console.error(e)}}lS(),lx.exports=Wn;var wy=lx.exports;const V2=nf(wy);var gw=wy;Ep.createRoot=gw.createRoot,Ep.hydrateRoot=gw.hydrateRoot;/**
 * react-router v7.9.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var yw="popstate";function K2(e={}){function t(i,s){let{pathname:o="/",search:a="",hash:l=""}=yo(i.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),vm("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=i.location.href,u=l.indexOf("#");a=u===-1?l:l.slice(0,u)}return a+"#"+(typeof s=="string"?s:au(s))}function r(i,s){Kn(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(s)})`)}return H2(t,n,r,e)}function _t(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Kn(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function W2(){return Math.random().toString(36).substring(2,10)}function vw(e,t){return{usr:e.state,key:e.key,idx:t}}function vm(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?yo(t):t,state:n,key:t&&t.key||r||W2()}}function au({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function yo(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function H2(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",l=null,u=c();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function c(){return(o.state||{idx:null}).idx}function f(){a="POP";let x=c(),g=x==null?null:x-u;u=x,l&&l({action:a,location:v.location,delta:g})}function p(x,g){a="PUSH";let y=vm(v.location,x,g);n&&n(y,x),u=c()+1;let _=vw(y,u),T=v.createHref(y);try{o.pushState(_,"",T)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;i.location.assign(T)}s&&l&&l({action:a,location:v.location,delta:1})}function m(x,g){a="REPLACE";let y=vm(v.location,x,g);n&&n(y,x),u=c();let _=vw(y,u),T=v.createHref(y);o.replaceState(_,"",T),s&&l&&l({action:a,location:v.location,delta:0})}function w(x){return q2(x)}let v={get action(){return a},get location(){return e(i,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(yw,f),l=x,()=>{i.removeEventListener(yw,f),l=null}},createHref(x){return t(i,x)},createURL:w,encodeLocation(x){let g=w(x);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:p,replace:m,go(x){return o.go(x)}};return v}function q2(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),_t(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:au(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function uS(e,t,n="/"){return G2(e,t,n,!1)}function G2(e,t,n,r){let i=typeof t=="string"?yo(t):t,s=yi(i.pathname||"/",n);if(s==null)return null;let o=cS(e);Q2(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=oA(s);a=iA(o[l],u,r)}return a}function cS(e,t=[],n=[],r="",i=!1){let s=(o,a,l=i,u)=>{let c={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(c.relativePath.startsWith("/")){if(!c.relativePath.startsWith(r)&&l)return;_t(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length)}let f=di([r,c.relativePath]),p=n.concat(c);o.children&&o.children.length>0&&(_t(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),cS(o.children,t,p,f,l)),!(o.path==null&&!o.index)&&t.push({path:f,score:nA(f,o.index),routesMeta:p})};return e.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))s(o,a);else for(let u of dS(o.path))s(o,a,!0,u)}),t}function dS(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=dS(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function Q2(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:rA(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var Y2=/^:[\w-]+$/,J2=3,Z2=2,X2=1,eA=10,tA=-2,ww=e=>e==="*";function nA(e,t){let n=e.split("/"),r=n.length;return n.some(ww)&&(r+=tA),t&&(r+=Z2),n.filter(i=>!ww(i)).reduce((i,s)=>i+(Y2.test(s)?J2:s===""?X2:eA),r)}function rA(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function iA(e,t,n=!1){let{routesMeta:r}=e,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,c=s==="/"?t:t.slice(s.length)||"/",f=Md({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),p=l.route;if(!f&&u&&n&&!r[r.length-1].route.index&&(f=Md({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:di([s,f.pathname]),pathnameBase:cA(di([s,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(s=di([s,f.pathnameBase]))}return o}function Md(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=sA(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,{paramName:c,isOptional:f},p)=>{if(c==="*"){let w=a[p]||"";o=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const m=a[p];return f&&!m?u[c]=void 0:u[c]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:e}}function sA(e,t=!1,n=!0){Kn(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function oA(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Kn(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function yi(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function aA(e,t="/"){let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?yo(e):e;return{pathname:n?n.startsWith("/")?n:lA(n,t):t,search:dA(r),hash:fA(i)}}function lA(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function qh(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function uA(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function by(e){let t=uA(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function _y(e,t,n,r=!1){let i;typeof e=="string"?i=yo(e):(i={...e},_t(!i.pathname||!i.pathname.includes("?"),qh("?","pathname","search",i)),_t(!i.pathname||!i.pathname.includes("#"),qh("#","pathname","hash",i)),_t(!i.search||!i.search.includes("#"),qh("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;i.pathname=p.join("/")}a=f>=0?t[f]:"/"}let l=aA(i,a),u=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}var di=e=>e.join("/").replace(/\/\/+/g,"/"),cA=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),dA=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,fA=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function hA(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var fS=["POST","PUT","PATCH","DELETE"];new Set(fS);var pA=["GET",...fS];new Set(pA);var Na=E.createContext(null);Na.displayName="DataRouter";var bf=E.createContext(null);bf.displayName="DataRouterState";E.createContext(!1);var hS=E.createContext({isTransitioning:!1});hS.displayName="ViewTransition";var mA=E.createContext(new Map);mA.displayName="Fetchers";var gA=E.createContext(null);gA.displayName="Await";var Pr=E.createContext(null);Pr.displayName="Navigation";var Pu=E.createContext(null);Pu.displayName="Location";var Ar=E.createContext({outlet:null,matches:[],isDataRoute:!1});Ar.displayName="Route";var xy=E.createContext(null);xy.displayName="RouteError";function yA(e,{relative:t}={}){_t(La(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=E.useContext(Pr),{hash:i,pathname:s,search:o}=ju(e,{relative:t}),a=s;return n!=="/"&&(a=s==="/"?n:di([n,s])),r.createHref({pathname:a,search:o,hash:i})}function La(){return E.useContext(Pu)!=null}function dr(){return _t(La(),"useLocation() may be used only in the context of a <Router> component."),E.useContext(Pu).location}var pS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function mS(e){E.useContext(Pr).static||E.useLayoutEffect(e)}function jr(){let{isDataRoute:e}=E.useContext(Ar);return e?jA():vA()}function vA(){_t(La(),"useNavigate() may be used only in the context of a <Router> component.");let e=E.useContext(Na),{basename:t,navigator:n}=E.useContext(Pr),{matches:r}=E.useContext(Ar),{pathname:i}=dr(),s=JSON.stringify(by(r)),o=E.useRef(!1);return mS(()=>{o.current=!0}),E.useCallback((l,u={})=>{if(Kn(o.current,pS),!o.current)return;if(typeof l=="number"){n.go(l);return}let c=_y(l,JSON.parse(s),i,u.relative==="path");e==null&&t!=="/"&&(c.pathname=c.pathname==="/"?t:di([t,c.pathname])),(u.replace?n.replace:n.push)(c,u.state,u)},[t,n,s,i,e])}E.createContext(null);function Au(){let{matches:e}=E.useContext(Ar),t=e[e.length-1];return t?t.params:{}}function ju(e,{relative:t}={}){let{matches:n}=E.useContext(Ar),{pathname:r}=dr(),i=JSON.stringify(by(n));return E.useMemo(()=>_y(e,JSON.parse(i),r,t==="path"),[e,i,r,t])}function wA(e,t){return gS(e,t)}function gS(e,t,n,r,i){var y;_t(La(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=E.useContext(Pr),{matches:o}=E.useContext(Ar),a=o[o.length-1],l=a?a.params:{},u=a?a.pathname:"/",c=a?a.pathnameBase:"/",f=a&&a.route;{let _=f&&f.path||"";yS(u,!f||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let p=dr(),m;if(t){let _=typeof t=="string"?yo(t):t;_t(c==="/"||((y=_.pathname)==null?void 0:y.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${_.pathname}" was given in the \`location\` prop.`),m=_}else m=p;let w=m.pathname||"/",v=w;if(c!=="/"){let _=c.replace(/^\//,"").split("/");v="/"+w.replace(/^\//,"").split("/").slice(_.length).join("/")}let x=uS(e,{pathname:v});Kn(f||x!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),Kn(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let g=kA(x&&x.map(_=>Object.assign({},_,{params:Object.assign({},l,_.params),pathname:di([c,s.encodeLocation?s.encodeLocation(_.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?c:di([c,s.encodeLocation?s.encodeLocation(_.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathnameBase])})),o,n,r,i);return t&&g?E.createElement(Pu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},g):g}function bA(){let e=AA(),t=hA(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=E.createElement(E.Fragment,null,E.createElement("p",null," Hey developer "),E.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",E.createElement("code",{style:s},"ErrorBoundary")," or"," ",E.createElement("code",{style:s},"errorElement")," prop on your route.")),E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},t),n?E.createElement("pre",{style:i},n):null,o)}var _A=E.createElement(bA,null),xA=class extends E.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?E.createElement(Ar.Provider,{value:this.props.routeContext},E.createElement(xy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function SA({routeContext:e,match:t,children:n}){let r=E.useContext(Na);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),E.createElement(Ar.Provider,{value:e},n)}function kA(e,t=[],n=null,r=null,i=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let s=e,o=n==null?void 0:n.errors;if(o!=null){let u=s.findIndex(c=>c.route.id&&(o==null?void 0:o[c.route.id])!==void 0);_t(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,u+1))}let a=!1,l=-1;if(n)for(let u=0;u<s.length;u++){let c=s[u];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(l=u),c.route.id){let{loaderData:f,errors:p}=n,m=c.route.loader&&!f.hasOwnProperty(c.route.id)&&(!p||p[c.route.id]===void 0);if(c.route.lazy||m){a=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}return s.reduceRight((u,c,f)=>{let p,m=!1,w=null,v=null;n&&(p=o&&c.route.id?o[c.route.id]:void 0,w=c.route.errorElement||_A,a&&(l<0&&f===0?(yS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,v=null):l===f&&(m=!0,v=c.route.hydrateFallbackElement||null)));let x=t.concat(s.slice(0,f+1)),g=()=>{let y;return p?y=w:m?y=v:c.route.Component?y=E.createElement(c.route.Component,null):c.route.element?y=c.route.element:y=u,E.createElement(SA,{match:c,routeContext:{outlet:u,matches:x,isDataRoute:n!=null},children:y})};return n&&(c.route.ErrorBoundary||c.route.errorElement||f===0)?E.createElement(xA,{location:n.location,revalidation:n.revalidation,component:w,error:p,children:g(),routeContext:{outlet:null,matches:x,isDataRoute:!0},unstable_onError:r}):g()},null)}function Sy(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function EA(e){let t=E.useContext(Na);return _t(t,Sy(e)),t}function CA(e){let t=E.useContext(bf);return _t(t,Sy(e)),t}function TA(e){let t=E.useContext(Ar);return _t(t,Sy(e)),t}function ky(e){let t=TA(e),n=t.matches[t.matches.length-1];return _t(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function PA(){return ky("useRouteId")}function AA(){var r;let e=E.useContext(xy),t=CA("useRouteError"),n=ky("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function jA(){let{router:e}=EA("useNavigate"),t=ky("useNavigate"),n=E.useRef(!1);return mS(()=>{n.current=!0}),E.useCallback(async(i,s={})=>{Kn(n.current,pS),n.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...s}))},[e,t])}var bw={};function yS(e,t,n){!t&&!bw[e]&&(bw[e]=!0,Kn(!1,n))}E.memo(OA);function OA({routes:e,future:t,state:n,unstable_onError:r}){return gS(e,void 0,n,r,t)}function vS({to:e,replace:t,state:n,relative:r}){_t(La(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=E.useContext(Pr);Kn(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=E.useContext(Ar),{pathname:o}=dr(),a=jr(),l=_y(e,by(s),o,r==="path"),u=JSON.stringify(l);return E.useEffect(()=>{a(JSON.parse(u),{replace:t,state:n,relative:r})},[a,u,r,t,n]),null}function un(e){_t(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function RA({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){_t(!La(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),a=E.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof n=="string"&&(n=yo(n));let{pathname:l="/",search:u="",hash:c="",state:f=null,key:p="default"}=n,m=E.useMemo(()=>{let w=yi(l,o);return w==null?null:{location:{pathname:w,search:u,hash:c,state:f,key:p},navigationType:r}},[o,l,u,c,f,p,r]);return Kn(m!=null,`<Router basename="${o}"> is not able to match the URL "${l}${u}${c}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:E.createElement(Pr.Provider,{value:a},E.createElement(Pu.Provider,{children:t,value:m}))}function IA({children:e,location:t}){return wA(wm(e),t)}function wm(e,t=[]){let n=[];return E.Children.forEach(e,(r,i)=>{if(!E.isValidElement(r))return;let s=[...t,i];if(r.type===E.Fragment){n.push.apply(n,wm(r.props.children,s));return}_t(r.type===un,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),_t(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=wm(r.props.children,s)),n.push(o)}),n}var sd="get",od="application/x-www-form-urlencoded";function _f(e){return e!=null&&typeof e.tagName=="string"}function DA(e){return _f(e)&&e.tagName.toLowerCase()==="button"}function NA(e){return _f(e)&&e.tagName.toLowerCase()==="form"}function LA(e){return _f(e)&&e.tagName.toLowerCase()==="input"}function $A(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function MA(e,t){return e.button===0&&(!t||t==="_self")&&!$A(e)}function bm(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function FA(e,t){let n=bm(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}var Dc=null;function BA(){if(Dc===null)try{new FormData(document.createElement("form"),0),Dc=!1}catch{Dc=!0}return Dc}var UA=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Gh(e){return e!=null&&!UA.has(e)?(Kn(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${od}"`),null):e}function zA(e,t){let n,r,i,s,o;if(NA(e)){let a=e.getAttribute("action");r=a?yi(a,t):null,n=e.getAttribute("method")||sd,i=Gh(e.getAttribute("enctype"))||od,s=new FormData(e)}else if(DA(e)||LA(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||a.getAttribute("action");if(r=l?yi(l,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||sd,i=Gh(e.getAttribute("formenctype"))||Gh(a.getAttribute("enctype"))||od,s=new FormData(a,e),!BA()){let{name:u,type:c,value:f}=e;if(c==="image"){let p=u?`${u}.`:"";s.append(`${p}x`,"0"),s.append(`${p}y`,"0")}else u&&s.append(u,f)}}else{if(_f(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=sd,r=null,i=od,o=e}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ey(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function VA(e,t,n){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname=`_root.${n}`:t&&yi(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function KA(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function WA(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function HA(e,t,n){let r=await Promise.all(e.map(async i=>{let s=t.routes[i.route.id];if(s){let o=await KA(s,n);return o.links?o.links():[]}return[]}));return YA(r.flat(1).filter(WA).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function _w(e,t,n,r,i,s){let o=(l,u)=>n[u]?l.route.id!==n[u].route.id:!0,a=(l,u)=>{var c;return n[u].pathname!==l.pathname||((c=n[u].route.path)==null?void 0:c.endsWith("*"))&&n[u].params["*"]!==l.params["*"]};return s==="assets"?t.filter((l,u)=>o(l,u)||a(l,u)):s==="data"?t.filter((l,u)=>{var f;let c=r.routes[l.route.id];if(!c||!c.hasLoader)return!1;if(o(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let p=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(e,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function qA(e,t,{includeHydrateFallback:n}={}){return GA(e.map(r=>{let i=t.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function GA(e){return[...new Set(e)]}function QA(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function YA(e,t){let n=new Set;return new Set(t),e.reduce((r,i)=>{let s=JSON.stringify(QA(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}function wS(){let e=E.useContext(Na);return Ey(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function JA(){let e=E.useContext(bf);return Ey(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Cy=E.createContext(void 0);Cy.displayName="FrameworkContext";function bS(){let e=E.useContext(Cy);return Ey(e,"You must render this element inside a <HydratedRouter> element"),e}function ZA(e,t){let n=E.useContext(Cy),[r,i]=E.useState(!1),[s,o]=E.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:c,onTouchStart:f}=t,p=E.useRef(null);E.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let v=g=>{g.forEach(y=>{o(y.isIntersecting)})},x=new IntersectionObserver(v,{threshold:.5});return p.current&&x.observe(p.current),()=>{x.disconnect()}}},[e]),E.useEffect(()=>{if(r){let v=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(v)}}},[r]);let m=()=>{i(!0)},w=()=>{i(!1),o(!1)};return n?e!=="intent"?[s,p,{}]:[s,p,{onFocus:ll(a,m),onBlur:ll(l,w),onMouseEnter:ll(u,m),onMouseLeave:ll(c,w),onTouchStart:ll(f,m)}]:[!1,p,{}]}function ll(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function XA({page:e,...t}){let{router:n}=wS(),r=E.useMemo(()=>uS(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?E.createElement(tj,{page:e,matches:r,...t}):null}function ej(e){let{manifest:t,routeModules:n}=bS(),[r,i]=E.useState([]);return E.useEffect(()=>{let s=!1;return HA(e,t,n).then(o=>{s||i(o)}),()=>{s=!0}},[e,t,n]),r}function tj({page:e,matches:t,...n}){let r=dr(),{manifest:i,routeModules:s}=bS(),{basename:o}=wS(),{loaderData:a,matches:l}=JA(),u=E.useMemo(()=>_w(e,t,l,i,r,"data"),[e,t,l,i,r]),c=E.useMemo(()=>_w(e,t,l,i,r,"assets"),[e,t,l,i,r]),f=E.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let w=new Set,v=!1;if(t.forEach(g=>{var _;let y=i.routes[g.route.id];!y||!y.hasLoader||(!u.some(T=>T.route.id===g.route.id)&&g.route.id in a&&((_=s[g.route.id])!=null&&_.shouldRevalidate)||y.hasClientLoader?v=!0:w.add(g.route.id))}),w.size===0)return[];let x=VA(e,o,"data");return v&&w.size>0&&x.searchParams.set("_routes",t.filter(g=>w.has(g.route.id)).map(g=>g.route.id).join(",")),[x.pathname+x.search]},[o,a,r,i,u,t,e,s]),p=E.useMemo(()=>qA(c,i),[c,i]),m=ej(c);return E.createElement(E.Fragment,null,f.map(w=>E.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...n})),p.map(w=>E.createElement("link",{key:w,rel:"modulepreload",href:w,...n})),m.map(({key:w,link:v})=>E.createElement("link",{key:w,nonce:n.nonce,...v})))}function nj(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var _S=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{_S&&(window.__reactRouterVersion="7.9.3")}catch{}function rj({basename:e,children:t,window:n}){let r=E.useRef();r.current==null&&(r.current=K2({window:n,v5Compat:!0}));let i=r.current,[s,o]=E.useState({action:i.action,location:i.location}),a=E.useCallback(l=>{E.startTransition(()=>o(l))},[o]);return E.useLayoutEffect(()=>i.listen(a),[i,a]),E.createElement(RA,{basename:e,children:t,location:s.location,navigationType:s.action,navigator:i})}var xS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rr=E.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:c,viewTransition:f,...p},m){let{basename:w}=E.useContext(Pr),v=typeof u=="string"&&xS.test(u),x,g=!1;if(typeof u=="string"&&v&&(x=u,_S))try{let U=new URL(window.location.href),V=u.startsWith("//")?new URL(U.protocol+u):new URL(u),ge=yi(V.pathname,w);V.origin===U.origin&&ge!=null?u=ge+V.search+V.hash:g=!0}catch{Kn(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=yA(u,{relative:i}),[_,T,O]=ZA(r,p),R=aj(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:i,viewTransition:f});function I(U){t&&t(U),U.defaultPrevented||R(U)}let $=E.createElement("a",{...p,...O,href:x||y,onClick:g||s?t:I,ref:nj(m,T),target:l,"data-discover":!v&&n==="render"?"true":void 0});return _&&!v?E.createElement(E.Fragment,null,$,E.createElement(XA,{page:y})):$});rr.displayName="Link";var ij=E.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:l,...u},c){let f=ju(o,{relative:u.relative}),p=dr(),m=E.useContext(bf),{navigator:w,basename:v}=E.useContext(Pr),x=m!=null&&hj(f)&&a===!0,g=w.encodeLocation?w.encodeLocation(f).pathname:f.pathname,y=p.pathname,_=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;n||(y=y.toLowerCase(),_=_?_.toLowerCase():null,g=g.toLowerCase()),_&&v&&(_=yi(_,v)||_);const T=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let O=y===g||!i&&y.startsWith(g)&&y.charAt(T)==="/",R=_!=null&&(_===g||!i&&_.startsWith(g)&&_.charAt(g.length)==="/"),I={isActive:O,isPending:R,isTransitioning:x},$=O?t:void 0,U;typeof r=="function"?U=r(I):U=[r,O?"active":null,R?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let V=typeof s=="function"?s(I):s;return E.createElement(rr,{...u,"aria-current":$,className:U,ref:c,style:V,to:o,viewTransition:a},typeof l=="function"?l(I):l)});ij.displayName="NavLink";var sj=E.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:s,method:o=sd,action:a,onSubmit:l,relative:u,preventScrollReset:c,viewTransition:f,...p},m)=>{let w=dj(),v=fj(a,{relative:u}),x=o.toLowerCase()==="get"?"get":"post",g=typeof a=="string"&&xS.test(a),y=_=>{if(l&&l(_),_.defaultPrevented)return;_.preventDefault();let T=_.nativeEvent.submitter,O=(T==null?void 0:T.getAttribute("formmethod"))||o;w(T||_.currentTarget,{fetcherKey:t,method:O,navigate:n,replace:i,state:s,relative:u,preventScrollReset:c,viewTransition:f})};return E.createElement("form",{ref:m,method:x,action:v,onSubmit:r?l:y,...p,"data-discover":!g&&e==="render"?"true":void 0})});sj.displayName="Form";function oj(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function SS(e){let t=E.useContext(Na);return _t(t,oj(e)),t}function aj(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:o}={}){let a=jr(),l=dr(),u=ju(e,{relative:s});return E.useCallback(c=>{if(MA(c,t)){c.preventDefault();let f=n!==void 0?n:au(l)===au(u);a(e,{replace:f,state:r,preventScrollReset:i,relative:s,viewTransition:o})}},[l,a,u,n,r,t,e,i,s,o])}function lj(e){Kn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=E.useRef(bm(e)),n=E.useRef(!1),r=dr(),i=E.useMemo(()=>FA(r.search,n.current?null:t.current),[r.search]),s=jr(),o=E.useCallback((a,l)=>{const u=bm(typeof a=="function"?a(new URLSearchParams(i)):a);n.current=!0,s("?"+u,l)},[s,i]);return[i,o]}var uj=0,cj=()=>`__${String(++uj)}__`;function dj(){let{router:e}=SS("useSubmit"),{basename:t}=E.useContext(Pr),n=PA();return E.useCallback(async(r,i={})=>{let{action:s,method:o,encType:a,formData:l,body:u}=zA(r,t);if(i.navigate===!1){let c=i.fetcherKey||cj();await e.fetch(c,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await e.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}function fj(e,{relative:t}={}){let{basename:n}=E.useContext(Pr),r=E.useContext(Ar);_t(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...ju(e||".",{relative:t})},o=dr();if(e==null){s.search=o.search;let a=new URLSearchParams(s.search),l=a.getAll("index");if(l.some(c=>c==="")){a.delete("index"),l.filter(f=>f).forEach(f=>a.append("index",f));let c=a.toString();s.search=c?`?${c}`:""}}return(!e||e===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:di([n,s.pathname])),au(s)}function hj(e,{relative:t}={}){let n=E.useContext(hS);_t(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=SS("useViewTransitionState"),i=ju(e,{relative:t});if(!n.isTransitioning)return!1;let s=yi(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=yi(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Md(i.pathname,o)!=null||Md(i.pathname,s)!=null}const vo="https://script.google.com/macros/s/AKfycbxSzdaz4kIt6aiFLekb0uCaSqMho0nKOrAWRcOSIGdstPXVVnGexedSW1qzCOYf_FFCOw/exec",kS="radtpoqypgqetijvopho",pj="modulepreload",mj=function(e){return"/new-sankeertan/"+e},xw={},$a=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=mj(l),l in xw)return;xw[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":pj,u||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),u)return new Promise((p,m)=>{f.addEventListener("load",p),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})},gj=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>$a(async()=>{const{default:r}=await Promise.resolve().then(()=>Ma);return{default:r}},[]).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class Ty extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class Sw extends Ty{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class kw extends Ty{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Ew extends Ty{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var _m;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(_m||(_m={}));var yj=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class vj{constructor(t,{headers:n={},customFetch:r,region:i=_m.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=gj(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return yj(this,arguments,void 0,function*(n,r={}){var i;try{const{headers:s,method:o,body:a,signal:l}=r;let u={},{region:c}=r;c||(c=this.region);const f=new URL(`${this.url}/${n}`);c&&c!=="any"&&(u["x-region"]=c,f.searchParams.set("forceFunctionRegion",c));let p;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",p=a):typeof a=="string"?(u["Content-Type"]="text/plain",p=a):typeof FormData<"u"&&a instanceof FormData?p=a:(u["Content-Type"]="application/json",p=JSON.stringify(a)));const m=yield this.fetch(f.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),s),body:p,signal:l}).catch(g=>{throw g.name==="AbortError"?g:new Sw(g)}),w=m.headers.get("x-relay-error");if(w&&w==="true")throw new kw(m);if(!m.ok)throw new Ew(m);let v=((i=m.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),x;return v==="application/json"?x=yield m.json():v==="application/octet-stream"?x=yield m.blob():v==="text/event-stream"?x=m:v==="multipart/form-data"?x=yield m.formData():x=yield m.text(),{data:x,error:null,response:m}}catch(s){return s instanceof Error&&s.name==="AbortError"?{data:null,error:new Sw(s)}:{data:null,error:s,response:s instanceof Ew||s instanceof kw?s.context:void 0}}})}}var An={},Py={},xf={},Ou={},Sf={},kf={},wj=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Aa=wj();const bj=Aa.fetch,ES=Aa.fetch.bind(Aa),CS=Aa.Headers,_j=Aa.Request,xj=Aa.Response,Ma=Object.freeze(Object.defineProperty({__proto__:null,Headers:CS,Request:_j,Response:xj,default:ES,fetch:bj},Symbol.toStringTag,{value:"Module"})),Sj=yT(Ma);var Ef={};Object.defineProperty(Ef,"__esModule",{value:!0});let kj=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Ef.default=kj;var TS=Yt&&Yt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(kf,"__esModule",{value:!0});const Ej=TS(Sj),Cj=TS(Ef);let Tj=class{constructor(t){var n,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(n=t.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Ej.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=new Headers(this.headers),this.headers.set(t,n),this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var o,a,l,u;let c=null,f=null,p=null,m=s.status,w=s.statusText;if(s.ok){if(this.method!=="HEAD"){const y=await s.text();y===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?f=y:f=JSON.parse(y))}const x=(a=this.headers.get("Prefer"))===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),g=(l=s.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");x&&g&&g.length>1&&(p=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(c={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,p=null,m=406,w="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const x=await s.text();try{c=JSON.parse(x),Array.isArray(c)&&s.status===404&&(f=[],c=null,m=200,w="OK")}catch{s.status===404&&x===""?(m=204,w="No Content"):c={message:x}}if(c&&this.isMaybeSingle&&(!((u=c==null?void 0:c.details)===null||u===void 0)&&u.includes("0 rows"))&&(c=null,m=200,w="OK"),c&&this.shouldThrowOnError)throw new Cj.default(c)}return{error:c,data:f,count:p,status:m,statusText:w}});return this.shouldThrowOnError||(i=i.catch(s=>{var o,a,l;return{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(a=s==null?void 0:s.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=s==null?void 0:s.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(t,n)}returns(){return this}overrideTypes(){return this}};kf.default=Tj;var Pj=Yt&&Yt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Sf,"__esModule",{value:!0});const Aj=Pj(kf);let jj=class extends Aj.default{select(t){let n=!1;const r=(t??"*").split("").map(i=>/\s/.test(i)&&!n?"":(i==='"'&&(n=!n),i)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:i,referencedTable:s=i}={}){const o=s?`${s}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:i=r}={}){const s=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(o,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:o="text"}={}){var a;const l=[t?"analyze":null,n?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${l};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};Sf.default=jj;var Oj=Yt&&Yt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ou,"__esModule",{value:!0});const Rj=Oj(Sf);let Ij=class extends Rj.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${s}fts${o}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};Ou.default=Ij;var Dj=Yt&&Yt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(xf,"__esModule",{value:!0});const ul=Dj(Ou);let Nj=class{constructor(t,{headers:n={},schema:r,fetch:i}){this.url=t,this.headers=new Headers(n),this.schema=r,this.fetch=i}select(t,n){const{head:r=!1,count:i}=n??{},s=r?"HEAD":"GET";let o=!1;const a=(t??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join("");return this.url.searchParams.set("select",a),i&&this.headers.append("Prefer",`count=${i}`),new ul.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:n,defaultToNull:r=!0}={}){var i;const s="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new ul.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:i,defaultToNull:s=!0}={}){var o;const a="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),i&&this.headers.append("Prefer",`count=${i}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const l=t.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(l.length>0){const u=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new ul.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:n}={}){var r;const i="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new ul.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var n;const r="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new ul.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};xf.default=Nj;var PS=Yt&&Yt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Py,"__esModule",{value:!0});const Lj=PS(xf),$j=PS(Ou);let Mj=class AS{constructor(t,{headers:n={},schema:r,fetch:i}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.fetch=i}from(t){const n=new URL(`${this.url}/${t}`);return new Lj.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new AS(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:i=!1,count:s}={}){var o;let a;const l=new URL(`${this.url}/rpc/${t}`);let u;r||i?(a=r?"HEAD":"GET",Object.entries(n).filter(([f,p])=>p!==void 0).map(([f,p])=>[f,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([f,p])=>{l.searchParams.append(f,p)})):(a="POST",u=n);const c=new Headers(this.headers);return s&&c.set("Prefer",`count=${s}`),new $j.default({method:a,url:l,headers:c,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};Py.default=Mj;var Fa=Yt&&Yt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(An,"__esModule",{value:!0});An.PostgrestError=An.PostgrestBuilder=An.PostgrestTransformBuilder=An.PostgrestFilterBuilder=An.PostgrestQueryBuilder=An.PostgrestClient=void 0;const jS=Fa(Py);An.PostgrestClient=jS.default;const OS=Fa(xf);An.PostgrestQueryBuilder=OS.default;const RS=Fa(Ou);An.PostgrestFilterBuilder=RS.default;const IS=Fa(Sf);An.PostgrestTransformBuilder=IS.default;const DS=Fa(kf);An.PostgrestBuilder=DS.default;const NS=Fa(Ef);An.PostgrestError=NS.default;var Fj=An.default={PostgrestClient:jS.default,PostgrestQueryBuilder:OS.default,PostgrestFilterBuilder:RS.default,PostgrestTransformBuilder:IS.default,PostgrestBuilder:DS.default,PostgrestError:NS.default};const{PostgrestClient:Bj,PostgrestQueryBuilder:D5,PostgrestFilterBuilder:N5,PostgrestTransformBuilder:L5,PostgrestBuilder:$5,PostgrestError:M5}=Fj;class Uj{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const zj="2.74.0",Vj=`realtime-js/${zj}`,Kj="1.0.0",xm=1e4,Wj=1e3,Hj=100;var Il;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Il||(Il={}));var Ut;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Ut||(Ut={}));var xr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(xr||(xr={}));var Sm;(function(e){e.websocket="websocket"})(Sm||(Sm={}));var $s;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})($s||($s={}));class qj{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const i=n.getUint8(1),s=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(t.slice(o,o+i));o=o+i;const l=r.decode(t.slice(o,o+s));o=o+s;const u=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class LS{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var pt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(pt||(pt={}));const Cw=(e,t,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((s,o)=>(s[o]=Gj(o,e,t,i),s),{}):{}},Gj=(e,t,n,r)=>{const i=t.find(a=>a.name===e),s=i==null?void 0:i.type,o=n[e];return s&&!r.includes(s)?$S(s,o):km(o)},$S=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return Zj(t,n)}switch(e){case pt.bool:return Qj(t);case pt.float4:case pt.float8:case pt.int2:case pt.int4:case pt.int8:case pt.numeric:case pt.oid:return Yj(t);case pt.json:case pt.jsonb:return Jj(t);case pt.timestamp:return Xj(t);case pt.abstime:case pt.date:case pt.daterange:case pt.int4range:case pt.int8range:case pt.money:case pt.reltime:case pt.text:case pt.time:case pt.timestamptz:case pt.timetz:case pt.tsrange:case pt.tstzrange:return km(t);default:return km(t)}},km=e=>e,Qj=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Yj=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Jj=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Zj=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let s;const o=e.slice(1,n);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>$S(t,a))}return e},Xj=e=>typeof e=="string"?e.replace(" ","T"):e,MS=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Qh{constructor(t,n,r={},i=xm){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Tw;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Tw||(Tw={}));class Dl{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Dl.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=Dl.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Dl.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){const s=this.cloneDeep(t),o=this.transformState(n),a={},l={};return this.map(s,(u,c)=>{o[u]||(l[u]=c)}),this.map(o,(u,c)=>{const f=s[u];if(f){const p=c.map(x=>x.presence_ref),m=f.map(x=>x.presence_ref),w=c.filter(x=>m.indexOf(x.presence_ref)<0),v=f.filter(x=>p.indexOf(x.presence_ref)<0);w.length>0&&(a[u]=w),v.length>0&&(l[u]=v)}else a[u]=c}),this.syncDiff(s,{joins:a,leaves:l},r,i)}static syncDiff(t,n,r,i){const{joins:s,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var u;const c=(u=t[a])!==null&&u!==void 0?u:[];if(t[a]=this.cloneDeep(l),c.length>0){const f=t[a].map(m=>m.presence_ref),p=c.filter(m=>f.indexOf(m.presence_ref)<0);t[a].unshift(...p)}r(a,c,l)}),this.map(o,(a,l)=>{let u=t[a];if(!u)return;const c=l.map(f=>f.presence_ref);u=u.filter(f=>c.indexOf(f.presence_ref)<0),t[a]=u,i(a,u,l),u.length===0&&delete t[a]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const i=t[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Pw;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Pw||(Pw={}));var Nl;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Nl||(Nl={}));var ri;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ri||(ri={}));class Ay{constructor(t,n={config:{}},r){var i,s;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Ut.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Qh(this,xr.join,this.params,this.timeout),this.rejoinTimer=new LS(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ut.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ut.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Ut.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ut.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Ut.errored,this.rejoinTimer.scheduleTimeout())}),this._on(xr.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Dl(this),this.broadcastEndpointURL=MS(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Ut.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,u=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(m=>m.filter))!==null&&i!==void 0?i:[],c=!!this.bindings[Nl.PRESENCE]&&this.bindings[Nl.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,f={},p={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:c}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(ri.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(ri.CLOSED)),this.updateJoinPayload(Object.assign({config:p},f)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:m})=>{var w;if(this.socket.setAuth(),m===void 0){t==null||t(ri.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,x=(w=v==null?void 0:v.length)!==null&&w!==void 0?w:0,g=[];for(let y=0;y<x;y++){const _=v[y],{filter:{event:T,schema:O,table:R,filter:I}}=_,$=m&&m[y];if($&&$.event===T&&$.schema===O&&$.table===R&&$.filter===I)g.push(Object.assign(Object.assign({},_),{id:$.id}));else{this.unsubscribe(),this.state=Ut.errored,t==null||t(ri.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,t&&t(ri.SUBSCRIBED);return}}).receive("error",m=>{this.state=Ut.errored,t==null||t(ri.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(ri.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===Ut.joined&&t===Nl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){const{event:s,payload:o}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("error",()=>s("error")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ut.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(xr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new Qh(this,xr.leave,{},t),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ut.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Qh(this,t,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Hj){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,s;const o=t.toLocaleLowerCase(),{close:a,error:l,leave:u,join:c}=xr;if(r&&[a,l,u,c].indexOf(o)>=0&&r!==this._joinRef())return;let p=this._onMessage(o,n,r);if(n&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(m=>{var w,v,x;return((w=m.filter)===null||w===void 0?void 0:w.event)==="*"||((x=(v=m.filter)===null||v===void 0?void 0:v.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===o}).map(m=>m.callback(p,r)):(s=this.bindings[o])===null||s===void 0||s.filter(m=>{var w,v,x,g,y,_;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const T=m.id,O=(w=m.filter)===null||w===void 0?void 0:w.event;return T&&((v=n.ids)===null||v===void 0?void 0:v.includes(T))&&(O==="*"||(O==null?void 0:O.toLocaleLowerCase())===((x=n.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const T=(y=(g=m==null?void 0:m.filter)===null||g===void 0?void 0:g.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return T==="*"||T===((_=n==null?void 0:n.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof p=="object"&&"ids"in p){const w=p.data,{schema:v,table:x,commit_timestamp:g,type:y,errors:_}=w;p=Object.assign(Object.assign({},{schema:v,table:x,commit_timestamp:g,eventType:y,new:{},old:{},errors:_}),this._getPayloadRecords(w))}m.callback(p,r)})}_isClosed(){return this.state===Ut.closed}_isJoined(){return this.state===Ut.joined}_isJoining(){return this.state===Ut.joining}_isLeaving(){return this.state===Ut.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const i=t.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&Ay.isEqual(i.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(xr.close,{},t)}_onError(t){this._on(xr.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ut.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Cw(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Cw(t.columns,t.old_record)),n}}const Yh=()=>{},Nc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},eO=[1e3,2e3,5e3,1e4],tO=1e4,nO=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class rO{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=xm,this.transport=null,this.heartbeatIntervalMs=Nc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Yh,this.ref=0,this.reconnectTimer=null,this.logger=Yh,this.conn=null,this.sendBuffer=[],this.serializer=new qj,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let s;return i?s=i:typeof fetch>"u"?s=(...o)=>$a(async()=>{const{default:a}=await Promise.resolve().then(()=>Ma);return{default:a}},void 0).then(({default:a})=>a(...o)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):s=fetch,(...o)=>s(...o)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Sm.websocket}`,this.httpEndpoint=MS(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Uj.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Kj}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Il.connecting:return $s.Connecting;case Il.open:return $s.Open;case Il.closing:return $s.Closing;default:return $s.Closed}}isConnected(){return this.connectionState()===$s.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new Ay(`realtime:${t}`,n,this);return this.channels.push(s),s}}push(t){const{topic:n,event:r,payload:i,ref:s}=t,o=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Wj,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Nc.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:s,ref:o}=n,a=o?`(${o})`:"",l=s.status||"";this.log("receive",`${l} ${r} ${i} ${a}`.trim(),s),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(i,s,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(xr.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${r}${i}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([nO],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:Vj};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(xr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new LS(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Nc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,i,s,o,a,l,u,c;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:xm,this.heartbeatIntervalMs=(i=t==null?void 0:t.heartbeatIntervalMs)!==null&&i!==void 0?i:Nc.HEARTBEAT_INTERVAL,this.worker=(s=t==null?void 0:t.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=t==null?void 0:t.heartbeatCallback)!==null&&a!==void 0?a:Yh,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=t==null?void 0:t.reconnectAfterMs)!==null&&l!==void 0?l:f=>eO[f-1]||tO,this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(f,p)=>p(JSON.stringify(f)),this.decode=(c=t==null?void 0:t.decode)!==null&&c!==void 0?c:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class jy extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function $t(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class iO extends jy{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Em extends jy{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var sO=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const FS=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>$a(async()=>{const{default:r}=await Promise.resolve().then(()=>Ma);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},oO=()=>sO(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield $a(()=>Promise.resolve().then(()=>Ma),void 0)).Response:Response}),Cm=e=>{if(Array.isArray(e))return e.map(n=>Cm(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));t[i]=Cm(r)}),t},aO=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var wo=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const Jh=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),lO=(e,t,n)=>wo(void 0,void 0,void 0,function*(){const r=yield oO();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(i=>{const s=e.status||500,o=(i==null?void 0:i.statusCode)||s+"";t(new iO(Jh(i),s,o))}).catch(i=>{t(new Em(Jh(i),i))}):t(new Em(Jh(e),e))}),uO=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?i:(aO(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(r)):i.body=r,t!=null&&t.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),n))};function Ru(e,t,n,r,i,s){return wo(this,void 0,void 0,function*(){return new Promise((o,a)=>{e(n,uO(t,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>lO(l,a,r))})})}function Fd(e,t,n,r){return wo(this,void 0,void 0,function*(){return Ru(e,"GET",t,n,r)})}function Fr(e,t,n,r,i){return wo(this,void 0,void 0,function*(){return Ru(e,"POST",t,r,i,n)})}function Tm(e,t,n,r,i){return wo(this,void 0,void 0,function*(){return Ru(e,"PUT",t,r,i,n)})}function cO(e,t,n,r){return wo(this,void 0,void 0,function*(){return Ru(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function BS(e,t,n,r,i){return wo(this,void 0,void 0,function*(){return Ru(e,"DELETE",t,r,i,n)})}var dO=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class fO{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return dO(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if($t(t))return{data:null,error:t};throw t}})}}var hO=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class pO{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}asStream(){return new fO(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.execute().then(t,n)}execute(){return hO(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if($t(t))return{data:null,error:t};throw t}})}}var kn=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const mO={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Aw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class gO{constructor(t,n={},r,i){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=r,this.fetch=FS(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,r,i){return kn(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},Aw),i);let a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(a=Object.assign(Object.assign({},a),i.headers));const u=this._removeEmptyFolders(n),c=this._getFinalPath(u),f=yield(t=="PUT"?Tm:Fr)(this.fetch,`${this.url}/object/${c}`,s,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($t(s))return{data:null,error:s};throw s}})}upload(t,n,r){return kn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,i){return kn(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(t),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const u=Object.assign({upsert:Aw.upsert},i),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const f=yield Tm(this.fetch,a.toString(),l,{headers:c});return{data:{path:s,fullPath:f.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if($t(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,n){return kn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const s=yield Fr(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new jy("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($t(r))return{data:null,error:r};throw r}})}update(t,n,r){return kn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return kn(this,void 0,void 0,function*(){try{return{data:yield Fr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if($t(i))return{data:null,error:i};throw i}})}copy(t,n,r){return kn(this,void 0,void 0,function*(){try{return{data:{path:(yield Fr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if($t(i))return{data:null,error:i};throw i}})}createSignedUrl(t,n,r){return kn(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),s=yield Fr(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if($t(i))return{data:null,error:i};throw i}})}createSignedUrls(t,n,r){return kn(this,void 0,void 0,function*(){try{const i=yield Fr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if($t(i))return{data:null,error:i};throw i}})}download(t,n){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=s?`?${s}`:"",a=this._getFinalPath(t),l=()=>Fd(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0});return new pO(l,this.shouldThrowOnError)}info(t){return kn(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield Fd(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Cm(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($t(r))return{data:null,error:r};throw r}})}exists(t){return kn(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield cO(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($t(r)&&r instanceof Em){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),i=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&i.push(s);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&i.push(l);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${u}`)}}}remove(t){return kn(this,void 0,void 0,function*(){try{return{data:yield BS(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($t(n))return{data:null,error:n};throw n}})}list(t,n,r){return kn(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},mO),n),{prefix:t||""});return{data:yield Fr(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if($t(i))return{data:null,error:i};throw i}})}listV2(t,n){return kn(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield Fr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($t(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const yO="2.74.0",vO={"X-Client-Info":`storage-js/${yO}`};var jo=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class wO{constructor(t,n={},r,i){this.shouldThrowOnError=!1;const s=new URL(t);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},vO),n),this.fetch=FS(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return jo(this,void 0,void 0,function*(){try{return{data:yield Fd(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if($t(t))return{data:null,error:t};throw t}})}getBucket(t){return jo(this,void 0,void 0,function*(){try{return{data:yield Fd(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($t(n))return{data:null,error:n};throw n}})}createBucket(t){return jo(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield Fr(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if($t(i))return{data:null,error:i};throw i}})}updateBucket(t,n){return jo(this,void 0,void 0,function*(){try{return{data:yield Tm(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($t(r))return{data:null,error:r};throw r}})}emptyBucket(t){return jo(this,void 0,void 0,function*(){try{return{data:yield Fr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($t(n))return{data:null,error:n};throw n}})}deleteBucket(t){return jo(this,void 0,void 0,function*(){try{return{data:yield BS(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($t(n))return{data:null,error:n};throw n}})}}class bO extends wO{constructor(t,n={},r,i){super(t,n,r,i)}from(t){return new gO(this.url,this.headers,t,this.fetch)}}const _O="2.74.0";let vl="";typeof Deno<"u"?vl="deno":typeof document<"u"?vl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?vl="react-native":vl="node";const xO={"X-Client-Info":`supabase-js-${vl}/${_O}`},SO={headers:xO},kO={schema:"public"},EO={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},CO={};var TO=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const PO=e=>{let t;return e?t=e:typeof fetch>"u"?t=ES:t=fetch,(...n)=>t(...n)},AO=()=>typeof Headers>"u"?CS:Headers,jO=(e,t,n)=>{const r=PO(n),i=AO();return(s,o)=>TO(void 0,void 0,void 0,function*(){var a;const l=(a=yield t())!==null&&a!==void 0?a:e;let u=new i(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(s,Object.assign(Object.assign({},o),{headers:u}))})};var OO=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};function RO(e){return e.endsWith("/")?e:e+"/"}function IO(e,t){var n,r;const{db:i,auth:s,realtime:o,global:a}=e,{db:l,auth:u,realtime:c,global:f}=t,p={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},u),s),realtime:Object.assign(Object.assign({},c),o),storage:{},global:Object.assign(Object.assign(Object.assign({},f),a),{headers:Object.assign(Object.assign({},(n=f==null?void 0:f.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>OO(this,void 0,void 0,function*(){return""})};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}function DO(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(RO(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const US="2.74.0",$o=30*1e3,Pm=3,Zh=Pm*$o,NO="http://localhost:9999",LO="supabase.auth.token",$O={"X-Client-Info":`gotrue-js/${US}`},Am="X-Supabase-Api-Version",zS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},MO=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,FO=10*60*1e3;class lu extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Ue(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class BO extends lu{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function UO(e){return Ue(e)&&e.name==="AuthApiError"}class Ms extends lu{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class ws extends lu{constructor(t,n,r,i){super(t,r,i),this.name=n,this.status=r}}class Di extends ws{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function zO(e){return Ue(e)&&e.name==="AuthSessionMissingError"}class Oo extends ws{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Lc extends ws{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class $c extends ws{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function VO(e){return Ue(e)&&e.name==="AuthImplicitGrantRedirectError"}class jw extends ws{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class jm extends ws{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Xh(e){return Ue(e)&&e.name==="AuthRetryableFetchError"}class Ow extends ws{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Om extends ws{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Bd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Rw=` 	
\r=`.split(""),KO=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Rw.length;t+=1)e[Rw[t].charCodeAt(0)]=-2;for(let t=0;t<Bd.length;t+=1)e[Bd[t].charCodeAt(0)]=t;return e})();function Iw(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Bd[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Bd[r]),t.queuedBits-=6}}function VS(e,t,n){const r=KO[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Dw(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{qO(o,r,n)};for(let o=0;o<e.length;o+=1)VS(e.charCodeAt(o),i,s);return t.join("")}function WO(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function HO(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}WO(r,t)}}function qO(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function la(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)VS(e.charCodeAt(i),n,r);return new Uint8Array(t)}function GO(e){const t=[];return HO(e,n=>t.push(n)),new Uint8Array(t)}function Vs(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};return e.forEach(i=>Iw(i,n,r)),Iw(null,n,r),t.join("")}function QO(e){return Math.round(Date.now()/1e3)+e}function YO(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Fn=()=>typeof window<"u"&&typeof document<"u",As={tested:!1,writable:!1},KS=()=>{if(!Fn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(As.tested)return As.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),As.tested=!0,As.writable=!0}catch{As.tested=!0,As.writable=!1}return As.writable};function JO(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{t[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{t[i]=r}),t}const WS=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>$a(async()=>{const{default:r}=await Promise.resolve().then(()=>Ma);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},ZO=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Mo=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},js=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ri=async(e,t)=>{await e.removeItem(t)};class Cf{constructor(){this.promise=new Cf.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Cf.promiseConstructor=Promise;function ep(e){const t=e.split(".");if(t.length!==3)throw new Om("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!MO.test(t[r]))throw new Om("JWT not in base64url format");return{header:JSON.parse(Dw(t[0])),payload:JSON.parse(Dw(t[1])),signature:la(t[2]),raw:{header:t[0],payload:t[1]}}}async function XO(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function eR(e,t){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await e(s);if(!t(s,null,o)){r(o);return}}catch(o){if(!t(s,o)){i(o);return}}})()})}function tR(e){return("0"+e.toString(16)).substr(-2)}function nR(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,tR).join("")}async function rR(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function iR(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await rR(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ro(e,t,n=!1){const r=nR();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await Mo(e,`${t}-code-verifier`,i);const s=await iR(r);return[s,r===s?"plain":"s256"]}const sR=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function oR(e){const t=e.headers.get(Am);if(!t||!t.match(sR))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function aR(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function lR(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const uR=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Io(e){if(!uR.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function tp(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Nw(e){return JSON.parse(JSON.stringify(e))}var cR=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Ds=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),dR=[502,503,504];async function Lw(e){var t;if(!ZO(e))throw new jm(Ds(e),0);if(dR.includes(e.status))throw new jm(Ds(e),e.status);let n;try{n=await e.json()}catch(s){throw new Ms(Ds(s),s)}let r;const i=oR(e);if(i&&i.getTime()>=zS["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Ow(Ds(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Di}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new Ow(Ds(n),e.status,n.weak_password.reasons);throw new BO(Ds(n),e.status||500,r)}const fR=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function Ge(e,t,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[Am]||(s[Am]=zS["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await hR(e,t,n+a,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function hR(e,t,n,r,i,s){const o=fR(t,r,i,s);let a;try{a=await e(n,Object.assign({},o))}catch(l){throw console.error(l),new jm(Ds(l),0)}if(a.ok||await Lw(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await Lw(l)}}function gr(e){var t;let n=null;gR(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=QO(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function $w(e){const t=gr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ui(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function pR(e){return{data:e,error:null}}function mR(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=e,o=cR(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Mw(e){return e}function gR(e){return e.access_token&&e.refresh_token&&e.expires_in}const np=["global","local","others"];var yR=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class vR{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=WS(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=np[0]){if(np.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${np.join(", ")}`);try{return await Ge(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ue(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await Ge(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ui})}catch(r){if(Ue(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=yR(t,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await Ge(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:mR,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Ue(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await Ge(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ui})}catch(n){if(Ue(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,i,s,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await Ge(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Mw});if(c.error)throw c.error;const f=await c.json(),p=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(w=>{const v=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(w.split(";")[1].split("=")[1]);u[`${x}Page`]=v}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(Ue(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Io(t);try{return await Ge(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ui})}catch(n){if(Ue(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Io(t);try{return await Ge(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Ui})}catch(r){if(Ue(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Io(t);try{return await Ge(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ui})}catch(r){if(Ue(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Io(t.userId);try{const{data:n,error:r}=await Ge(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(Ue(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Io(t.userId),Io(t.id);try{return{data:await Ge(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Ue(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,i,s,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await Ge(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Mw});if(c.error)throw c.error;const f=await c.json(),p=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(w=>{const v=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(w.split(";")[1].split("=")[1]);u[`${x}Page`]=v}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(Ue(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await Ge(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ue(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await Ge(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ue(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await Ge(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ue(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await Ge(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ue(n))return{data:null,error:n};throw n}}}function Fw(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Do={debug:!!(globalThis&&KS()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class HS extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class wR extends HS{}async function bR(e,t,n){Do.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Do.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Do.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{Do.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw Do.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new wR(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Do.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function _R(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function qS(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function xR(e){return parseInt(e,16)}function SR(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function kR(e){var t;const{chainId:n,domain:r,expirationTime:i,issuedAt:s=new Date,nonce:o,notBefore:a,requestId:l,resources:u,scheme:c,uri:f,version:p}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(p!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${p}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const m=qS(e.address),w=c?`${c}://${r}`:r,v=e.statement?`${e.statement}
`:"",x=`${w} wants you to sign in with your Ethereum account:
${m}

${v}`;let g=`URI: ${f}
Version: ${p}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${s.toISOString()}`;if(i&&(g+=`
Expiration Time: ${i.toISOString()}`),a&&(g+=`
Not Before: ${a.toISOString()}`),l&&(g+=`
Request ID: ${l}`),u){let y=`
Resources:`;for(const _ of u){if(!_||typeof _!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${_}`);y+=`
- ${_}`}g+=y}return`${x}
${g}`}class Lt extends Error{constructor({message:t,code:n,cause:r,name:i}){var s;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(s=i??(r instanceof Error?r.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=n}}class Ud extends Lt{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function ER({error:e,options:t}){var n,r,i;const{publicKey:s}=t;if(!s)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Lt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=s.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Lt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Lt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Lt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Lt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Lt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return s.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new Lt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Lt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(QS(o)){if(s.rp.id!==o)return new Lt({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Lt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new Lt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Lt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Lt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function CR({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Lt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Lt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(QS(r)){if(n.rpId!==r)return new Lt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Lt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Lt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Lt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var GS=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class TR{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const PR=new TR;function AR(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,i=GS(e,["challenge","user","excludeCredentials"]),s=la(t).buffer,o=Object.assign(Object.assign({},n),{id:la(n.id).buffer}),a=Object.assign(Object.assign({},i),{challenge:s,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const u=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},u),{id:la(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function jR(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=GS(e,["challenge","allowCredentials"]),i=la(t).buffer,s=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){s.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const a=n[o];s.allowCredentials[o]=Object.assign(Object.assign({},a),{id:la(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return s}function OR(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:Vs(new Uint8Array(e.response.attestationObject)),clientDataJSON:Vs(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function RR(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Vs(new Uint8Array(i.authenticatorData)),clientDataJSON:Vs(new Uint8Array(i.clientDataJSON)),signature:Vs(new Uint8Array(i.signature)),userHandle:i.userHandle?Vs(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function QS(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Bw(){var e,t;return!!(Fn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function IR(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Ud("Browser returned unexpected credential type",t)}:{data:null,error:new Ud("Empty credential response",t)}}catch(t){return{data:null,error:ER({error:t,options:e})}}}async function DR(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Ud("Browser returned unexpected credential type",t)}:{data:null,error:new Ud("Empty credential response",t)}}catch(t){return{data:null,error:CR({error:t,options:e})}}}const NR={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},LR={userVerification:"preferred",hints:["security-key"]};function zd(...e){const t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of e)if(i)for(const s in i){const o=i[s];if(o!==void 0)if(Array.isArray(o))r[s]=o;else if(n(o))r[s]=o;else if(t(o)){const a=r[s];t(a)?r[s]=zd(a,o):r[s]=zd(o)}else r[s]=o}return r}function $R(e,t){return zd(NR,e,t||{})}function MR(e,t){return zd(LR,e,t||{})}class FR{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:i},s){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!o)return{data:null,error:a};const l=i??PR.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${r}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=$R(o.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:c,error:f}=await IR({publicKey:u,signal:l});return c?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:c}},error:null}:{data:null,error:f}}case"request":{const u=MR(o.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:c,error:f}=await DR(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:l}));return c?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:c}},error:null}:{data:null,error:f}}}}catch(o){return Ue(o)?{data:null,error:o}:{data:null,error:new Ms("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}},s){if(!n)return{data:null,error:new lu("rpId is required for WebAuthn authentication")};try{if(!Bw())return{data:null,error:new Ms("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:s});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(o){return Ue(o)?{data:null,error:o}:{data:null,error:new Ms("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i},s){if(!n)return{data:null,error:new lu("rpId is required for WebAuthn registration")};try{if(!Bw())return{data:null,error:new Ms("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(c=>{var f;return(f=c.data)===null||f===void 0?void 0:f.all.find(p=>p.factor_type==="webauthn"&&p.friendly_name===t&&p.status!=="unverified")}).then(c=>c?this.client.mfa.unenroll({factorId:c==null?void 0:c.id}):void 0),{data:null,error:a};const{data:l,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:s});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:u}}catch(o){return Ue(o)?{data:null,error:o}:{data:null,error:new Ms("Unexpected error in register",o)}}}}_R();const BR={url:NO,storageKey:LO,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:$O,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Uw(e,t,n){return await n()}const No={};class uu{get jwks(){var t,n;return(n=(t=No[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){No[this.storageKey]=Object.assign(Object.assign({},No[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=No[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){No[this.storageKey]=Object.assign(Object.assign({},No[this.storageKey]),{cachedAt:t})}constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=uu.nextInstanceID,uu.nextInstanceID+=1,this.instanceID>0&&Fn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},BR),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new vR({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=WS(i.fetch),this.lock=i.lock||Uw,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Fn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=bR:this.lock=Uw,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new FR(this)},this.persistSession?(i.storage?this.storage=i.storage:KS()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Fw(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Fw(this.memoryStorage)),Fn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${US}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=JO(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Fn()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),VO(s)){const l=(t=s.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ue(n)?{error:n}:{error:new Ms("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,i;try{const s=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:gr}),{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(Ue(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(t){var n,r,i;try{let s;if("email"in t){const{email:c,password:f,options:p}=t;let m=null,w=null;this.flowType==="pkce"&&([m,w]=await Ro(this.storage,this.storageKey)),s=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:c,password:f,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:m,code_challenge_method:w},xform:gr})}else if("phone"in t){const{phone:c,password:f,options:p}=t;s=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:f,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},channel:(i=p==null?void 0:p.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:gr})}else throw new Lc("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(Ue(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(t){try{let n;if("email"in t){const{email:s,password:o,options:a}=t;n=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:$w})}else if("phone"in t){const{phone:s,password:o,options:a}=t;n=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:$w})}else throw new Lc("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Oo}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(Ue(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,i,s;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,i,s,o,a,l,u,c,f,p;let m,w;if("message"in t)m=t.message,w=t.signature;else{const{chain:v,wallet:x,statement:g,options:y}=t;let _;if(Fn())if(typeof x=="object")_=x;else{const U=window;if("ethereum"in U&&typeof U.ethereum=="object"&&"request"in U.ethereum&&typeof U.ethereum.request=="function")_=U.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=x}const T=new URL((n=y==null?void 0:y.url)!==null&&n!==void 0?n:window.location.href),O=await _.request({method:"eth_requestAccounts"}).then(U=>U).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!O||O.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const R=qS(O[0]);let I=(r=y==null?void 0:y.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!I){const U=await _.request({method:"eth_chainId"});I=xR(U)}const $={domain:T.host,address:R,statement:g,uri:T.href,version:"1",chainId:I,nonce:(i=y==null?void 0:y.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(s=y==null?void 0:y.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=y==null?void 0:y.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=y==null?void 0:y.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=y==null?void 0:y.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(c=y==null?void 0:y.signInWithEthereum)===null||c===void 0?void 0:c.resources};m=kR($),w=await _.request({method:"personal_sign",params:[SR(m),R]})}try{const{data:v,error:x}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:w},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:gr});if(x)throw x;return!v||!v.session||!v.user?{data:{user:null,session:null},error:new Oo}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),{data:Object.assign({},v),error:x})}catch(v){if(Ue(v))return{data:{user:null,session:null},error:v};throw v}}async signInWithSolana(t){var n,r,i,s,o,a,l,u,c,f,p,m;let w,v;if("message"in t)w=t.message,v=t.signature;else{const{chain:x,wallet:g,statement:y,options:_}=t;let T;if(Fn())if(typeof g=="object")T=g;else{const R=window;if("solana"in R&&typeof R.solana=="object"&&("signIn"in R.solana&&typeof R.solana.signIn=="function"||"signMessage"in R.solana&&typeof R.solana.signMessage=="function"))T=R.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");T=g}const O=new URL((n=_==null?void 0:_.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in T&&T.signIn){const R=await T.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_==null?void 0:_.signInWithSolana),{version:"1",domain:O.host,uri:O.href}),y?{statement:y}:null));let I;if(Array.isArray(R)&&R[0]&&typeof R[0]=="object")I=R[0];else if(R&&typeof R=="object"&&"signedMessage"in R&&"signature"in R)I=R;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in I&&"signature"in I&&(typeof I.signedMessage=="string"||I.signedMessage instanceof Uint8Array)&&I.signature instanceof Uint8Array)w=typeof I.signedMessage=="string"?I.signedMessage:new TextDecoder().decode(I.signedMessage),v=I.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in T)||typeof T.signMessage!="function"||!("publicKey"in T)||typeof T!="object"||!T.publicKey||!("toBase58"in T.publicKey)||typeof T.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${O.host} wants you to sign in with your Solana account:`,T.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${O.href}`,`Issued At: ${(i=(r=_==null?void 0:_.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=_==null?void 0:_.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((o=_==null?void 0:_.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((a=_==null?void 0:_.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((l=_==null?void 0:_.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((u=_==null?void 0:_.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((f=(c=_==null?void 0:_.signInWithSolana)===null||c===void 0?void 0:c.resources)===null||f===void 0)&&f.length?["Resources",..._.signInWithSolana.resources.map(I=>`- ${I}`)]:[]].join(`
`);const R=await T.signMessage(new TextEncoder().encode(w),"utf8");if(!R||!(R instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=R}}try{const{data:x,error:g}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:Vs(v)},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:gr});if(g)throw g;return!x||!x.session||!x.user?{data:{user:null,session:null},error:new Oo}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:Object.assign({},x),error:g})}catch(x){if(Ue(x))return{data:{user:null,session:null},error:x};throw x}}async _exchangeCodeForSession(t){const n=await js(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:s,error:o}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:gr});if(await Ri(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new Oo}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(Ue(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(t){try{const{options:n,provider:r,token:i,access_token:s,nonce:o}=t,a=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:gr}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Oo}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(n){if(Ue(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,i,s,o;try{if("email"in t){const{email:a,options:l}=t;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await Ro(this.storage,this.storageKey));const{error:f}=await Ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:a,options:l}=t,{data:u,error:c}=await Ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new Lc("You must provide either an email or phone number.")}catch(a){if(Ue(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(t){var n,r;try{let i,s;"options"in t&&(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo,s=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await Ge(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:gr});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(Ue(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var n,r,i;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await Ro(this.storage,this.storageKey)),await Ge(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:pR})}catch(s){if(Ue(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Di;const{error:i}=await Ge(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(Ue(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:i,options:s}=t,{error:o}=await Ge(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:r,type:i,options:s}=t,{data:o,error:a}=await Ge(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new Lc("You must provide either an email or phone number and a type")}catch(n){if(Ue(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await js(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<Zh:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await js(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=tp()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(l,u,c)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,c))})}return{data:{session:t},error:null}}const{data:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ui}):await this._useSession(async n=>{var r,i,s;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Di}:await Ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Ui})})}catch(n){if(Ue(n))return zO(n)&&(await this._removeSession(),await Ri(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new Di;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await Ro(this.storage,this.storageKey));const{data:u,error:c}=await Ge(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Ui});if(c)throw c;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(Ue(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Di;const n=Date.now()/1e3;let r=n,i=!0,s=null;const{payload:o}=ep(t.access_token);if(o.exp&&(r=o.exp,i=r<=n),i){const{data:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;s={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(Ue(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:a}=n;if(a)throw a;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Di;const{data:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Ue(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!Fn())throw new $c("No browser detected.");if(t.error||t.error_description||t.error_code)throw new $c(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new jw("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new $c("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new jw("No code detected.");const{data:y,error:_}=await this._exchangeCodeForSession(t.code);if(_)throw _;const T=new URL(window.location.href);return T.searchParams.delete("code"),window.history.replaceState(window.history.state,"",T.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=t;if(!s||!a||!o||!u)throw new $c("No session defined in URL");const c=Math.round(Date.now()/1e3),f=parseInt(a);let p=c+f;l&&(p=parseInt(l));const m=p-c;m*1e3<=$o&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const w=p-f;c-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,p,c):c-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,p,c);const{data:v,error:x}=await this._getUser(s);if(x)throw x;const g={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:f,expires_at:p,refresh_token:o,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:t.type},error:null}}catch(r){if(Ue(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await js(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{error:s};const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,t);if(a&&!(UO(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return t!=="others"&&(await this._removeSession(),await Ri(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=YO(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}})}async resetPasswordForEmail(t,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Ro(this.storage,this.storageKey,!0));try{return await Ge(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(Ue(s))return{data:null,error:s};throw s}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(Ue(n))return{data:null,error:n};throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var o,a,l,u,c;const{data:f,error:p}=s;if(p)throw p;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Ge(this.fetch,"GET",m,{headers:this.headers,jwt:(c=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(i)throw i;return Fn()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Ue(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:s}}=n;if(i)throw i;const{options:o,provider:a,token:l,access_token:u,nonce:c}=t,f=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=s==null?void 0:s.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:l,access_token:u,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:gr}),{data:p,error:m}=f;return m?{data:{user:null,session:null},error:m}:!p||!p.session||!p.user?{data:{user:null,session:null},error:new Oo}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("USER_UPDATED",p.session)),{data:p,error:m})}catch(i){if(Ue(i))return{data:{user:null,session:null},error:i};throw i}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)throw o;return await Ge(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(Ue(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await eR(async i=>(i>0&&await XO(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await Ge(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:gr})),(i,s)=>{const o=200*Math.pow(2,i);return s&&Xh(s)&&Date.now()+o-r<$o})}catch(r){if(this._debug(n,"error",r),Ue(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Fn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await js(this.storage,this.storageKey);if(i&&this.userStorage){let o=await js(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await Mo(this.userStorage,this.storageKey+"-user",o)),i.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:tp()}else if(i&&!i.user&&!i.user){const o=await js(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await Ri(this.storage,this.storageKey+"-user"),await Mo(this.storage,this.storageKey,i)):i.user=tp()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Zh;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${Zh}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),Xh(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(i.access_token);!a&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Di;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Cf;const{data:s,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!s.session)throw new Di;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={data:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),Ue(s)){const o={data:null,error:s};return Xh(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,n,r=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,n)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Mo(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const s=Nw(i);await Mo(this.storage,this.storageKey,s)}else{const i=Nw(n);await Mo(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Ri(this.storage,this.storageKey),await Ri(this.storage,this.storageKey+"-code-verifier"),await Ri(this.storage,this.storageKey+"-user"),this.userStorage&&await Ri(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Fn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),$o);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-t)/$o);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${$o}ms, refresh threshold is ${Pm} ticks`),i<=Pm&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof HS)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Fn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,o]=await Ro(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await Ge(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ue(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:l,error:u}=await Ge(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&l.type==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(Ue(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{data:null,error:s};const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?OR(t.webauthn.credential_response):RR(t.webauthn.credential_response)})}:{code:t.code}),{data:a,error:l}=await Ge(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(n){if(Ue(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{data:null,error:s};const o=await Ge(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:AR(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:jR(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Ue(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:i},error:s}=t;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=ep(i.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const c=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(a=>a.kid===t);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(a=>a.kid===t),r&&this.jwks_cached_at+FO>i)return r;const{data:s,error:o}=await Ge(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(a=>a.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:m,error:w}=await this.getSession();if(w||!m.session)return{data:null,error:w};r=m.session.access_token}const{header:i,payload:s,signature:o,raw:{header:a,payload:l}}=ep(r);n!=null&&n.allowExpired||aR(s.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:m}=await this.getUser(r);if(m)throw m;return{data:{claims:s,header:i,signature:o},error:null}}const c=lR(i.alg),f=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,f,o,GO(`${a}.${l}`)))throw new Om("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(r){if(Ue(r))return{data:null,error:r};throw r}}}uu.nextInstanceID=0;const UR=uu;class zR extends UR{constructor(t){super(t)}}var VR=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class KR{constructor(t,n,r){var i,s,o;this.supabaseUrl=t,this.supabaseKey=n;const a=DO(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,u={db:kO,realtime:CO,auth:Object.assign(Object.assign({},EO),{storageKey:l}),global:SO},c=IO(r??{},u);this.storageKey=(i=c.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=c.global.headers)!==null&&s!==void 0?s:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=c.auth)!==null&&o!==void 0?o:{},this.headers,c.global.fetch),this.fetch=jO(n,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.rest=new Bj(new URL("rest/v1",a).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new bO(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new vj(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return VR(this,void 0,void 0,function*(){var t,n;if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:s,storageKey:o,flowType:a,lock:l,debug:u},c,f){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new zR({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),c),storageKey:o,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:s,flowType:a,lock:l,debug:u,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new rO(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const WR=(e,t,n)=>new KR(e,t,n);function HR(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}HR()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const qR="https://"+kS+".supabase.co",GR="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJhZHRwb3F5cGdxZXRpanZvcGhvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDE3ODAwNjAsImV4cCI6MjA1NzM1NjA2MH0.dAIWitCyN4TVv3n4PTvhqJlUXsAGVSjOPm-L2jw818k",QR=qR,YR=GR,Qt=WR(QR,YR),Oy=E.createContext({session:null,setSession:()=>{},isLoading:!0}),JR=({children:e})=>{const[t,n]=E.useState(null),[r,i]=E.useState(!0);E.useEffect(()=>{Qt.auth.getSession().then(({data:{session:o}})=>{n(o),i(!1)}),Qt.auth.onAuthStateChange((o,a)=>{n(a)})},[]);const s={session:t,setSession:n,isLoading:r};return k.jsx(Oy.Provider,{value:s,children:e})},bs=()=>E.useContext(Oy),ZR=()=>{const[e,t]=E.useState(""),[n,r]=E.useState(""),[i,s]=E.useState(!1),[o,a]=E.useState(null),l=jr(),{setSession:u}=bs(),c=async f=>{f.preventDefault(),s(!0),a(null);try{const{data:{session:p},error:m}=await Qt.auth.signInWithPassword({email:e,password:n});if(m)a(m.message);else if(p){u(p);const w=sessionStorage.getItem("redirect_path");sessionStorage.removeItem("redirect_path"),l(w||"/categories",{replace:!0})}}catch(p){a(p.message||"An unexpected error occurred during login.")}finally{s(!1)}};return k.jsx("div",{className:"min-h-screen bg-gray-100 py-6 flex flex-col justify-center sm:py-12",children:k.jsxs("div",{className:"relative py-3 sm:max-w-xl sm:mx-auto",children:[k.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-300 to-blue-600 shadow-lg transform -skew-y-6 sm:skew-x-6 sm:rounded-3xl"}),k.jsx("div",{className:"relative bg-white px-4 py-10 shadow-lg sm:rounded-3xl sm:px-20",children:k.jsxs("div",{className:"max-w-md mx-auto",children:[k.jsxs("div",{className:"text-center",children:[k.jsx("h2",{className:"text-3xl font-extrabold text-gray-900",children:"Login"}),k.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"-------------"})]}),k.jsx("div",{children:o&&k.jsx("p",{className:"text-red-500",children:o})}),k.jsxs("div",{className:"divide-y divide-gray-200",children:[k.jsx("form",{onSubmit:c,children:k.jsxs("div",{className:"py-8 text-base leading-6 space-y-4 text-gray-700 sm:text-lg sm:leading-7",children:[k.jsxs("div",{className:"relative",children:[k.jsx("input",{autoComplete:"off",id:"email",name:"email",type:"email",value:e,onChange:f=>t(f.target.value),required:!0,className:"peer w-full min-h-[1em] rounded-md border-2 border-gray-200 px-3 py-2 font-sans text-gray-500 transition-all placeholder-shown:border-gray-200 focus:border-blue-500 focus:outline-none",placeholder:"Email address"}),k.jsx("label",{htmlFor:"email",className:"peer-placeholder-shown:h-[28px] peer-placeholder-shown:text-gray-500 absolute top-0 left-3 -translate-y-1/2 bg-white px-2 text-sm font-bold text-blue-500 transition-all peer-focus:-translate-y-1/2 peer-focus:text-blue-500",children:"Email address"})]}),k.jsxs("div",{className:"relative",children:[k.jsx("input",{autoComplete:"off",id:"password",name:"password",type:"password",value:n,onChange:f=>r(f.target.value),required:!0,className:"peer w-full min-h-[1em] rounded-md border-2 border-gray-200 px-3 py-2 font-sans text-gray-500 transition-all placeholder-shown:border-gray-200 focus:border-blue-500 focus:outline-none",placeholder:"Password"}),k.jsx("label",{htmlFor:"password",className:"peer-placeholder-shown:h-[28px] peer-placeholder-shown:text-gray-500 absolute top-0 left-3 -translate-y-1/2 bg-white px-2 text-sm font-bold text-blue-500 transition-all peer-focus:-translate-y-1/2 peer-focus:text-blue-500",children:"Password"})]}),k.jsx("div",{className:"relative",children:k.jsx("button",{type:"submit",className:"w-full rounded-md bg-blue-500 px-4 py-2 font-bold text-white shadow-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2",disabled:i,children:i?"Logging in...":"Login"})})]})}),k.jsxs("p",{children:["Don't have an account? ",k.jsx("button",{type:"button",onClick:()=>l("/signup"),children:"Sign Up"})]}),k.jsxs("p",{children:["Forgot your password? ",k.jsx("button",{type:"button",onClick:()=>l("/change-password"),children:"Change Password"})]})]})]})})]})})},XR=()=>{const[e,t]=E.useState(""),[n,r]=E.useState(""),[i,s]=E.useState(!1),[o,a]=E.useState(null),l=async u=>{u.preventDefault(),s(!0),a(null);try{const{error:c}=await Qt.auth.signUp({email:e,password:n});c?a(c.message):alert("Signup successful! Please check your email to confirm your account.")}catch(c){a(c.message||"An unexpected error occurred")}finally{s(!1)}};return k.jsxs("div",{children:[k.jsx("h2",{children:"Sign Up"}),o&&k.jsx("p",{style:{color:"red"},children:o}),k.jsxs("form",{onSubmit:l,children:[k.jsxs("div",{children:[k.jsx("label",{htmlFor:"email",children:"Email:"}),k.jsx("input",{type:"email",id:"email",value:e,onChange:u=>t(u.target.value),required:!0})]}),k.jsxs("div",{children:[k.jsx("label",{htmlFor:"password",children:"Password:"}),k.jsx("input",{type:"password",id:"password",value:n,onChange:u=>r(u.target.value),required:!0})]}),k.jsx("button",{type:"submit",disabled:i,children:i?"Signing up...":"Sign Up"})]})]})},eI=()=>{const[e,t]=E.useState(""),[n,r]=E.useState(!1),[i,s]=E.useState(null),[o,a]=E.useState(null),l=async u=>{u.preventDefault(),r(!0),s(null),a(null);try{const{error:c}=await Qt.auth.updateUser({password:e});c?s(c.message):(a("Password updated successfully!"),t(""))}catch(c){s(c.message||"An unexpected error occurred")}finally{r(!1)}};return k.jsxs("div",{children:[k.jsx("h2",{children:"Change Password"}),i&&k.jsx("p",{style:{color:"red"},children:i}),o&&k.jsx("p",{style:{color:"green"},children:o}),k.jsxs("form",{onSubmit:l,children:[k.jsxs("div",{children:[k.jsx("label",{htmlFor:"newPassword",children:"New Password:"}),k.jsx("input",{type:"password",id:"newPassword",value:e,onChange:u=>t(u.target.value),required:!0})]}),k.jsx("button",{type:"submit",disabled:n,children:n?"Updating password...":"Update Password"})]})]})},tI="auth_redirect_sankeertan",nI=()=>{const e=jr(),[t]=lj(),[n,r]=E.useState(!0),[i,s]=E.useState(null),{setSession:o}=E.useContext(Oy);return E.useEffect(()=>{const a=t.get("token"),l=t.get("type"),u=t.get("email"),c=async(f,p,m)=>{r(!0),s(null);try{let w;if(p==="invite"||p==="signup"||p==="email_change"||p==="magiclink"){const v=m;if(!v){s("Email address is missing from the authentication link."),r(!1),e("/login",{replace:!0});return}w=await Qt.auth.verifyOtp({token:f,type:p,email:v})}else if(p==="recover"){e(`/reset-password?token=${f}`,{replace:!0});return}else if(p==="sms"){const v=m;if(!v){s("Phone number is missing from the authentication link."),r(!1),e("/login",{replace:!0});return}w=await Qt.auth.verifyOtp({token:f,type:"sms",phone:v})}else{s(`Unsupported authentication type: ${p}`),r(!1),e("/login",{replace:!0});return}if(w!=null&&w.error)s(w.error.message);else{const{data:{session:v}}=await Qt.auth.getSession();v&&o(v),localStorage.setItem(tI,"true"),e("/",{replace:!0})}}catch(w){s(w.message||"An unexpected error occurred during authentication.")}finally{r(!1)}};a&&l?l==="recover"?c(a,l,""):l==="invite"||l==="signup"||l==="email_change"||l==="magiclink"?u?c(a,l,u):(s("Email address is missing from the authentication link."),r(!1),e("/login",{replace:!0})):c(a,l,""):(s("Invalid authentication link."),r(!1),e("/login",{replace:!0}))},[e,t,o]),n?k.jsx("div",{children:"Verifying your account..."}):i?k.jsxs("div",{children:["Error verifying account: ",i]}):null};var Iu=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},rI={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Ki,kg,U_,iI=(U_=class{constructor(){Ve(this,Ki,rI);Ve(this,kg,!1)}setTimeoutProvider(e){Ne(this,Ki,e)}setTimeout(e,t){return G(this,Ki).setTimeout(e,t)}clearTimeout(e){G(this,Ki).clearTimeout(e)}setInterval(e,t){return G(this,Ki).setInterval(e,t)}clearInterval(e){G(this,Ki).clearInterval(e)}},Ki=new WeakMap,kg=new WeakMap,U_),Ks=new iI;function sI(e){setTimeout(e,0)}var ho=typeof window>"u"||"Deno"in globalThis;function Tn(){}function oI(e,t){return typeof e=="function"?e(t):e}function Rm(e){return typeof e=="number"&&e>=0&&e!==1/0}function YS(e,t){return Math.max(e+(t||0)-Date.now(),0)}function cs(e,t){return typeof e=="function"?e(t):e}function er(e,t){return typeof e=="function"?e(t):e}function zw(e,t){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=e;if(o){if(r){if(t.queryHash!==Ry(o,t.options))return!1}else if(!du(t.queryKey,o))return!1}if(n!=="all"){const l=t.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||i&&i!==t.state.fetchStatus||s&&!s(t))}function Vw(e,t){const{exact:n,status:r,predicate:i,mutationKey:s}=e;if(s){if(!t.options.mutationKey)return!1;if(n){if(cu(t.options.mutationKey)!==cu(s))return!1}else if(!du(t.options.mutationKey,s))return!1}return!(r&&t.state.status!==r||i&&!i(t))}function Ry(e,t){return((t==null?void 0:t.queryKeyHashFn)||cu)(e)}function cu(e){return JSON.stringify(e,(t,n)=>Dm(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function du(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>du(e[n],t[n])):!1}var aI=Object.prototype.hasOwnProperty;function JS(e,t){if(e===t)return e;const n=Kw(e)&&Kw(t);if(!n&&!(Dm(e)&&Dm(t)))return t;const i=(n?e:Object.keys(e)).length,s=n?t:Object.keys(t),o=s.length,a=n?new Array(o):{};let l=0;for(let u=0;u<o;u++){const c=n?u:s[u],f=e[c],p=t[c];if(f===p){a[c]=f,(n?u<i:aI.call(e,c))&&l++;continue}if(f===null||p===null||typeof f!="object"||typeof p!="object"){a[c]=p;continue}const m=JS(f,p);a[c]=m,m===f&&l++}return i===o&&l===i?e:a}function Im(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function Kw(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Dm(e){if(!Ww(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!Ww(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Ww(e){return Object.prototype.toString.call(e)==="[object Object]"}function lI(e){return new Promise(t=>{Ks.setTimeout(t,e)})}function Nm(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?JS(e,t):t}function uI(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function cI(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var Iy=Symbol();function ZS(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Iy?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function dI(e,t){return typeof e=="function"?e(...t):!!e}var Gs,Wi,ca,z_,fI=(z_=class extends Iu{constructor(){super();Ve(this,Gs);Ve(this,Wi);Ve(this,ca);Ne(this,ca,t=>{if(!ho&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){G(this,Wi)||this.setEventListener(G(this,ca))}onUnsubscribe(){var t;this.hasListeners()||((t=G(this,Wi))==null||t.call(this),Ne(this,Wi,void 0))}setEventListener(t){var n;Ne(this,ca,t),(n=G(this,Wi))==null||n.call(this),Ne(this,Wi,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){G(this,Gs)!==t&&(Ne(this,Gs,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof G(this,Gs)=="boolean"?G(this,Gs):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Gs=new WeakMap,Wi=new WeakMap,ca=new WeakMap,z_),Dy=new fI;function Lm(){let e,t;const n=new Promise((i,s)=>{e=i,t=s});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),e(i)},n.reject=i=>{r({status:"rejected",reason:i}),t(i)},n}var hI=sI;function pI(){let e=[],t=0,n=a=>{a()},r=a=>{a()},i=hI;const s=a=>{t?e.push(a):i(()=>{n(a)})},o=()=>{const a=e;e=[],a.length&&i(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;t++;try{l=a()}finally{t--,t||o()}return l},batchCalls:a=>(...l)=>{s(()=>{a(...l)})},schedule:s,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{i=a}}}var en=pI(),da,Hi,fa,V_,mI=(V_=class extends Iu{constructor(){super();Ve(this,da,!0);Ve(this,Hi);Ve(this,fa);Ne(this,fa,t=>{if(!ho&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){G(this,Hi)||this.setEventListener(G(this,fa))}onUnsubscribe(){var t;this.hasListeners()||((t=G(this,Hi))==null||t.call(this),Ne(this,Hi,void 0))}setEventListener(t){var n;Ne(this,fa,t),(n=G(this,Hi))==null||n.call(this),Ne(this,Hi,t(this.setOnline.bind(this)))}setOnline(t){G(this,da)!==t&&(Ne(this,da,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return G(this,da)}},da=new WeakMap,Hi=new WeakMap,fa=new WeakMap,V_),Vd=new mI;function gI(e){return Math.min(1e3*2**e,3e4)}function XS(e){return(e??"online")==="online"?Vd.isOnline():!0}var $m=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function ek(e){let t=!1,n=0,r;const i=Lm(),s=()=>i.status!=="pending",o=v=>{var x;if(!s()){const g=new $m(v);p(g),(x=e.onCancel)==null||x.call(e,g)}},a=()=>{t=!0},l=()=>{t=!1},u=()=>Dy.isFocused()&&(e.networkMode==="always"||Vd.isOnline())&&e.canRun(),c=()=>XS(e.networkMode)&&e.canRun(),f=v=>{s()||(r==null||r(),i.resolve(v))},p=v=>{s()||(r==null||r(),i.reject(v))},m=()=>new Promise(v=>{var x;r=g=>{(s()||u())&&v(g)},(x=e.onPause)==null||x.call(e)}).then(()=>{var v;r=void 0,s()||(v=e.onContinue)==null||v.call(e)}),w=()=>{if(s())return;let v;const x=n===0?e.initialPromise:void 0;try{v=x??e.fn()}catch(g){v=Promise.reject(g)}Promise.resolve(v).then(f).catch(g=>{var R;if(s())return;const y=e.retry??(ho?0:3),_=e.retryDelay??gI,T=typeof _=="function"?_(n,g):_,O=y===!0||typeof y=="number"&&n<y||typeof y=="function"&&y(n,g);if(t||!O){p(g);return}n++,(R=e.onFail)==null||R.call(e,n,g),lI(T).then(()=>u()?void 0:m()).then(()=>{t?p(g):w()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(r==null||r(),i),cancelRetry:a,continueRetry:l,canStart:c,start:()=>(c()?w():m().then(w),i)}}var Qs,K_,tk=(K_=class{constructor(){Ve(this,Qs)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Rm(this.gcTime)&&Ne(this,Qs,Ks.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(ho?1/0:5*60*1e3))}clearGcTimeout(){G(this,Qs)&&(Ks.clearTimeout(G(this,Qs)),Ne(this,Qs,void 0))}},Qs=new WeakMap,K_),Ys,ha,Xn,Js,qt,vu,Zs,wr,ti,W_,yI=(W_=class extends tk{constructor(t){super();Ve(this,wr);Ve(this,Ys);Ve(this,ha);Ve(this,Xn);Ve(this,Js);Ve(this,qt);Ve(this,vu);Ve(this,Zs);Ne(this,Zs,!1),Ne(this,vu,t.defaultOptions),this.setOptions(t.options),this.observers=[],Ne(this,Js,t.client),Ne(this,Xn,G(this,Js).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Ne(this,Ys,Hw(this.options)),this.state=t.state??G(this,Ys),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=G(this,qt))==null?void 0:t.promise}setOptions(t){if(this.options={...G(this,vu),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=Hw(this.options);n.data!==void 0&&(this.setData(n.data,{updatedAt:n.dataUpdatedAt,manual:!0}),Ne(this,Ys,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&G(this,Xn).remove(this)}setData(t,n){const r=Nm(this.state.data,t,this.options);return st(this,wr,ti).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){st(this,wr,ti).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,i;const n=(r=G(this,qt))==null?void 0:r.promise;return(i=G(this,qt))==null||i.cancel(t),n?n.then(Tn).catch(Tn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(G(this,Ys))}isActive(){return this.observers.some(t=>er(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Iy||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>cs(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!YS(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=G(this,qt))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=G(this,qt))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),G(this,Xn).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(G(this,qt)&&(G(this,Zs)?G(this,qt).cancel({revert:!0}):G(this,qt).cancelRetry()),this.scheduleGc()),G(this,Xn).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||st(this,wr,ti).call(this,{type:"invalidate"})}async fetch(t,n){var l,u,c,f,p,m,w,v,x,g,y,_;if(this.state.fetchStatus!=="idle"&&((l=G(this,qt))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(G(this,qt))return G(this,qt).continueRetry(),G(this,qt).promise}if(t&&this.setOptions(t),!this.options.queryFn){const T=this.observers.find(O=>O.options.queryFn);T&&this.setOptions(T.options)}const r=new AbortController,i=T=>{Object.defineProperty(T,"signal",{enumerable:!0,get:()=>(Ne(this,Zs,!0),r.signal)})},s=()=>{const T=ZS(this.options,n),R=(()=>{const I={client:G(this,Js),queryKey:this.queryKey,meta:this.meta};return i(I),I})();return Ne(this,Zs,!1),this.options.persister?this.options.persister(T,R,this):T(R)},a=(()=>{const T={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:G(this,Js),state:this.state,fetchFn:s};return i(T),T})();(u=this.options.behavior)==null||u.onFetch(a,this),Ne(this,ha,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((c=a.fetchOptions)==null?void 0:c.meta))&&st(this,wr,ti).call(this,{type:"fetch",meta:(f=a.fetchOptions)==null?void 0:f.meta}),Ne(this,qt,ek({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,onCancel:T=>{T instanceof $m&&T.revert&&this.setState({...G(this,ha),fetchStatus:"idle"}),r.abort()},onFail:(T,O)=>{st(this,wr,ti).call(this,{type:"failed",failureCount:T,error:O})},onPause:()=>{st(this,wr,ti).call(this,{type:"pause"})},onContinue:()=>{st(this,wr,ti).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const T=await G(this,qt).start();if(T===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(T),(m=(p=G(this,Xn).config).onSuccess)==null||m.call(p,T,this),(v=(w=G(this,Xn).config).onSettled)==null||v.call(w,T,this.state.error,this),T}catch(T){if(T instanceof $m){if(T.silent)return G(this,qt).promise;if(T.revert){if(this.state.data===void 0)throw T;return this.state.data}}throw st(this,wr,ti).call(this,{type:"error",error:T}),(g=(x=G(this,Xn).config).onError)==null||g.call(x,T,this),(_=(y=G(this,Xn).config).onSettled)==null||_.call(y,this.state.data,T,this),T}finally{this.scheduleGc()}}},Ys=new WeakMap,ha=new WeakMap,Xn=new WeakMap,Js=new WeakMap,qt=new WeakMap,vu=new WeakMap,Zs=new WeakMap,wr=new WeakSet,ti=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...nk(r.data,this.options),fetchMeta:t.meta??null};case"success":const i={...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Ne(this,ha,t.manual?i:void 0),i;case"error":const s=t.error;return{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),en.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),G(this,Xn).notify({query:this,type:"updated",action:t})})},W_);function nk(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:XS(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Hw(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var En,ot,wu,gn,Xs,pa,si,qi,bu,ma,ga,eo,to,Gi,ya,ct,wl,Mm,Fm,Bm,Um,zm,Vm,Km,rk,H_,vI=(H_=class extends Iu{constructor(t,n){super();Ve(this,ct);Ve(this,En);Ve(this,ot);Ve(this,wu);Ve(this,gn);Ve(this,Xs);Ve(this,pa);Ve(this,si);Ve(this,qi);Ve(this,bu);Ve(this,ma);Ve(this,ga);Ve(this,eo);Ve(this,to);Ve(this,Gi);Ve(this,ya,new Set);this.options=n,Ne(this,En,t),Ne(this,qi,null),Ne(this,si,Lm()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(G(this,ot).addObserver(this),qw(G(this,ot),this.options)?st(this,ct,wl).call(this):this.updateResult(),st(this,ct,Um).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Wm(G(this,ot),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Wm(G(this,ot),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,st(this,ct,zm).call(this),st(this,ct,Vm).call(this),G(this,ot).removeObserver(this)}setOptions(t){const n=this.options,r=G(this,ot);if(this.options=G(this,En).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof er(this.options.enabled,G(this,ot))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");st(this,ct,Km).call(this),G(this,ot).setOptions(this.options),n._defaulted&&!Im(this.options,n)&&G(this,En).getQueryCache().notify({type:"observerOptionsUpdated",query:G(this,ot),observer:this});const i=this.hasListeners();i&&Gw(G(this,ot),r,this.options,n)&&st(this,ct,wl).call(this),this.updateResult(),i&&(G(this,ot)!==r||er(this.options.enabled,G(this,ot))!==er(n.enabled,G(this,ot))||cs(this.options.staleTime,G(this,ot))!==cs(n.staleTime,G(this,ot)))&&st(this,ct,Mm).call(this);const s=st(this,ct,Fm).call(this);i&&(G(this,ot)!==r||er(this.options.enabled,G(this,ot))!==er(n.enabled,G(this,ot))||s!==G(this,Gi))&&st(this,ct,Bm).call(this,s)}getOptimisticResult(t){const n=G(this,En).getQueryCache().build(G(this,En),t),r=this.createResult(n,t);return bI(this,r)&&(Ne(this,gn,r),Ne(this,pa,this.options),Ne(this,Xs,G(this,ot).state)),r}getCurrentResult(){return G(this,gn)}trackResult(t,n){return new Proxy(t,{get:(r,i)=>(this.trackProp(i),n==null||n(i),i==="promise"&&!this.options.experimental_prefetchInRender&&G(this,si).status==="pending"&&G(this,si).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(r,i))})}trackProp(t){G(this,ya).add(t)}getCurrentQuery(){return G(this,ot)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=G(this,En).defaultQueryOptions(t),r=G(this,En).getQueryCache().build(G(this,En),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return st(this,ct,wl).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),G(this,gn)))}createResult(t,n){var U;const r=G(this,ot),i=this.options,s=G(this,gn),o=G(this,Xs),a=G(this,pa),u=t!==r?t.state:G(this,wu),{state:c}=t;let f={...c},p=!1,m;if(n._optimisticResults){const V=this.hasListeners(),ge=!V&&qw(t,n),M=V&&Gw(t,r,n,i);(ge||M)&&(f={...f,...nk(c.data,t.options)}),n._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:w,errorUpdatedAt:v,status:x}=f;m=f.data;let g=!1;if(n.placeholderData!==void 0&&m===void 0&&x==="pending"){let V;s!=null&&s.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(V=s.data,g=!0):V=typeof n.placeholderData=="function"?n.placeholderData((U=G(this,ga))==null?void 0:U.state.data,G(this,ga)):n.placeholderData,V!==void 0&&(x="success",m=Nm(s==null?void 0:s.data,V,n),p=!0)}if(n.select&&m!==void 0&&!g)if(s&&m===(o==null?void 0:o.data)&&n.select===G(this,bu))m=G(this,ma);else try{Ne(this,bu,n.select),m=n.select(m),m=Nm(s==null?void 0:s.data,m,n),Ne(this,ma,m),Ne(this,qi,null)}catch(V){Ne(this,qi,V)}G(this,qi)&&(w=G(this,qi),m=G(this,ma),v=Date.now(),x="error");const y=f.fetchStatus==="fetching",_=x==="pending",T=x==="error",O=_&&y,R=m!==void 0,$={status:x,fetchStatus:f.fetchStatus,isPending:_,isSuccess:x==="success",isError:T,isInitialLoading:O,isLoading:O,data:m,dataUpdatedAt:f.dataUpdatedAt,error:w,errorUpdatedAt:v,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:y,isRefetching:y&&!_,isLoadingError:T&&!R,isPaused:f.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:T&&R,isStale:Ny(t,n),refetch:this.refetch,promise:G(this,si),isEnabled:er(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const V=Y=>{$.status==="error"?Y.reject($.error):$.data!==void 0&&Y.resolve($.data)},ge=()=>{const Y=Ne(this,si,$.promise=Lm());V(Y)},M=G(this,si);switch(M.status){case"pending":t.queryHash===r.queryHash&&V(M);break;case"fulfilled":($.status==="error"||$.data!==M.value)&&ge();break;case"rejected":($.status!=="error"||$.error!==M.reason)&&ge();break}}return $}updateResult(){const t=G(this,gn),n=this.createResult(G(this,ot),this.options);if(Ne(this,Xs,G(this,ot).state),Ne(this,pa,this.options),G(this,Xs).data!==void 0&&Ne(this,ga,G(this,ot)),Im(n,t))return;Ne(this,gn,n);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:i}=this.options,s=typeof i=="function"?i():i;if(s==="all"||!s&&!G(this,ya).size)return!0;const o=new Set(s??G(this,ya));return this.options.throwOnError&&o.add("error"),Object.keys(G(this,gn)).some(a=>{const l=a;return G(this,gn)[l]!==t[l]&&o.has(l)})};st(this,ct,rk).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&st(this,ct,Um).call(this)}},En=new WeakMap,ot=new WeakMap,wu=new WeakMap,gn=new WeakMap,Xs=new WeakMap,pa=new WeakMap,si=new WeakMap,qi=new WeakMap,bu=new WeakMap,ma=new WeakMap,ga=new WeakMap,eo=new WeakMap,to=new WeakMap,Gi=new WeakMap,ya=new WeakMap,ct=new WeakSet,wl=function(t){st(this,ct,Km).call(this);let n=G(this,ot).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(Tn)),n},Mm=function(){st(this,ct,zm).call(this);const t=cs(this.options.staleTime,G(this,ot));if(ho||G(this,gn).isStale||!Rm(t))return;const r=YS(G(this,gn).dataUpdatedAt,t)+1;Ne(this,eo,Ks.setTimeout(()=>{G(this,gn).isStale||this.updateResult()},r))},Fm=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(G(this,ot)):this.options.refetchInterval)??!1},Bm=function(t){st(this,ct,Vm).call(this),Ne(this,Gi,t),!(ho||er(this.options.enabled,G(this,ot))===!1||!Rm(G(this,Gi))||G(this,Gi)===0)&&Ne(this,to,Ks.setInterval(()=>{(this.options.refetchIntervalInBackground||Dy.isFocused())&&st(this,ct,wl).call(this)},G(this,Gi)))},Um=function(){st(this,ct,Mm).call(this),st(this,ct,Bm).call(this,st(this,ct,Fm).call(this))},zm=function(){G(this,eo)&&(Ks.clearTimeout(G(this,eo)),Ne(this,eo,void 0))},Vm=function(){G(this,to)&&(Ks.clearInterval(G(this,to)),Ne(this,to,void 0))},Km=function(){const t=G(this,En).getQueryCache().build(G(this,En),this.options);if(t===G(this,ot))return;const n=G(this,ot);Ne(this,ot,t),Ne(this,wu,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},rk=function(t){en.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(G(this,gn))}),G(this,En).getQueryCache().notify({query:G(this,ot),type:"observerResultsUpdated"})})},H_);function wI(e,t){return er(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function qw(e,t){return wI(e,t)||e.state.data!==void 0&&Wm(e,t,t.refetchOnMount)}function Wm(e,t,n){if(er(t.enabled,e)!==!1&&cs(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&Ny(e,t)}return!1}function Gw(e,t,n,r){return(e!==t||er(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&Ny(e,n)}function Ny(e,t){return er(t.enabled,e)!==!1&&e.isStaleByTime(cs(t.staleTime,e))}function bI(e,t){return!Im(e.getCurrentResult(),t)}function Qw(e){return{onFetch:(t,n)=>{var c,f,p,m,w;const r=t.options,i=(p=(f=(c=t.fetchOptions)==null?void 0:c.meta)==null?void 0:f.fetchMore)==null?void 0:p.direction,s=((m=t.state.data)==null?void 0:m.pages)||[],o=((w=t.state.data)==null?void 0:w.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const u=async()=>{let v=!1;const x=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(t.signal.aborted?v=!0:t.signal.addEventListener("abort",()=>{v=!0}),t.signal)})},g=ZS(t.options,t.fetchOptions),y=async(_,T,O)=>{if(v)return Promise.reject();if(T==null&&_.pages.length)return Promise.resolve(_);const I=(()=>{const ge={client:t.client,queryKey:t.queryKey,pageParam:T,direction:O?"backward":"forward",meta:t.options.meta};return x(ge),ge})(),$=await g(I),{maxPages:U}=t.options,V=O?cI:uI;return{pages:V(_.pages,$,U),pageParams:V(_.pageParams,T,U)}};if(i&&s.length){const _=i==="backward",T=_?_I:Yw,O={pages:s,pageParams:o},R=T(r,O);a=await y(O,R,_)}else{const _=e??s.length;do{const T=l===0?o[0]??r.initialPageParam:Yw(r,a);if(l>0&&T==null)break;a=await y(a,T),l++}while(l<_)}return a};t.options.persister?t.fetchFn=()=>{var v,x;return(x=(v=t.options).persister)==null?void 0:x.call(v,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=u}}}function Yw(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function _I(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var _u,Br,yn,no,Ur,Ni,q_,xI=(q_=class extends tk{constructor(t){super();Ve(this,Ur);Ve(this,_u);Ve(this,Br);Ve(this,yn);Ve(this,no);Ne(this,_u,t.client),this.mutationId=t.mutationId,Ne(this,yn,t.mutationCache),Ne(this,Br,[]),this.state=t.state||SI(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){G(this,Br).includes(t)||(G(this,Br).push(t),this.clearGcTimeout(),G(this,yn).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Ne(this,Br,G(this,Br).filter(n=>n!==t)),this.scheduleGc(),G(this,yn).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){G(this,Br).length||(this.state.status==="pending"?this.scheduleGc():G(this,yn).remove(this))}continue(){var t;return((t=G(this,no))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,a,l,u,c,f,p,m,w,v,x,g,y,_,T,O,R,I,$,U;const n=()=>{st(this,Ur,Ni).call(this,{type:"continue"})},r={client:G(this,_u),meta:this.options.meta,mutationKey:this.options.mutationKey};Ne(this,no,ek({fn:()=>this.options.mutationFn?this.options.mutationFn(t,r):Promise.reject(new Error("No mutationFn found")),onFail:(V,ge)=>{st(this,Ur,Ni).call(this,{type:"failed",failureCount:V,error:ge})},onPause:()=>{st(this,Ur,Ni).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>G(this,yn).canRun(this)}));const i=this.state.status==="pending",s=!G(this,no).canStart();try{if(i)n();else{st(this,Ur,Ni).call(this,{type:"pending",variables:t,isPaused:s}),await((a=(o=G(this,yn).config).onMutate)==null?void 0:a.call(o,t,this,r));const ge=await((u=(l=this.options).onMutate)==null?void 0:u.call(l,t,r));ge!==this.state.context&&st(this,Ur,Ni).call(this,{type:"pending",context:ge,variables:t,isPaused:s})}const V=await G(this,no).start();return await((f=(c=G(this,yn).config).onSuccess)==null?void 0:f.call(c,V,t,this.state.context,this,r)),await((m=(p=this.options).onSuccess)==null?void 0:m.call(p,V,t,this.state.context,r)),await((v=(w=G(this,yn).config).onSettled)==null?void 0:v.call(w,V,null,this.state.variables,this.state.context,this,r)),await((g=(x=this.options).onSettled)==null?void 0:g.call(x,V,null,t,this.state.context,r)),st(this,Ur,Ni).call(this,{type:"success",data:V}),V}catch(V){try{throw await((_=(y=G(this,yn).config).onError)==null?void 0:_.call(y,V,t,this.state.context,this,r)),await((O=(T=this.options).onError)==null?void 0:O.call(T,V,t,this.state.context,r)),await((I=(R=G(this,yn).config).onSettled)==null?void 0:I.call(R,void 0,V,this.state.variables,this.state.context,this,r)),await((U=($=this.options).onSettled)==null?void 0:U.call($,void 0,V,t,this.state.context,r)),V}finally{st(this,Ur,Ni).call(this,{type:"error",error:V})}}finally{G(this,yn).runNext(this)}}},_u=new WeakMap,Br=new WeakMap,yn=new WeakMap,no=new WeakMap,Ur=new WeakSet,Ni=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),en.batch(()=>{G(this,Br).forEach(r=>{r.onMutationUpdate(t)}),G(this,yn).notify({mutation:this,type:"updated",action:t})})},q_);function SI(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var oi,br,xu,G_,kI=(G_=class extends Iu{constructor(t={}){super();Ve(this,oi);Ve(this,br);Ve(this,xu);this.config=t,Ne(this,oi,new Set),Ne(this,br,new Map),Ne(this,xu,0)}build(t,n,r){const i=new xI({client:t,mutationCache:this,mutationId:++gc(this,xu)._,options:t.defaultMutationOptions(n),state:r});return this.add(i),i}add(t){G(this,oi).add(t);const n=Mc(t);if(typeof n=="string"){const r=G(this,br).get(n);r?r.push(t):G(this,br).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(G(this,oi).delete(t)){const n=Mc(t);if(typeof n=="string"){const r=G(this,br).get(n);if(r)if(r.length>1){const i=r.indexOf(t);i!==-1&&r.splice(i,1)}else r[0]===t&&G(this,br).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=Mc(t);if(typeof n=="string"){const r=G(this,br).get(n),i=r==null?void 0:r.find(s=>s.state.status==="pending");return!i||i===t}else return!0}runNext(t){var r;const n=Mc(t);if(typeof n=="string"){const i=(r=G(this,br).get(n))==null?void 0:r.find(s=>s!==t&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){en.batch(()=>{G(this,oi).forEach(t=>{this.notify({type:"removed",mutation:t})}),G(this,oi).clear(),G(this,br).clear()})}getAll(){return Array.from(G(this,oi))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>Vw(n,r))}findAll(t={}){return this.getAll().filter(n=>Vw(t,n))}notify(t){en.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return en.batch(()=>Promise.all(t.map(n=>n.continue().catch(Tn))))}},oi=new WeakMap,br=new WeakMap,xu=new WeakMap,G_);function Mc(e){var t;return(t=e.options.scope)==null?void 0:t.id}var zr,Q_,EI=(Q_=class extends Iu{constructor(t={}){super();Ve(this,zr);this.config=t,Ne(this,zr,new Map)}build(t,n,r){const i=n.queryKey,s=n.queryHash??Ry(i,n);let o=this.get(s);return o||(o=new yI({client:t,queryKey:i,queryHash:s,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(i)}),this.add(o)),o}add(t){G(this,zr).has(t.queryHash)||(G(this,zr).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=G(this,zr).get(t.queryHash);n&&(t.destroy(),n===t&&G(this,zr).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){en.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return G(this,zr).get(t)}getAll(){return[...G(this,zr).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>zw(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>zw(t,r)):n}notify(t){en.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){en.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){en.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},zr=new WeakMap,Q_),Pt,Qi,Yi,va,wa,Ji,ba,_a,Y_,CI=(Y_=class{constructor(e={}){Ve(this,Pt);Ve(this,Qi);Ve(this,Yi);Ve(this,va);Ve(this,wa);Ve(this,Ji);Ve(this,ba);Ve(this,_a);Ne(this,Pt,e.queryCache||new EI),Ne(this,Qi,e.mutationCache||new kI),Ne(this,Yi,e.defaultOptions||{}),Ne(this,va,new Map),Ne(this,wa,new Map),Ne(this,Ji,0)}mount(){gc(this,Ji)._++,G(this,Ji)===1&&(Ne(this,ba,Dy.subscribe(async e=>{e&&(await this.resumePausedMutations(),G(this,Pt).onFocus())})),Ne(this,_a,Vd.subscribe(async e=>{e&&(await this.resumePausedMutations(),G(this,Pt).onOnline())})))}unmount(){var e,t;gc(this,Ji)._--,G(this,Ji)===0&&((e=G(this,ba))==null||e.call(this),Ne(this,ba,void 0),(t=G(this,_a))==null||t.call(this),Ne(this,_a,void 0))}isFetching(e){return G(this,Pt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return G(this,Qi).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=G(this,Pt).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=G(this,Pt).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(cs(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return G(this,Pt).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),i=G(this,Pt).get(r.queryHash),s=i==null?void 0:i.state.data,o=oI(t,s);if(o!==void 0)return G(this,Pt).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return en.batch(()=>G(this,Pt).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=G(this,Pt).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=G(this,Pt);en.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=G(this,Pt);return en.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=en.batch(()=>G(this,Pt).findAll(e).map(i=>i.cancel(n)));return Promise.all(r).then(Tn).catch(Tn)}invalidateQueries(e,t={}){return en.batch(()=>(G(this,Pt).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=en.batch(()=>G(this,Pt).findAll(e).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(Tn)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(Tn)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=G(this,Pt).build(this,t);return n.isStaleByTime(cs(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Tn).catch(Tn)}fetchInfiniteQuery(e){return e.behavior=Qw(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Tn).catch(Tn)}ensureInfiniteQueryData(e){return e.behavior=Qw(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Vd.isOnline()?G(this,Qi).resumePausedMutations():Promise.resolve()}getQueryCache(){return G(this,Pt)}getMutationCache(){return G(this,Qi)}getDefaultOptions(){return G(this,Yi)}setDefaultOptions(e){Ne(this,Yi,e)}setQueryDefaults(e,t){G(this,va).set(cu(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...G(this,va).values()],n={};return t.forEach(r=>{du(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){G(this,wa).set(cu(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...G(this,wa).values()],n={};return t.forEach(r=>{du(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...G(this,Yi).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Ry(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Iy&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...G(this,Yi).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){G(this,Pt).clear(),G(this,Qi).clear()}},Pt=new WeakMap,Qi=new WeakMap,Yi=new WeakMap,va=new WeakMap,wa=new WeakMap,Ji=new WeakMap,ba=new WeakMap,_a=new WeakMap,Y_),ik=E.createContext(void 0),Du=e=>{const t=E.useContext(ik);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},TI=({client:e,children:t})=>(E.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),k.jsx(ik.Provider,{value:e,children:t})),sk=E.createContext(!1),PI=()=>E.useContext(sk);sk.Provider;function AI(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var jI=E.createContext(AI()),OI=()=>E.useContext(jI),RI=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},II=e=>{E.useEffect(()=>{e.clearReset()},[e])},DI=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:i})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(i&&e.data===void 0||dI(n,[e.error,r])),NI=e=>{if(e.suspense){const n=i=>i==="static"?i:Math.max(i??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...i)=>n(r(...i)):n(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},LI=(e,t)=>e.isLoading&&e.isFetching&&!t,$I=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Jw=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function MI(e,t,n){var f,p,m,w,v;const r=PI(),i=OI(),s=Du(),o=s.defaultQueryOptions(e);(p=(f=s.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||p.call(f,o),o._optimisticResults=r?"isRestoring":"optimistic",NI(o),RI(o,i),II(i);const a=!s.getQueryCache().get(o.queryHash),[l]=E.useState(()=>new t(s,o)),u=l.getOptimisticResult(o),c=!r&&e.subscribed!==!1;if(E.useSyncExternalStore(E.useCallback(x=>{const g=c?l.subscribe(en.batchCalls(x)):Tn;return l.updateResult(),g},[l,c]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),E.useEffect(()=>{l.setOptions(o)},[o,l]),$I(o,u))throw Jw(o,l,i);if(DI({result:u,errorResetBoundary:i,throwOnError:o.throwOnError,query:s.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw u.error;if((w=(m=s.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||w.call(m,o,u),o.experimental_prefetchInRender&&!ho&&LI(u,r)){const x=a?Jw(o,l,i):(v=s.getQueryCache().get(o.queryHash))==null?void 0:v.promise;x==null||x.catch(Tn).finally(()=>{l.updateResult()})}return o.notifyOnChangeProps?u:l.trackResult(u)}function Tf(e,t){return MI(e,vI)}var ok={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Yt,function(){var n=function(d,h){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,S){b.__proto__=S}||function(b,S){for(var C in S)Object.prototype.hasOwnProperty.call(S,C)&&(b[C]=S[C])})(d,h)},r=function(){return(r=Object.assign||function(d){for(var h,b=1,S=arguments.length;b<S;b++)for(var C in h=arguments[b])Object.prototype.hasOwnProperty.call(h,C)&&(d[C]=h[C]);return d}).apply(this,arguments)};function i(d,h,b){for(var S,C=0,j=h.length;C<j;C++)!S&&C in h||((S=S||Array.prototype.slice.call(h,0,C))[C]=h[C]);return d.concat(S||Array.prototype.slice.call(h))}var s=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Yt,o=Object.keys,a=Array.isArray;function l(d,h){return typeof h!="object"||o(h).forEach(function(b){d[b]=h[b]}),d}typeof Promise>"u"||s.Promise||(s.Promise=Promise);var u=Object.getPrototypeOf,c={}.hasOwnProperty;function f(d,h){return c.call(d,h)}function p(d,h){typeof h=="function"&&(h=h(u(d))),(typeof Reflect>"u"?o:Reflect.ownKeys)(h).forEach(function(b){w(d,b,h[b])})}var m=Object.defineProperty;function w(d,h,b,S){m(d,h,l(b&&f(b,"get")&&typeof b.get=="function"?{get:b.get,set:b.set,configurable:!0}:{value:b,configurable:!0,writable:!0},S))}function v(d){return{from:function(h){return d.prototype=Object.create(h.prototype),w(d.prototype,"constructor",d),{extend:p.bind(null,d.prototype)}}}}var x=Object.getOwnPropertyDescriptor,g=[].slice;function y(d,h,b){return g.call(d,h,b)}function _(d,h){return h(d)}function T(d){if(!d)throw new Error("Assertion Failed")}function O(d){s.setImmediate?setImmediate(d):setTimeout(d,0)}function R(d,h){if(typeof h=="string"&&f(d,h))return d[h];if(!h)return d;if(typeof h!="string"){for(var b=[],S=0,C=h.length;S<C;++S){var j=R(d,h[S]);b.push(j)}return b}var D=h.indexOf(".");if(D!==-1){var B=d[h.substr(0,D)];return B==null?void 0:R(B,h.substr(D+1))}}function I(d,h,b){if(d&&h!==void 0&&!("isFrozen"in Object&&Object.isFrozen(d)))if(typeof h!="string"&&"length"in h){T(typeof b!="string"&&"length"in b);for(var S=0,C=h.length;S<C;++S)I(d,h[S],b[S])}else{var j,D,B=h.indexOf(".");B!==-1?(j=h.substr(0,B),(D=h.substr(B+1))===""?b===void 0?a(d)&&!isNaN(parseInt(j))?d.splice(j,1):delete d[j]:d[j]=b:I(B=!(B=d[j])||!f(d,j)?d[j]={}:B,D,b)):b===void 0?a(d)&&!isNaN(parseInt(h))?d.splice(h,1):delete d[h]:d[h]=b}}function $(d){var h,b={};for(h in d)f(d,h)&&(b[h]=d[h]);return b}var U=[].concat;function V(d){return U.apply([],d)}var Me="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(V([8,16,32,64].map(function(d){return["Int","Uint","Float"].map(function(h){return h+d+"Array"})}))).filter(function(d){return s[d]}),ge=new Set(Me.map(function(d){return s[d]})),M=null;function Y(d){return M=new WeakMap,d=function h(b){if(!b||typeof b!="object")return b;var S=M.get(b);if(S)return S;if(a(b)){S=[],M.set(b,S);for(var C=0,j=b.length;C<j;++C)S.push(h(b[C]))}else if(ge.has(b.constructor))S=b;else{var D,B=u(b);for(D in S=B===Object.prototype?{}:Object.create(B),M.set(b,S),b)f(b,D)&&(S[D]=h(b[D]))}return S}(d),M=null,d}var P={}.toString;function te(d){return P.call(d).slice(8,-1)}var Ce=typeof Symbol<"u"?Symbol.iterator:"@@iterator",le=typeof Ce=="symbol"?function(d){var h;return d!=null&&(h=d[Ce])&&h.apply(d)}:function(){return null};function ue(d,h){return h=d.indexOf(h),0<=h&&d.splice(h,1),0<=h}var L={};function ie(d){var h,b,S,C;if(arguments.length===1){if(a(d))return d.slice();if(this===L&&typeof d=="string")return[d];if(C=le(d)){for(b=[];!(S=C.next()).done;)b.push(S.value);return b}if(d==null)return[d];if(typeof(h=d.length)!="number")return[d];for(b=new Array(h);h--;)b[h]=d[h];return b}for(h=arguments.length,b=new Array(h);h--;)b[h]=arguments[h];return b}var K=typeof Symbol<"u"?function(d){return d[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},xe=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Qn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(xe),W={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function me(d,h){this.name=d,this.message=h}function ce(d,h){return d+". Errors: "+Object.keys(h).map(function(b){return h[b].toString()}).filter(function(b,S,C){return C.indexOf(b)===S}).join(`
`)}function de(d,h,b,S){this.failures=h,this.failedKeys=S,this.successCount=b,this.message=ce(d,h)}function Be(d,h){this.name="BulkError",this.failures=Object.keys(h).map(function(b){return h[b]}),this.failuresByPos=h,this.message=ce(d,this.failures)}v(me).from(Error).extend({toString:function(){return this.name+": "+this.message}}),v(de).from(me),v(Be).from(me);var We=Qn.reduce(function(d,h){return d[h]=h+"Error",d},{}),Fe=me,be=Qn.reduce(function(d,h){var b=h+"Error";function S(C,j){this.name=b,C?typeof C=="string"?(this.message="".concat(C).concat(j?`
 `+j:""),this.inner=j||null):typeof C=="object"&&(this.message="".concat(C.name," ").concat(C.message),this.inner=C):(this.message=W[h]||b,this.inner=null)}return v(S).from(Fe),d[h]=S,d},{});be.Syntax=SyntaxError,be.Type=TypeError,be.Range=RangeError;var lt=xe.reduce(function(d,h){return d[h+"Error"]=be[h],d},{}),rt=Qn.reduce(function(d,h){return["Syntax","Type","Range"].indexOf(h)===-1&&(d[h+"Error"]=be[h]),d},{});function He(){}function Bt(d){return d}function A(d,h){return d==null||d===Bt?h:function(b){return h(d(b))}}function pe(d,h){return function(){d.apply(this,arguments),h.apply(this,arguments)}}function fe(d,h){return d===He?h:function(){var b=d.apply(this,arguments);b!==void 0&&(arguments[0]=b);var S=this.onsuccess,C=this.onerror;this.onsuccess=null,this.onerror=null;var j=h.apply(this,arguments);return S&&(this.onsuccess=this.onsuccess?pe(S,this.onsuccess):S),C&&(this.onerror=this.onerror?pe(C,this.onerror):C),j!==void 0?j:b}}function F(d,h){return d===He?h:function(){d.apply(this,arguments);var b=this.onsuccess,S=this.onerror;this.onsuccess=this.onerror=null,h.apply(this,arguments),b&&(this.onsuccess=this.onsuccess?pe(b,this.onsuccess):b),S&&(this.onerror=this.onerror?pe(S,this.onerror):S)}}function N(d,h){return d===He?h:function(b){var S=d.apply(this,arguments);l(b,S);var C=this.onsuccess,j=this.onerror;return this.onsuccess=null,this.onerror=null,b=h.apply(this,arguments),C&&(this.onsuccess=this.onsuccess?pe(C,this.onsuccess):C),j&&(this.onerror=this.onerror?pe(j,this.onerror):j),S===void 0?b===void 0?void 0:b:l(S,b)}}function ee(d,h){return d===He?h:function(){return h.apply(this,arguments)!==!1&&d.apply(this,arguments)}}function ye(d,h){return d===He?h:function(){var b=d.apply(this,arguments);if(b&&typeof b.then=="function"){for(var S=this,C=arguments.length,j=new Array(C);C--;)j[C]=arguments[C];return b.then(function(){return h.apply(S,j)})}return h.apply(this,arguments)}}rt.ModifyError=de,rt.DexieError=me,rt.BulkError=Be;var ve=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function oe(d){ve=d}var _e={},Re=100,Me=typeof Promise>"u"?[]:function(){var d=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[d,u(d),d];var h=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[h,u(h),d]}(),xe=Me[0],Qn=Me[1],Me=Me[2],Qn=Qn&&Qn.then,tt=xe&&xe.constructor,Je=!!Me,Ot=function(d,h){Or.push([d,h]),Ie&&(queueMicrotask(KC),Ie=!1)},qn=!0,Ie=!0,ze=[],Xe=[],Sn=Bt,pn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:He,pgp:!1,env:{},finalize:He},De=pn,Or=[],Gn=0,ki=[];function Te(d){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var h=this._PSD=De;if(typeof d!="function"){if(d!==_e)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&hr(this,this._value))}this._state=null,this._value=null,++h.ref,function b(S,C){try{C(function(j){if(S._state===null){if(j===S)throw new TypeError("A promise cannot be resolved with itself.");var D=S._lib&&_o();j&&typeof j.then=="function"?b(S,function(B,H){j instanceof Te?j._then(B,H):j.then(B,H)}):(S._state=!0,S._value=j,Pv(S)),D&&xo()}},hr.bind(null,S))}catch(j){hr(S,j)}}(this,d)}var Jr={get:function(){var d=De,h=Yu;function b(S,C){var j=this,D=!d.global&&(d!==De||h!==Yu),B=D&&!Ci(),H=new Te(function(q,X){Wf(j,new Rr(jv(S,d,D,B),jv(C,d,D,B),q,X,d))});return this._consoleTask&&(H._consoleTask=this._consoleTask),H}return b.prototype=_e,b},set:function(d){w(this,"then",d&&d.prototype===_e?Jr:{get:function(){return d},set:Jr.set})}};function Rr(d,h,b,S,C){this.onFulfilled=typeof d=="function"?d:null,this.onRejected=typeof h=="function"?h:null,this.resolve=b,this.reject=S,this.psd=C}function hr(d,h){var b,S;Xe.push(h),d._state===null&&(b=d._lib&&_o(),h=Sn(h),d._state=!1,d._value=h,S=d,ze.some(function(C){return C._value===S._value})||ze.push(S),Pv(d),b&&xo())}function Pv(d){var h=d._listeners;d._listeners=[];for(var b=0,S=h.length;b<S;++b)Wf(d,h[b]);var C=d._PSD;--C.ref||C.finalize(),Gn===0&&(++Gn,Ot(function(){--Gn==0&&Hf()},[]))}function Wf(d,h){if(d._state!==null){var b=d._state?h.onFulfilled:h.onRejected;if(b===null)return(d._state?h.resolve:h.reject)(d._value);++h.psd.ref,++Gn,Ot(VC,[b,d,h])}else d._listeners.push(h)}function VC(d,h,b){try{var S,C=h._value;!h._state&&Xe.length&&(Xe=[]),S=ve&&h._consoleTask?h._consoleTask.run(function(){return d(C)}):d(C),h._state||Xe.indexOf(C)!==-1||function(j){for(var D=ze.length;D;)if(ze[--D]._value===j._value)return ze.splice(D,1)}(h),b.resolve(S)}catch(j){b.reject(j)}finally{--Gn==0&&Hf(),--b.psd.ref||b.psd.finalize()}}function KC(){Ss(pn,function(){_o()&&xo()})}function _o(){var d=qn;return Ie=qn=!1,d}function xo(){var d,h,b;do for(;0<Or.length;)for(d=Or,Or=[],b=d.length,h=0;h<b;++h){var S=d[h];S[0].apply(null,S[1])}while(0<Or.length);Ie=qn=!0}function Hf(){var d=ze;ze=[],d.forEach(function(S){S._PSD.onunhandled.call(null,S._value,S)});for(var h=ki.slice(0),b=h.length;b;)h[--b]()}function qu(d){return new Te(_e,!1,d)}function vt(d,h){var b=De;return function(){var S=_o(),C=De;try{return Ti(b,!0),d.apply(this,arguments)}catch(j){h&&h(j)}finally{Ti(C,!1),S&&xo()}}}p(Te.prototype,{then:Jr,_then:function(d,h){Wf(this,new Rr(null,null,d,h,De))},catch:function(d){if(arguments.length===1)return this.then(null,d);var h=d,b=arguments[1];return typeof h=="function"?this.then(null,function(S){return(S instanceof h?b:qu)(S)}):this.then(null,function(S){return(S&&S.name===h?b:qu)(S)})},finally:function(d){return this.then(function(h){return Te.resolve(d()).then(function(){return h})},function(h){return Te.resolve(d()).then(function(){return qu(h)})})},timeout:function(d,h){var b=this;return d<1/0?new Te(function(S,C){var j=setTimeout(function(){return C(new be.Timeout(h))},d);b.then(S,C).finally(clearTimeout.bind(null,j))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&w(Te.prototype,Symbol.toStringTag,"Dexie.Promise"),pn.env=Av(),p(Te,{all:function(){var d=ie.apply(null,arguments).map(Ju);return new Te(function(h,b){d.length===0&&h([]);var S=d.length;d.forEach(function(C,j){return Te.resolve(C).then(function(D){d[j]=D,--S||h(d)},b)})})},resolve:function(d){return d instanceof Te?d:d&&typeof d.then=="function"?new Te(function(h,b){d.then(h,b)}):new Te(_e,!0,d)},reject:qu,race:function(){var d=ie.apply(null,arguments).map(Ju);return new Te(function(h,b){d.map(function(S){return Te.resolve(S).then(h,b)})})},PSD:{get:function(){return De},set:function(d){return De=d}},totalEchoes:{get:function(){return Yu}},newPSD:Ei,usePSD:Ss,scheduler:{get:function(){return Ot},set:function(d){Ot=d}},rejectionMapper:{get:function(){return Sn},set:function(d){Sn=d}},follow:function(d,h){return new Te(function(b,S){return Ei(function(C,j){var D=De;D.unhandleds=[],D.onunhandled=j,D.finalize=pe(function(){var B,H=this;B=function(){H.unhandleds.length===0?C():j(H.unhandleds[0])},ki.push(function q(){B(),ki.splice(ki.indexOf(q),1)}),++Gn,Ot(function(){--Gn==0&&Hf()},[])},D.finalize),d()},h,b,S)})}}),tt&&(tt.allSettled&&w(Te,"allSettled",function(){var d=ie.apply(null,arguments).map(Ju);return new Te(function(h){d.length===0&&h([]);var b=d.length,S=new Array(b);d.forEach(function(C,j){return Te.resolve(C).then(function(D){return S[j]={status:"fulfilled",value:D}},function(D){return S[j]={status:"rejected",reason:D}}).then(function(){return--b||h(S)})})})}),tt.any&&typeof AggregateError<"u"&&w(Te,"any",function(){var d=ie.apply(null,arguments).map(Ju);return new Te(function(h,b){d.length===0&&b(new AggregateError([]));var S=d.length,C=new Array(S);d.forEach(function(j,D){return Te.resolve(j).then(function(B){return h(B)},function(B){C[D]=B,--S||b(new AggregateError(C))})})})}),tt.withResolvers&&(Te.withResolvers=tt.withResolvers));var Wt={awaits:0,echoes:0,id:0},WC=0,Gu=[],Qu=0,Yu=0,HC=0;function Ei(d,h,b,S){var C=De,j=Object.create(C);return j.parent=C,j.ref=0,j.global=!1,j.id=++HC,pn.env,j.env=Je?{Promise:Te,PromiseProp:{value:Te,configurable:!0,writable:!0},all:Te.all,race:Te.race,allSettled:Te.allSettled,any:Te.any,resolve:Te.resolve,reject:Te.reject}:{},h&&l(j,h),++C.ref,j.finalize=function(){--this.parent.ref||this.parent.finalize()},S=Ss(j,d,b,S),j.ref===0&&j.finalize(),S}function So(){return Wt.id||(Wt.id=++WC),++Wt.awaits,Wt.echoes+=Re,Wt.id}function Ci(){return!!Wt.awaits&&(--Wt.awaits==0&&(Wt.id=0),Wt.echoes=Wt.awaits*Re,!0)}function Ju(d){return Wt.echoes&&d&&d.constructor===tt?(So(),d.then(function(h){return Ci(),h},function(h){return Ci(),Rt(h)})):d}function qC(){var d=Gu[Gu.length-1];Gu.pop(),Ti(d,!1)}function Ti(d,h){var b,S=De;(h?!Wt.echoes||Qu++&&d===De:!Qu||--Qu&&d===De)||queueMicrotask(h?(function(C){++Yu,Wt.echoes&&--Wt.echoes!=0||(Wt.echoes=Wt.awaits=Wt.id=0),Gu.push(De),Ti(C,!0)}).bind(null,d):qC),d!==De&&(De=d,S===pn&&(pn.env=Av()),Je&&(b=pn.env.Promise,h=d.env,(S.global||d.global)&&(Object.defineProperty(s,"Promise",h.PromiseProp),b.all=h.all,b.race=h.race,b.resolve=h.resolve,b.reject=h.reject,h.allSettled&&(b.allSettled=h.allSettled),h.any&&(b.any=h.any))))}function Av(){var d=s.Promise;return Je?{Promise:d,PromiseProp:Object.getOwnPropertyDescriptor(s,"Promise"),all:d.all,race:d.race,allSettled:d.allSettled,any:d.any,resolve:d.resolve,reject:d.reject}:{}}function Ss(d,h,b,S,C){var j=De;try{return Ti(d,!0),h(b,S,C)}finally{Ti(j,!1)}}function jv(d,h,b,S){return typeof d!="function"?d:function(){var C=De;b&&So(),Ti(h,!0);try{return d.apply(this,arguments)}finally{Ti(C,!1),S&&queueMicrotask(Ci)}}}function qf(d){Promise===tt&&Wt.echoes===0?Qu===0?d():enqueueNativeMicroTask(d):setTimeout(d,0)}(""+Qn).indexOf("[native code]")===-1&&(So=Ci=He);var Rt=Te.reject,ks="",Zr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ov="String expected.",ko=[],Zu="__dbnames",Gf="readonly",Qf="readwrite";function Es(d,h){return d?h?function(){return d.apply(this,arguments)&&h.apply(this,arguments)}:d:h}var Rv={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Xu(d){return typeof d!="string"||/\./.test(d)?function(h){return h}:function(h){return h[d]===void 0&&d in h&&delete(h=Y(h))[d],h}}function Iv(){throw be.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function it(d,h){try{var b=Dv(d),S=Dv(h);if(b!==S)return b==="Array"?1:S==="Array"?-1:b==="binary"?1:S==="binary"?-1:b==="string"?1:S==="string"?-1:b==="Date"?1:S!=="Date"?NaN:-1;switch(b){case"number":case"Date":case"string":return h<d?1:d<h?-1:0;case"binary":return function(C,j){for(var D=C.length,B=j.length,H=D<B?D:B,q=0;q<H;++q)if(C[q]!==j[q])return C[q]<j[q]?-1:1;return D===B?0:D<B?-1:1}(Nv(d),Nv(h));case"Array":return function(C,j){for(var D=C.length,B=j.length,H=D<B?D:B,q=0;q<H;++q){var X=it(C[q],j[q]);if(X!==0)return X}return D===B?0:D<B?-1:1}(d,h)}}catch{}return NaN}function Dv(d){var h=typeof d;return h!="object"?h:ArrayBuffer.isView(d)?"binary":(d=te(d),d==="ArrayBuffer"?"binary":d)}function Nv(d){return d instanceof Uint8Array?d:ArrayBuffer.isView(d)?new Uint8Array(d.buffer,d.byteOffset,d.byteLength):new Uint8Array(d)}function ec(d,h,b){var S=d.schema.yProps;return S?(h&&0<b.numFailures&&(h=h.filter(function(C,j){return!b.failures[j]})),Promise.all(S.map(function(C){return C=C.updatesTable,h?d.db.table(C).where("k").anyOf(h).delete():d.db.table(C).clear()})).then(function(){return b})):b}var Ka=(Lv.prototype.execute=function(d){var h=this["@@propmod"];if(h.add!==void 0){var b=h.add;if(a(b))return i(i([],a(d)?d:[],!0),b).sort();if(typeof b=="number")return(Number(d)||0)+b;if(typeof b=="bigint")try{return BigInt(d)+b}catch{return BigInt(0)+b}throw new TypeError("Invalid term ".concat(b))}if(h.remove!==void 0){var S=h.remove;if(a(S))return a(d)?d.filter(function(C){return!S.includes(C)}).sort():[];if(typeof S=="number")return Number(d)-S;if(typeof S=="bigint")try{return BigInt(d)-S}catch{return BigInt(0)-S}throw new TypeError("Invalid subtrahend ".concat(S))}return b=(b=h.replacePrefix)===null||b===void 0?void 0:b[0],b&&typeof d=="string"&&d.startsWith(b)?h.replacePrefix[1]+d.substring(b.length):d},Lv);function Lv(d){this["@@propmod"]=d}function $v(d,h){for(var b=o(h),S=b.length,C=!1,j=0;j<S;++j){var D=b[j],B=h[D],H=R(d,D);B instanceof Ka?(I(d,D,B.execute(H)),C=!0):H!==B&&(I(d,D,B),C=!0)}return C}var Mv=(ht.prototype._trans=function(d,h,b){var S=this._tx||De.trans,C=this.name,j=ve&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(d==="readonly"?"read":"write"," ").concat(this.name));function D(q,X,z){if(!z.schema[C])throw new be.NotFound("Table "+C+" not part of transaction");return h(z.idbtrans,z)}var B=_o();try{var H=S&&S.db._novip===this.db._novip?S===De.trans?S._promise(d,D,b):Ei(function(){return S._promise(d,D,b)},{trans:S,transless:De.transless||De}):function q(X,z,re,Q){if(X.idbdb&&(X._state.openComplete||De.letThrough||X._vip)){var J=X._createTransaction(z,re,X._dbSchema);try{J.create(),X._state.PR1398_maxLoop=3}catch(Z){return Z.name===We.InvalidState&&X.isOpen()&&0<--X._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),X.close({disableAutoOpen:!1}),X.open().then(function(){return q(X,z,re,Q)})):Rt(Z)}return J._promise(z,function(Z,ne){return Ei(function(){return De.trans=J,Q(Z,ne,J)})}).then(function(Z){if(z==="readwrite")try{J.idbtrans.commit()}catch{}return z==="readonly"?Z:J._completion.then(function(){return Z})})}if(X._state.openComplete)return Rt(new be.DatabaseClosed(X._state.dbOpenError));if(!X._state.isBeingOpened){if(!X._state.autoOpen)return Rt(new be.DatabaseClosed);X.open().catch(He)}return X._state.dbReadyPromise.then(function(){return q(X,z,re,Q)})}(this.db,d,[this.name],D);return j&&(H._consoleTask=j,H=H.catch(function(q){return console.trace(q),Rt(q)})),H}finally{B&&xo()}},ht.prototype.get=function(d,h){var b=this;return d&&d.constructor===Object?this.where(d).first(h):d==null?Rt(new be.Type("Invalid argument to Table.get()")):this._trans("readonly",function(S){return b.core.get({trans:S,key:d}).then(function(C){return b.hook.reading.fire(C)})}).then(h)},ht.prototype.where=function(d){if(typeof d=="string")return new this.db.WhereClause(this,d);if(a(d))return new this.db.WhereClause(this,"[".concat(d.join("+"),"]"));var h=o(d);if(h.length===1)return this.where(h[0]).equals(d[h[0]]);var b=this.schema.indexes.concat(this.schema.primKey).filter(function(B){if(B.compound&&h.every(function(q){return 0<=B.keyPath.indexOf(q)})){for(var H=0;H<h.length;++H)if(h.indexOf(B.keyPath[H])===-1)return!1;return!0}return!1}).sort(function(B,H){return B.keyPath.length-H.keyPath.length})[0];if(b&&this.db._maxKey!==ks){var j=b.keyPath.slice(0,h.length);return this.where(j).equals(j.map(function(H){return d[H]}))}!b&&ve&&console.warn("The query ".concat(JSON.stringify(d)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(h.join("+"),"]"));var S=this.schema.idxByName;function C(B,H){return it(B,H)===0}var D=h.reduce(function(z,H){var q=z[0],X=z[1],z=S[H],re=d[H];return[q||z,q||!z?Es(X,z&&z.multi?function(Q){return Q=R(Q,H),a(Q)&&Q.some(function(J){return C(re,J)})}:function(Q){return C(re,R(Q,H))}):X]},[null,null]),j=D[0],D=D[1];return j?this.where(j.name).equals(d[j.keyPath]).filter(D):b?this.filter(D):this.where(h).equals("")},ht.prototype.filter=function(d){return this.toCollection().and(d)},ht.prototype.count=function(d){return this.toCollection().count(d)},ht.prototype.offset=function(d){return this.toCollection().offset(d)},ht.prototype.limit=function(d){return this.toCollection().limit(d)},ht.prototype.each=function(d){return this.toCollection().each(d)},ht.prototype.toArray=function(d){return this.toCollection().toArray(d)},ht.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},ht.prototype.orderBy=function(d){return new this.db.Collection(new this.db.WhereClause(this,a(d)?"[".concat(d.join("+"),"]"):d))},ht.prototype.reverse=function(){return this.toCollection().reverse()},ht.prototype.mapToClass=function(d){var h,b=this.db,S=this.name;function C(){return h!==null&&h.apply(this,arguments)||this}(this.schema.mappedClass=d).prototype instanceof Iv&&(function(H,q){if(typeof q!="function"&&q!==null)throw new TypeError("Class extends value "+String(q)+" is not a constructor or null");function X(){this.constructor=H}n(H,q),H.prototype=q===null?Object.create(q):(X.prototype=q.prototype,new X)}(C,h=d),Object.defineProperty(C.prototype,"db",{get:function(){return b},enumerable:!1,configurable:!0}),C.prototype.table=function(){return S},d=C);for(var j=new Set,D=d.prototype;D;D=u(D))Object.getOwnPropertyNames(D).forEach(function(H){return j.add(H)});function B(H){if(!H)return H;var q,X=Object.create(d.prototype);for(q in H)if(!j.has(q))try{X[q]=H[q]}catch{}return X}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=B,this.hook("reading",B),d},ht.prototype.defineClass=function(){return this.mapToClass(function(d){l(this,d)})},ht.prototype.add=function(d,h){var b=this,S=this.schema.primKey,C=S.auto,j=S.keyPath,D=d;return j&&C&&(D=Xu(j)(d)),this._trans("readwrite",function(B){return b.core.mutate({trans:B,type:"add",keys:h!=null?[h]:null,values:[D]})}).then(function(B){return B.numFailures?Te.reject(B.failures[0]):B.lastResult}).then(function(B){if(j)try{I(d,j,B)}catch{}return B})},ht.prototype.upsert=function(d,h){var b=this,S=this.schema.primKey.keyPath;return this._trans("readwrite",function(C){return b.core.get({trans:C,key:d}).then(function(j){var D=j??{};return $v(D,h),S&&I(D,S,d),b.core.mutate({trans:C,type:"put",values:[D],keys:[d],upsert:!0,updates:{keys:[d],changeSpecs:[h]}}).then(function(B){return B.numFailures?Te.reject(B.failures[0]):!!j})})})},ht.prototype.update=function(d,h){return typeof d!="object"||a(d)?this.where(":id").equals(d).modify(h):(d=R(d,this.schema.primKey.keyPath),d===void 0?Rt(new be.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(d).modify(h))},ht.prototype.put=function(d,h){var b=this,S=this.schema.primKey,C=S.auto,j=S.keyPath,D=d;return j&&C&&(D=Xu(j)(d)),this._trans("readwrite",function(B){return b.core.mutate({trans:B,type:"put",values:[D],keys:h!=null?[h]:null})}).then(function(B){return B.numFailures?Te.reject(B.failures[0]):B.lastResult}).then(function(B){if(j)try{I(d,j,B)}catch{}return B})},ht.prototype.delete=function(d){var h=this;return this._trans("readwrite",function(b){return h.core.mutate({trans:b,type:"delete",keys:[d]}).then(function(S){return ec(h,[d],S)}).then(function(S){return S.numFailures?Te.reject(S.failures[0]):void 0})})},ht.prototype.clear=function(){var d=this;return this._trans("readwrite",function(h){return d.core.mutate({trans:h,type:"deleteRange",range:Rv}).then(function(b){return ec(d,null,b)})}).then(function(h){return h.numFailures?Te.reject(h.failures[0]):void 0})},ht.prototype.bulkGet=function(d){var h=this;return this._trans("readonly",function(b){return h.core.getMany({keys:d,trans:b}).then(function(S){return S.map(function(C){return h.hook.reading.fire(C)})})})},ht.prototype.bulkAdd=function(d,h,b){var S=this,C=Array.isArray(h)?h:void 0,j=(b=b||(C?void 0:h))?b.allKeys:void 0;return this._trans("readwrite",function(D){var q=S.schema.primKey,B=q.auto,q=q.keyPath;if(q&&C)throw new be.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(C&&C.length!==d.length)throw new be.InvalidArgument("Arguments objects and keys must have the same length");var H=d.length,q=q&&B?d.map(Xu(q)):d;return S.core.mutate({trans:D,type:"add",keys:C,values:q,wantResults:j}).then(function(J){var z=J.numFailures,re=J.results,Q=J.lastResult,J=J.failures;if(z===0)return j?re:Q;throw new Be("".concat(S.name,".bulkAdd(): ").concat(z," of ").concat(H," operations failed"),J)})})},ht.prototype.bulkPut=function(d,h,b){var S=this,C=Array.isArray(h)?h:void 0,j=(b=b||(C?void 0:h))?b.allKeys:void 0;return this._trans("readwrite",function(D){var q=S.schema.primKey,B=q.auto,q=q.keyPath;if(q&&C)throw new be.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(C&&C.length!==d.length)throw new be.InvalidArgument("Arguments objects and keys must have the same length");var H=d.length,q=q&&B?d.map(Xu(q)):d;return S.core.mutate({trans:D,type:"put",keys:C,values:q,wantResults:j}).then(function(J){var z=J.numFailures,re=J.results,Q=J.lastResult,J=J.failures;if(z===0)return j?re:Q;throw new Be("".concat(S.name,".bulkPut(): ").concat(z," of ").concat(H," operations failed"),J)})})},ht.prototype.bulkUpdate=function(d){var h=this,b=this.core,S=d.map(function(D){return D.key}),C=d.map(function(D){return D.changes}),j=[];return this._trans("readwrite",function(D){return b.getMany({trans:D,keys:S,cache:"clone"}).then(function(B){var H=[],q=[];d.forEach(function(z,re){var Q=z.key,J=z.changes,Z=B[re];if(Z){for(var ne=0,se=Object.keys(J);ne<se.length;ne++){var ae=se[ne],he=J[ae];if(ae===h.schema.primKey.keyPath){if(it(he,Q)!==0)throw new be.Constraint("Cannot update primary key in bulkUpdate()")}else I(Z,ae,he)}j.push(re),H.push(Q),q.push(Z)}});var X=H.length;return b.mutate({trans:D,type:"put",keys:H,values:q,updates:{keys:S,changeSpecs:C}}).then(function(z){var re=z.numFailures,Q=z.failures;if(re===0)return X;for(var J=0,Z=Object.keys(Q);J<Z.length;J++){var ne,se=Z[J],ae=j[Number(se)];ae!=null&&(ne=Q[se],delete Q[se],Q[ae]=ne)}throw new Be("".concat(h.name,".bulkUpdate(): ").concat(re," of ").concat(X," operations failed"),Q)})})})},ht.prototype.bulkDelete=function(d){var h=this,b=d.length;return this._trans("readwrite",function(S){return h.core.mutate({trans:S,type:"delete",keys:d}).then(function(C){return ec(h,d,C)})}).then(function(D){var C=D.numFailures,j=D.lastResult,D=D.failures;if(C===0)return j;throw new Be("".concat(h.name,".bulkDelete(): ").concat(C," of ").concat(b," operations failed"),D)})},ht);function ht(){}function Wa(d){function h(D,B){if(B){for(var H=arguments.length,q=new Array(H-1);--H;)q[H-1]=arguments[H];return b[D].subscribe.apply(null,q),d}if(typeof D=="string")return b[D]}var b={};h.addEventType=j;for(var S=1,C=arguments.length;S<C;++S)j(arguments[S]);return h;function j(D,B,H){if(typeof D!="object"){var q;B=B||ee;var X={subscribers:[],fire:H=H||He,subscribe:function(z){X.subscribers.indexOf(z)===-1&&(X.subscribers.push(z),X.fire=B(X.fire,z))},unsubscribe:function(z){X.subscribers=X.subscribers.filter(function(re){return re!==z}),X.fire=X.subscribers.reduce(B,H)}};return b[D]=h[D]=X}o(q=D).forEach(function(z){var re=q[z];if(a(re))j(z,q[z][0],q[z][1]);else{if(re!=="asap")throw new be.InvalidArgument("Invalid event config");var Q=j(z,Bt,function(){for(var J=arguments.length,Z=new Array(J);J--;)Z[J]=arguments[J];Q.subscribers.forEach(function(ne){O(function(){ne.apply(null,Z)})})})}})}}function Ha(d,h){return v(h).from({prototype:d}),h}function Eo(d,h){return!(d.filter||d.algorithm||d.or)&&(h?d.justLimit:!d.replayFilter)}function Yf(d,h){d.filter=Es(d.filter,h)}function Jf(d,h,b){var S=d.replayFilter;d.replayFilter=S?function(){return Es(S(),h())}:h,d.justLimit=b&&!S}function tc(d,h){if(d.isPrimKey)return h.primaryKey;var b=h.getIndexByKeyPath(d.index);if(!b)throw new be.Schema("KeyPath "+d.index+" on object store "+h.name+" is not indexed");return b}function Fv(d,h,b){var S=tc(d,h.schema);return h.openCursor({trans:b,values:!d.keysOnly,reverse:d.dir==="prev",unique:!!d.unique,query:{index:S,range:d.range}})}function nc(d,h,b,S){var C=d.replayFilter?Es(d.filter,d.replayFilter()):d.filter;if(d.or){var j={},D=function(B,H,q){var X,z;C&&!C(H,q,function(re){return H.stop(re)},function(re){return H.fail(re)})||((z=""+(X=H.primaryKey))=="[object ArrayBuffer]"&&(z=""+new Uint8Array(X)),f(j,z)||(j[z]=!0,h(B,H,q)))};return Promise.all([d.or._iterate(D,b),Bv(Fv(d,S,b),d.algorithm,D,!d.keysOnly&&d.valueMapper)])}return Bv(Fv(d,S,b),Es(d.algorithm,C),h,!d.keysOnly&&d.valueMapper)}function Bv(d,h,b,S){var C=vt(S?function(j,D,B){return b(S(j),D,B)}:b);return d.then(function(j){if(j)return j.start(function(){var D=function(){return j.continue()};h&&!h(j,function(B){return D=B},function(B){j.stop(B),D=He},function(B){j.fail(B),D=He})||C(j.value,j,function(B){return D=B}),D()})})}var GC=(ut.prototype._read=function(d,h){var b=this._ctx;return b.error?b.table._trans(null,Rt.bind(null,b.error)):b.table._trans("readonly",d).then(h)},ut.prototype._write=function(d){var h=this._ctx;return h.error?h.table._trans(null,Rt.bind(null,h.error)):h.table._trans("readwrite",d,"locked")},ut.prototype._addAlgorithm=function(d){var h=this._ctx;h.algorithm=Es(h.algorithm,d)},ut.prototype._iterate=function(d,h){return nc(this._ctx,d,h,this._ctx.table.core)},ut.prototype.clone=function(d){var h=Object.create(this.constructor.prototype),b=Object.create(this._ctx);return d&&l(b,d),h._ctx=b,h},ut.prototype.raw=function(){return this._ctx.valueMapper=null,this},ut.prototype.each=function(d){var h=this._ctx;return this._read(function(b){return nc(h,d,b,h.table.core)})},ut.prototype.count=function(d){var h=this;return this._read(function(b){var S=h._ctx,C=S.table.core;if(Eo(S,!0))return C.count({trans:b,query:{index:tc(S,C.schema),range:S.range}}).then(function(D){return Math.min(D,S.limit)});var j=0;return nc(S,function(){return++j,!1},b,C).then(function(){return j})}).then(d)},ut.prototype.sortBy=function(d,h){var b=d.split(".").reverse(),S=b[0],C=b.length-1;function j(H,q){return q?j(H[b[q]],q-1):H[S]}var D=this._ctx.dir==="next"?1:-1;function B(H,q){return it(j(H,C),j(q,C))*D}return this.toArray(function(H){return H.sort(B)}).then(h)},ut.prototype.toArray=function(d){var h=this;return this._read(function(b){var S=h._ctx;if(S.dir==="next"&&Eo(S,!0)&&0<S.limit){var C=S.valueMapper,j=tc(S,S.table.core.schema);return S.table.core.query({trans:b,limit:S.limit,values:!0,query:{index:j,range:S.range}}).then(function(B){return B=B.result,C?B.map(C):B})}var D=[];return nc(S,function(B){return D.push(B)},b,S.table.core).then(function(){return D})},d)},ut.prototype.offset=function(d){var h=this._ctx;return d<=0||(h.offset+=d,Eo(h)?Jf(h,function(){var b=d;return function(S,C){return b===0||(b===1?--b:C(function(){S.advance(b),b=0}),!1)}}):Jf(h,function(){var b=d;return function(){return--b<0}})),this},ut.prototype.limit=function(d){return this._ctx.limit=Math.min(this._ctx.limit,d),Jf(this._ctx,function(){var h=d;return function(b,S,C){return--h<=0&&S(C),0<=h}},!0),this},ut.prototype.until=function(d,h){return Yf(this._ctx,function(b,S,C){return!d(b.value)||(S(C),h)}),this},ut.prototype.first=function(d){return this.limit(1).toArray(function(h){return h[0]}).then(d)},ut.prototype.last=function(d){return this.reverse().first(d)},ut.prototype.filter=function(d){var h;return Yf(this._ctx,function(b){return d(b.value)}),(h=this._ctx).isMatch=Es(h.isMatch,d),this},ut.prototype.and=function(d){return this.filter(d)},ut.prototype.or=function(d){return new this.db.WhereClause(this._ctx.table,d,this)},ut.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},ut.prototype.desc=function(){return this.reverse()},ut.prototype.eachKey=function(d){var h=this._ctx;return h.keysOnly=!h.isMatch,this.each(function(b,S){d(S.key,S)})},ut.prototype.eachUniqueKey=function(d){return this._ctx.unique="unique",this.eachKey(d)},ut.prototype.eachPrimaryKey=function(d){var h=this._ctx;return h.keysOnly=!h.isMatch,this.each(function(b,S){d(S.primaryKey,S)})},ut.prototype.keys=function(d){var h=this._ctx;h.keysOnly=!h.isMatch;var b=[];return this.each(function(S,C){b.push(C.key)}).then(function(){return b}).then(d)},ut.prototype.primaryKeys=function(d){var h=this._ctx;if(h.dir==="next"&&Eo(h,!0)&&0<h.limit)return this._read(function(S){var C=tc(h,h.table.core.schema);return h.table.core.query({trans:S,values:!1,limit:h.limit,query:{index:C,range:h.range}})}).then(function(S){return S.result}).then(d);h.keysOnly=!h.isMatch;var b=[];return this.each(function(S,C){b.push(C.primaryKey)}).then(function(){return b}).then(d)},ut.prototype.uniqueKeys=function(d){return this._ctx.unique="unique",this.keys(d)},ut.prototype.firstKey=function(d){return this.limit(1).keys(function(h){return h[0]}).then(d)},ut.prototype.lastKey=function(d){return this.reverse().firstKey(d)},ut.prototype.distinct=function(){var d=this._ctx,d=d.index&&d.table.schema.idxByName[d.index];if(!d||!d.multi)return this;var h={};return Yf(this._ctx,function(C){var S=C.primaryKey.toString(),C=f(h,S);return h[S]=!0,!C}),this},ut.prototype.modify=function(d){var h=this,b=this._ctx;return this._write(function(S){var C=typeof d=="function"?d:function(Z){return $v(Z,d)},j=b.table.core,q=j.schema.primaryKey,D=q.outbound,B=q.extractKey,H=200,q=h.db._options.modifyChunkSize;q&&(H=typeof q=="object"?q[j.name]||q["*"]||200:q);function X(Z,ae){var se=ae.failures,ae=ae.numFailures;re+=Z-ae;for(var he=0,we=o(se);he<we.length;he++){var Ee=we[he];z.push(se[Ee])}}var z=[],re=0,Q=[],J=d===Uv;return h.clone().primaryKeys().then(function(Z){function ne(ae){var he=Math.min(H,Z.length-ae),we=Z.slice(ae,ae+he);return(J?Promise.resolve([]):j.getMany({trans:S,keys:we,cache:"immutable"})).then(function(Ee){var je=[],ke=[],Pe=D?[]:null,Oe=J?we:[];if(!J)for(var Ae=0;Ae<he;++Ae){var Le=Ee[Ae],Ye={value:Y(Le),primKey:Z[ae+Ae]};C.call(Ye,Ye.value,Ye)!==!1&&(Ye.value==null?Oe.push(Z[ae+Ae]):D||it(B(Le),B(Ye.value))===0?(ke.push(Ye.value),D&&Pe.push(Z[ae+Ae])):(Oe.push(Z[ae+Ae]),je.push(Ye.value)))}return Promise.resolve(0<je.length&&j.mutate({trans:S,type:"add",values:je}).then(function(Ze){for(var et in Ze.failures)Oe.splice(parseInt(et),1);X(je.length,Ze)})).then(function(){return(0<ke.length||se&&typeof d=="object")&&j.mutate({trans:S,type:"put",keys:Pe,values:ke,criteria:se,changeSpec:typeof d!="function"&&d,isAdditionalChunk:0<ae}).then(function(Ze){return X(ke.length,Ze)})}).then(function(){return(0<Oe.length||se&&J)&&j.mutate({trans:S,type:"delete",keys:Oe,criteria:se,isAdditionalChunk:0<ae}).then(function(Ze){return ec(b.table,Oe,Ze)}).then(function(Ze){return X(Oe.length,Ze)})}).then(function(){return Z.length>ae+he&&ne(ae+H)})})}var se=Eo(b)&&b.limit===1/0&&(typeof d!="function"||J)&&{index:b.index,range:b.range};return ne(0).then(function(){if(0<z.length)throw new de("Error modifying one or more objects",z,re,Q);return Z.length})})})},ut.prototype.delete=function(){var d=this._ctx,h=d.range;return!Eo(d)||d.table.schema.yProps||!d.isPrimKey&&h.type!==3?this.modify(Uv):this._write(function(b){var S=d.table.core.schema.primaryKey,C=h;return d.table.core.count({trans:b,query:{index:S,range:C}}).then(function(j){return d.table.core.mutate({trans:b,type:"deleteRange",range:C}).then(function(H){var B=H.failures,H=H.numFailures;if(H)throw new de("Could not delete some values",Object.keys(B).map(function(q){return B[q]}),j-H);return j-H})})})},ut);function ut(){}var Uv=function(d,h){return h.value=null};function QC(d,h){return d<h?-1:d===h?0:1}function YC(d,h){return h<d?-1:d===h?0:1}function $n(d,h,b){return d=d instanceof Vv?new d.Collection(d):d,d._ctx.error=new(b||TypeError)(h),d}function Co(d){return new d.Collection(d,function(){return zv("")}).limit(0)}function rc(d,h,b,S){var C,j,D,B,H,q,X,z=b.length;if(!b.every(function(J){return typeof J=="string"}))return $n(d,Ov);function re(J){C=J==="next"?function(ne){return ne.toUpperCase()}:function(ne){return ne.toLowerCase()},j=J==="next"?function(ne){return ne.toLowerCase()}:function(ne){return ne.toUpperCase()},D=J==="next"?QC:YC;var Z=b.map(function(ne){return{lower:j(ne),upper:C(ne)}}).sort(function(ne,se){return D(ne.lower,se.lower)});B=Z.map(function(ne){return ne.upper}),H=Z.map(function(ne){return ne.lower}),X=(q=J)==="next"?"":S}re("next"),d=new d.Collection(d,function(){return Pi(B[0],H[z-1]+S)}),d._ondirectionchange=function(J){re(J)};var Q=0;return d._addAlgorithm(function(J,Z,ne){var se=J.key;if(typeof se!="string")return!1;var ae=j(se);if(h(ae,H,Q))return!0;for(var he=null,we=Q;we<z;++we){var Ee=function(je,ke,Pe,Oe,Ae,Le){for(var Ye=Math.min(je.length,Oe.length),Ze=-1,et=0;et<Ye;++et){var Mn=ke[et];if(Mn!==Oe[et])return Ae(je[et],Pe[et])<0?je.substr(0,et)+Pe[et]+Pe.substr(et+1):Ae(je[et],Oe[et])<0?je.substr(0,et)+Oe[et]+Pe.substr(et+1):0<=Ze?je.substr(0,Ze)+ke[Ze]+Pe.substr(Ze+1):null;Ae(je[et],Mn)<0&&(Ze=et)}return Ye<Oe.length&&Le==="next"?je+Pe.substr(je.length):Ye<je.length&&Le==="prev"?je.substr(0,Pe.length):Ze<0?null:je.substr(0,Ze)+Oe[Ze]+Pe.substr(Ze+1)}(se,ae,B[we],H[we],D,q);Ee===null&&he===null?Q=we+1:(he===null||0<D(he,Ee))&&(he=Ee)}return Z(he!==null?function(){J.continue(he+X)}:ne),!1}),d}function Pi(d,h,b,S){return{type:2,lower:d,upper:h,lowerOpen:b,upperOpen:S}}function zv(d){return{type:1,lower:d,upper:d}}var Vv=(Object.defineProperty(Ht.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Ht.prototype.between=function(d,h,b,S){b=b!==!1,S=S===!0;try{return 0<this._cmp(d,h)||this._cmp(d,h)===0&&(b||S)&&(!b||!S)?Co(this):new this.Collection(this,function(){return Pi(d,h,!b,!S)})}catch{return $n(this,Zr)}},Ht.prototype.equals=function(d){return d==null?$n(this,Zr):new this.Collection(this,function(){return zv(d)})},Ht.prototype.above=function(d){return d==null?$n(this,Zr):new this.Collection(this,function(){return Pi(d,void 0,!0)})},Ht.prototype.aboveOrEqual=function(d){return d==null?$n(this,Zr):new this.Collection(this,function(){return Pi(d,void 0,!1)})},Ht.prototype.below=function(d){return d==null?$n(this,Zr):new this.Collection(this,function(){return Pi(void 0,d,!1,!0)})},Ht.prototype.belowOrEqual=function(d){return d==null?$n(this,Zr):new this.Collection(this,function(){return Pi(void 0,d)})},Ht.prototype.startsWith=function(d){return typeof d!="string"?$n(this,Ov):this.between(d,d+ks,!0,!0)},Ht.prototype.startsWithIgnoreCase=function(d){return d===""?this.startsWith(d):rc(this,function(h,b){return h.indexOf(b[0])===0},[d],ks)},Ht.prototype.equalsIgnoreCase=function(d){return rc(this,function(h,b){return h===b[0]},[d],"")},Ht.prototype.anyOfIgnoreCase=function(){var d=ie.apply(L,arguments);return d.length===0?Co(this):rc(this,function(h,b){return b.indexOf(h)!==-1},d,"")},Ht.prototype.startsWithAnyOfIgnoreCase=function(){var d=ie.apply(L,arguments);return d.length===0?Co(this):rc(this,function(h,b){return b.some(function(S){return h.indexOf(S)===0})},d,ks)},Ht.prototype.anyOf=function(){var d=this,h=ie.apply(L,arguments),b=this._cmp;try{h.sort(b)}catch{return $n(this,Zr)}if(h.length===0)return Co(this);var S=new this.Collection(this,function(){return Pi(h[0],h[h.length-1])});S._ondirectionchange=function(j){b=j==="next"?d._ascending:d._descending,h.sort(b)};var C=0;return S._addAlgorithm(function(j,D,B){for(var H=j.key;0<b(H,h[C]);)if(++C===h.length)return D(B),!1;return b(H,h[C])===0||(D(function(){j.continue(h[C])}),!1)}),S},Ht.prototype.notEqual=function(d){return this.inAnyRange([[-1/0,d],[d,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Ht.prototype.noneOf=function(){var d=ie.apply(L,arguments);if(d.length===0)return new this.Collection(this);try{d.sort(this._ascending)}catch{return $n(this,Zr)}var h=d.reduce(function(b,S){return b?b.concat([[b[b.length-1][1],S]]):[[-1/0,S]]},null);return h.push([d[d.length-1],this.db._maxKey]),this.inAnyRange(h,{includeLowers:!1,includeUppers:!1})},Ht.prototype.inAnyRange=function(se,h){var b=this,S=this._cmp,C=this._ascending,j=this._descending,D=this._min,B=this._max;if(se.length===0)return Co(this);if(!se.every(function(ae){return ae[0]!==void 0&&ae[1]!==void 0&&C(ae[0],ae[1])<=0}))return $n(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",be.InvalidArgument);var H=!h||h.includeLowers!==!1,q=h&&h.includeUppers===!0,X,z=C;function re(ae,he){return z(ae[0],he[0])}try{(X=se.reduce(function(ae,he){for(var we=0,Ee=ae.length;we<Ee;++we){var je=ae[we];if(S(he[0],je[1])<0&&0<S(he[1],je[0])){je[0]=D(je[0],he[0]),je[1]=B(je[1],he[1]);break}}return we===Ee&&ae.push(he),ae},[])).sort(re)}catch{return $n(this,Zr)}var Q=0,J=q?function(ae){return 0<C(ae,X[Q][1])}:function(ae){return 0<=C(ae,X[Q][1])},Z=H?function(ae){return 0<j(ae,X[Q][0])}:function(ae){return 0<=j(ae,X[Q][0])},ne=J,se=new this.Collection(this,function(){return Pi(X[0][0],X[X.length-1][1],!H,!q)});return se._ondirectionchange=function(ae){z=ae==="next"?(ne=J,C):(ne=Z,j),X.sort(re)},se._addAlgorithm(function(ae,he,we){for(var Ee,je=ae.key;ne(je);)if(++Q===X.length)return he(we),!1;return!J(Ee=je)&&!Z(Ee)||(b._cmp(je,X[Q][1])===0||b._cmp(je,X[Q][0])===0||he(function(){z===C?ae.continue(X[Q][0]):ae.continue(X[Q][1])}),!1)}),se},Ht.prototype.startsWithAnyOf=function(){var d=ie.apply(L,arguments);return d.every(function(h){return typeof h=="string"})?d.length===0?Co(this):this.inAnyRange(d.map(function(h){return[h,h+ks]})):$n(this,"startsWithAnyOf() only works with strings")},Ht);function Ht(){}function Ir(d){return vt(function(h){return qa(h),d(h.target.error),!1})}function qa(d){d.stopPropagation&&d.stopPropagation(),d.preventDefault&&d.preventDefault()}var Ga="storagemutated",Zf="x-storagemutated-1",Ai=Wa(null,Ga),JC=(Dr.prototype._lock=function(){return T(!De.global),++this._reculock,this._reculock!==1||De.global||(De.lockOwnerFor=this),this},Dr.prototype._unlock=function(){if(T(!De.global),--this._reculock==0)for(De.global||(De.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var d=this._blockedFuncs.shift();try{Ss(d[1],d[0])}catch{}}return this},Dr.prototype._locked=function(){return this._reculock&&De.lockOwnerFor!==this},Dr.prototype.create=function(d){var h=this;if(!this.mode)return this;var b=this.db.idbdb,S=this.db._state.dbOpenError;if(T(!this.idbtrans),!d&&!b)switch(S&&S.name){case"DatabaseClosedError":throw new be.DatabaseClosed(S);case"MissingAPIError":throw new be.MissingAPI(S.message,S);default:throw new be.OpenFailed(S)}if(!this.active)throw new be.TransactionInactive;return T(this._completion._state===null),(d=this.idbtrans=d||(this.db.core||b).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=vt(function(C){qa(C),h._reject(d.error)}),d.onabort=vt(function(C){qa(C),h.active&&h._reject(new be.Abort(d.error)),h.active=!1,h.on("abort").fire(C)}),d.oncomplete=vt(function(){h.active=!1,h._resolve(),"mutatedParts"in d&&Ai.storagemutated.fire(d.mutatedParts)}),this},Dr.prototype._promise=function(d,h,b){var S=this;if(d==="readwrite"&&this.mode!=="readwrite")return Rt(new be.ReadOnly("Transaction is readonly"));if(!this.active)return Rt(new be.TransactionInactive);if(this._locked())return new Te(function(j,D){S._blockedFuncs.push([function(){S._promise(d,h,b).then(j,D)},De])});if(b)return Ei(function(){var j=new Te(function(D,B){S._lock();var H=h(D,B,S);H&&H.then&&H.then(D,B)});return j.finally(function(){return S._unlock()}),j._lib=!0,j});var C=new Te(function(j,D){var B=h(j,D,S);B&&B.then&&B.then(j,D)});return C._lib=!0,C},Dr.prototype._root=function(){return this.parent?this.parent._root():this},Dr.prototype.waitFor=function(d){var h,b=this._root(),S=Te.resolve(d);b._waitingFor?b._waitingFor=b._waitingFor.then(function(){return S}):(b._waitingFor=S,b._waitingQueue=[],h=b.idbtrans.objectStore(b.storeNames[0]),function j(){for(++b._spinCount;b._waitingQueue.length;)b._waitingQueue.shift()();b._waitingFor&&(h.get(-1/0).onsuccess=j)}());var C=b._waitingFor;return new Te(function(j,D){S.then(function(B){return b._waitingQueue.push(vt(j.bind(null,B)))},function(B){return b._waitingQueue.push(vt(D.bind(null,B)))}).finally(function(){b._waitingFor===C&&(b._waitingFor=null)})})},Dr.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new be.Abort))},Dr.prototype.table=function(d){var h=this._memoizedTables||(this._memoizedTables={});if(f(h,d))return h[d];var b=this.schema[d];if(!b)throw new be.NotFound("Table "+d+" not part of transaction");return b=new this.db.Table(d,b,this),b.core=this.db.core.table(d),h[d]=b},Dr);function Dr(){}function Xf(d,h,b,S,C,j,D,B){return{name:d,keyPath:h,unique:b,multi:S,auto:C,compound:j,src:(b&&!D?"&":"")+(S?"*":"")+(C?"++":"")+Kv(h),type:B}}function Kv(d){return typeof d=="string"?d:d?"["+[].join.call(d,"+")+"]":""}function eh(d,h,b){return{name:d,primKey:h,indexes:b,mappedClass:null,idxByName:(S=function(C){return[C.name,C]},b.reduce(function(C,j,D){return D=S(j,D),D&&(C[D[0]]=D[1]),C},{}))};var S}var Qa=function(d){try{return d.only([[]]),Qa=function(){return[[]]},[[]]}catch{return Qa=function(){return ks},ks}};function th(d){return d==null?function(){}:typeof d=="string"?(h=d).split(".").length===1?function(b){return b[h]}:function(b){return R(b,h)}:function(b){return R(b,d)};var h}function Wv(d){return[].slice.call(d)}var ZC=0;function Ya(d){return d==null?":id":typeof d=="string"?d:"[".concat(d.join("+"),"]")}function XC(d,h,H){function S(ne){if(ne.type===3)return null;if(ne.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var Q=ne.lower,J=ne.upper,Z=ne.lowerOpen,ne=ne.upperOpen;return Q===void 0?J===void 0?null:h.upperBound(J,!!ne):J===void 0?h.lowerBound(Q,!!Z):h.bound(Q,J,!!Z,!!ne)}function C(re){var Q,J=re.name;return{name:J,schema:re,mutate:function(Z){var ne=Z.trans,se=Z.type,ae=Z.keys,he=Z.values,we=Z.range;return new Promise(function(Ee,je){Ee=vt(Ee);var ke=ne.objectStore(J),Pe=ke.keyPath==null,Oe=se==="put"||se==="add";if(!Oe&&se!=="delete"&&se!=="deleteRange")throw new Error("Invalid operation type: "+se);var Ae,Le=(ae||he||{length:1}).length;if(ae&&he&&ae.length!==he.length)throw new Error("Given keys array must have same length as given values array.");if(Le===0)return Ee({numFailures:0,failures:{},results:[],lastResult:void 0});function Ye(mn){++Mn,qa(mn)}var Ze=[],et=[],Mn=0;if(se==="deleteRange"){if(we.type===4)return Ee({numFailures:Mn,failures:et,results:[],lastResult:void 0});we.type===3?Ze.push(Ae=ke.clear()):Ze.push(Ae=ke.delete(S(we)))}else{var Pe=Oe?Pe?[he,ae]:[he,null]:[ae,null],Qe=Pe[0],sn=Pe[1];if(Oe)for(var on=0;on<Le;++on)Ze.push(Ae=sn&&sn[on]!==void 0?ke[se](Qe[on],sn[on]):ke[se](Qe[on])),Ae.onerror=Ye;else for(on=0;on<Le;++on)Ze.push(Ae=ke[se](Qe[on])),Ae.onerror=Ye}function mc(mn){mn=mn.target.result,Ze.forEach(function(Ps,wh){return Ps.error!=null&&(et[wh]=Ps.error)}),Ee({numFailures:Mn,failures:et,results:se==="delete"?ae:Ze.map(function(Ps){return Ps.result}),lastResult:mn})}Ae.onerror=function(mn){Ye(mn),mc(mn)},Ae.onsuccess=mc})},getMany:function(Z){var ne=Z.trans,se=Z.keys;return new Promise(function(ae,he){ae=vt(ae);for(var we,Ee=ne.objectStore(J),je=se.length,ke=new Array(je),Pe=0,Oe=0,Ae=function(Ze){Ze=Ze.target,ke[Ze._pos]=Ze.result,++Oe===Pe&&ae(ke)},Le=Ir(he),Ye=0;Ye<je;++Ye)se[Ye]!=null&&((we=Ee.get(se[Ye]))._pos=Ye,we.onsuccess=Ae,we.onerror=Le,++Pe);Pe===0&&ae(ke)})},get:function(Z){var ne=Z.trans,se=Z.key;return new Promise(function(ae,he){ae=vt(ae);var we=ne.objectStore(J).get(se);we.onsuccess=function(Ee){return ae(Ee.target.result)},we.onerror=Ir(he)})},query:(Q=q,function(Z){return new Promise(function(ne,se){ne=vt(ne);var ae,he,we,Pe=Z.trans,Ee=Z.values,je=Z.limit,Ae=Z.query,ke=je===1/0?void 0:je,Oe=Ae.index,Ae=Ae.range,Pe=Pe.objectStore(J),Oe=Oe.isPrimaryKey?Pe:Pe.index(Oe.name),Ae=S(Ae);if(je===0)return ne({result:[]});Q?((ke=Ee?Oe.getAll(Ae,ke):Oe.getAllKeys(Ae,ke)).onsuccess=function(Le){return ne({result:Le.target.result})},ke.onerror=Ir(se)):(ae=0,he=!Ee&&"openKeyCursor"in Oe?Oe.openKeyCursor(Ae):Oe.openCursor(Ae),we=[],he.onsuccess=function(Le){var Ye=he.result;return Ye?(we.push(Ee?Ye.value:Ye.primaryKey),++ae===je?ne({result:we}):void Ye.continue()):ne({result:we})},he.onerror=Ir(se))})}),openCursor:function(Z){var ne=Z.trans,se=Z.values,ae=Z.query,he=Z.reverse,we=Z.unique;return new Promise(function(Ee,je){Ee=vt(Ee);var Oe=ae.index,ke=ae.range,Pe=ne.objectStore(J),Pe=Oe.isPrimaryKey?Pe:Pe.index(Oe.name),Oe=he?we?"prevunique":"prev":we?"nextunique":"next",Ae=!se&&"openKeyCursor"in Pe?Pe.openKeyCursor(S(ke),Oe):Pe.openCursor(S(ke),Oe);Ae.onerror=Ir(je),Ae.onsuccess=vt(function(Le){var Ye,Ze,et,Mn,Qe=Ae.result;Qe?(Qe.___id=++ZC,Qe.done=!1,Ye=Qe.continue.bind(Qe),Ze=(Ze=Qe.continuePrimaryKey)&&Ze.bind(Qe),et=Qe.advance.bind(Qe),Mn=function(){throw new Error("Cursor not stopped")},Qe.trans=ne,Qe.stop=Qe.continue=Qe.continuePrimaryKey=Qe.advance=function(){throw new Error("Cursor not started")},Qe.fail=vt(je),Qe.next=function(){var sn=this,on=1;return this.start(function(){return on--?sn.continue():sn.stop()}).then(function(){return sn})},Qe.start=function(sn){function on(){if(Ae.result)try{sn()}catch(mn){Qe.fail(mn)}else Qe.done=!0,Qe.start=function(){throw new Error("Cursor behind last entry")},Qe.stop()}var mc=new Promise(function(mn,Ps){mn=vt(mn),Ae.onerror=Ir(Ps),Qe.fail=Ps,Qe.stop=function(wh){Qe.stop=Qe.continue=Qe.continuePrimaryKey=Qe.advance=Mn,mn(wh)}});return Ae.onsuccess=vt(function(mn){Ae.onsuccess=on,on()}),Qe.continue=Ye,Qe.continuePrimaryKey=Ze,Qe.advance=et,on(),mc},Ee(Qe)):Ee(null)},je)})},count:function(Z){var ne=Z.query,se=Z.trans,ae=ne.index,he=ne.range;return new Promise(function(we,Ee){var je=se.objectStore(J),ke=ae.isPrimaryKey?je:je.index(ae.name),je=S(he),ke=je?ke.count(je):ke.count();ke.onsuccess=vt(function(Pe){return we(Pe.target.result)}),ke.onerror=Ir(Ee)})}}}var j,D,B,X=(D=H,B=Wv((j=d).objectStoreNames),{schema:{name:j.name,tables:B.map(function(re){return D.objectStore(re)}).map(function(re){var Q=re.keyPath,ne=re.autoIncrement,J=a(Q),Z={},ne={name:re.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:Q==null,compound:J,keyPath:Q,autoIncrement:ne,unique:!0,extractKey:th(Q)},indexes:Wv(re.indexNames).map(function(se){return re.index(se)}).map(function(we){var ae=we.name,he=we.unique,Ee=we.multiEntry,we=we.keyPath,Ee={name:ae,compound:a(we),keyPath:we,unique:he,multiEntry:Ee,extractKey:th(we)};return Z[Ya(we)]=Ee}),getIndexByKeyPath:function(se){return Z[Ya(se)]}};return Z[":id"]=ne.primaryKey,Q!=null&&(Z[Ya(Q)]=ne.primaryKey),ne})},hasGetAll:0<B.length&&"getAll"in D.objectStore(B[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),H=X.schema,q=X.hasGetAll,X=H.tables.map(C),z={};return X.forEach(function(re){return z[re.name]=re}),{stack:"dbcore",transaction:d.transaction.bind(d),table:function(re){if(!z[re])throw new Error("Table '".concat(re,"' not found"));return z[re]},MIN_KEY:-1/0,MAX_KEY:Qa(h),schema:H}}function eT(d,h,b,S){var C=b.IDBKeyRange;return b.indexedDB,{dbcore:(S=XC(h,C,S),d.dbcore.reduce(function(j,D){return D=D.create,r(r({},j),D(j))},S))}}function ic(d,S){var b=S.db,S=eT(d._middlewares,b,d._deps,S);d.core=S.dbcore,d.tables.forEach(function(C){var j=C.name;d.core.schema.tables.some(function(D){return D.name===j})&&(C.core=d.core.table(j),d[j]instanceof d.Table&&(d[j].core=C.core))})}function sc(d,h,b,S){b.forEach(function(C){var j=S[C];h.forEach(function(D){var B=function H(q,X){return x(q,X)||(q=u(q))&&H(q,X)}(D,C);(!B||"value"in B&&B.value===void 0)&&(D===d.Transaction.prototype||D instanceof d.Transaction?w(D,C,{get:function(){return this.table(C)},set:function(H){m(this,C,{value:H,writable:!0,configurable:!0,enumerable:!0})}}):D[C]=new d.Table(C,j))})})}function nh(d,h){h.forEach(function(b){for(var S in b)b[S]instanceof d.Table&&delete b[S]})}function tT(d,h){return d._cfg.version-h._cfg.version}function nT(d,h,b,S){var C=d._dbSchema;b.objectStoreNames.contains("$meta")&&!C.$meta&&(C.$meta=eh("$meta",qv("")[0],[]),d._storeNames.push("$meta"));var j=d._createTransaction("readwrite",d._storeNames,C);j.create(b),j._completion.catch(S);var D=j._reject.bind(j),B=De.transless||De;Ei(function(){return De.trans=j,De.transless=B,h!==0?(ic(d,b),q=h,((H=j).storeNames.includes("$meta")?H.table("$meta").get("version").then(function(X){return X??q}):Te.resolve(q)).then(function(X){return re=X,Q=j,J=b,Z=[],X=(z=d)._versions,ne=z._dbSchema=ac(0,z.idbdb,J),(X=X.filter(function(se){return se._cfg.version>=re})).length!==0?(X.forEach(function(se){Z.push(function(){var ae=ne,he=se._cfg.dbschema;lc(z,ae,J),lc(z,he,J),ne=z._dbSchema=he;var we=rh(ae,he);we.add.forEach(function(Oe){ih(J,Oe[0],Oe[1].primKey,Oe[1].indexes)}),we.change.forEach(function(Oe){if(Oe.recreate)throw new be.Upgrade("Not yet support for changing primary key");var Ae=J.objectStore(Oe.name);Oe.add.forEach(function(Le){return oc(Ae,Le)}),Oe.change.forEach(function(Le){Ae.deleteIndex(Le.name),oc(Ae,Le)}),Oe.del.forEach(function(Le){return Ae.deleteIndex(Le)})});var Ee=se._cfg.contentUpgrade;if(Ee&&se._cfg.version>re){ic(z,J),Q._memoizedTables={};var je=$(he);we.del.forEach(function(Oe){je[Oe]=ae[Oe]}),nh(z,[z.Transaction.prototype]),sc(z,[z.Transaction.prototype],o(je),je),Q.schema=je;var ke,Pe=K(Ee);return Pe&&So(),we=Te.follow(function(){var Oe;(ke=Ee(Q))&&Pe&&(Oe=Ci.bind(null,null),ke.then(Oe,Oe))}),ke&&typeof ke.then=="function"?Te.resolve(ke):we.then(function(){return ke})}}),Z.push(function(ae){var he,we,Ee=se._cfg.dbschema;he=Ee,we=ae,[].slice.call(we.db.objectStoreNames).forEach(function(je){return he[je]==null&&we.db.deleteObjectStore(je)}),nh(z,[z.Transaction.prototype]),sc(z,[z.Transaction.prototype],z._storeNames,z._dbSchema),Q.schema=z._dbSchema}),Z.push(function(ae){z.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(z.idbdb.version/10)===se._cfg.version?(z.idbdb.deleteObjectStore("$meta"),delete z._dbSchema.$meta,z._storeNames=z._storeNames.filter(function(he){return he!=="$meta"})):ae.objectStore("$meta").put(se._cfg.version,"version"))})}),function se(){return Z.length?Te.resolve(Z.shift()(Q.idbtrans)).then(se):Te.resolve()}().then(function(){Hv(ne,J)})):Te.resolve();var z,re,Q,J,Z,ne}).catch(D)):(o(C).forEach(function(X){ih(b,X,C[X].primKey,C[X].indexes)}),ic(d,b),void Te.follow(function(){return d.on.populate.fire(j)}).catch(D));var H,q})}function rT(d,h){Hv(d._dbSchema,h),h.db.version%10!=0||h.objectStoreNames.contains("$meta")||h.db.createObjectStore("$meta").add(Math.ceil(h.db.version/10-1),"version");var b=ac(0,d.idbdb,h);lc(d,d._dbSchema,h);for(var S=0,C=rh(b,d._dbSchema).change;S<C.length;S++){var j=function(D){if(D.change.length||D.recreate)return console.warn("Unable to patch indexes of table ".concat(D.name," because it has changes on the type of index or primary key.")),{value:void 0};var B=h.objectStore(D.name);D.add.forEach(function(H){ve&&console.debug("Dexie upgrade patch: Creating missing index ".concat(D.name,".").concat(H.src)),oc(B,H)})}(C[S]);if(typeof j=="object")return j.value}}function rh(d,h){var b,S={del:[],add:[],change:[]};for(b in d)h[b]||S.del.push(b);for(b in h){var C=d[b],j=h[b];if(C){var D={name:b,def:j,recreate:!1,del:[],add:[],change:[]};if(""+(C.primKey.keyPath||"")!=""+(j.primKey.keyPath||"")||C.primKey.auto!==j.primKey.auto)D.recreate=!0,S.change.push(D);else{var B=C.idxByName,H=j.idxByName,q=void 0;for(q in B)H[q]||D.del.push(q);for(q in H){var X=B[q],z=H[q];X?X.src!==z.src&&D.change.push(z):D.add.push(z)}(0<D.del.length||0<D.add.length||0<D.change.length)&&S.change.push(D)}}else S.add.push([b,j])}return S}function ih(d,h,b,S){var C=d.db.createObjectStore(h,b.keyPath?{keyPath:b.keyPath,autoIncrement:b.auto}:{autoIncrement:b.auto});return S.forEach(function(j){return oc(C,j)}),C}function Hv(d,h){o(d).forEach(function(b){h.db.objectStoreNames.contains(b)||(ve&&console.debug("Dexie: Creating missing table",b),ih(h,b,d[b].primKey,d[b].indexes))})}function oc(d,h){d.createIndex(h.name,h.keyPath,{unique:h.unique,multiEntry:h.multi})}function ac(d,h,b){var S={};return y(h.objectStoreNames,0).forEach(function(C){for(var j=b.objectStore(C),D=Xf(Kv(q=j.keyPath),q||"",!0,!1,!!j.autoIncrement,q&&typeof q!="string",!0),B=[],H=0;H<j.indexNames.length;++H){var X=j.index(j.indexNames[H]),q=X.keyPath,X=Xf(X.name,q,!!X.unique,!!X.multiEntry,!1,q&&typeof q!="string",!1);B.push(X)}S[C]=eh(C,D,B)}),S}function lc(d,h,b){for(var S=b.db.objectStoreNames,C=0;C<S.length;++C){var j=S[C],D=b.objectStore(j);d._hasGetAll="getAll"in D;for(var B=0;B<D.indexNames.length;++B){var H=D.indexNames[B],q=D.index(H).keyPath,X=typeof q=="string"?q:"["+y(q).join("+")+"]";!h[j]||(q=h[j].idxByName[X])&&(q.name=H,delete h[j].idxByName[X],h[j].idxByName[H]=q)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&s.WorkerGlobalScope&&s instanceof s.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(d._hasGetAll=!1)}function qv(d){return d.split(",").map(function(h,b){var j=h.split(":"),S=(C=j[1])===null||C===void 0?void 0:C.trim(),C=(h=j[0].trim()).replace(/([&*]|\+\+)/g,""),j=/^\[/.test(C)?C.match(/^\[(.*)\]$/)[1].split("+"):C;return Xf(C,j||null,/\&/.test(h),/\*/.test(h),/\+\+/.test(h),a(j),b===0,S)})}var iT=(To.prototype._createTableSchema=eh,To.prototype._parseIndexSyntax=qv,To.prototype._parseStoresSpec=function(d,h){var b=this;o(d).forEach(function(S){if(d[S]!==null){var C=b._parseIndexSyntax(d[S]),j=C.shift();if(!j)throw new be.Schema("Invalid schema for table "+S+": "+d[S]);if(j.unique=!0,j.multi)throw new be.Schema("Primary key cannot be multiEntry*");C.forEach(function(D){if(D.auto)throw new be.Schema("Only primary key can be marked as autoIncrement (++)");if(!D.keyPath)throw new be.Schema("Index must have a name and cannot be an empty string")}),C=b._createTableSchema(S,j,C),h[S]=C}})},To.prototype.stores=function(b){var h=this.db;this._cfg.storesSource=this._cfg.storesSource?l(this._cfg.storesSource,b):b;var b=h._versions,S={},C={};return b.forEach(function(j){l(S,j._cfg.storesSource),C=j._cfg.dbschema={},j._parseStoresSpec(S,C)}),h._dbSchema=C,nh(h,[h._allTables,h,h.Transaction.prototype]),sc(h,[h._allTables,h,h.Transaction.prototype,this._cfg.tables],o(C),C),h._storeNames=o(C),this},To.prototype.upgrade=function(d){return this._cfg.contentUpgrade=ye(this._cfg.contentUpgrade||He,d),this},To);function To(){}function sh(d,h){var b=d._dbNamesDB;return b||(b=d._dbNamesDB=new Xr(Zu,{addons:[],indexedDB:d,IDBKeyRange:h})).version(1).stores({dbnames:"name"}),b.table("dbnames")}function oh(d){return d&&typeof d.databases=="function"}function ah(d){return Ei(function(){return De.letThrough=!0,d()})}function lh(d){return!("from"in d)}var rn=function(d,h){if(!this){var b=new rn;return d&&"d"in d&&l(b,d),b}l(this,arguments.length?{d:1,from:d,to:1<arguments.length?h:d}:{d:0})};function Ja(d,h,b){var S=it(h,b);if(!isNaN(S)){if(0<S)throw RangeError();if(lh(d))return l(d,{from:h,to:b,d:1});var C=d.l,S=d.r;if(it(b,d.from)<0)return C?Ja(C,h,b):d.l={from:h,to:b,d:1,l:null,r:null},Qv(d);if(0<it(h,d.to))return S?Ja(S,h,b):d.r={from:h,to:b,d:1,l:null,r:null},Qv(d);it(h,d.from)<0&&(d.from=h,d.l=null,d.d=S?S.d+1:1),0<it(b,d.to)&&(d.to=b,d.r=null,d.d=d.l?d.l.d+1:1),b=!d.r,C&&!d.l&&Za(d,C),S&&b&&Za(d,S)}}function Za(d,h){lh(h)||function b(S,H){var j=H.from,D=H.to,B=H.l,H=H.r;Ja(S,j,D),B&&b(S,B),H&&b(S,H)}(d,h)}function Gv(d,h){var b=uc(h),S=b.next();if(S.done)return!1;for(var C=S.value,j=uc(d),D=j.next(C.from),B=D.value;!S.done&&!D.done;){if(it(B.from,C.to)<=0&&0<=it(B.to,C.from))return!0;it(C.from,B.from)<0?C=(S=b.next(B.from)).value:B=(D=j.next(C.from)).value}return!1}function uc(d){var h=lh(d)?null:{s:0,n:d};return{next:function(b){for(var S=0<arguments.length;h;)switch(h.s){case 0:if(h.s=1,S)for(;h.n.l&&it(b,h.n.from)<0;)h={up:h,n:h.n.l,s:1};else for(;h.n.l;)h={up:h,n:h.n.l,s:1};case 1:if(h.s=2,!S||it(b,h.n.to)<=0)return{value:h.n,done:!1};case 2:if(h.n.r){h.s=3,h={up:h,n:h.n.r,s:0};continue}case 3:h=h.up}return{done:!0}}}}function Qv(d){var h,b,S=(((h=d.r)===null||h===void 0?void 0:h.d)||0)-(((b=d.l)===null||b===void 0?void 0:b.d)||0),C=1<S?"r":S<-1?"l":"";C&&(h=C=="r"?"l":"r",b=r({},d),S=d[C],d.from=S.from,d.to=S.to,d[C]=S[C],b[C]=S[h],(d[h]=b).d=Yv(b)),d.d=Yv(d)}function Yv(b){var h=b.r,b=b.l;return(h?b?Math.max(h.d,b.d):h.d:b?b.d:0)+1}function cc(d,h){return o(h).forEach(function(b){d[b]?Za(d[b],h[b]):d[b]=function S(C){var j,D,B={};for(j in C)f(C,j)&&(D=C[j],B[j]=!D||typeof D!="object"||ge.has(D.constructor)?D:S(D));return B}(h[b])}),d}function uh(d,h){return d.all||h.all||Object.keys(d).some(function(b){return h[b]&&Gv(h[b],d[b])})}p(rn.prototype,((Qn={add:function(d){return Za(this,d),this},addKey:function(d){return Ja(this,d,d),this},addKeys:function(d){var h=this;return d.forEach(function(b){return Ja(h,b,b)}),this},hasKey:function(d){var h=uc(this).next(d).value;return h&&it(h.from,d)<=0&&0<=it(h.to,d)}})[Ce]=function(){return uc(this)},Qn));var Cs={},ch={},dh=!1;function dc(d){cc(ch,d),dh||(dh=!0,setTimeout(function(){dh=!1,fh(ch,!(ch={}))},0))}function fh(d,h){h===void 0&&(h=!1);var b=new Set;if(d.all)for(var S=0,C=Object.values(Cs);S<C.length;S++)Jv(D=C[S],d,b,h);else for(var j in d){var D,B=/^idb\:\/\/(.*)\/(.*)\//.exec(j);B&&(j=B[1],B=B[2],(D=Cs["idb://".concat(j,"/").concat(B)])&&Jv(D,d,b,h))}b.forEach(function(H){return H()})}function Jv(d,h,b,S){for(var C=[],j=0,D=Object.entries(d.queries.query);j<D.length;j++){for(var B=D[j],H=B[0],q=[],X=0,z=B[1];X<z.length;X++){var re=z[X];uh(h,re.obsSet)?re.subscribers.forEach(function(ne){return b.add(ne)}):S&&q.push(re)}S&&C.push([H,q])}if(S)for(var Q=0,J=C;Q<J.length;Q++){var Z=J[Q],H=Z[0],q=Z[1];d.queries.query[H]=q}}function sT(d){var h=d._state,b=d._deps.indexedDB;if(h.isBeingOpened||d.idbdb)return h.dbReadyPromise.then(function(){return h.dbOpenError?Rt(h.dbOpenError):d});h.isBeingOpened=!0,h.dbOpenError=null,h.openComplete=!1;var S=h.openCanceller,C=Math.round(10*d.verno),j=!1;function D(){if(h.openCanceller!==S)throw new be.DatabaseClosed("db.open() was cancelled")}function B(){return new Te(function(re,Q){if(D(),!b)throw new be.MissingAPI;var J=d.name,Z=h.autoSchema||!C?b.open(J):b.open(J,C);if(!Z)throw new be.MissingAPI;Z.onerror=Ir(Q),Z.onblocked=vt(d._fireOnBlocked),Z.onupgradeneeded=vt(function(ne){var se;X=Z.transaction,h.autoSchema&&!d._options.allowEmptyDB?(Z.onerror=qa,X.abort(),Z.result.close(),(se=b.deleteDatabase(J)).onsuccess=se.onerror=vt(function(){Q(new be.NoSuchDatabase("Database ".concat(J," doesnt exist")))})):(X.onerror=Ir(Q),ne=ne.oldVersion>Math.pow(2,62)?0:ne.oldVersion,z=ne<1,d.idbdb=Z.result,j&&rT(d,X),nT(d,ne/10,X,Q))},Q),Z.onsuccess=vt(function(){X=null;var ne,se,ae,he,we,Ee=d.idbdb=Z.result,je=y(Ee.objectStoreNames);if(0<je.length)try{var ke=Ee.transaction((he=je).length===1?he[0]:he,"readonly");if(h.autoSchema)se=Ee,ae=ke,(ne=d).verno=se.version/10,ae=ne._dbSchema=ac(0,se,ae),ne._storeNames=y(se.objectStoreNames,0),sc(ne,[ne._allTables],o(ae),ae);else if(lc(d,d._dbSchema,ke),((we=rh(ac(0,(we=d).idbdb,ke),we._dbSchema)).add.length||we.change.some(function(Pe){return Pe.add.length||Pe.change.length}))&&!j)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Ee.close(),C=Ee.version+1,j=!0,re(B());ic(d,ke)}catch{}ko.push(d),Ee.onversionchange=vt(function(Pe){h.vcFired=!0,d.on("versionchange").fire(Pe)}),Ee.onclose=vt(function(){d.close({disableAutoOpen:!1})}),z&&(we=d._deps,ke=J,Ee=we.indexedDB,we=we.IDBKeyRange,oh(Ee)||ke===Zu||sh(Ee,we).put({name:ke}).catch(He)),re()},Q)}).catch(function(re){switch(re==null?void 0:re.name){case"UnknownError":if(0<h.PR1398_maxLoop)return h.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),B();break;case"VersionError":if(0<C)return C=0,B()}return Te.reject(re)})}var H,q=h.dbReadyResolve,X=null,z=!1;return Te.race([S,(typeof navigator>"u"?Te.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(re){function Q(){return indexedDB.databases().finally(re)}H=setInterval(Q,100),Q()}).finally(function(){return clearInterval(H)}):Promise.resolve()).then(B)]).then(function(){return D(),h.onReadyBeingFired=[],Te.resolve(ah(function(){return d.on.ready.fire(d.vip)})).then(function re(){if(0<h.onReadyBeingFired.length){var Q=h.onReadyBeingFired.reduce(ye,He);return h.onReadyBeingFired=[],Te.resolve(ah(function(){return Q(d.vip)})).then(re)}})}).finally(function(){h.openCanceller===S&&(h.onReadyBeingFired=null,h.isBeingOpened=!1)}).catch(function(re){h.dbOpenError=re;try{X&&X.abort()}catch{}return S===h.openCanceller&&d._close(),Rt(re)}).finally(function(){h.openComplete=!0,q()}).then(function(){var re;return z&&(re={},d.tables.forEach(function(Q){Q.schema.indexes.forEach(function(J){J.name&&(re["idb://".concat(d.name,"/").concat(Q.name,"/").concat(J.name)]=new rn(-1/0,[[[]]]))}),re["idb://".concat(d.name,"/").concat(Q.name,"/")]=re["idb://".concat(d.name,"/").concat(Q.name,"/:dels")]=new rn(-1/0,[[[]]])}),Ai(Ga).fire(re),fh(re,!0)),d})}function hh(d){function h(j){return d.next(j)}var b=C(h),S=C(function(j){return d.throw(j)});function C(j){return function(H){var B=j(H),H=B.value;return B.done?H:H&&typeof H.then=="function"?H.then(b,S):a(H)?Promise.all(H).then(b,S):b(H)}}return C(h)()}function fc(d,h,b){for(var S=a(d)?d.slice():[d],C=0;C<b;++C)S.push(h);return S}var oT={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(d){return r(r({},d),{table:function(h){var b=d.table(h),S=b.schema,C={},j=[];function D(z,re,Q){var J=Ya(z),Z=C[J]=C[J]||[],ne=z==null?0:typeof z=="string"?1:z.length,se=0<re,se=r(r({},Q),{name:se?"".concat(J,"(virtual-from:").concat(Q.name,")"):Q.name,lowLevelIndex:Q,isVirtual:se,keyTail:re,keyLength:ne,extractKey:th(z),unique:!se&&Q.unique});return Z.push(se),se.isPrimaryKey||j.push(se),1<ne&&D(ne===2?z[0]:z.slice(0,ne-1),re+1,Q),Z.sort(function(ae,he){return ae.keyTail-he.keyTail}),se}h=D(S.primaryKey.keyPath,0,S.primaryKey),C[":id"]=[h];for(var B=0,H=S.indexes;B<H.length;B++){var q=H[B];D(q.keyPath,0,q)}function X(z){var re,Q=z.query.index;return Q.isVirtual?r(r({},z),{query:{index:Q.lowLevelIndex,range:(re=z.query.range,Q=Q.keyTail,{type:re.type===1?2:re.type,lower:fc(re.lower,re.lowerOpen?d.MAX_KEY:d.MIN_KEY,Q),lowerOpen:!0,upper:fc(re.upper,re.upperOpen?d.MIN_KEY:d.MAX_KEY,Q),upperOpen:!0})}}):z}return r(r({},b),{schema:r(r({},S),{primaryKey:h,indexes:j,getIndexByKeyPath:function(z){return(z=C[Ya(z)])&&z[0]}}),count:function(z){return b.count(X(z))},query:function(z){return b.query(X(z))},openCursor:function(z){var re=z.query.index,Q=re.keyTail,J=re.isVirtual,Z=re.keyLength;return J?b.openCursor(X(z)).then(function(se){return se&&ne(se)}):b.openCursor(z);function ne(se){return Object.create(se,{continue:{value:function(ae){ae!=null?se.continue(fc(ae,z.reverse?d.MAX_KEY:d.MIN_KEY,Q)):z.unique?se.continue(se.key.slice(0,Z).concat(z.reverse?d.MIN_KEY:d.MAX_KEY,Q)):se.continue()}},continuePrimaryKey:{value:function(ae,he){se.continuePrimaryKey(fc(ae,d.MAX_KEY,Q),he)}},primaryKey:{get:function(){return se.primaryKey}},key:{get:function(){var ae=se.key;return Z===1?ae[0]:ae.slice(0,Z)}},value:{get:function(){return se.value}}})}}})}})}};function ph(d,h,b,S){return b=b||{},S=S||"",o(d).forEach(function(C){var j,D,B;f(h,C)?(j=d[C],D=h[C],typeof j=="object"&&typeof D=="object"&&j&&D?(B=te(j))!==te(D)?b[S+C]=h[C]:B==="Object"?ph(j,D,b,S+C+"."):j!==D&&(b[S+C]=h[C]):j!==D&&(b[S+C]=h[C])):b[S+C]=void 0}),o(h).forEach(function(C){f(d,C)||(b[S+C]=h[C])}),b}function mh(d,h){return h.type==="delete"?h.keys:h.keys||h.values.map(d.extractKey)}var aT={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(d){return r(r({},d),{table:function(h){var b=d.table(h),S=b.schema.primaryKey;return r(r({},b),{mutate:function(C){var j=De.trans,D=j.table(h).hook,B=D.deleting,H=D.creating,q=D.updating;switch(C.type){case"add":if(H.fire===He)break;return j._promise("readwrite",function(){return X(C)},!0);case"put":if(H.fire===He&&q.fire===He)break;return j._promise("readwrite",function(){return X(C)},!0);case"delete":if(B.fire===He)break;return j._promise("readwrite",function(){return X(C)},!0);case"deleteRange":if(B.fire===He)break;return j._promise("readwrite",function(){return function z(re,Q,J){return b.query({trans:re,values:!1,query:{index:S,range:Q},limit:J}).then(function(Z){var ne=Z.result;return X({type:"delete",keys:ne,trans:re}).then(function(se){return 0<se.numFailures?Promise.reject(se.failures[0]):ne.length<J?{failures:[],numFailures:0,lastResult:void 0}:z(re,r(r({},Q),{lower:ne[ne.length-1],lowerOpen:!0}),J)})})}(C.trans,C.range,1e4)},!0)}return b.mutate(C);function X(z){var re,Q,J,Z=De.trans,ne=z.keys||mh(S,z);if(!ne)throw new Error("Keys missing");return(z=z.type==="add"||z.type==="put"?r(r({},z),{keys:ne}):r({},z)).type!=="delete"&&(z.values=i([],z.values)),z.keys&&(z.keys=i([],z.keys)),re=b,J=ne,((Q=z).type==="add"?Promise.resolve([]):re.getMany({trans:Q.trans,keys:J,cache:"immutable"})).then(function(se){var ae=ne.map(function(he,we){var Ee,je,ke,Pe=se[we],Oe={onerror:null,onsuccess:null};return z.type==="delete"?B.fire.call(Oe,he,Pe,Z):z.type==="add"||Pe===void 0?(Ee=H.fire.call(Oe,he,z.values[we],Z),he==null&&Ee!=null&&(z.keys[we]=he=Ee,S.outbound||I(z.values[we],S.keyPath,he))):(Ee=ph(Pe,z.values[we]),(je=q.fire.call(Oe,Ee,he,Pe,Z))&&(ke=z.values[we],Object.keys(je).forEach(function(Ae){f(ke,Ae)?ke[Ae]=je[Ae]:I(ke,Ae,je[Ae])}))),Oe});return b.mutate(z).then(function(he){for(var we=he.failures,Ee=he.results,je=he.numFailures,he=he.lastResult,ke=0;ke<ne.length;++ke){var Pe=(Ee||ne)[ke],Oe=ae[ke];Pe==null?Oe.onerror&&Oe.onerror(we[ke]):Oe.onsuccess&&Oe.onsuccess(z.type==="put"&&se[ke]?z.values[ke]:Pe)}return{failures:we,results:Ee,numFailures:je,lastResult:he}}).catch(function(he){return ae.forEach(function(we){return we.onerror&&we.onerror(he)}),Promise.reject(he)})})}}})}})}};function Zv(d,h,b){try{if(!h||h.keys.length<d.length)return null;for(var S=[],C=0,j=0;C<h.keys.length&&j<d.length;++C)it(h.keys[C],d[j])===0&&(S.push(b?Y(h.values[C]):h.values[C]),++j);return S.length===d.length?S:null}catch{return null}}var lT={stack:"dbcore",level:-1,create:function(d){return{table:function(h){var b=d.table(h);return r(r({},b),{getMany:function(S){if(!S.cache)return b.getMany(S);var C=Zv(S.keys,S.trans._cache,S.cache==="clone");return C?Te.resolve(C):b.getMany(S).then(function(j){return S.trans._cache={keys:S.keys,values:S.cache==="clone"?Y(j):j},j})},mutate:function(S){return S.type!=="add"&&(S.trans._cache=null),b.mutate(S)}})}}}};function Xv(d,h){return d.trans.mode==="readonly"&&!!d.subscr&&!d.trans.explicit&&d.trans.db._options.cache!=="disabled"&&!h.schema.primaryKey.outbound}function e0(d,h){switch(d){case"query":return h.values&&!h.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var uT={stack:"dbcore",level:0,name:"Observability",create:function(d){var h=d.schema.name,b=new rn(d.MIN_KEY,d.MAX_KEY);return r(r({},d),{transaction:function(S,C,j){if(De.subscr&&C!=="readonly")throw new be.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(De.querier));return d.transaction(S,C,j)},table:function(S){var C=d.table(S),j=C.schema,D=j.primaryKey,z=j.indexes,B=D.extractKey,H=D.outbound,q=D.autoIncrement&&z.filter(function(Q){return Q.compound&&Q.keyPath.includes(D.keyPath)}),X=r(r({},C),{mutate:function(Q){function J(Ae){return Ae="idb://".concat(h,"/").concat(S,"/").concat(Ae),he[Ae]||(he[Ae]=new rn)}var Z,ne,se,ae=Q.trans,he=Q.mutatedParts||(Q.mutatedParts={}),we=J(""),Ee=J(":dels"),je=Q.type,Oe=Q.type==="deleteRange"?[Q.range]:Q.type==="delete"?[Q.keys]:Q.values.length<50?[mh(D,Q).filter(function(Ae){return Ae}),Q.values]:[],ke=Oe[0],Pe=Oe[1],Oe=Q.trans._cache;return a(ke)?(we.addKeys(ke),(Oe=je==="delete"||ke.length===Pe.length?Zv(ke,Oe):null)||Ee.addKeys(ke),(Oe||Pe)&&(Z=J,ne=Oe,se=Pe,j.indexes.forEach(function(Ae){var Le=Z(Ae.name||"");function Ye(et){return et!=null?Ae.extractKey(et):null}function Ze(et){return Ae.multiEntry&&a(et)?et.forEach(function(Mn){return Le.addKey(Mn)}):Le.addKey(et)}(ne||se).forEach(function(et,sn){var Qe=ne&&Ye(ne[sn]),sn=se&&Ye(se[sn]);it(Qe,sn)!==0&&(Qe!=null&&Ze(Qe),sn!=null&&Ze(sn))})}))):ke?(Pe={from:(Pe=ke.lower)!==null&&Pe!==void 0?Pe:d.MIN_KEY,to:(Pe=ke.upper)!==null&&Pe!==void 0?Pe:d.MAX_KEY},Ee.add(Pe),we.add(Pe)):(we.add(b),Ee.add(b),j.indexes.forEach(function(Ae){return J(Ae.name).add(b)})),C.mutate(Q).then(function(Ae){return!ke||Q.type!=="add"&&Q.type!=="put"||(we.addKeys(Ae.results),q&&q.forEach(function(Le){for(var Ye=Q.values.map(function(Qe){return Le.extractKey(Qe)}),Ze=Le.keyPath.findIndex(function(Qe){return Qe===D.keyPath}),et=0,Mn=Ae.results.length;et<Mn;++et)Ye[et][Ze]=Ae.results[et];J(Le.name).addKeys(Ye)})),ae.mutatedParts=cc(ae.mutatedParts||{},he),Ae})}}),z=function(J){var Z=J.query,J=Z.index,Z=Z.range;return[J,new rn((J=Z.lower)!==null&&J!==void 0?J:d.MIN_KEY,(Z=Z.upper)!==null&&Z!==void 0?Z:d.MAX_KEY)]},re={get:function(Q){return[D,new rn(Q.key)]},getMany:function(Q){return[D,new rn().addKeys(Q.keys)]},count:z,query:z,openCursor:z};return o(re).forEach(function(Q){X[Q]=function(J){var Z=De.subscr,ne=!!Z,se=Xv(De,C)&&e0(Q,J)?J.obsSet={}:Z;if(ne){var ae=function(Pe){return Pe="idb://".concat(h,"/").concat(S,"/").concat(Pe),se[Pe]||(se[Pe]=new rn)},he=ae(""),we=ae(":dels"),Z=re[Q](J),ne=Z[0],Z=Z[1];if((Q==="query"&&ne.isPrimaryKey&&!J.values?we:ae(ne.name||"")).add(Z),!ne.isPrimaryKey){if(Q!=="count"){var Ee=Q==="query"&&H&&J.values&&C.query(r(r({},J),{values:!1}));return C[Q].apply(this,arguments).then(function(Pe){if(Q==="query"){if(H&&J.values)return Ee.then(function(Ye){return Ye=Ye.result,he.addKeys(Ye),Pe});var Oe=J.values?Pe.result.map(B):Pe.result;(J.values?he:we).addKeys(Oe)}else if(Q==="openCursor"){var Ae=Pe,Le=J.values;return Ae&&Object.create(Ae,{key:{get:function(){return we.addKey(Ae.primaryKey),Ae.key}},primaryKey:{get:function(){var Ye=Ae.primaryKey;return we.addKey(Ye),Ye}},value:{get:function(){return Le&&he.addKey(Ae.primaryKey),Ae.value}}})}return Pe})}we.add(b)}}return C[Q].apply(this,arguments)}}),X}})}};function t0(d,h,b){if(b.numFailures===0)return h;if(h.type==="deleteRange")return null;var S=h.keys?h.keys.length:"values"in h&&h.values?h.values.length:1;return b.numFailures===S?null:(h=r({},h),a(h.keys)&&(h.keys=h.keys.filter(function(C,j){return!(j in b.failures)})),"values"in h&&a(h.values)&&(h.values=h.values.filter(function(C,j){return!(j in b.failures)})),h)}function gh(d,h){return b=d,((S=h).lower===void 0||(S.lowerOpen?0<it(b,S.lower):0<=it(b,S.lower)))&&(d=d,(h=h).upper===void 0||(h.upperOpen?it(d,h.upper)<0:it(d,h.upper)<=0));var b,S}function n0(d,h,re,S,C,j){if(!re||re.length===0)return d;var D=h.query.index,B=D.multiEntry,H=h.query.range,q=S.schema.primaryKey.extractKey,X=D.extractKey,z=(D.lowLevelIndex||D).extractKey,re=re.reduce(function(Q,J){var Z=Q,ne=[];if(J.type==="add"||J.type==="put")for(var se=new rn,ae=J.values.length-1;0<=ae;--ae){var he,we=J.values[ae],Ee=q(we);se.hasKey(Ee)||(he=X(we),(B&&a(he)?he.some(function(Ae){return gh(Ae,H)}):gh(he,H))&&(se.addKey(Ee),ne.push(we)))}switch(J.type){case"add":var je=new rn().addKeys(h.values?Q.map(function(Le){return q(Le)}):Q),Z=Q.concat(h.values?ne.filter(function(Le){return Le=q(Le),!je.hasKey(Le)&&(je.addKey(Le),!0)}):ne.map(function(Le){return q(Le)}).filter(function(Le){return!je.hasKey(Le)&&(je.addKey(Le),!0)}));break;case"put":var ke=new rn().addKeys(J.values.map(function(Le){return q(Le)}));Z=Q.filter(function(Le){return!ke.hasKey(h.values?q(Le):Le)}).concat(h.values?ne:ne.map(function(Le){return q(Le)}));break;case"delete":var Pe=new rn().addKeys(J.keys);Z=Q.filter(function(Le){return!Pe.hasKey(h.values?q(Le):Le)});break;case"deleteRange":var Oe=J.range;Z=Q.filter(function(Le){return!gh(q(Le),Oe)})}return Z},d);return re===d?d:(re.sort(function(Q,J){return it(z(Q),z(J))||it(q(Q),q(J))}),h.limit&&h.limit<1/0&&(re.length>h.limit?re.length=h.limit:d.length===h.limit&&re.length<h.limit&&(C.dirty=!0)),j?Object.freeze(re):re)}function r0(d,h){return it(d.lower,h.lower)===0&&it(d.upper,h.upper)===0&&!!d.lowerOpen==!!h.lowerOpen&&!!d.upperOpen==!!h.upperOpen}function cT(d,h){return function(b,S,C,j){if(b===void 0)return S!==void 0?-1:0;if(S===void 0)return 1;if((S=it(b,S))===0){if(C&&j)return 0;if(C)return 1;if(j)return-1}return S}(d.lower,h.lower,d.lowerOpen,h.lowerOpen)<=0&&0<=function(b,S,C,j){if(b===void 0)return S!==void 0?1:0;if(S===void 0)return-1;if((S=it(b,S))===0){if(C&&j)return 0;if(C)return-1;if(j)return 1}return S}(d.upper,h.upper,d.upperOpen,h.upperOpen)}function dT(d,h,b,S){d.subscribers.add(b),S.addEventListener("abort",function(){var C,j;d.subscribers.delete(b),d.subscribers.size===0&&(C=d,j=h,setTimeout(function(){C.subscribers.size===0&&ue(j,C)},3e3))})}var fT={stack:"dbcore",level:0,name:"Cache",create:function(d){var h=d.schema.name;return r(r({},d),{transaction:function(b,S,C){var j,D,B=d.transaction(b,S,C);return S==="readwrite"&&(D=(j=new AbortController).signal,C=function(H){return function(){if(j.abort(),S==="readwrite"){for(var q=new Set,X=0,z=b;X<z.length;X++){var re=z[X],Q=Cs["idb://".concat(h,"/").concat(re)];if(Q){var J=d.table(re),Z=Q.optimisticOps.filter(function(Le){return Le.trans===B});if(B._explicit&&H&&B.mutatedParts)for(var ne=0,se=Object.values(Q.queries.query);ne<se.length;ne++)for(var ae=0,he=(je=se[ne]).slice();ae<he.length;ae++)uh((ke=he[ae]).obsSet,B.mutatedParts)&&(ue(je,ke),ke.subscribers.forEach(function(Le){return q.add(Le)}));else if(0<Z.length){Q.optimisticOps=Q.optimisticOps.filter(function(Le){return Le.trans!==B});for(var we=0,Ee=Object.values(Q.queries.query);we<Ee.length;we++)for(var je,ke,Pe,Oe=0,Ae=(je=Ee[we]).slice();Oe<Ae.length;Oe++)(ke=Ae[Oe]).res!=null&&B.mutatedParts&&(H&&!ke.dirty?(Pe=Object.isFrozen(ke.res),Pe=n0(ke.res,ke.req,Z,J,ke,Pe),ke.dirty?(ue(je,ke),ke.subscribers.forEach(function(Le){return q.add(Le)})):Pe!==ke.res&&(ke.res=Pe,ke.promise=Te.resolve({result:Pe}))):(ke.dirty&&ue(je,ke),ke.subscribers.forEach(function(Le){return q.add(Le)})))}}}q.forEach(function(Le){return Le()})}}},B.addEventListener("abort",C(!1),{signal:D}),B.addEventListener("error",C(!1),{signal:D}),B.addEventListener("complete",C(!0),{signal:D})),B},table:function(b){var S=d.table(b),C=S.schema.primaryKey;return r(r({},S),{mutate:function(j){var D=De.trans;if(C.outbound||D.db._options.cache==="disabled"||D.explicit||D.idbtrans.mode!=="readwrite")return S.mutate(j);var B=Cs["idb://".concat(h,"/").concat(b)];return B?(D=S.mutate(j),j.type!=="add"&&j.type!=="put"||!(50<=j.values.length||mh(C,j).some(function(H){return H==null}))?(B.optimisticOps.push(j),j.mutatedParts&&dc(j.mutatedParts),D.then(function(H){0<H.numFailures&&(ue(B.optimisticOps,j),(H=t0(0,j,H))&&B.optimisticOps.push(H),j.mutatedParts&&dc(j.mutatedParts))}),D.catch(function(){ue(B.optimisticOps,j),j.mutatedParts&&dc(j.mutatedParts)})):D.then(function(H){var q=t0(0,r(r({},j),{values:j.values.map(function(X,z){var re;return H.failures[z]?X:(X=(re=C.keyPath)!==null&&re!==void 0&&re.includes(".")?Y(X):r({},X),I(X,C.keyPath,H.results[z]),X)})}),H);B.optimisticOps.push(q),queueMicrotask(function(){return j.mutatedParts&&dc(j.mutatedParts)})}),D):S.mutate(j)},query:function(j){if(!Xv(De,S)||!e0("query",j))return S.query(j);var D=((q=De.trans)===null||q===void 0?void 0:q.db._options.cache)==="immutable",z=De,B=z.requery,H=z.signal,q=function(J,Z,ne,se){var ae=Cs["idb://".concat(J,"/").concat(Z)];if(!ae)return[];if(!(Z=ae.queries[ne]))return[null,!1,ae,null];var he=Z[(se.query?se.query.index.name:null)||""];if(!he)return[null,!1,ae,null];switch(ne){case"query":var we=he.find(function(Ee){return Ee.req.limit===se.limit&&Ee.req.values===se.values&&r0(Ee.req.query.range,se.query.range)});return we?[we,!0,ae,he]:[he.find(function(Ee){return("limit"in Ee.req?Ee.req.limit:1/0)>=se.limit&&(!se.values||Ee.req.values)&&cT(Ee.req.query.range,se.query.range)}),!1,ae,he];case"count":return we=he.find(function(Ee){return r0(Ee.req.query.range,se.query.range)}),[we,!!we,ae,he]}}(h,b,"query",j),X=q[0],z=q[1],re=q[2],Q=q[3];return X&&z?X.obsSet=j.obsSet:(z=S.query(j).then(function(J){var Z=J.result;if(X&&(X.res=Z),D){for(var ne=0,se=Z.length;ne<se;++ne)Object.freeze(Z[ne]);Object.freeze(Z)}else J.result=Y(Z);return J}).catch(function(J){return Q&&X&&ue(Q,X),Promise.reject(J)}),X={obsSet:j.obsSet,promise:z,subscribers:new Set,type:"query",req:j,dirty:!1},Q?Q.push(X):(Q=[X],(re=re||(Cs["idb://".concat(h,"/").concat(b)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[j.query.index.name||""]=Q)),dT(X,Q,B,H),X.promise.then(function(J){return{result:n0(J.result,j,re==null?void 0:re.optimisticOps,S,X,D)}})}})}})}};function hc(d,h){return new Proxy(d,{get:function(b,S,C){return S==="db"?h:Reflect.get(b,S,C)}})}var Xr=(It.prototype.version=function(d){if(isNaN(d)||d<.1)throw new be.Type("Given version is not a positive number");if(d=Math.round(10*d)/10,this.idbdb||this._state.isBeingOpened)throw new be.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,d);var h=this._versions,b=h.filter(function(S){return S._cfg.version===d})[0];return b||(b=new this.Version(d),h.push(b),h.sort(tT),b.stores({}),this._state.autoSchema=!1,b)},It.prototype._whenReady=function(d){var h=this;return this.idbdb&&(this._state.openComplete||De.letThrough||this._vip)?d():new Te(function(b,S){if(h._state.openComplete)return S(new be.DatabaseClosed(h._state.dbOpenError));if(!h._state.isBeingOpened){if(!h._state.autoOpen)return void S(new be.DatabaseClosed);h.open().catch(He)}h._state.dbReadyPromise.then(b,S)}).then(d)},It.prototype.use=function(d){var h=d.stack,b=d.create,S=d.level,C=d.name;return C&&this.unuse({stack:h,name:C}),d=this._middlewares[h]||(this._middlewares[h]=[]),d.push({stack:h,create:b,level:S??10,name:C}),d.sort(function(j,D){return j.level-D.level}),this},It.prototype.unuse=function(d){var h=d.stack,b=d.name,S=d.create;return h&&this._middlewares[h]&&(this._middlewares[h]=this._middlewares[h].filter(function(C){return S?C.create!==S:!!b&&C.name!==b})),this},It.prototype.open=function(){var d=this;return Ss(pn,function(){return sT(d)})},It.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var d=this._state,h=ko.indexOf(this);if(0<=h&&ko.splice(h,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}d.isBeingOpened||(d.dbReadyPromise=new Te(function(b){d.dbReadyResolve=b}),d.openCanceller=new Te(function(b,S){d.cancelOpen=S}))},It.prototype.close=function(b){var h=(b===void 0?{disableAutoOpen:!0}:b).disableAutoOpen,b=this._state;h?(b.isBeingOpened&&b.cancelOpen(new be.DatabaseClosed),this._close(),b.autoOpen=!1,b.dbOpenError=new be.DatabaseClosed):(this._close(),b.autoOpen=this._options.autoOpen||b.isBeingOpened,b.openComplete=!1,b.dbOpenError=null)},It.prototype.delete=function(d){var h=this;d===void 0&&(d={disableAutoOpen:!0});var b=0<arguments.length&&typeof arguments[0]!="object",S=this._state;return new Te(function(C,j){function D(){h.close(d);var B=h._deps.indexedDB.deleteDatabase(h.name);B.onsuccess=vt(function(){var H,q,X;H=h._deps,q=h.name,X=H.indexedDB,H=H.IDBKeyRange,oh(X)||q===Zu||sh(X,H).delete(q).catch(He),C()}),B.onerror=Ir(j),B.onblocked=h._fireOnBlocked}if(b)throw new be.InvalidArgument("Invalid closeOptions argument to db.delete()");S.isBeingOpened?S.dbReadyPromise.then(D):D()})},It.prototype.backendDB=function(){return this.idbdb},It.prototype.isOpen=function(){return this.idbdb!==null},It.prototype.hasBeenClosed=function(){var d=this._state.dbOpenError;return d&&d.name==="DatabaseClosed"},It.prototype.hasFailed=function(){return this._state.dbOpenError!==null},It.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(It.prototype,"tables",{get:function(){var d=this;return o(this._allTables).map(function(h){return d._allTables[h]})},enumerable:!1,configurable:!0}),It.prototype.transaction=function(){var d=(function(h,b,S){var C=arguments.length;if(C<2)throw new be.InvalidArgument("Too few arguments");for(var j=new Array(C-1);--C;)j[C-1]=arguments[C];return S=j.pop(),[h,V(j),S]}).apply(this,arguments);return this._transaction.apply(this,d)},It.prototype._transaction=function(d,h,b){var S=this,C=De.trans;C&&C.db===this&&d.indexOf("!")===-1||(C=null);var j,D,B=d.indexOf("?")!==-1;d=d.replace("!","").replace("?","");try{if(D=h.map(function(q){if(q=q instanceof S.Table?q.name:q,typeof q!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return q}),d=="r"||d===Gf)j=Gf;else{if(d!="rw"&&d!=Qf)throw new be.InvalidArgument("Invalid transaction mode: "+d);j=Qf}if(C){if(C.mode===Gf&&j===Qf){if(!B)throw new be.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");C=null}C&&D.forEach(function(q){if(C&&C.storeNames.indexOf(q)===-1){if(!B)throw new be.SubTransaction("Table "+q+" not included in parent transaction.");C=null}}),B&&C&&!C.active&&(C=null)}}catch(q){return C?C._promise(null,function(X,z){z(q)}):Rt(q)}var H=(function q(X,z,re,Q,J){return Te.resolve().then(function(){var Z=De.transless||De,ne=X._createTransaction(z,re,X._dbSchema,Q);if(ne.explicit=!0,Z={trans:ne,transless:Z},Q)ne.idbtrans=Q.idbtrans;else try{ne.create(),ne.idbtrans._explicit=!0,X._state.PR1398_maxLoop=3}catch(he){return he.name===We.InvalidState&&X.isOpen()&&0<--X._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),X.close({disableAutoOpen:!1}),X.open().then(function(){return q(X,z,re,null,J)})):Rt(he)}var se,ae=K(J);return ae&&So(),Z=Te.follow(function(){var he;(se=J.call(ne,ne))&&(ae?(he=Ci.bind(null,null),se.then(he,he)):typeof se.next=="function"&&typeof se.throw=="function"&&(se=hh(se)))},Z),(se&&typeof se.then=="function"?Te.resolve(se).then(function(he){return ne.active?he:Rt(new be.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):Z.then(function(){return se})).then(function(he){return Q&&ne._resolve(),ne._completion.then(function(){return he})}).catch(function(he){return ne._reject(he),Rt(he)})})}).bind(null,this,j,D,C,b);return C?C._promise(j,H,"lock"):De.trans?Ss(De.transless,function(){return S._whenReady(H)}):this._whenReady(H)},It.prototype.table=function(d){if(!f(this._allTables,d))throw new be.InvalidTable("Table ".concat(d," does not exist"));return this._allTables[d]},It);function It(d,h){var b=this;this._middlewares={},this.verno=0;var S=It.dependencies;this._options=h=r({addons:It.addons,autoOpen:!0,indexedDB:S.indexedDB,IDBKeyRange:S.IDBKeyRange,cache:"cloned"},h),this._deps={indexedDB:h.indexedDB,IDBKeyRange:h.IDBKeyRange},S=h.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var C,j,D,B,H,q={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:He,dbReadyPromise:null,cancelOpen:He,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:h.autoOpen};q.dbReadyPromise=new Te(function(z){q.dbReadyResolve=z}),q.openCanceller=new Te(function(z,re){q.cancelOpen=re}),this._state=q,this.name=d,this.on=Wa(this,"populate","blocked","versionchange","close",{ready:[ye,He]}),this.once=function(z,re){var Q=function(){for(var J=[],Z=0;Z<arguments.length;Z++)J[Z]=arguments[Z];b.on(z).unsubscribe(Q),re.apply(b,J)};return b.on(z,Q)},this.on.ready.subscribe=_(this.on.ready.subscribe,function(z){return function(re,Q){It.vip(function(){var J,Z=b._state;Z.openComplete?(Z.dbOpenError||Te.resolve().then(re),Q&&z(re)):Z.onReadyBeingFired?(Z.onReadyBeingFired.push(re),Q&&z(re)):(z(re),J=b,Q||z(function ne(){J.on.ready.unsubscribe(re),J.on.ready.unsubscribe(ne)}))})}}),this.Collection=(C=this,Ha(GC.prototype,function(se,ne){this.db=C;var Q=Rv,J=null;if(ne)try{Q=ne()}catch(ae){J=ae}var Z=se._ctx,ne=Z.table,se=ne.hook.reading.fire;this._ctx={table:ne,index:Z.index,isPrimKey:!Z.index||ne.schema.primKey.keyPath&&Z.index===ne.schema.primKey.name,range:Q,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:J,or:Z.or,valueMapper:se!==Bt?se:null}})),this.Table=(j=this,Ha(Mv.prototype,function(z,re,Q){this.db=j,this._tx=Q,this.name=z,this.schema=re,this.hook=j._allTables[z]?j._allTables[z].hook:Wa(null,{creating:[fe,He],reading:[A,Bt],updating:[N,He],deleting:[F,He]})})),this.Transaction=(D=this,Ha(JC.prototype,function(z,re,Q,J,Z){var ne=this;z!=="readonly"&&re.forEach(function(se){se=(se=Q[se])===null||se===void 0?void 0:se.yProps,se&&(re=re.concat(se.map(function(ae){return ae.updatesTable})))}),this.db=D,this.mode=z,this.storeNames=re,this.schema=Q,this.chromeTransactionDurability=J,this.idbtrans=null,this.on=Wa(this,"complete","error","abort"),this.parent=Z||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Te(function(se,ae){ne._resolve=se,ne._reject=ae}),this._completion.then(function(){ne.active=!1,ne.on.complete.fire()},function(se){var ae=ne.active;return ne.active=!1,ne.on.error.fire(se),ne.parent?ne.parent._reject(se):ae&&ne.idbtrans&&ne.idbtrans.abort(),Rt(se)})})),this.Version=(B=this,Ha(iT.prototype,function(z){this.db=B,this._cfg={version:z,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(H=this,Ha(Vv.prototype,function(z,re,Q){if(this.db=H,this._ctx={table:z,index:re===":id"?null:re,or:Q},this._cmp=this._ascending=it,this._descending=function(J,Z){return it(Z,J)},this._max=function(J,Z){return 0<it(J,Z)?J:Z},this._min=function(J,Z){return it(J,Z)<0?J:Z},this._IDBKeyRange=H._deps.IDBKeyRange,!this._IDBKeyRange)throw new be.MissingAPI})),this.on("versionchange",function(z){0<z.newVersion?console.warn("Another connection wants to upgrade database '".concat(b.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(b.name,"'. Closing db now to resume the delete request.")),b.close({disableAutoOpen:!1})}),this.on("blocked",function(z){!z.newVersion||z.newVersion<z.oldVersion?console.warn("Dexie.delete('".concat(b.name,"') was blocked")):console.warn("Upgrade '".concat(b.name,"' blocked by other connection holding version ").concat(z.oldVersion/10))}),this._maxKey=Qa(h.IDBKeyRange),this._createTransaction=function(z,re,Q,J){return new b.Transaction(z,re,Q,b._options.chromeTransactionDurability,J)},this._fireOnBlocked=function(z){b.on("blocked").fire(z),ko.filter(function(re){return re.name===b.name&&re!==b&&!re._state.vcFired}).map(function(re){return re.on("versionchange").fire(z)})},this.use(lT),this.use(fT),this.use(uT),this.use(oT),this.use(aT);var X=new Proxy(this,{get:function(z,re,Q){if(re==="_vip")return!0;if(re==="table")return function(Z){return hc(b.table(Z),X)};var J=Reflect.get(z,re,Q);return J instanceof Mv?hc(J,X):re==="tables"?J.map(function(Z){return hc(Z,X)}):re==="_createTransaction"?function(){return hc(J.apply(this,arguments),X)}:J}});this.vip=X,S.forEach(function(z){return z(b)})}var pc,Qn=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",hT=(yh.prototype.subscribe=function(d,h,b){return this._subscribe(d&&typeof d!="function"?d:{next:d,error:h,complete:b})},yh.prototype[Qn]=function(){return this},yh);function yh(d){this._subscribe=d}try{pc={indexedDB:s.indexedDB||s.mozIndexedDB||s.webkitIndexedDB||s.msIndexedDB,IDBKeyRange:s.IDBKeyRange||s.webkitIDBKeyRange}}catch{pc={indexedDB:null,IDBKeyRange:null}}function i0(d){var h,b=!1,S=new hT(function(C){var j=K(d),D,B=!1,H={},q={},X={get closed(){return B},unsubscribe:function(){B||(B=!0,D&&D.abort(),z&&Ai.storagemutated.unsubscribe(Q))}};C.start&&C.start(X);var z=!1,re=function(){return qf(J)},Q=function(Z){cc(H,Z),uh(q,H)&&re()},J=function(){var Z,ne,se;!B&&pc.indexedDB&&(H={},Z={},D&&D.abort(),D=new AbortController,se=function(ae){var he=_o();try{j&&So();var we=Ei(d,ae);return we=j?we.finally(Ci):we}finally{he&&xo()}}(ne={subscr:Z,signal:D.signal,requery:re,querier:d,trans:null}),Promise.resolve(se).then(function(ae){b=!0,h=ae,B||ne.signal.aborted||(H={},function(he){for(var we in he)if(f(he,we))return;return 1}(q=Z)||z||(Ai(Ga,Q),z=!0),qf(function(){return!B&&C.next&&C.next(ae)}))},function(ae){b=!1,["DatabaseClosedError","AbortError"].includes(ae==null?void 0:ae.name)||B||qf(function(){B||C.error&&C.error(ae)})}))};return setTimeout(re,0),X});return S.hasValue=function(){return b},S.getValue=function(){return h},S}var Ts=Xr;function vh(d){var h=ji;try{ji=!0,Ai.storagemutated.fire(d),fh(d,!0)}finally{ji=h}}p(Ts,r(r({},rt),{delete:function(d){return new Ts(d,{addons:[]}).delete()},exists:function(d){return new Ts(d,{addons:[]}).open().then(function(h){return h.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(d){try{return h=Ts.dependencies,b=h.indexedDB,h=h.IDBKeyRange,(oh(b)?Promise.resolve(b.databases()).then(function(S){return S.map(function(C){return C.name}).filter(function(C){return C!==Zu})}):sh(b,h).toCollection().primaryKeys()).then(d)}catch{return Rt(new be.MissingAPI)}var h,b},defineClass:function(){return function(d){l(this,d)}},ignoreTransaction:function(d){return De.trans?Ss(De.transless,d):d()},vip:ah,async:function(d){return function(){try{var h=hh(d.apply(this,arguments));return h&&typeof h.then=="function"?h:Te.resolve(h)}catch(b){return Rt(b)}}},spawn:function(d,h,b){try{var S=hh(d.apply(b,h||[]));return S&&typeof S.then=="function"?S:Te.resolve(S)}catch(C){return Rt(C)}},currentTransaction:{get:function(){return De.trans||null}},waitFor:function(d,h){return h=Te.resolve(typeof d=="function"?Ts.ignoreTransaction(d):d).timeout(h||6e4),De.trans?De.trans.waitFor(h):h},Promise:Te,debug:{get:function(){return ve},set:function(d){oe(d)}},derive:v,extend:l,props:p,override:_,Events:Wa,on:Ai,liveQuery:i0,extendObservabilitySet:cc,getByKeyPath:R,setByKeyPath:I,delByKeyPath:function(d,h){typeof h=="string"?I(d,h,void 0):"length"in h&&[].map.call(h,function(b){I(d,b,void 0)})},shallowClone:$,deepClone:Y,getObjectDiff:ph,cmp:it,asap:O,minKey:-1/0,addons:[],connections:ko,errnames:We,dependencies:pc,cache:Cs,semVer:"4.2.1",version:"4.2.1".split(".").map(function(d){return parseInt(d)}).reduce(function(d,h,b){return d+h/Math.pow(10,2*b)})})),Ts.maxKey=Qa(Ts.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Ai(Ga,function(d){ji||(d=new CustomEvent(Zf,{detail:d}),ji=!0,dispatchEvent(d),ji=!1)}),addEventListener(Zf,function(d){d=d.detail,ji||vh(d)}));var Po,ji=!1,s0=function(){};return typeof BroadcastChannel<"u"&&((s0=function(){(Po=new BroadcastChannel(Zf)).onmessage=function(d){return d.data&&vh(d.data)}})(),typeof Po.unref=="function"&&Po.unref(),Ai(Ga,function(d){ji||Po.postMessage(d)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(d){if(!Xr.disableBfCache&&d.persisted){ve&&console.debug("Dexie: handling persisted pagehide"),Po!=null&&Po.close();for(var h=0,b=ko;h<b.length;h++)b[h].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(d){!Xr.disableBfCache&&d.persisted&&(ve&&console.debug("Dexie: handling persisted pageshow"),s0(),vh({all:new rn(-1/0,[[]])}))})),Te.rejectionMapper=function(d,h){return!d||d instanceof me||d instanceof TypeError||d instanceof SyntaxError||!d.name||!lt[d.name]?d:(h=new lt[d.name](h||d.message,d),"stack"in d&&w(h,"stack",{get:function(){return this.inner.stack}}),h)},oe(ve),r(Xr,Object.freeze({__proto__:null,Dexie:Xr,liveQuery:i0,Entity:Iv,cmp:it,PropModification:Ka,replacePrefix:function(d,h){return new Ka({replacePrefix:[d,h]})},add:function(d){return new Ka({add:d})},remove:function(d){return new Ka({remove:d})},default:Xr,RangeSet:rn,mergeRanges:Za,rangesOverlap:Gv}),{default:Xr}),Xr})})(ok);var FI=ok.exports;const Hm=nf(FI),Zw=Symbol.for("Dexie"),Kd=globalThis[Zw]||(globalThis[Zw]=Hm);if(Hm.semVer!==Kd.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Hm.semVer} and ${Kd.semVer}`);const{liveQuery:F5,mergeRanges:B5,rangesOverlap:U5,RangeSet:z5,cmp:V5,Entity:K5,PropModification:W5,replacePrefix:H5,add:q5,remove:G5,DexieYProvider:Q5}=Kd;class BI extends Kd{constructor(){super("SankeertanDB");Xa(this,"categories");Xa(this,"songIndices");Xa(this,"songDetails");Xa(this,"books");this.version(1).stores({categories:"++id",songIndices:"++insertionId, &[bookId+songTitle], bookId",songDetails:"[bookId+songTitle], bookId",books:"bookId"})}}const xt=new BI,rp=new Map;async function UI(){try{const e=await xt.categories.toArray();return e.length>0?e:void 0}catch(e){console.error("Error retrieving categories from DB:",e);return}}async function zI(e){try{await xt.categories.clear(),await xt.categories.bulkAdd(e)}catch(t){console.error("Error saving categories to DB:",t)}}const Nu=async e=>{try{return await xt.songIndices.where("bookId").equals(e).count()>0}catch(t){return console.error(`Error checking song indices cache status for book ${e} from DB:`,t),!1}};async function VI(e){try{const t=await xt.songIndices.where("bookId").equals(e).delete();console.log(`Successfully deleted ${t} song index records for book: ${e}`)}catch(t){console.error(`Error deleting song indices for book ${e} from DB:`,t)}}async function KI(e){try{return await xt.songDetails.where("bookId").equals(e).count()}catch(t){return console.error(`Error counting downloaded songs for book ${e} from DB:`,t),0}}async function Xw(e){const t=e.map(async i=>{const s=i.bookId,o=i.songCount||0,[a,l,u]=await Promise.all([Nu(s),KI(s),QI(s)]);let c=0;a&&u>0?c=u:c=Number(o)||0;const f=c>0?l:0;return{bookId:s,status:{totalSongs:c,downloadedSongs:f,downloadingSongs:{},isIndexDownloaded:a}}}),n=await Promise.all(t),r={};return n.forEach(i=>{r[i.bookId]=i.status}),r}async function WI(e){try{const t=await xt.songDetails.where("bookId").equals(e).delete(),n=await xt.songIndices.where("bookId").equals(e).delete();console.log(`Successfully deleted cached book data for ${e}. 
                 Details removed: ${t}, Indices removed: ${n}`)}catch(t){console.error(`Error deleting all book data for book ${e} from DB:`,t)}}async function ak(e){try{const t=await xt.songIndices.where("bookId").equals(e).sortBy("insertionId");return t.length>0?t:void 0}catch(t){console.error(`Error retrieving song indices for book ${e} from DB:`,t);return}}async function lk(e,t){try{await xt.songIndices.where("bookId").equals(e).delete();const n=t.map(r=>({...r,bookId:e,tags:r.tags||[]}));await xt.songIndices.bulkAdd(n)}catch(n){console.error(`Error saving song indices for book ${e} to DB:`,n)}}async function Pf(e,t){try{const n=[e,t];return await xt.songDetails.where("[bookId+songTitle]").equals(n).count()>0}catch(n){return console.error(`Error checking download status for ${t} in ${e}:`,n),!1}}async function HI(e,t){try{const n=[e,t];return await xt.songDetails.where("[bookId+songTitle]").equals(n).first()}catch(n){console.error(`Error retrieving song detail for ${t} in ${e} from DB:`,n);return}}const Ly=(e,t)=>`${e}-${encodeURIComponent(t)}`;async function uk(e){const t=Ly(e.bookId,e.songTitle);try{const n={cacheId:t,...e};await xt.songDetails.put(n)}catch(n){throw console.error(`Error saving song detail for ${t} to DB:`,n),n}}async function qI(e,t){try{const n=[e,t];await xt.songDetails.delete(n)}catch(n){console.error(`Error deleting song detail for ${t} in ${e} from DB:`,n)}}async function GI(e,t,n,r){const{sourceRow:i,songTitle:s}=t,o=Ly(e,s);if(await Pf(e,s))return;const l=rp.get(o);if(l)return l;const u=String(i),c=Number(i),f=(async()=>{if(!e||!s||isNaN(c)||c<0)throw new Error(`Missing or invalid critical song parameters for fetching: Book ID: ${e}, Title: ${s}, Row: ${i}, User: ${n}`);try{const p=await r({bookId:e,sourceRow:u,songTitle:s,sessionuser:n});if(p.length<3)throw new Error("API response is incomplete. Expected [songData, metadata, sourceLanguage].");const[m,w,v,x]=p;await uk({bookId:e,songTitle:s,sourceRow:u,indexPosition:x,songData:m,metadata:w,sourceLanguage:v})}catch(p){throw console.error(`Failed to download and cache song ${s} in book ${e}:`,p),p}})();rp.set(o,f);try{await f}finally{rp.delete(o)}}async function QI(e){try{return await xt.songIndices.where("bookId").equals(e).count()}catch(t){return console.error(`Error counting song indices for book ${e}:`,t),0}}async function YI(e){try{const t=xt.songIndices.where("bookId").equals(e).sortBy("insertionId"),n=xt.songDetails.where("bookId").equals(e).toArray(),[r,i]=await Promise.all([t,n]);return console.log(`Exported ${r.length} indices and ${i.length} song details for Book ID: ${e}`),{bookId:e,songIndices:r,songDetails:i}}catch(t){return console.error(`Error exporting full book structure for ${e} from Dexie:`,t),null}}async function JI(e){const t=e.map(n=>({...n,timestamp:Date.now()}));try{await xt.songIndices.bulkPut(t),console.log(`Dexie Bulk Save: Successfully inserted/updated ${t.length} song indices.`)}catch(n){throw console.error("Error during Dexie bulkPut transaction (Indices):",n),n}}async function ZI(e){const t=e.map(n=>({cacheId:Ly(n.bookId,n.songTitle),timestamp:Date.now(),...n}));try{await xt.songDetails.bulkPut(t),console.log(`Dexie Bulk Save: Successfully inserted/updated ${t.length} song details.`)}catch(n){throw console.error("Error during Dexie bulkPut transaction:",n),n}}const ck=E.createContext({categories:[],isLoading:!1,isFetching:!1,error:null}),XI=async e=>{const t=new URL(`${vo}`);t.searchParams.append("mode","api"),t.searchParams.append("apiname","getcategoriesandbooks"),t.searchParams.append("sessionuser",e??"dummyfornow");const n=await fetch(t.toString());if(!n.ok){const s=await n.json().catch(()=>({message:"No detailed error message"}));throw new Error(`Failed to fetch categories and books: ${n.status} - ${JSON.stringify(s)}`)}const r=await n.json();return Object.keys(r).filter(s=>s!=="books").map(s=>({name:s,bookCount:Array.isArray(r[s])?r[s].length:0,books:Array.isArray(r[s])?r[s].map(o=>({bookId:o["Book Id"],bookName:o["Book Name"],songCount:o["Song Count"],verseCount:o["Verse Count"],isBookSourceSupabase:o.isBookSourceSupabase==="true"||o.isBookSourceSupabase===!0})):[],id:s.toLowerCase().replace(/ /g,"-"),image:`https://placehold.co/800/orange/black?text=${encodeURIComponent(s)}&font=lora`}))},eD=({children:e})=>{var p;const{session:t}=bs(),n=(p=t==null?void 0:t.user)==null?void 0:p.email,[r,i]=E.useState(void 0),[s,o]=E.useState(!0);E.useEffect(()=>{(async()=>{try{const w=await UI();w&&i(w)}catch(w){console.error("Error retrieving categories data from IndexedDB:",w)}finally{o(!1)}})()},[]);const{isLoading:a,isFetching:l,error:u,data:c}=Tf({queryKey:["categories",n],queryFn:()=>XI(n??null),staleTime:1/0,initialData:r,refetchOnMount:!1,enabled:!!n&&!s});E.useEffect(()=>{c&&!l&&zI(c).catch(m=>{console.error("Error saving categories data to IndexedDB:",m)})},[c,l]);const f=s||a;return k.jsx(ck.Provider,{value:{categories:c??r??[],isLoading:f,isFetching:l,error:u},children:e})},$y=()=>E.useContext(ck),eb=e=>{const[t,n]=E.useState(!1);return E.useEffect(()=>{if(typeof window>"u"||!window.matchMedia)return;const r=window.matchMedia(e),i=s=>n(s.matches);return n(r.matches),r.addEventListener("change",i),()=>{r.removeEventListener("change",i)}},[e]),t};function tD(){var m;const{categories:e,isLoading:t,isFetching:n,error:r}=$y(),i=jr(),[s,o]=E.useState([]);eb("(max-width: 600px) and (orientation: portrait)"),eb("(max-width: 900px) and (orientation: landscape)");const{session:a}=bs(),l=(m=a==null?void 0:a.user)==null?void 0:m.email,u=Du();if(E.useEffect(()=>{o((v=>{const x=[],g=360/v;for(let y=0;y<v;y++){const _=y*g;x.push(`hsl(${_}, 70%, 60%)`)}return x})(e.length))},[e.length]),t||n)return k.jsx("div",{children:"Loading categories..."});if(r instanceof Error)return k.jsxs("div",{children:["Error loading categories: ",r.message]});const c=async()=>{await xt.categories.delete("1"),console.log("Categories & Books -> IndexedDB cache cleared. Data will be reloaded from the server."),u.invalidateQueries({queryKey:["categories",l]})},f=(w,v)=>{w.stopPropagation(),i(`/books/${v}`)},p={container:{maxWidth:"1000px",margin:"0 auto",padding:"20px",fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",backgroundColor:"#f5f7fa",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.1)"},heading:{textAlign:"center",color:"#2c3e50",marginBottom:"25px",fontSize:"32px",fontWeight:"700",paddingBottom:"15px",borderBottom:"2px solid #eaeaea"},categoryGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"20px"},categoryItem:{borderRadius:"12px",padding:"20px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 10px rgba(0, 0, 0, 0.08)",border:"1px solid #eaeaea",display:"flex",alignItems:"center",position:"relative",overflow:"hidden"},categoryIcon:{marginRight:"15px",width:"50px",height:"50px",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",color:"white",flexShrink:"0",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)"},categoryName:{fontWeight:"600",color:"#2c3e50",fontSize:"18px"}};return{...p.categoryGridBase},k.jsxs("div",{style:p.container,children:[k.jsxs("h2",{style:p.heading,children:["Book Categories",k.jsx("button",{onClick:c,style:{marginRight:"10px"},title:"Reload",children:""})]}),k.jsx("div",{style:p.categoryGrid,children:e==null?void 0:e.map((w,v)=>k.jsxs("div",{onClick:x=>f(x,w.id),style:{...p.categoryItem,backgroundColor:v%2===0?"#f8f9fa":"#ffffff"},className:"category-item",children:[k.jsx("div",{style:{...p.categoryIcon,backgroundColor:s[v]||"#3498db"},children:""}),k.jsx("span",{style:p.categoryName,children:w.name})]},w.id))}),k.jsx("style",{children:`
          .category-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            border-color: #3498db;
          }
        `})]})}const dk=E.createContext({isOfflineMode:!1,setIsOfflineMode:()=>{},isEffectivelyOffline:!1}),nD=({children:e})=>{const[t,n]=E.useState(!1),r=t||!navigator.onLine;return E.useEffect(()=>{const i=()=>{},s=()=>{t||n(!0)};return window.addEventListener("online",i),window.addEventListener("offline",s),()=>{window.removeEventListener("online",i),window.removeEventListener("offline",s)}},[t,n]),k.jsx(dk.Provider,{value:{isOfflineMode:t,setIsOfflineMode:n,isEffectivelyOffline:r},children:e})},My=()=>E.useContext(dk);console.log("DownloadStatusProvider Function Running!");const tb={},fk=E.createContext(void 0),rD=({children:e,books:t})=>{const n=E.useMemo(()=>t.reduce((x,g)=>(x[g.bookId]={totalSongs:g.songCount||0,downloadedSongs:0,downloadingSongs:{},isIndexDownloaded:!1},x),{}),[t]),[r,i]=E.useState(n),[s,o]=E.useState(!1);E.useEffect(()=>{if(!t||t.length===0){i({}),o(!0);return}(async()=>{try{const g=await Xw(t),y={};for(const _ of t){const T=_.bookId,O=g[T]||{},R=await Nu(T);y[T]={totalSongs:_.songCount||O.totalSongs||0,downloadedSongs:O.downloadedSongs||0,isIndexDownloaded:R,downloadingSongs:{}}}i(y),o(!0)}catch(g){console.error("Failed to load or initialize download status:",g),i({}),o(!0)}})()},[t]);const a=E.useMemo(()=>t.map(x=>x.bookId).join(","),[t]);E.useEffect(()=>{if(!t||t.length===0){i(tb);return}(async()=>{try{const g=await Xw(t);i(g)}catch(g){console.error("Failed to load initial download status from DB:",g),i(tb)}})()},[a,t]);const l=E.useCallback((x,g)=>{i(y=>({...y,[x]:{...y[x],totalSongs:g}}))},[]),u=E.useCallback((x,g)=>{i(y=>({...y,[x]:{...y[x],downloadedSongs:g}}))},[]),c=E.useCallback((x,g)=>{i(y=>({...y,[x]:{...y[x],isIndexDownloaded:g}}))},[]),f=E.useCallback((x,g)=>{i(y=>{var _;return{...y,[x]:{...y[x],downloadingSongs:{...(_=y[x])==null?void 0:_.downloadingSongs,[g]:!0}}}})},[]),p=E.useCallback((x,g)=>{i(y=>{const _=y[x];if(!_)return y;const T={..._.downloadingSongs};return delete T[g],{...y,[x]:{..._,downloadedSongs:(_.downloadedSongs||0)+1,downloadingSongs:T}}})},[]),m=E.useCallback((x,g,y)=>{i(_=>{const T=_[x]||{},O=T.downloadedSongs||0;return{..._,[x]:{...T,totalSongs:g,downloadedSongs:O,downloadingSongs:y}}})},[]),w=E.useCallback(x=>{i(g=>{const y=g[x];return y?{...g,[x]:{...y,downloadedSongs:y.totalSongs,downloadingSongs:{}}}:g})},[]),v={downloadStatus:r,updateDownloadProgress:l,updateDownloadedCount:u,markSongAsDownloading:f,markSongAsDownloaded:p,updateIndexStatus:c,markBookDownloadStart:m,markBookDownloadComplete:w,isLoaded:s};return k.jsx(fk.Provider,{value:v,children:e})},Fy=()=>{const e=E.useContext(fk);if(!e)throw new Error("useDownloadStatus must be used within a DownloadStatusProvider");return e},iD=3e3,sD=1,oD=5,hk=async({bookId:e,sourceRow:t,songTitle:n,sessionuser:r})=>{if(!e||!t)throw new Error("bookId or sourceRow is not defined. Cannot fetch songDetails");const i=new URL(vo);i.searchParams.append("mode","api"),i.searchParams.append("apiname","getsongtextforsong"),i.searchParams.append("book",e),i.searchParams.append("sourcerow",t),i.searchParams.append("songtitle",n),r&&i.searchParams.append("sessionuser",r);const s=await fetch(i.toString());if(!s.ok){const o=await s.json();throw new Error(`Failed to fetch song details for book ${e}+row ${t}: ${s.status} - ${JSON.stringify(o)}`)}return await s.json()},aD=(e,t,n)=>{const{downloadStatus:r,markSongAsDownloaded:i,markBookDownloadStart:s,markBookDownloadComplete:o}=Fy(),a=E.useCallback(c=>{const f=r[c];if(!f)return!1;const p=f.downloadingSongs??{};return Object.keys(p).length>0},[r]),l=E.useMemo(()=>Object.values(r).some(c=>Object.keys(c.downloadingSongs??{}).length>0),[r]),u=E.useCallback(async(c,f)=>{if(a(c))return 0;let p=[],m=0;if(await Nu(c)){const y=await ak(c);y&&Array.isArray(y)&&(p=y.map(_=>({sourceRow:_.sourceRow,songTitle:_.songTitle,tags:_.tags})),m=p.length)}else try{const y=new URL(vo);y.searchParams.append("mode","api"),y.searchParams.append("apiname","getsongsforbook"),y.searchParams.append("book",c),f&&y.searchParams.append("sessionuser",f);const _=await fetch(y.toString());if(!_.ok){const R=await _.json();throw new Error(`Failed to fetch song indices: ${_.status} - ${JSON.stringify(R)}`)}const O=(await _.json()).map(R=>({...R,sourceRow:typeof R.sourceRow=="string"?parseInt(R.sourceRow,10):R.sourceRow,tags:R.tags??void 0}));p=O,m=p.length,await lk(c,O)}catch{return 0}if(p.length===0)return 0;const w=[];for(const y of p)await Pf(c,y.songTitle)?i(c,y.songTitle):w.push(y);const v=w.slice(0,oD),x={};for(const y of v)x[y.songTitle]="pending";s(c,m,x);let g=0;for(const y of v)try{g>=sD&&(await new Promise(_=>setTimeout(_,iD)),g=0),await GI(c,y,f??null,hk),i(c,y.songTitle),g++}catch{}return m},[e,t,n,a,i,s]);return{isDownloadingBook:a,downloadAllSongsForBook:u,isAnyBookDownloading:l}},mr={container:{fontFamily:"sans-serif",fontSize:"14px",color:"#555",marginBottom:"20px"},link:{color:"#007bff",textDecoration:"none",transition:"color 0.2s ease-in-out"},separator:{margin:"0 5px",color:"#999"},currentPage:{fontWeight:"bold",color:"#333",cursor:"default",textDecoration:"none"}},By=()=>{const e=dr(),{categoryId:t,bookId:n,songTitle:r}=Au(),i=r?decodeURIComponent(r):"",[s,o]=Ke.useState(!1),a={...mr.link,color:s?"#0056b3":"#007bff",textDecoration:s?"underline":"none"},l=k.jsx(rr,{to:"/",style:a,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:"Home"});return e.pathname.startsWith("/books/")?k.jsxs("div",{style:mr.container,children:[l,k.jsx("span",{style:mr.separator,children:">"}),t]}):e.pathname.startsWith("/book/")?k.jsxs("div",{style:mr.container,children:[l,k.jsx("span",{style:mr.separator,children:">"}),k.jsx(rr,{to:`/books/${t}`,style:a,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:t}),k.jsx("span",{style:mr.separator,children:">"}),n]}):e.pathname.startsWith("/details/book/")?k.jsxs("div",{style:mr.container,children:[l,k.jsx("span",{style:mr.separator,children:">"}),k.jsx(rr,{to:`/books/${t}`,style:a,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:t}),k.jsx("span",{style:mr.separator,children:">"}),k.jsx(rr,{to:`/book/${t}/${n}`,style:a,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:n}),k.jsx("span",{style:mr.separator,children:">"}),k.jsx("span",{style:mr.currentPage,children:i})]}):null},pk=E.createContext({preferredLanguage:"deva",setPreferredLanguage:()=>{}}),mk=({children:e})=>{const t=localStorage.getItem("preferredLanguage"),[n,r]=E.useState(t||"deva");return E.useEffect(()=>{localStorage.setItem("preferredLanguage",n)},[n]),k.jsx(pk.Provider,{value:{preferredLanguage:n,setPreferredLanguage:r},children:e})},Ba=()=>E.useContext(pk),nb=["searchIndex","allSongs"];async function lD(e,t){if(!e)return-1;const n=new URL(vo);n.searchParams.append("mode","api"),n.searchParams.append("apiname","getentirebookasjson"),n.searchParams.append("book",e),n.searchParams.append("sessionuser",t??"dummyfornow"),console.log(`url:${n.toString()}`);const r=await fetch(n.toString());if(!r.ok){const a=await r.json().catch(()=>({message:"No detailed error message"}));throw new Error(`Failed to fetch song indices for book ${e}: ${r.status} - ${JSON.stringify(a)}`)}const i=await r.json(),{songIndices:s,songDetails:o}=i;if(o.length===0)return console.log(`No song details found for book: ${e}`),0;try{await ZI(o),await JI(s);const a=Du();return await a.invalidateQueries({queryKey:nb}),await a.refetchQueries({queryKey:nb}),console.log("Download complete, and search index cache invalidated."),o.length}catch(a){throw console.error(`Error saving bulk data for ${e}:`,a),a}}const gk=(e,t)=>{const[n,r]=E.useState({status:"idle",downloadedCount:null,error:null}),i=E.useCallback(async()=>{if(n.status!=="loading"){r({status:"loading",downloadedCount:null,error:null});try{const s=await lD(e,t);return r({status:"success",downloadedCount:s,error:null}),s}catch(s){const o=s.message||"Bulk download failed.";return r({status:"error",downloadedCount:null,error:o}),0}}},[e,t,n.status]);return{...n,startBulkDownload:i,isDownloading:n.status==="loading"}},yk=Ke.memo(e=>{const{book:t,status:n,indexDownloadStatus:r,userEmail:i,isEffectivelyOffline:s,isAnyBookDownloading:o,isDownloadingBook:a,isDownloadingBookIndex:l,handleBookClick:u,handleDownloadBookIndexClick:c,handleDownloadBookClick:f,handleDeleteIndexClick:p,handleDeleteBookClick:m,DownloadIndexIcon:w,DownloadedIcon:v,DownloadBookIcon:x,DeleteIndexIcon:g,DeleteBookIcon:y}=e,{status:_,isDownloading:T,startBulkDownload:O}=gk(t.bookId,i),R=o||T,I=a(t.bookId),$=Object.keys((n==null?void 0:n.downloadingSongs)??{}).length,U=n.downloadedSongs||0,V=n.totalSongs||t.songCount||0,ge=Math.max(Number(V),U),M=ge>0?Math.floor(U/ge*100):0,Y=r[t.bookId]??!1,P=U===ge&&ge>0;return k.jsx("li",{onClick:te=>u(te,t.bookId),className:"relative overflow-hidden cursor-pointer border-b border-gray-300 py-2 px-4",children:k.jsxs("div",{className:"z-20 relative grid grid-cols-[1fr_auto] gap-4 items-center divide-x divide-gray-300",children:[k.jsxs("div",{className:"relative text-lg font-medium pr-4",children:[k.jsx("div",{className:"absolute inset-0 bg-gray-200 z-0 rounded-md",style:{width:"100%"}}),k.jsx("div",{className:"absolute inset-0 bg-green-200 z-10 rounded-md",style:{width:`${M}%`}}),k.jsx("span",{className:`relative z-20 px-2 ${M>25,"text-black-900"}`,children:I?k.jsxs("span",{className:"font-bold",children:[k.jsxs("span",{className:"text-black-900 mr-2",children:[t.bookName,":"]}),k.jsxs("span",{className:"text-green-700",children:["Downloading... (",$," remaining)"]})]}):k.jsx("span",{className:"text-black-900",children:t.bookName})})]}),k.jsxs("div",{className:"flex items-center space-x-4 divide-x divide-gray-300 pl-4",children:[k.jsx("div",{className:"flex items-center text-sm text-gray-600 pr-4 min-w-[150px]",children:k.jsxs("span",{children:["(",U,"/",ge," downloaded)"]})}),k.jsx("div",{className:"flex items-center pl-4 min-w-[150px]",children:Y?k.jsxs("span",{className:"flex items-center text-green-500",children:[v," ",k.jsx("span",{className:"ml-1",children:"Index"})]}):k.jsx("button",{onClick:te=>{te.stopPropagation(),c(te,t.bookId)},disabled:s||o||a(t.bookId)||Y,className:"flex items-center text-brown-600",children:l===t.bookId?"DownloadingI...":k.jsxs(k.Fragment,{children:[w," ",k.jsx("span",{className:"ml-1",children:"Index"})]})})}),k.jsx("div",{className:"flex items-center pl-4 min-w-[150px]",children:P?k.jsxs("span",{className:"flex items-center text-green-500",children:[v," ",k.jsx("span",{className:"ml-1",children:"Book"})]}):k.jsx(k.Fragment,{children:k.jsx("button",{onClick:te=>{te.stopPropagation(),O()},disabled:s||R,className:"btn-primary-fast",title:"Download all songs instantly in one go.",children:k.jsxs("span",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[x," ",T?"Downloading (Fast)...":_==="success"?"Downloaded ":"Book"]})})})}),k.jsxs("div",{className:"flex items-center space-x-2 pl-4",children:[k.jsxs("button",{onClick:te=>{te.stopPropagation(),p(te,t.bookId)},disabled:!Y,className:"flex items-center text-red-500 border border-red-500 px-2 py-1 rounded-md hover:bg-red-50 disabled:opacity-50 disabled:cursor-not-allowed disabled:text-gray-400 disabled:border-gray-400",children:[g," ",k.jsx("span",{className:"ml-1",children:"Index"})]}),k.jsxs("button",{onClick:te=>{te.stopPropagation(),m(te,t.bookId)},disabled:a(t.bookId)||M===0,className:"flex items-center bg-red-500 text-white border border-red-500 px-2 py-1 rounded-md hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed disabled:bg-gray-400 disabled:text-gray-600 disabled:border-gray-400",children:[y," ",k.jsx("span",{className:"ml-1",children:"Book"})]})]})]})]})})});yk.displayName="BookListItem";function uD(e,t){const n=E.useMemo(()=>(e==null?void 0:e.books)??[],[e==null?void 0:e.books]),[r,i]=E.useState(n);return E.useEffect(()=>{if(!t){i(n);return}(async()=>{const l=(await Promise.all(n.map(async u=>({...u,isCached:await Nu(u.bookId)})))).filter(u=>u.isCached);i(l)})()},[n,t]),E.useMemo(()=>t?r:n,[t,n,r])}function cD(){var me;const{categoryId:e}=Au(),t=jr(),{categories:n,isLoading:r,isFetching:i,error:s}=$y(),{isEffectivelyOffline:o}=My(),a=E.useMemo(()=>{if(n&&e)return n.find(ce=>ce.id===e)},[n,e]),l=uD(a,o);E.useEffect(()=>{if(!l||l.length===0){g({});return}(async()=>{const de=l.map(Fe=>Nu(Fe.bookId)),Be=await Promise.all(de),We={};l.forEach((Fe,be)=>{We[Fe.bookId]=Be[be]}),g(We)})()},[l]);const{downloadAllSongsForBook:u,isDownloadingBook:c,isAnyBookDownloading:f}=aD(),[p,m]=E.useState(null),[w,v]=E.useState(!1),[x,g]=E.useState({}),y=Du(),{preferredLanguage:_}=Ba(),{downloadStatus:T,isLoaded:O,updateDownloadProgress:R,updateDownloadedCount:I}=Fy(),{session:$}=bs(),U=(me=$==null?void 0:$.user)==null?void 0:me.email,V=async(ce,de)=>{ce==null||ce.stopPropagation(),window.confirm(`Pls confirm for deletion of book index [${de}]`)&&(await VI(de),g(We=>({...We,[de]:!1})),R(de,0),I(de,0))},ge=async(ce,de)=>{ce==null||ce.stopPropagation(),window.confirm(`WARNING: This will permanently delete the ENTIRE book "${de}". This action cannot be undone. Please confirm.`)&&(await WI(de),R(de,0),I(de,0))},M=(ce,de)=>{console.log(`categoryId:${e}, bookId:${de}`),ce==null||ce.stopPropagation(),t(`/book/${e}/${de}`)},Y=async()=>{var de;v(!0);const ce=(de=$==null?void 0:$.user)==null?void 0:de.email;try{const Be=l.map(We=>y.prefetchQuery({queryKey:["songIndices",We.bookId,_,ce],queryFn:()=>P(We.bookId,ce??null)}));await Promise.all(Be),console.log("All song indices downloaded successfully.")}catch(Be){console.error("Failed to download all indices:",Be)}finally{v(!1)}},P=async(ce,de)=>{if(!ce)return[];const Be=`sankeertan_song_indices-${ce}`,We=localStorage.getItem(Be);if(We)try{return JSON.parse(We)}catch(rt){console.error("Error parsing song indices from localStorage:",rt)}const Fe=new URL(vo);Fe.searchParams.append("mode","api"),Fe.searchParams.append("apiname","getsongsforbook"),Fe.searchParams.append("book",ce),Fe.searchParams.append("sessionuser",de??"dummyfornow");const be=await fetch(Fe.toString());if(!be.ok){const rt=await be.json();throw new Error(`Failed to fetch song indices for book ${ce}: ${be.status} - ${JSON.stringify(rt)}`)}const lt=await be.json();return console.log(`Setting localstorage for ${Be}`),localStorage.setItem(Be,JSON.stringify(lt)),lt},te=async(ce,de)=>{var We;ce.stopPropagation(),m(de);const Be=(We=$==null?void 0:$.user)==null?void 0:We.email;try{await y.prefetchQuery({queryKey:["songIndices",de,_,Be],queryFn:()=>P(de,Be??null)}),console.log(`Index for Book ${de} downloaded successfully.`)}catch(Fe){console.error(`Failed to download index for Book ${de}:`,Fe)}finally{m(null)}},Ce=async(ce,de,Be)=>{ce==null||ce.stopPropagation(),await u(de,U)},le=k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",children:[k.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),k.jsx("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zM6 20V4h7v5h5v11H6zM13 15h-2v3h-2v-3H7l3.5-3.5L14 15h-2z"})]}),ue=k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",children:[k.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),k.jsx("path",{d:"M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h12v16H6V4zM16 13h-3v3h-2v-3H8l4-4 4 4zM14 20h-4v-2h4v2z"})]}),L=k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",children:[k.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),k.jsx("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18h14v2H5v-2z"})]}),ie=k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",children:[k.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),k.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})]}),K=k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",children:[k.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),k.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})]}),W=k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",children:[k.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),k.jsx("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zM6 4h7v5h5v11H6V4zm-2 16h16V4h-3V1h-4v3h-3v-3H4v3H1v2h3v12zM12 9l-4 4h3v4h2v-4h3l-4-4z"})]});return r||i?k.jsx("div",{children:"Loading books..."}):s instanceof Error?k.jsxs("div",{children:["Error loading books: ",s.message]}):O?k.jsxs(k.Fragment,{children:[k.jsx(By,{}),k.jsx("div",{children:l.length>0&&k.jsx("ul",{className:"list-none p-0",children:l.map(ce=>k.jsx(yk,{book:ce,status:T[ce.bookId]||{},indexDownloadStatus:x,userEmail:U??null,isEffectivelyOffline:o,isAnyBookDownloading:f,isDownloadingBook:c,isDownloadingBookIndex:p,handleBookClick:M,handleDownloadBookIndexClick:te,handleDownloadBookClick:Ce,handleDeleteIndexClick:V,handleDeleteBookClick:ge,DownloadIndexIcon:le,DownloadedIcon:ie,DownloadBookIcon:L,DeleteIndexIcon:W,DeleteBookIcon:K},ce.bookId))})}),k.jsx("div",{className:"mt-4 p-4 border-t border-gray-200",children:k.jsxs("button",{onClick:Y,disabled:w,className:`px-4 py-2 rounded-lg text-sm font-semibold text-white transition-colors duration-300 ${w?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"}`,children:[ue,w?"Downloading All...":"Download All Indices"]})})]}):k.jsx("div",{className:"flex justify-center items-center h-40",children:k.jsx("p",{children:"Loading download status..."})})}function dD(e){return[{pattern:/([])/g,replacement:"$1",name:"Palatal"},{pattern:/([])/g,replacement:"$1",name:"Retroflex"},{pattern:/([])/g,replacement:"$1",name:"Velar"},{pattern:/([])/g,replacement:"$1",name:"Dental"},{pattern:/([])/g,replacement:"$1",name:"Labial"},{pattern:/$/g,replacement:"",name:"Word-final"},{pattern://g,replacement:"",name:"Chandrabindu  "}].reduce((n,r)=>{const i=n.replace(r.pattern,(s,o)=>r.replacement.replace("$1",o));return i!==n?i:n},e)}function fD(e){const t={"":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9"};return e.replace(/\u0D30\u0D4D/g,"").replace(/[-]/g,n=>t[n]||n)}function hD(e){const t={"":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9"};let n=e;for(const r in t){const i=t[r];n=n.replace(new RegExp(r,"g"),i)}return n}function pD(e){return e.replace(/~nja?/g,"~n").replace(/~nca?/g,"~nca").replace(/[]?/g,"n").replace(/jh/g,"c").replace(/bh/g,"p").replace(/gh/g,"k").replace(/dh/g,"t").replace(/([kctp])a(?![aiueo])/g,"$1").replace(//g,"").replace(//g,"i").replace(//g,"").replace(//g,"u").replace(//g,"").replace(/n([ctkp])/g,"$1").replace(//g,"").replace(//g,"r").replace(/aa/g,"A").replace(/ii/g,"I").replace(/uu/g,"U")}const Wd=(e,t,n)=>{let r=e,i=e;return t==="devanagari"?r=dD(r):t==="tamil"&&(r=r.normalize("NFC")),window.Sanscript&&(i=window.Sanscript.t(r,t==="devanagari"?"devanagari":"itrans",n),n==="malayalam"?i=fD(i):n==="itrans"?t==="tamil"&&(i=pD(i)):(n==="tamil"||n==="tamil_superscripted")&&(i=hD(i))),i},mD={color:"green"},gD={color:"black"},yD={backgroundColor:"#e0e0e0",fontWeight:"bold",color:"blue"},vD={position:"fixed",top:"0",left:"0",width:"100%",height:"100%",display:"flex",justifyContent:"flex-start",alignItems:"flex-start",padding:"10px",zIndex:9999},wD={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 15px",marginBottom:"2px",borderRadius:"6px",cursor:"pointer",transition:"background-color 0.2s ease",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",borderBottom:"1px solid #e2e8f0"},bD={backgroundColor:"#f0f4f8"},_D=async(e,t)=>{if(!e)return[];const n=new URL(vo);n.searchParams.append("mode","api"),n.searchParams.append("apiname","getsongsforbook"),n.searchParams.append("book",e),n.searchParams.append("sessionuser",t??"dummyfornow");const r=await fetch(n.toString());if(!r.ok){const s=await r.json().catch(()=>({message:"No detailed error message"}));throw new Error(`Failed to fetch song indices for book ${e}: ${r.status} - ${JSON.stringify(s)}`)}const i=await r.json();return i.data||i},xD=(e,t)=>{const[n,r]=E.useState({});return E.useEffect(()=>{if(!e||!t||t.length===0)return;(async()=>{const s=t.map(async l=>{const u=await Pf(e,l.songTitle);return{title:l.songTitle,isDownloaded:u}}),a=(await Promise.all(s)).reduce((l,u)=>(l[u.title]=u.isDownloaded,l),{});r(a)})()},[e,t]),n};function SD(){var M;const{categoryId:e,bookId:t}=Au(),n=jr(),{isEffectivelyOffline:r}=My(),{session:i}=bs(),s=(M=i==null?void 0:i.user)==null?void 0:M.email,[o,a]=E.useState(null),{preferredLanguage:l}=Ba(),[,u]=E.useState({});E.useEffect(()=>{u({})},[l]);const[c,f]=E.useState(void 0),[p,m]=E.useState(!0);E.useEffect(()=>{(async()=>{if(!t){m(!1);return}try{const P=await ak(t);P&&f(P)}catch(P){console.error("Error retrieving song indices data from IndexedDB:",P)}finally{m(!1)}})()},[t]);const{isLoading:w,error:v,data:x,isFetching:g}=Tf({queryKey:["songIndices",t,s],queryFn:()=>_D(t,s??null),staleTime:1/0,gcTime:0,initialData:c,refetchOnMount:!1,enabled:!!t&&!!s&&!p}),y=x??c,{downloadStatus:_}=Fy(),T=xD(t,y);if(E.useEffect(()=>{t&&x&&!g&&lk(t,x).catch(Y=>{console.error("Error saving song indices data to IndexedDB:",Y)})},[t,x,g]),E.useEffect(()=>{const Y=sessionStorage.getItem("lastClickedSongIndex");Y!==null&&(a(parseInt(Y,10)),sessionStorage.removeItem("lastClickedSongIndex"))},[]),p||w)return k.jsx("div",{style:vD,children:k.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"20px",minHeight:"200px"},children:[k.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[k.jsx("circle",{cx:"20",cy:"20",r:"18",stroke:"#E2E8F0",strokeWidth:"4"}),k.jsx("path",{d:"M20 2C10.0588 2 2 10.0588 2 20",stroke:"#09F",strokeWidth:"4",strokeLinecap:"round"}),k.jsx("animateTransform",{attributeName:"transform",type:"rotate",from:"0 20 20",to:"360 20 20",dur:"1s",repeatCount:"indefinite"})]}),k.jsx("p",{style:{marginLeft:"10px"},children:"Loading song indices..."})]})});if(v instanceof Error)return k.jsxs("div",{children:["Error loading song indices: ",v.message]});const R=(Y,P,te,Ce)=>{Y.stopPropagation();const le=P[te].sourceRow,ue=P[te].songTitle;Ce&&(sessionStorage.setItem("lastClickedSongIndex",te.toString()),n(`/details/book/${e}/${Ce}/${le}/${encodeURIComponent(ue)}`,{state:{filteredSongIndices:P,index:te}}))},I=Y=>T[Y]===!0,$=(y==null?void 0:y.filter(Y=>r?I(Y.songTitle):!0))??[],U=(Y,P)=>{const te=I(Y.songTitle);return{...wD,...te?mD:gD,...P===o&&yD}},V=Y=>{Y.currentTarget.style.backgroundColor=bD.backgroundColor},ge=Y=>{Y.currentTarget.style.backgroundColor=""};return k.jsxs(k.Fragment,{children:[k.jsx(By,{}),k.jsxs("div",{children:[k.jsxs("h2",{children:["Song Indices for Book: ",`bookId ... ${$.length}`]}),k.jsx("ul",{children:$==null?void 0:$.map((Y,P)=>{var te;return k.jsxs("li",{onClick:Ce=>R(Ce,$,P,t),style:U(Y,P),onMouseEnter:V,onMouseLeave:ge,children:[k.jsx("span",{style:{flexGrow:1,fontSize:"1.2em"},children:l==="itrans"?Y.songTitle:(()=>{if(window.Sanscript)try{return Wd(Y.songTitle,"itrans",l)}catch(Ce){return console.error("Error during transliteration",Ce),Y.songTitle}return Y.songTitle})()}),k.jsx("span",{style:{marginLeft:"10px",color:"red"},children:t&&((te=_[t])==null?void 0:te.downloadingSongs[Y.songTitle])&&"..downloading.."})]},Y.sourceRow)})})]})]})}const kD=({data:e,className:t="",highlightColor:n="bg-amber-50",highlightColumns:r=[],wrapColumns:i=[],striped:s=!0,hoverEffect:o=!0,maxWidth:a="screen",fontSize:l="3xl",preferredLanguage:u,sourceLanguage:c})=>{if(!Array.isArray(e)||e.length<1)return k.jsx("div",{className:"p-2 text-red-500 bg-red-50 rounded",children:"Invalid data: Must be a non-empty array"});const[f,...p]=e,m=v=>{let x=String(v).replace(/  \s*\/?>/gi,"<br/>").replace(/\n/g,"<br/>");if(typeof v=="string"&&u!=="deva"&&window.Sanscript)try{const g=x.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");x=Wd(g,c,u).replace(/&lt;br\s*\/&gt;/gi,"<br/>"),x=x.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">")}catch(g){return console.error("Error during transliteration:",g),{__html:x}}return{__html:x}},w=a==="screen"?"max-w-screen":a==="full"?"w-full":a;return k.jsx("div",{className:`overflow-x-auto rounded-lg border bg-gray-300 ${w} ${t}`,children:k.jsxs("table",{className:"min-w-full divide-y divide-gray-200 font-devanagari",children:[k.jsx("thead",{className:"bg-gray-50",children:k.jsx("tr",{children:f.map((v,x)=>k.jsx("th",{className:`
                  px-4 py-4 text-left text-${l} font-medium text-gray-700  {/* Darker text, more padding */}
                  ${r.includes(x)?n:""}
                  sticky top-0 bg-gray-100 {/* Ensure background for sticky header */}
                `,dangerouslySetInnerHTML:m(v)},`th-${x}`))})}),k.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.map((v,x)=>k.jsx("tr",{id:`trRowAsAnchor-${x}`,className:`
        ${s&&x%2===0?"bg-white":"bg-gray-100"} {/* Slightly more contrast for stripes */}
        ${o?"hover:bg-indigo-50":""} {/* More noticeable hover */}
      `,children:v.map((g,y)=>k.jsx("td",{className:`
            px-4 py-3.5 text-${l} align-top {/* Slightly more vertical padding */}
            ${i.includes(y)?"whitespace-normal break-words max-w-[300px]":"whitespace-nowrap"}
            ${r.includes(y)?n:""}
          `,dangerouslySetInnerHTML:m(g)},`td-${x}-${y}`))},`row-${x}`))})]})})};function ED(e,t,n){return Math.max(t,Math.min(e,n))}const dn={toVector(e,t){return e===void 0&&(e=t),Array.isArray(e)?e:[e,e]},add(e,t){return[e[0]+t[0],e[1]+t[1]]},sub(e,t){return[e[0]-t[0],e[1]-t[1]]},addTo(e,t){e[0]+=t[0],e[1]+=t[1]},subTo(e,t){e[0]-=t[0],e[1]-=t[1]}};function rb(e,t,n){return t===0||Math.abs(t)===1/0?Math.pow(e,n*5):e*t*n/(t+n*e)}function ib(e,t,n,r=.15){return r===0?ED(e,t,n):e<t?-rb(t-e,n-t,r)+t:e>n?+rb(e-n,n-t,r)+n:e}function CD(e,[t,n],[r,i]){const[[s,o],[a,l]]=e;return[ib(t,s,o,r),ib(n,a,l,i)]}function TD(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function PD(e){var t=TD(e,"string");return typeof t=="symbol"?t:String(t)}function Cn(e,t,n){return t=PD(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Et(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sb(Object(n),!0).forEach(function(r){Cn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sb(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const vk={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function ob(e){return e?e[0].toUpperCase()+e.slice(1):""}const AD=["enter","leave"];function jD(e=!1,t){return e&&!AD.includes(t)}function OD(e,t="",n=!1){const r=vk[e],i=r&&r[t]||t;return"on"+ob(e)+ob(i)+(jD(n,i)?"Capture":"")}const RD=["gotpointercapture","lostpointercapture"];function ID(e){let t=e.substring(2).toLowerCase();const n=!!~t.indexOf("passive");n&&(t=t.replace("passive",""));const r=RD.includes(t)?"capturecapture":"capture",i=!!~t.indexOf(r);return i&&(t=t.replace("capture","")),{device:t,capture:i,passive:n}}function DD(e,t=""){const n=vk[e],r=n&&n[t]||t;return e+r}function Af(e){return"touches"in e}function wk(e){return Af(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function ND(e){return Array.from(e.touches).filter(t=>{var n,r;return t.target===e.currentTarget||((n=e.currentTarget)===null||n===void 0||(r=n.contains)===null||r===void 0?void 0:r.call(n,t.target))})}function LD(e){return e.type==="touchend"||e.type==="touchcancel"?e.changedTouches:e.targetTouches}function bk(e){return Af(e)?LD(e)[0]:e}function $D(e){return ND(e).map(t=>t.identifier)}function ip(e){const t=bk(e);return Af(e)?t.identifier:t.pointerId}function ab(e){const t=bk(e);return[t.clientX,t.clientY]}function MD(e){const t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){const{shiftKey:n,altKey:r,metaKey:i,ctrlKey:s}=e;Object.assign(t,{shiftKey:n,altKey:r,metaKey:i,ctrlKey:s})}return t}function Hd(e,...t){return typeof e=="function"?e(...t):e}function FD(){}function BD(...e){return e.length===0?FD:e.length===1?e[0]:function(){let t;for(const n of e)t=n.apply(this,arguments)||t;return t}}function lb(e,t){return Object.assign({},t,e||{})}const UD=32;class zD{constructor(t,n,r){this.ctrl=t,this.args=n,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(t){this.ctrl.state[this.key]=t}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:t,shared:n,ingKey:r,args:i}=this;n[r]=t._active=t.active=t._blocked=t._force=!1,t._step=[!1,!1],t.intentional=!1,t._movement=[0,0],t._distance=[0,0],t._direction=[0,0],t._delta=[0,0],t._bounds=[[-1/0,1/0],[-1/0,1/0]],t.args=i,t.axis=void 0,t.memo=void 0,t.elapsedTime=t.timeDelta=0,t.direction=[0,0],t.distance=[0,0],t.overflow=[0,0],t._movementBound=[!1,!1],t.velocity=[0,0],t.movement=[0,0],t.delta=[0,0],t.timeStamp=0}start(t){const n=this.state,r=this.config;n._active||(this.reset(),this.computeInitial(),n._active=!0,n.target=t.target,n.currentTarget=t.currentTarget,n.lastOffset=r.from?Hd(r.from,n):n.offset,n.offset=n.lastOffset,n.startTime=n.timeStamp=t.timeStamp)}computeValues(t){const n=this.state;n._values=t,n.values=this.config.transform(t)}computeInitial(){const t=this.state;t._initial=t._values,t.initial=t.values}compute(t){const{state:n,config:r,shared:i}=this;n.args=this.args;let s=0;if(t&&(n.event=t,r.preventDefault&&t.cancelable&&n.event.preventDefault(),n.type=t.type,i.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,i.locked=!!document.pointerLockElement,Object.assign(i,MD(t)),i.down=i.pressed=i.buttons%2===1||i.touches>0,s=t.timeStamp-n.timeStamp,n.timeStamp=t.timeStamp,n.elapsedTime=n.timeStamp-n.startTime),n._active){const R=n._delta.map(Math.abs);dn.addTo(n._distance,R)}this.axisIntent&&this.axisIntent(t);const[o,a]=n._movement,[l,u]=r.threshold,{_step:c,values:f}=n;if(r.hasCustomTransform?(c[0]===!1&&(c[0]=Math.abs(o)>=l&&f[0]),c[1]===!1&&(c[1]=Math.abs(a)>=u&&f[1])):(c[0]===!1&&(c[0]=Math.abs(o)>=l&&Math.sign(o)*l),c[1]===!1&&(c[1]=Math.abs(a)>=u&&Math.sign(a)*u)),n.intentional=c[0]!==!1||c[1]!==!1,!n.intentional)return;const p=[0,0];if(r.hasCustomTransform){const[R,I]=f;p[0]=c[0]!==!1?R-c[0]:0,p[1]=c[1]!==!1?I-c[1]:0}else p[0]=c[0]!==!1?o-c[0]:0,p[1]=c[1]!==!1?a-c[1]:0;this.restrictToAxis&&!n._blocked&&this.restrictToAxis(p);const m=n.offset,w=n._active&&!n._blocked||n.active;w&&(n.first=n._active&&!n.active,n.last=!n._active&&n.active,n.active=i[this.ingKey]=n._active,t&&(n.first&&("bounds"in r&&(n._bounds=Hd(r.bounds,n)),this.setup&&this.setup()),n.movement=p,this.computeOffset()));const[v,x]=n.offset,[[g,y],[_,T]]=n._bounds;n.overflow=[v<g?-1:v>y?1:0,x<_?-1:x>T?1:0],n._movementBound[0]=n.overflow[0]?n._movementBound[0]===!1?n._movement[0]:n._movementBound[0]:!1,n._movementBound[1]=n.overflow[1]?n._movementBound[1]===!1?n._movement[1]:n._movementBound[1]:!1;const O=n._active?r.rubberband||[0,0]:[0,0];if(n.offset=CD(n._bounds,n.offset,O),n.delta=dn.sub(n.offset,m),this.computeMovement(),w&&(!n.last||s>UD)){n.delta=dn.sub(n.offset,m);const R=n.delta.map(Math.abs);dn.addTo(n.distance,R),n.direction=n.delta.map(Math.sign),n._direction=n._delta.map(Math.sign),!n.first&&s>0&&(n.velocity=[R[0]/s,R[1]/s],n.timeDelta=s)}}emit(){const t=this.state,n=this.shared,r=this.config;if(t._active||this.clean(),(t._blocked||!t.intentional)&&!t._force&&!r.triggerAllEvents)return;const i=this.handler(Et(Et(Et({},n),t),{},{[this.aliasKey]:t.values}));i!==void 0&&(t.memo=i)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function VD([e,t],n){const r=Math.abs(e),i=Math.abs(t);if(r>i&&r>n)return"x";if(i>r&&i>n)return"y"}class KD extends zD{constructor(...t){super(...t),Cn(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=dn.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=dn.sub(this.state.offset,this.state.lastOffset)}axisIntent(t){const n=this.state,r=this.config;if(!n.axis&&t){const i=typeof r.axisThreshold=="object"?r.axisThreshold[wk(t)]:r.axisThreshold;n.axis=VD(n._movement,i)}n._blocked=(r.lockDirection||!!r.axis)&&!n.axis||!!r.axis&&r.axis!==n.axis}restrictToAxis(t){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":t[1]=0;break;case"y":t[0]=0;break}}}const WD=e=>e,ub=.15,_k={enabled(e=!0){return e},eventOptions(e,t,n){return Et(Et({},n.shared.eventOptions),e)},preventDefault(e=!1){return e},triggerAllEvents(e=!1){return e},rubberband(e=0){switch(e){case!0:return[ub,ub];case!1:return[0,0];default:return dn.toVector(e)}},from(e){if(typeof e=="function")return e;if(e!=null)return dn.toVector(e)},transform(e,t,n){const r=e||n.shared.transform;return this.hasCustomTransform=!!r,r||WD},threshold(e){return dn.toVector(e,0)}},HD=0,Lu=Et(Et({},_k),{},{axis(e,t,{axis:n}){if(this.lockDirection=n==="lock",!this.lockDirection)return n},axisThreshold(e=HD){return e},bounds(e={}){if(typeof e=="function")return s=>Lu.bounds(e(s));if("current"in e)return()=>e.current;if(typeof HTMLElement=="function"&&e instanceof HTMLElement)return e;const{left:t=-1/0,right:n=1/0,top:r=-1/0,bottom:i=1/0}=e;return[[t,n],[r,i]]}}),cb={ArrowRight:(e,t=1)=>[e*t,0],ArrowLeft:(e,t=1)=>[-1*e*t,0],ArrowUp:(e,t=1)=>[0,-1*e*t],ArrowDown:(e,t=1)=>[0,e*t]};class qD extends KD{constructor(...t){super(...t),Cn(this,"ingKey","dragging")}reset(){super.reset();const t=this.state;t._pointerId=void 0,t._pointerActive=!1,t._keyboardActive=!1,t._preventScroll=!1,t._delayed=!1,t.swipe=[0,0],t.tap=!1,t.canceled=!1,t.cancel=this.cancel.bind(this)}setup(){const t=this.state;if(t._bounds instanceof HTMLElement){const n=t._bounds.getBoundingClientRect(),r=t.currentTarget.getBoundingClientRect(),i={left:n.left-r.left+t.offset[0],right:n.right-r.right+t.offset[0],top:n.top-r.top+t.offset[1],bottom:n.bottom-r.bottom+t.offset[1]};t._bounds=Lu.bounds(i)}}cancel(){const t=this.state;t.canceled||(t.canceled=!0,t._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(t){const n=this.config,r=this.state;if(t.buttons!=null&&(Array.isArray(n.pointerButtons)?!n.pointerButtons.includes(t.buttons):n.pointerButtons!==-1&&n.pointerButtons!==t.buttons))return;const i=this.ctrl.setEventIds(t);n.pointerCapture&&t.target.setPointerCapture(t.pointerId),!(i&&i.size>1&&r._pointerActive)&&(this.start(t),this.setupPointer(t),r._pointerId=ip(t),r._pointerActive=!0,this.computeValues(ab(t)),this.computeInitial(),n.preventScrollAxis&&wk(t)!=="mouse"?(r._active=!1,this.setupScrollPrevention(t)):n.delay>0?(this.setupDelayTrigger(t),n.triggerAllEvents&&(this.compute(t),this.emit())):this.startPointerDrag(t))}startPointerDrag(t){const n=this.state;n._active=!0,n._preventScroll=!0,n._delayed=!1,this.compute(t),this.emit()}pointerMove(t){const n=this.state,r=this.config;if(!n._pointerActive)return;const i=ip(t);if(n._pointerId!==void 0&&i!==n._pointerId)return;const s=ab(t);if(document.pointerLockElement===t.target?n._delta=[t.movementX,t.movementY]:(n._delta=dn.sub(s,n._values),this.computeValues(s)),dn.addTo(n._movement,n._delta),this.compute(t),n._delayed&&n.intentional){this.timeoutStore.remove("dragDelay"),n.active=!1,this.startPointerDrag(t);return}if(r.preventScrollAxis&&!n._preventScroll)if(n.axis)if(n.axis===r.preventScrollAxis||r.preventScrollAxis==="xy"){n._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(t);return}else return;this.emit()}pointerUp(t){this.ctrl.setEventIds(t);try{this.config.pointerCapture&&t.target.hasPointerCapture(t.pointerId)&&t.target.releasePointerCapture(t.pointerId)}catch{}const n=this.state,r=this.config;if(!n._active||!n._pointerActive)return;const i=ip(t);if(n._pointerId!==void 0&&i!==n._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(t);const[s,o]=n._distance;if(n.tap=s<=r.tapsThreshold&&o<=r.tapsThreshold,n.tap&&r.filterTaps)n._force=!0;else{const[a,l]=n._delta,[u,c]=n._movement,[f,p]=r.swipe.velocity,[m,w]=r.swipe.distance,v=r.swipe.duration;if(n.elapsedTime<v){const x=Math.abs(a/n.timeDelta),g=Math.abs(l/n.timeDelta);x>f&&Math.abs(u)>m&&(n.swipe[0]=Math.sign(a)),g>p&&Math.abs(c)>w&&(n.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(t){!this.state.tap&&t.detail>0&&(t.preventDefault(),t.stopPropagation())}setupPointer(t){const n=this.config,r=n.device;n.pointerLock&&t.currentTarget.requestPointerLock(),n.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(t){this.state._preventScroll&&t.cancelable&&t.preventDefault()}setupScrollPrevention(t){this.state._preventScroll=!1,GD(t);const n=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",n),this.eventStore.add(this.sharedConfig.window,"touch","cancel",n),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,t)}setupDelayTrigger(t){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(t)},this.config.delay)}keyDown(t){const n=cb[t.key];if(n){const r=this.state,i=t.shiftKey?10:t.altKey?.1:1;this.start(t),r._delta=n(this.config.keyboardDisplacement,i),r._keyboardActive=!0,dn.addTo(r._movement,r._delta),this.compute(t),this.emit()}}keyUp(t){t.key in cb&&(this.state._keyboardActive=!1,this.setActive(),this.compute(t),this.emit())}bind(t){const n=this.config.device;t(n,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(t(n,"change",this.pointerMove.bind(this)),t(n,"end",this.pointerUp.bind(this)),t(n,"cancel",this.pointerUp.bind(this)),t("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(t("key","down",this.keyDown.bind(this)),t("key","up",this.keyUp.bind(this))),this.config.filterTaps&&t("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function GD(e){"persist"in e&&typeof e.persist=="function"&&e.persist()}const $u=typeof window<"u"&&window.document&&window.document.createElement;function xk(){return $u&&"ontouchstart"in window}function QD(){return xk()||$u&&window.navigator.maxTouchPoints>1}function YD(){return $u&&"onpointerdown"in window}function JD(){return $u&&"exitPointerLock"in window.document}function ZD(){try{return"constructor"in GestureEvent}catch{return!1}}const ir={isBrowser:$u,gesture:ZD(),touch:xk(),touchscreen:QD(),pointer:YD(),pointerLock:JD()},XD=250,eN=180,tN=.5,nN=50,rN=250,iN=10,db={mouse:0,touch:0,pen:8},sN=Et(Et({},Lu),{},{device(e,t,{pointer:{touch:n=!1,lock:r=!1,mouse:i=!1}={}}){return this.pointerLock=r&&ir.pointerLock,ir.touch&&n?"touch":this.pointerLock?"mouse":ir.pointer&&!i?"pointer":ir.touch?"touch":"mouse"},preventScrollAxis(e,t,{preventScroll:n}){if(this.preventScrollDelay=typeof n=="number"?n:n||n===void 0&&e?XD:void 0,!(!ir.touchscreen||n===!1))return e||(n!==void 0?"y":void 0)},pointerCapture(e,t,{pointer:{capture:n=!0,buttons:r=1,keys:i=!0}={}}){return this.pointerButtons=r,this.keys=i,!this.pointerLock&&this.device==="pointer"&&n},threshold(e,t,{filterTaps:n=!1,tapsThreshold:r=3,axis:i=void 0}){const s=dn.toVector(e,n?r:i?1:0);return this.filterTaps=n,this.tapsThreshold=r,s},swipe({velocity:e=tN,distance:t=nN,duration:n=rN}={}){return{velocity:this.transform(dn.toVector(e)),distance:this.transform(dn.toVector(t)),duration:n}},delay(e=0){switch(e){case!0:return eN;case!1:return 0;default:return e}},axisThreshold(e){return e?Et(Et({},db),e):db},keyboardDisplacement(e=iN){return e}});Et(Et({},_k),{},{device(e,t,{shared:n,pointer:{touch:r=!1}={}}){if(n.target&&!ir.touch&&ir.gesture)return"gesture";if(ir.touch&&r)return"touch";if(ir.touchscreen){if(ir.pointer)return"pointer";if(ir.touch)return"touch"}},bounds(e,t,{scaleBounds:n={},angleBounds:r={}}){const i=o=>{const a=lb(Hd(n,o),{min:-1/0,max:1/0});return[a.min,a.max]},s=o=>{const a=lb(Hd(r,o),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof n!="function"&&typeof r!="function"?[i(),s()]:o=>[i(o),s(o)]},threshold(e,t,n){return this.lockDirection=n.axis==="lock",dn.toVector(e,this.lockDirection?[.1,3]:0)},modifierKey(e){return e===void 0?"ctrlKey":e},pinchOnWheel(e=!0){return e}});Et(Et({},Lu),{},{mouseOnly:(e=!0)=>e});Et(Et({},Lu),{},{mouseOnly:(e=!0)=>e});const Sk=new Map,qm=new Map;function oN(e){Sk.set(e.key,e.engine),qm.set(e.key,e.resolver)}const aN={key:"drag",engine:qD,resolver:sN};function lN(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function uN(e,t){if(e==null)return{};var n=lN(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}const cN={target(e){if(e)return()=>"current"in e?e.current:e},enabled(e=!0){return e},window(e=ir.isBrowser?window:void 0){return e},eventOptions({passive:e=!0,capture:t=!1}={}){return{passive:e,capture:t}},transform(e){return e}},dN=["target","eventOptions","window","enabled","transform"];function ad(e={},t){const n={};for(const[r,i]of Object.entries(t))switch(typeof i){case"function":n[r]=i.call(n,e[r],r,e);break;case"object":n[r]=ad(e[r],i);break;case"boolean":i&&(n[r]=e[r]);break}return n}function fN(e,t,n={}){const r=e,{target:i,eventOptions:s,window:o,enabled:a,transform:l}=r,u=uN(r,dN);if(n.shared=ad({target:i,eventOptions:s,window:o,enabled:a,transform:l},cN),t){const c=qm.get(t);n[t]=ad(Et({shared:n.shared},u),c)}else for(const c in u){const f=qm.get(c);f&&(n[c]=ad(Et({shared:n.shared},u[c]),f))}return n}class kk{constructor(t,n){Cn(this,"_listeners",new Set),this._ctrl=t,this._gestureKey=n}add(t,n,r,i,s){const o=this._listeners,a=DD(n,r),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},u=Et(Et({},l),s);t.addEventListener(a,i,u);const c=()=>{t.removeEventListener(a,i,u),o.delete(c)};return o.add(c),c}clean(){this._listeners.forEach(t=>t()),this._listeners.clear()}}class hN{constructor(){Cn(this,"_timeouts",new Map)}add(t,n,r=140,...i){this.remove(t),this._timeouts.set(t,window.setTimeout(n,r,...i))}remove(t){const n=this._timeouts.get(t);n&&window.clearTimeout(n)}clean(){this._timeouts.forEach(t=>void window.clearTimeout(t)),this._timeouts.clear()}}class pN{constructor(t){Cn(this,"gestures",new Set),Cn(this,"_targetEventStore",new kk(this)),Cn(this,"gestureEventStores",{}),Cn(this,"gestureTimeoutStores",{}),Cn(this,"handlers",{}),Cn(this,"config",{}),Cn(this,"pointerIds",new Set),Cn(this,"touchIds",new Set),Cn(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),mN(this,t)}setEventIds(t){if(Af(t))return this.touchIds=new Set($D(t)),this.touchIds;if("pointerId"in t)return t.type==="pointerup"||t.type==="pointercancel"?this.pointerIds.delete(t.pointerId):t.type==="pointerdown"&&this.pointerIds.add(t.pointerId),this.pointerIds}applyHandlers(t,n){this.handlers=t,this.nativeHandlers=n}applyConfig(t,n){this.config=fN(t,n,this.config)}clean(){this._targetEventStore.clean();for(const t of this.gestures)this.gestureEventStores[t].clean(),this.gestureTimeoutStores[t].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...t){const n=this.config.shared,r={};let i;if(!(n.target&&(i=n.target(),!i))){if(n.enabled){for(const o of this.gestures){const a=this.config[o],l=fb(r,a.eventOptions,!!i);if(a.enabled){const u=Sk.get(o);new u(this,t,o).bind(l)}}const s=fb(r,n.eventOptions,!!i);for(const o in this.nativeHandlers)s(o,"",a=>this.nativeHandlers[o](Et(Et({},this.state.shared),{},{event:a,args:t})),void 0,!0)}for(const s in r)r[s]=BD(...r[s]);if(!i)return r;for(const s in r){const{device:o,capture:a,passive:l}=ID(s);this._targetEventStore.add(i,o,"",r[s],{capture:a,passive:l})}}}}function Lo(e,t){e.gestures.add(t),e.gestureEventStores[t]=new kk(e,t),e.gestureTimeoutStores[t]=new hN}function mN(e,t){t.drag&&Lo(e,"drag"),t.wheel&&Lo(e,"wheel"),t.scroll&&Lo(e,"scroll"),t.move&&Lo(e,"move"),t.pinch&&Lo(e,"pinch"),t.hover&&Lo(e,"hover")}const fb=(e,t,n)=>(r,i,s,o={},a=!1)=>{var l,u;const c=(l=o.capture)!==null&&l!==void 0?l:t.capture,f=(u=o.passive)!==null&&u!==void 0?u:t.passive;let p=a?r:OD(r,i,c);n&&f&&(p+="Passive"),e[p]=e[p]||[],e[p].push(s)};function gN(e,t={},n,r){const i=Ke.useMemo(()=>new pN(e),[]);if(i.applyHandlers(e,r),i.applyConfig(t,n),Ke.useEffect(i.effect.bind(i)),Ke.useEffect(()=>i.clean.bind(i),[]),t.target===void 0)return i.bind.bind(i)}function yN(e,t){return oN(aN),gN({drag:e},t||{},"drag")}const Uy=E.createContext({});function zy(e){const t=E.useRef(null);return t.current===null&&(t.current=e()),t.current}const Vy=typeof window<"u",Ek=Vy?E.useLayoutEffect:E.useEffect,jf=E.createContext(null);function Ky(e,t){e.indexOf(t)===-1&&e.push(t)}function Wy(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const vi=(e,t,n)=>n>t?t:n<e?e:n;let Hy=()=>{};const wi={},Ck=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function Tk(e){return typeof e=="object"&&e!==null}const Pk=e=>/^0[^.\s]+$/u.test(e);function qy(e){let t;return()=>(t===void 0&&(t=e()),t)}const lr=e=>e,vN=(e,t)=>n=>t(e(n)),Mu=(...e)=>e.reduce(vN),fu=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class Gy{constructor(){this.subscriptions=[]}add(t){return Ky(this.subscriptions,t),()=>Wy(this.subscriptions,t)}notify(t,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const qr=e=>e*1e3,or=e=>e/1e3;function Ak(e,t){return t?e*(1e3/t):0}const jk=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,wN=1e-7,bN=12;function _N(e,t,n,r,i){let s,o,a=0;do o=t+(n-t)/2,s=jk(o,r,i)-e,s>0?n=o:t=o;while(Math.abs(s)>wN&&++a<bN);return o}function Fu(e,t,n,r){if(e===t&&n===r)return lr;const i=s=>_N(s,0,1,e,n);return s=>s===0||s===1?s:jk(i(s),t,r)}const Ok=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Rk=e=>t=>1-e(1-t),Ik=Fu(.33,1.53,.69,.99),Qy=Rk(Ik),Dk=Ok(Qy),Nk=e=>(e*=2)<1?.5*Qy(e):.5*(2-Math.pow(2,-10*(e-1))),Yy=e=>1-Math.sin(Math.acos(e)),Lk=Rk(Yy),$k=Ok(Yy),xN=Fu(.42,0,1,1),SN=Fu(0,0,.58,1),Mk=Fu(.42,0,.58,1),kN=e=>Array.isArray(e)&&typeof e[0]!="number",Fk=e=>Array.isArray(e)&&typeof e[0]=="number",EN={linear:lr,easeIn:xN,easeInOut:Mk,easeOut:SN,circIn:Yy,circInOut:$k,circOut:Lk,backIn:Qy,backInOut:Dk,backOut:Ik,anticipate:Nk},CN=e=>typeof e=="string",hb=e=>{if(Fk(e)){Hy(e.length===4);const[t,n,r,i]=e;return Fu(t,n,r,i)}else if(CN(e))return EN[e];return e},Fc=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function TN(e,t){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(c){o.has(c)&&(u.schedule(c),e()),c(a)}const u={schedule:(c,f=!1,p=!1)=>{const w=p&&i?n:r;return f&&o.add(c),w.has(c)||w.add(c),c},cancel:c=>{r.delete(c),o.delete(c)},process:c=>{if(a=c,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(l),n.clear(),i=!1,s&&(s=!1,u.process(c))}};return u}const PN=40;function Bk(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=Fc.reduce((_,T)=>(_[T]=TN(s),_),{}),{setup:a,read:l,resolveKeyframes:u,preUpdate:c,update:f,preRender:p,render:m,postRender:w}=o,v=()=>{const _=wi.useManualTiming?i.timestamp:performance.now();n=!1,wi.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(_-i.timestamp,PN),1)),i.timestamp=_,i.isProcessing=!0,a.process(i),l.process(i),u.process(i),c.process(i),f.process(i),p.process(i),m.process(i),w.process(i),i.isProcessing=!1,n&&t&&(r=!1,e(v))},x=()=>{n=!0,r=!0,i.isProcessing||e(v)};return{schedule:Fc.reduce((_,T)=>{const O=o[T];return _[T]=(R,I=!1,$=!1)=>(n||x(),O.schedule(R,I,$)),_},{}),cancel:_=>{for(let T=0;T<Fc.length;T++)o[Fc[T]].cancel(_)},state:i,steps:o}}const{schedule:bt,cancel:ps,state:Xt,steps:sp}=Bk(typeof requestAnimationFrame<"u"?requestAnimationFrame:lr,!0);let ld;function AN(){ld=void 0}const On={now:()=>(ld===void 0&&On.set(Xt.isProcessing||wi.useManualTiming?Xt.timestamp:performance.now()),ld),set:e=>{ld=e,queueMicrotask(AN)}},Uk=e=>t=>typeof t=="string"&&t.startsWith(e),Jy=Uk("--"),jN=Uk("var(--"),Zy=e=>jN(e)?ON.test(e.split("/*")[0].trim()):!1,ON=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ua={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},hu={...Ua,transform:e=>vi(0,1,e)},Bc={...Ua,default:1},Ll=e=>Math.round(e*1e5)/1e5,Xy=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function RN(e){return e==null}const IN=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,ev=(e,t)=>n=>!!(typeof n=="string"&&IN.test(n)&&n.startsWith(e)||t&&!RN(n)&&Object.prototype.hasOwnProperty.call(n,t)),zk=(e,t,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(Xy);return{[e]:parseFloat(i),[t]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},DN=e=>vi(0,255,e),op={...Ua,transform:e=>Math.round(DN(e))},Ws={test:ev("rgb","red"),parse:zk("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+op.transform(e)+", "+op.transform(t)+", "+op.transform(n)+", "+Ll(hu.transform(r))+")"};function NN(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Gm={test:ev("#"),parse:NN,transform:Ws.transform},Bu=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Li=Bu("deg"),Gr=Bu("%"),qe=Bu("px"),LN=Bu("vh"),$N=Bu("vw"),pb={...Gr,parse:e=>Gr.parse(e)/100,transform:e=>Gr.transform(e*100)},Jo={test:ev("hsl","hue"),parse:zk("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Gr.transform(Ll(t))+", "+Gr.transform(Ll(n))+", "+Ll(hu.transform(r))+")"},Mt={test:e=>Ws.test(e)||Gm.test(e)||Jo.test(e),parse:e=>Ws.test(e)?Ws.parse(e):Jo.test(e)?Jo.parse(e):Gm.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Ws.transform(e):Jo.transform(e),getAnimatableNone:e=>{const t=Mt.parse(e);return t.alpha=0,Mt.transform(t)}},MN=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function FN(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(Xy))==null?void 0:t.length)||0)+(((n=e.match(MN))==null?void 0:n.length)||0)>0}const Vk="number",Kk="color",BN="var",UN="var(",mb="${}",zN=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function pu(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=t.replace(zN,l=>(Mt.test(l)?(r.color.push(s),i.push(Kk),n.push(Mt.parse(l))):l.startsWith(UN)?(r.var.push(s),i.push(BN),n.push(l)):(r.number.push(s),i.push(Vk),n.push(parseFloat(l))),++s,mb)).split(mb);return{values:n,split:a,indexes:r,types:i}}function Wk(e){return pu(e).values}function Hk(e){const{split:t,types:n}=pu(e),r=t.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=t[o],i[o]!==void 0){const a=n[o];a===Vk?s+=Ll(i[o]):a===Kk?s+=Mt.transform(i[o]):s+=i[o]}return s}}const VN=e=>typeof e=="number"?0:Mt.test(e)?Mt.getAnimatableNone(e):e;function KN(e){const t=Wk(e);return Hk(e)(t.map(VN))}const ms={test:FN,parse:Wk,createTransformer:Hk,getAnimatableNone:KN};function ap(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function WN({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let i=0,s=0,o=0;if(!t)i=s=o=n;else{const a=n<.5?n*(1+t):n+t-n*t,l=2*n-a;i=ap(l,a,e+1/3),s=ap(l,a,e),o=ap(l,a,e-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function qd(e,t){return n=>n>0?t:e}const kt=(e,t,n)=>e+(t-e)*n,lp=(e,t,n)=>{const r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},HN=[Gm,Ws,Jo],qN=e=>HN.find(t=>t.test(e));function gb(e){const t=qN(e);if(!t)return!1;let n=t.parse(e);return t===Jo&&(n=WN(n)),n}const yb=(e,t)=>{const n=gb(e),r=gb(t);if(!n||!r)return qd(e,t);const i={...n};return s=>(i.red=lp(n.red,r.red,s),i.green=lp(n.green,r.green,s),i.blue=lp(n.blue,r.blue,s),i.alpha=kt(n.alpha,r.alpha,s),Ws.transform(i))},Qm=new Set(["none","hidden"]);function GN(e,t){return Qm.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function QN(e,t){return n=>kt(e,t,n)}function tv(e){return typeof e=="number"?QN:typeof e=="string"?Zy(e)?qd:Mt.test(e)?yb:ZN:Array.isArray(e)?qk:typeof e=="object"?Mt.test(e)?yb:YN:qd}function qk(e,t){const n=[...e],r=n.length,i=e.map((s,o)=>tv(s)(s,t[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function YN(e,t){const n={...e,...t},r={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(r[i]=tv(e[i])(e[i],t[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function JN(e,t){const n=[],r={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const s=t.types[i],o=e.indexes[s][r[s]],a=e.values[o]??0;n[i]=a,r[s]++}return n}const ZN=(e,t)=>{const n=ms.createTransformer(t),r=pu(e),i=pu(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Qm.has(e)&&!i.values.length||Qm.has(t)&&!r.values.length?GN(e,t):Mu(qk(JN(r,i),i.values),n):qd(e,t)};function Gk(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?kt(e,t,n):tv(e)(e,t)}const XN=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>bt.update(t,n),stop:()=>ps(t),now:()=>Xt.isProcessing?Xt.timestamp:On.now()}},Qk=(e,t,n=10)=>{let r="";const i=Math.max(Math.round(t/n),2);for(let s=0;s<i;s++)r+=Math.round(e(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Gd=2e4;function nv(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Gd;)t+=n,r=e.next(t);return t>=Gd?1/0:t}function eL(e,t=100,n){const r=n({...e,keyframes:[0,t]}),i=Math.min(nv(r),Gd);return{type:"keyframes",ease:s=>r.next(i*s).value/t,duration:or(i)}}const tL=5;function Yk(e,t,n){const r=Math.max(t-tL,0);return Ak(n-e(r),t-r)}const At={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},up=.001;function nL({duration:e=At.duration,bounce:t=At.bounce,velocity:n=At.velocity,mass:r=At.mass}){let i,s,o=1-t;o=vi(At.minDamping,At.maxDamping,o),e=vi(At.minDuration,At.maxDuration,or(e)),o<1?(i=u=>{const c=u*o,f=c*e,p=c-n,m=Ym(u,o),w=Math.exp(-f);return up-p/m*w},s=u=>{const f=u*o*e,p=f*n+n,m=Math.pow(o,2)*Math.pow(u,2)*e,w=Math.exp(-f),v=Ym(Math.pow(u,2),o);return(-i(u)+up>0?-1:1)*((p-m)*w)/v}):(i=u=>{const c=Math.exp(-u*e),f=(u-n)*e+1;return-up+c*f},s=u=>{const c=Math.exp(-u*e),f=(n-u)*(e*e);return c*f});const a=5/e,l=iL(i,s,a);if(e=qr(e),isNaN(l))return{stiffness:At.stiffness,damping:At.damping,duration:e};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:e}}}const rL=12;function iL(e,t,n){let r=n;for(let i=1;i<rL;i++)r=r-e(r)/t(r);return r}function Ym(e,t){return e*Math.sqrt(1-t*t)}const sL=["duration","bounce"],oL=["stiffness","damping","mass"];function vb(e,t){return t.some(n=>e[n]!==void 0)}function aL(e){let t={velocity:At.velocity,stiffness:At.stiffness,damping:At.damping,mass:At.mass,isResolvedFromDuration:!1,...e};if(!vb(e,oL)&&vb(e,sL))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*vi(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:At.mass,stiffness:i,damping:s}}else{const n=nL(e);t={...t,...n,mass:At.mass},t.isResolvedFromDuration=!0}return t}function Qd(e=At.visualDuration,t=At.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:u,mass:c,duration:f,velocity:p,isResolvedFromDuration:m}=aL({...n,velocity:-or(n.velocity||0)}),w=p||0,v=u/(2*Math.sqrt(l*c)),x=o-s,g=or(Math.sqrt(l/c)),y=Math.abs(x)<5;r||(r=y?At.restSpeed.granular:At.restSpeed.default),i||(i=y?At.restDelta.granular:At.restDelta.default);let _;if(v<1){const O=Ym(g,v);_=R=>{const I=Math.exp(-v*g*R);return o-I*((w+v*g*x)/O*Math.sin(O*R)+x*Math.cos(O*R))}}else if(v===1)_=O=>o-Math.exp(-g*O)*(x+(w+g*x)*O);else{const O=g*Math.sqrt(v*v-1);_=R=>{const I=Math.exp(-v*g*R),$=Math.min(O*R,300);return o-I*((w+v*g*x)*Math.sinh($)+O*x*Math.cosh($))/O}}const T={calculatedDuration:m&&f||null,next:O=>{const R=_(O);if(m)a.done=O>=f;else{let I=O===0?w:0;v<1&&(I=O===0?qr(w):Yk(_,O,R));const $=Math.abs(I)<=r,U=Math.abs(o-R)<=i;a.done=$&&U}return a.value=a.done?o:R,a},toString:()=>{const O=Math.min(nv(T),Gd),R=Qk(I=>T.next(O*I).value,O,30);return O+"ms "+R},toTransition:()=>{}};return T}Qd.applyToOptions=e=>{const t=eL(e,100,Qd);return e.ease=t.ease,e.duration=qr(t.duration),e.type="keyframes",e};function Jm({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:c}){const f=e[0],p={done:!1,value:f},m=$=>a!==void 0&&$<a||l!==void 0&&$>l,w=$=>a===void 0?l:l===void 0||Math.abs(a-$)<Math.abs(l-$)?a:l;let v=n*t;const x=f+v,g=o===void 0?x:o(x);g!==x&&(v=g-f);const y=$=>-v*Math.exp(-$/r),_=$=>g+y($),T=$=>{const U=y($),V=_($);p.done=Math.abs(U)<=u,p.value=p.done?g:V};let O,R;const I=$=>{m(p.value)&&(O=$,R=Qd({keyframes:[p.value,w(p.value)],velocity:Yk(_,$,p.value),damping:i,stiffness:s,restDelta:u,restSpeed:c}))};return I(0),{calculatedDuration:null,next:$=>{let U=!1;return!R&&O===void 0&&(U=!0,T($),I($)),O!==void 0&&$>=O?R.next($-O):(!U&&T($),p)}}}function lL(e,t,n){const r=[],i=n||wi.mix||Gk,s=e.length-1;for(let o=0;o<s;o++){let a=i(e[o],e[o+1]);if(t){const l=Array.isArray(t)?t[o]||lr:t;a=Mu(l,a)}r.push(a)}return r}function uL(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const s=e.length;if(Hy(s===t.length),s===1)return()=>t[0];if(s===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=lL(t,r,i),l=a.length,u=c=>{if(o&&c<e[0])return t[0];let f=0;if(l>1)for(;f<e.length-2&&!(c<e[f+1]);f++);const p=fu(e[f],e[f+1],c);return a[f](p)};return n?c=>u(vi(e[0],e[s-1],c)):u}function cL(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=fu(0,t,r);e.push(kt(n,1,i))}}function dL(e){const t=[0];return cL(t,e.length-1),t}function fL(e,t){return e.map(n=>n*t)}function hL(e,t){return e.map(()=>t||Mk).splice(0,e.length-1)}function $l({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=kN(r)?r.map(hb):hb(r),s={done:!1,value:t[0]},o=fL(n&&n.length===t.length?n:dL(t),e),a=uL(o,t,{ease:Array.isArray(i)?i:hL(t,i)});return{calculatedDuration:e,next:l=>(s.value=a(l),s.done=l>=e,s)}}const pL=e=>e!==null;function rv(e,{repeat:t,repeatType:n="loop"},r,i=1){const s=e.filter(pL),a=i<0||t&&n!=="loop"&&t%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const mL={decay:Jm,inertia:Jm,tween:$l,keyframes:$l,spring:Qd};function Jk(e){typeof e.type=="string"&&(e.type=mL[e.type])}class iv{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const gL=e=>e/100;class sv extends iv{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==On.now()&&this.tick(On.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;Jk(t);const{type:n=$l,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=t;let{keyframes:a}=t;const l=n||$l;l!==$l&&typeof a[0]!="number"&&(this.mixKeyframes=Mu(gL,Gk(a[0],a[1])),a=[0,100]);const u=l({...t,keyframes:a});s==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...a].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=nv(u));const{calculatedDuration:c}=u;this.calculatedDuration=c,this.resolvedDuration=c+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=u}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:c,repeat:f,repeatType:p,repeatDelay:m,type:w,onUpdate:v,finalKeyframe:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-i/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const g=this.currentTime-u*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?g<0:g>i;this.currentTime=Math.max(g,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let _=this.currentTime,T=r;if(f){const $=Math.min(this.currentTime,i)/a;let U=Math.floor($),V=$%1;!V&&$>=1&&(V=1),V===1&&U--,U=Math.min(U,f+1),!!(U%2)&&(p==="reverse"?(V=1-V,m&&(V-=m/a)):p==="mirror"&&(T=o)),_=vi(0,1,V)*a}const O=y?{done:!1,value:c[0]}:T.next(_);s&&(O.value=s(O.value));let{done:R}=O;!y&&l!==null&&(R=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&R);return I&&w!==Jm&&(O.value=rv(c,this.options,x,this.speed)),v&&v(O.value),I&&this.finish(),O}then(t,n){return this.finished.then(t,n)}get duration(){return or(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+or(t)}get time(){return or(this.currentTime)}set time(t){var n;t=qr(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(On.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=or(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:t=XN,startTime:n}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(On.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function yL(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Hs=e=>e*180/Math.PI,Zm=e=>{const t=Hs(Math.atan2(e[1],e[0]));return Xm(t)},vL={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Zm,rotateZ:Zm,skewX:e=>Hs(Math.atan(e[1])),skewY:e=>Hs(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Xm=e=>(e=e%360,e<0&&(e+=360),e),wb=Zm,bb=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),_b=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),wL={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:bb,scaleY:_b,scale:e=>(bb(e)+_b(e))/2,rotateX:e=>Xm(Hs(Math.atan2(e[6],e[5]))),rotateY:e=>Xm(Hs(Math.atan2(-e[2],e[0]))),rotateZ:wb,rotate:wb,skewX:e=>Hs(Math.atan(e[4])),skewY:e=>Hs(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function eg(e){return e.includes("scale")?1:0}function tg(e,t){if(!e||e==="none")return eg(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=wL,i=n;else{const a=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=vL,i=a}if(!i)return eg(t);const s=r[t],o=i[1].split(",").map(_L);return typeof s=="function"?s(o):o[s]}const bL=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return tg(n,t)};function _L(e){return parseFloat(e.trim())}const za=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Va=new Set(za),xb=e=>e===Ua||e===qe,xL=new Set(["x","y","z"]),SL=za.filter(e=>!xL.has(e));function kL(e){const t=[];return SL.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const so={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>tg(t,"x"),y:(e,{transform:t})=>tg(t,"y")};so.translateX=so.x;so.translateY=so.y;const oo=new Set;let ng=!1,rg=!1,ig=!1;function Zk(){if(rg){const e=Array.from(oo).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const i=kL(r);i.length&&(n.set(r,i),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))==null||a.set(o)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}rg=!1,ng=!1,oo.forEach(e=>e.complete(ig)),oo.clear()}function Xk(){oo.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(rg=!0)})}function EL(){ig=!0,Xk(),Zk(),ig=!1}class ov{constructor(t,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(oo.add(this),ng||(ng=!0,bt.read(Xk),bt.resolveKeyframes(Zk))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:i}=this;if(t[0]===null){const s=i==null?void 0:i.get(),o=t[t.length-1];if(s!==void 0)t[0]=s;else if(r&&n){const a=r.readValue(n,o);a!=null&&(t[0]=a)}t[0]===void 0&&(t[0]=o),i&&s===void 0&&i.set(t[0])}yL(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),oo.delete(this)}cancel(){this.state==="scheduled"&&(oo.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const CL=e=>e.startsWith("--");function TL(e,t,n){CL(t)?e.style.setProperty(t,n):e.style[t]=n}const PL=qy(()=>window.ScrollTimeline!==void 0),AL={};function jL(e,t){const n=qy(e);return()=>AL[t]??n()}const eE=jL(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),bl=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,Sb={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:bl([0,.65,.55,1]),circOut:bl([.55,0,1,.45]),backIn:bl([.31,.01,.66,-.59]),backOut:bl([.33,1.53,.69,.99])};function tE(e,t){if(e)return typeof e=="function"?eE()?Qk(e,t):"ease-out":Fk(e)?bl(e):Array.isArray(e)?e.map(n=>tE(n,t)||Sb.easeOut):Sb[e]}function OL(e,t,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:l}={},u=void 0){const c={[t]:n};l&&(c.offset=l);const f=tE(a,i);Array.isArray(f)&&(c.easing=f);const p={delay:r,duration:i,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return u&&(p.pseudoElement=u),e.animate(c,p)}function nE(e){return typeof e=="function"&&"applyToOptions"in e}function RL({type:e,...t}){return nE(e)&&eE()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class IL extends iv{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=t;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=t,Hy(typeof t.type!="string");const u=RL(t);this.animation=OL(n,r,i,u,s),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const c=rv(i,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(c):TL(n,r,c),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,r;const t=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return or(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+or(t)}get time(){return or(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=qr(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&PL()?(this.animation.timeline=t,lr):n(this)}}const rE={anticipate:Nk,backInOut:Dk,circInOut:$k};function DL(e){return e in rE}function NL(e){typeof e.ease=="string"&&DL(e.ease)&&(e.ease=rE[e.ease])}const kb=10;class LL extends IL{constructor(t){NL(t),Jk(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const a=new sv({...o,autoplay:!1}),l=qr(this.finishedTime??this.time);n.setWithVelocity(a.sample(l-kb).value,a.sample(l).value,kb),a.stop()}}const Eb=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(ms.test(e)||e==="0")&&!e.startsWith("url("));function $L(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function ML(e,t,n,r){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const s=e[e.length-1],o=Eb(i,t),a=Eb(s,t);return!o||!a?!1:$L(e)||(n==="spring"||nE(n))&&r}function sg(e){e.duration=0,e.type="keyframes"}const FL=new Set(["opacity","clipPath","filter","transform"]),BL=qy(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function UL(e){var c;const{motionValue:t,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=e;if(!(((c=t==null?void 0:t.owner)==null?void 0:c.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=t.owner.getProps();return BL()&&n&&FL.has(n)&&(n!=="transform"||!u)&&!l&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const zL=40;class VL extends iv{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:a,name:l,motionValue:u,element:c,...f}){var w;super(),this.stop=()=>{var v,x;this._animation&&(this._animation.stop(),(v=this.stopTimeline)==null||v.call(this)),(x=this.keyframeResolver)==null||x.cancel()},this.createdAt=On.now();const p={autoplay:t,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:l,motionValue:u,element:c,...f},m=(c==null?void 0:c.KeyframeResolver)||ov;this.keyframeResolver=new m(a,(v,x,g)=>this.onKeyframesResolved(v,x,p,!g),l,u,c),(w=this.keyframeResolver)==null||w.scheduleResolve()}onKeyframesResolved(t,n,r,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:a,delay:l,isHandoff:u,onUpdate:c}=r;this.resolvedAt=On.now(),ML(t,s,o,a)||((wi.instantAnimations||!l)&&(c==null||c(rv(t,r,n))),t[0]=t[t.length-1],sg(r),r.repeat=0);const p={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>zL?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},m=!u&&UL(p)?new LL({...p,element:p.motionValue.owner.current}):new sv(p);m.finished.then(()=>this.notifyFinished()).catch(lr),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),EL()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const KL=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function WL(e){const t=KL.exec(e);if(!t)return[,];const[,n,r,i]=t;return[`--${n??r}`,i]}function iE(e,t,n=1){const[r,i]=WL(e);if(!r)return;const s=window.getComputedStyle(t).getPropertyValue(r);if(s){const o=s.trim();return Ck(o)?parseFloat(o):o}return Zy(i)?iE(i,t,n+1):i}function av(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const sE=new Set(["width","height","top","left","right","bottom",...za]),HL={test:e=>e==="auto",parse:e=>e},oE=e=>t=>t.test(e),aE=[Ua,qe,Gr,Li,$N,LN,HL],Cb=e=>aE.find(oE(e));function qL(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||Pk(e):!0}const GL=new Set(["brightness","contrast","saturate","opacity"]);function QL(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(Xy)||[];if(!r)return e;const i=n.replace(r,"");let s=GL.has(t)?1:0;return r!==n&&(s*=100),t+"("+s+i+")"}const YL=/\b([a-z-]*)\(.*?\)/gu,og={...ms,getAnimatableNone:e=>{const t=e.match(YL);return t?t.map(QL).join(" "):e}},Tb={...Ua,transform:Math.round},JL={rotate:Li,rotateX:Li,rotateY:Li,rotateZ:Li,scale:Bc,scaleX:Bc,scaleY:Bc,scaleZ:Bc,skew:Li,skewX:Li,skewY:Li,distance:qe,translateX:qe,translateY:qe,translateZ:qe,x:qe,y:qe,z:qe,perspective:qe,transformPerspective:qe,opacity:hu,originX:pb,originY:pb,originZ:qe},lv={borderWidth:qe,borderTopWidth:qe,borderRightWidth:qe,borderBottomWidth:qe,borderLeftWidth:qe,borderRadius:qe,radius:qe,borderTopLeftRadius:qe,borderTopRightRadius:qe,borderBottomRightRadius:qe,borderBottomLeftRadius:qe,width:qe,maxWidth:qe,height:qe,maxHeight:qe,top:qe,right:qe,bottom:qe,left:qe,padding:qe,paddingTop:qe,paddingRight:qe,paddingBottom:qe,paddingLeft:qe,margin:qe,marginTop:qe,marginRight:qe,marginBottom:qe,marginLeft:qe,backgroundPositionX:qe,backgroundPositionY:qe,...JL,zIndex:Tb,fillOpacity:hu,strokeOpacity:hu,numOctaves:Tb},ZL={...lv,color:Mt,backgroundColor:Mt,outlineColor:Mt,fill:Mt,stroke:Mt,borderColor:Mt,borderTopColor:Mt,borderRightColor:Mt,borderBottomColor:Mt,borderLeftColor:Mt,filter:og,WebkitFilter:og},lE=e=>ZL[e];function uE(e,t){let n=lE(e);return n!==og&&(n=ms),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const XL=new Set(["auto","none","0"]);function e$(e,t,n){let r=0,i;for(;r<e.length&&!i;){const s=e[r];typeof s=="string"&&!XL.has(s)&&pu(s).values.length&&(i=e[r]),r++}if(i&&n)for(const s of t)e[s]=uE(n,i)}class t$ extends ov{constructor(t,n,r,i,s){super(t,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let u=t[l];if(typeof u=="string"&&(u=u.trim(),Zy(u))){const c=iE(u,n.current);c!==void 0&&(t[l]=c),l===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!sE.has(r)||t.length!==2)return;const[i,s]=t,o=Cb(i),a=Cb(s);if(o!==a)if(xb(o)&&xb(a))for(let l=0;l<t.length;l++){const u=t[l];typeof u=="string"&&(t[l]=parseFloat(u))}else so[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let i=0;i<t.length;i++)(t[i]===null||qL(t[i]))&&r.push(i);r.length&&e$(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=so[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&t.getValue(r,i).jump(i,!1)}measureEndState(){var a;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const i=t.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=so[n](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,u])=>{t.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function n$(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const i=(n==null?void 0:n[e])??r.querySelectorAll(e);return i?Array.from(i):[]}return Array.from(e)}const cE=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function dE(e){return Tk(e)&&"offsetHeight"in e}const Pb=30,r$=e=>!isNaN(parseFloat(e));class i${constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var s;const i=On.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=On.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=r$(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Gy);const r=this.events[t].add(n);return t==="change"?()=>{r(),bt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=On.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Pb)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Pb);return Ak(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ja(e,t){return new i$(e,t)}const{schedule:uv}=Bk(queueMicrotask,!1),yr={x:!1,y:!1};function fE(){return yr.x||yr.y}function s$(e){return e==="x"||e==="y"?yr[e]?null:(yr[e]=!0,()=>{yr[e]=!1}):yr.x||yr.y?null:(yr.x=yr.y=!0,()=>{yr.x=yr.y=!1})}function hE(e,t){const n=n$(e),r=new AbortController,i={passive:!0,...t,signal:r.signal};return[n,i,()=>r.abort()]}function Ab(e){return!(e.pointerType==="touch"||fE())}function o$(e,t,n={}){const[r,i,s]=hE(e,n),o=a=>{if(!Ab(a))return;const{target:l}=a,u=t(l,a);if(typeof u!="function"||!l)return;const c=f=>{Ab(f)&&(u(f),l.removeEventListener("pointerleave",c))};l.addEventListener("pointerleave",c,i)};return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const pE=(e,t)=>t?e===t?!0:pE(e,t.parentElement):!1,cv=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,a$=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function l$(e){return a$.has(e.tagName)||e.tabIndex!==-1}const ud=new WeakSet;function jb(e){return t=>{t.key==="Enter"&&e(t)}}function cp(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const u$=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=jb(()=>{if(ud.has(n))return;cp(n,"down");const i=jb(()=>{cp(n,"up")}),s=()=>cp(n,"cancel");n.addEventListener("keyup",i,t),n.addEventListener("blur",s,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function Ob(e){return cv(e)&&!fE()}function c$(e,t,n={}){const[r,i,s]=hE(e,n),o=a=>{const l=a.currentTarget;if(!Ob(a))return;ud.add(l);const u=t(l,a),c=(m,w)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",p),ud.has(l)&&ud.delete(l),Ob(m)&&typeof u=="function"&&u(m,{success:w})},f=m=>{c(m,l===window||l===document||n.useGlobalTarget||pE(l,m.target))},p=m=>{c(m,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",p,i)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),dE(a)&&(a.addEventListener("focus",u=>u$(u,i)),!l$(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function mE(e){return Tk(e)&&"ownerSVGElement"in e}function d$(e){return mE(e)&&e.tagName==="svg"}const fn=e=>!!(e&&e.getVelocity),f$=[...aE,Mt,ms],h$=e=>f$.find(oE(e)),dv=E.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function Rb(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function p$(...e){return t=>{let n=!1;const r=e.map(i=>{const s=Rb(i,t);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():Rb(e[i],null)}}}}function m$(...e){return E.useCallback(p$(...e),e)}class g$ extends E.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=dE(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function y$({children:e,isPresent:t,anchorX:n,root:r}){const i=E.useId(),s=E.useRef(null),o=E.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=E.useContext(dv),l=m$(s,e==null?void 0:e.ref);return E.useInsertionEffect(()=>{const{width:u,height:c,top:f,left:p,right:m}=o.current;if(t||!s.current||!u||!c)return;const w=n==="left"?`left: ${p}`:`right: ${m}`;s.current.dataset.motionPopId=i;const v=document.createElement("style");a&&(v.nonce=a);const x=r??document.head;return x.appendChild(v),v.sheet&&v.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${c}px !important;
            ${w}px !important;
            top: ${f}px !important;
          }
        `),()=>{x.contains(v)&&x.removeChild(v)}},[t]),k.jsx(g$,{isPresent:t,childRef:s,sizeRef:o,children:E.cloneElement(e,{ref:l})})}const v$=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o,anchorX:a,root:l})=>{const u=zy(w$),c=E.useId();let f=!0,p=E.useMemo(()=>(f=!1,{id:c,initial:t,isPresent:n,custom:i,onExitComplete:m=>{u.set(m,!0);for(const w of u.values())if(!w)return;r&&r()},register:m=>(u.set(m,!1),()=>u.delete(m))}),[n,u,r]);return s&&f&&(p={...p}),E.useMemo(()=>{u.forEach((m,w)=>u.set(w,!1))},[n]),E.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),o==="popLayout"&&(e=k.jsx(y$,{isPresent:n,anchorX:a,root:l,children:e})),k.jsx(jf.Provider,{value:p,children:e})};function w$(){return new Map}function gE(e=!0){const t=E.useContext(jf);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=t,s=E.useId();E.useEffect(()=>{if(e)return i(s)},[e]);const o=E.useCallback(()=>e&&r&&r(s),[s,r,e]);return!n&&r?[!1,o]:[!0]}const Uc=e=>e.key||"";function Ib(e){const t=[];return E.Children.forEach(e,n=>{E.isValidElement(n)&&t.push(n)}),t}const b$=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:a="left",root:l})=>{const[u,c]=gE(o),f=E.useMemo(()=>Ib(e),[e]),p=o&&!u?[]:f.map(Uc),m=E.useRef(!0),w=E.useRef(f),v=zy(()=>new Map),[x,g]=E.useState(f),[y,_]=E.useState(f);Ek(()=>{m.current=!1,w.current=f;for(let R=0;R<y.length;R++){const I=Uc(y[R]);p.includes(I)?v.delete(I):v.get(I)!==!0&&v.set(I,!1)}},[y,p.length,p.join("-")]);const T=[];if(f!==x){let R=[...f];for(let I=0;I<y.length;I++){const $=y[I],U=Uc($);p.includes(U)||(R.splice(I,0,$),T.push($))}return s==="wait"&&T.length&&(R=T),_(Ib(R)),g(f),null}const{forceRender:O}=E.useContext(Uy);return k.jsx(k.Fragment,{children:y.map(R=>{const I=Uc(R),$=o&&!u?!1:f===y||p.includes(I),U=()=>{if(v.has(I))v.set(I,!0);else return;let V=!0;v.forEach(ge=>{ge||(V=!1)}),V&&(O==null||O(),_(w.current),o&&(c==null||c()),r&&r())};return k.jsx(v$,{isPresent:$,initial:!m.current||n?void 0:!1,custom:t,presenceAffectsLayout:i,mode:s,root:l,onExitComplete:$?void 0:U,anchorX:a,children:R},I)})})},yE=E.createContext({strict:!1}),Db={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Oa={};for(const e in Db)Oa[e]={isEnabled:t=>Db[e].some(n=>!!t[n])};function _$(e){for(const t in e)Oa[t]={...Oa[t],...e[t]}}const x$=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Yd(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||x$.has(e)}let vE=e=>!Yd(e);function S$(e){typeof e=="function"&&(vE=t=>t.startsWith("on")?!Yd(t):e(t))}try{S$(require("@emotion/is-prop-valid").default)}catch{}function k$(e,t,n){const r={};for(const i in e)i==="values"&&typeof e.values=="object"||(vE(i)||n===!0&&Yd(i)||!t&&!Yd(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}const Of=E.createContext({});function Rf(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function mu(e){return typeof e=="string"||Array.isArray(e)}const fv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],hv=["initial",...fv];function If(e){return Rf(e.animate)||hv.some(t=>mu(e[t]))}function wE(e){return!!(If(e)||e.variants)}function E$(e,t){if(If(e)){const{initial:n,animate:r}=e;return{initial:n===!1||mu(n)?n:void 0,animate:mu(r)?r:void 0}}return e.inherit!==!1?t:{}}function C$(e){const{initial:t,animate:n}=E$(e,E.useContext(Of));return E.useMemo(()=>({initial:t,animate:n}),[Nb(t),Nb(n)])}function Nb(e){return Array.isArray(e)?e.join(" "):e}const gu={};function T$(e){for(const t in e)gu[t]=e[t],Jy(t)&&(gu[t].isCSSVariable=!0)}function bE(e,{layout:t,layoutId:n}){return Va.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!gu[e]||e==="opacity")}const P$={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},A$=za.length;function j$(e,t,n){let r="",i=!0;for(let s=0;s<A$;s++){const o=za[s],a=e[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const u=cE(a,lv[o]);if(!l){i=!1;const c=P$[o]||o;r+=`${c}(${u}) `}n&&(t[o]=u)}}return r=r.trim(),n?r=n(t,i?"":r):i&&(r="none"),r}function pv(e,t,n){const{style:r,vars:i,transformOrigin:s}=e;let o=!1,a=!1;for(const l in t){const u=t[l];if(Va.has(l)){o=!0;continue}else if(Jy(l)){i[l]=u;continue}else{const c=cE(u,lv[l]);l.startsWith("origin")?(a=!0,s[l]=c):r[l]=c}}if(t.transform||(o||n?r.transform=j$(t,e.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:u="50%",originZ:c=0}=s;r.transformOrigin=`${l} ${u} ${c}`}}const mv=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function _E(e,t,n){for(const r in t)!fn(t[r])&&!bE(r,n)&&(e[r]=t[r])}function O$({transformTemplate:e},t){return E.useMemo(()=>{const n=mv();return pv(n,t,e),Object.assign({},n.vars,n.style)},[t])}function R$(e,t){const n=e.style||{},r={};return _E(r,n,e),Object.assign(r,O$(e,t)),r}function I$(e,t){const n={},r=R$(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const D$={offset:"stroke-dashoffset",array:"stroke-dasharray"},N$={offset:"strokeDashoffset",array:"strokeDasharray"};function L$(e,t,n=1,r=0,i=!0){e.pathLength=1;const s=i?D$:N$;e[s.offset]=qe.transform(-r);const o=qe.transform(t),a=qe.transform(n);e[s.array]=`${o} ${a}`}function xE(e,{attrX:t,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...a},l,u,c){if(pv(e,a,u),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:f,style:p}=e;f.transform&&(p.transform=f.transform,delete f.transform),(p.transform||f.transformOrigin)&&(p.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),p.transform&&(p.transformBox=(c==null?void 0:c.transformBox)??"fill-box",delete f.transformBox),t!==void 0&&(f.x=t),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),i!==void 0&&L$(f,i,s,o,!1)}const SE=()=>({...mv(),attrs:{}}),kE=e=>typeof e=="string"&&e.toLowerCase()==="svg";function $$(e,t,n,r){const i=E.useMemo(()=>{const s=SE();return xE(s,t,kE(r),e.transformTemplate,e.style),{...s.attrs,style:{...s.style}}},[t]);if(e.style){const s={};_E(s,e.style,e),i.style={...s,...i.style}}return i}const M$=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function gv(e){return typeof e!="string"||e.includes("-")?!1:!!(M$.indexOf(e)>-1||/[A-Z]/u.test(e))}function F$(e,t,n,{latestValues:r},i,s=!1){const a=(gv(e)?$$:I$)(t,r,i,e),l=k$(t,typeof e=="string",s),u=e!==E.Fragment?{...l,...a,ref:n}:{},{children:c}=t,f=E.useMemo(()=>fn(c)?c.get():c,[c]);return E.createElement(e,{...u,children:f})}function Lb(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function yv(e,t,n,r){if(typeof t=="function"){const[i,s]=Lb(r);t=t(n!==void 0?n:e.custom,i,s)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,s]=Lb(r);t=t(n!==void 0?n:e.custom,i,s)}return t}function cd(e){return fn(e)?e.get():e}function B$({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,i){return{latestValues:U$(n,r,i,e),renderState:t()}}function U$(e,t,n,r){const i={},s=r(e,{});for(const p in s)i[p]=cd(s[p]);let{initial:o,animate:a}=e;const l=If(e),u=wE(e);t&&u&&!l&&e.inherit!==!1&&(o===void 0&&(o=t.initial),a===void 0&&(a=t.animate));let c=n?n.initial===!1:!1;c=c||o===!1;const f=c?a:o;if(f&&typeof f!="boolean"&&!Rf(f)){const p=Array.isArray(f)?f:[f];for(let m=0;m<p.length;m++){const w=yv(e,p[m]);if(w){const{transitionEnd:v,transition:x,...g}=w;for(const y in g){let _=g[y];if(Array.isArray(_)){const T=c?_.length-1:0;_=_[T]}_!==null&&(i[y]=_)}for(const y in v)i[y]=v[y]}}}return i}const EE=e=>(t,n)=>{const r=E.useContext(Of),i=E.useContext(jf),s=()=>B$(e,t,r,i);return n?s():zy(s)};function vv(e,t,n){var s;const{style:r}=e,i={};for(const o in r)(fn(r[o])||t.style&&fn(t.style[o])||bE(o,e)||((s=n==null?void 0:n.getValue(o))==null?void 0:s.liveStyle)!==void 0)&&(i[o]=r[o]);return i}const z$=EE({scrapeMotionValuesFromProps:vv,createRenderState:mv});function CE(e,t,n){const r=vv(e,t,n);for(const i in e)if(fn(e[i])||fn(t[i])){const s=za.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=e[i]}return r}const V$=EE({scrapeMotionValuesFromProps:CE,createRenderState:SE}),K$=Symbol.for("motionComponentSymbol");function Zo(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function W$(e,t,n){return E.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):Zo(n)&&(n.current=r))},[t])}const wv=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),H$="framerAppearId",TE="data-"+wv(H$),PE=E.createContext({});function q$(e,t,n,r,i){var v,x;const{visualElement:s}=E.useContext(Of),o=E.useContext(yE),a=E.useContext(jf),l=E.useContext(dv).reducedMotion,u=E.useRef(null);r=r||o.renderer,!u.current&&r&&(u.current=r(e,{visualState:t,parent:s,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const c=u.current,f=E.useContext(PE);c&&!c.projection&&i&&(c.type==="html"||c.type==="svg")&&G$(u.current,n,i,f);const p=E.useRef(!1);E.useInsertionEffect(()=>{c&&p.current&&c.update(n,a)});const m=n[TE],w=E.useRef(!!m&&!((v=window.MotionHandoffIsComplete)!=null&&v.call(window,m))&&((x=window.MotionHasOptimisedAnimation)==null?void 0:x.call(window,m)));return Ek(()=>{c&&(p.current=!0,window.MotionIsMounted=!0,c.updateFeatures(),c.scheduleRenderMicrotask(),w.current&&c.animationState&&c.animationState.animateChanges())}),E.useEffect(()=>{c&&(!w.current&&c.animationState&&c.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{var g;(g=window.MotionHandoffMarkAsComplete)==null||g.call(window,m)}),w.current=!1),c.enteringChildren=void 0)}),c}function G$(e,t,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:u,layoutCrossfade:c}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:AE(e.parent)),e.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&Zo(a),visualElement:e,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:c,layoutScroll:l,layoutRoot:u})}function AE(e){if(e)return e.options.allowProjection!==!1?e.projection:AE(e.parent)}function dp(e,{forwardMotionProps:t=!1}={},n,r){n&&_$(n);const i=gv(e)?V$:z$;function s(a,l){let u;const c={...E.useContext(dv),...a,layoutId:Q$(a)},{isStatic:f}=c,p=C$(a),m=i(a,f);if(!f&&Vy){Y$();const w=J$(c);u=w.MeasureLayout,p.visualElement=q$(e,m,c,r,w.ProjectionNode)}return k.jsxs(Of.Provider,{value:p,children:[u&&p.visualElement?k.jsx(u,{visualElement:p.visualElement,...c}):null,F$(e,a,W$(m,p.visualElement,l),m,f,t)]})}s.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const o=E.forwardRef(s);return o[K$]=e,o}function Q$({layoutId:e}){const t=E.useContext(Uy).id;return t&&e!==void 0?t+"-"+e:e}function Y$(e,t){E.useContext(yE).strict}function J$(e){const{drag:t,layout:n}=Oa;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function Z$(e,t){if(typeof Proxy>"u")return dp;const n=new Map,r=(s,o)=>dp(s,o,e,t),i=(s,o)=>r(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?r:(n.has(o)||n.set(o,dp(o,void 0,e,t)),n.get(o))})}function jE({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function X$({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function eM(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function fp(e){return e===void 0||e===1}function ag({scale:e,scaleX:t,scaleY:n}){return!fp(e)||!fp(t)||!fp(n)}function Ns(e){return ag(e)||OE(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function OE(e){return $b(e.x)||$b(e.y)}function $b(e){return e&&e!=="0%"}function Jd(e,t,n){const r=e-n,i=t*r;return n+i}function Mb(e,t,n,r,i){return i!==void 0&&(e=Jd(e,i,r)),Jd(e,n,r)+t}function lg(e,t=0,n=1,r,i){e.min=Mb(e.min,t,n,r,i),e.max=Mb(e.max,t,n,r,i)}function RE(e,{x:t,y:n}){lg(e.x,t.translate,t.scale,t.originPoint),lg(e.y,n.translate,n.scale,n.originPoint)}const Fb=.999999999999,Bb=1.0000000000001;function tM(e,t,n,r=!1){const i=n.length;if(!i)return;t.x=t.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&ea(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,RE(e,o)),r&&Ns(s.latestValues)&&ea(e,s.latestValues))}t.x<Bb&&t.x>Fb&&(t.x=1),t.y<Bb&&t.y>Fb&&(t.y=1)}function Xo(e,t){e.min=e.min+t,e.max=e.max+t}function Ub(e,t,n,r,i=.5){const s=kt(e.min,e.max,i);lg(e,t,n,s,r)}function ea(e,t){Ub(e.x,t.x,t.scaleX,t.scale,t.originX),Ub(e.y,t.y,t.scaleY,t.scale,t.originY)}function IE(e,t){return jE(eM(e.getBoundingClientRect(),t))}function nM(e,t,n){const r=IE(e,n),{scroll:i}=t;return i&&(Xo(r.x,i.offset.x),Xo(r.y,i.offset.y)),r}const zb=()=>({translate:0,scale:1,origin:0,originPoint:0}),ta=()=>({x:zb(),y:zb()}),Vb=()=>({min:0,max:0}),Dt=()=>({x:Vb(),y:Vb()}),ug={current:null},DE={current:!1};function rM(){if(DE.current=!0,!!Vy)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>ug.current=e.matches;e.addEventListener("change",t),t()}else ug.current=!1}const iM=new WeakMap;function sM(e,t,n){for(const r in t){const i=t[r],s=n[r];if(fn(i))e.addValue(r,i);else if(fn(s))e.addValue(r,ja(i,{owner:e}));else if(s!==i)if(e.hasValue(r)){const o=e.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=e.getStaticValue(r);e.addValue(r,ja(o!==void 0?o:i,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const Kb=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class oM{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ov,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=On.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,bt.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=If(n),this.isVariantNode=wE(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:c,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in f){const m=f[p];l[p]!==void 0&&fn(m)&&m.set(l[p])}}mount(t){var n;this.current=t,iM.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),DE.current||rM(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:ug.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),ps(this.notifyUpdate),ps(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Va.has(t);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&bt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Oa){const n=Oa[t];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[t]&&i&&r(this.props)&&(this.features[t]=new i(this)),this.features[t]){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Dt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Kb.length;r++){const i=Kb[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=t[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=sM(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=ja(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(Ck(r)||Pk(r))?r=parseFloat(r):!h$(r)&&ms.test(n)&&(r=uE(t,n)),this.setBaseTarget(t,fn(r)?r.get():r)),fn(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=yv(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);o&&(r=o[t])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!fn(i)?i:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Gy),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){uv.render(this.render)}}class NE extends oM{constructor(){super(...arguments),this.KeyframeResolver=t$}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;fn(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function LE(e,{style:t,vars:n},r,i){const s=e.style;let o;for(o in t)s[o]=t[o];i==null||i.applyProjectionStyles(s,r);for(o in n)s.setProperty(o,n[o])}function aM(e){return window.getComputedStyle(e)}class lM extends NE{constructor(){super(...arguments),this.type="html",this.renderInstance=LE}readValueFromInstance(t,n){var r;if(Va.has(n))return(r=this.projection)!=null&&r.isProjecting?eg(n):bL(t,n);{const i=aM(t),s=(Jy(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:n}){return IE(t,n)}build(t,n,r){pv(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return vv(t,n,r)}}const $E=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function uM(e,t,n,r){LE(e,t,void 0,r);for(const i in t.attrs)e.setAttribute($E.has(i)?i:wv(i),t.attrs[i])}class cM extends NE{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Dt}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Va.has(n)){const r=lE(n);return r&&r.default||0}return n=$E.has(n)?n:wv(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return CE(t,n,r)}build(t,n,r){xE(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,i){uM(t,n,r,i)}mount(t){this.isSVGTag=kE(t.tagName),super.mount(t)}}const dM=(e,t)=>gv(e)?new cM(t):new lM(t,{allowProjection:e!==E.Fragment});function ua(e,t,n){const r=e.getProps();return yv(r,t,n!==void 0?n:r.custom,e)}const cg=e=>Array.isArray(e);function fM(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,ja(n))}function hM(e){return cg(e)?e[e.length-1]||0:e}function pM(e,t){const n=ua(e,t);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=hM(s[o]);fM(e,o,a)}}function mM(e){return!!(fn(e)&&e.add)}function dg(e,t){const n=e.getValue("willChange");if(mM(n))return n.add(t);if(!n&&wi.WillChange){const r=new wi.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function ME(e){return e.props[TE]}const gM=e=>e!==null;function yM(e,{repeat:t,repeatType:n="loop"},r){const i=e.filter(gM),s=t&&n!=="loop"&&t%2===1?0:i.length-1;return i[s]}const vM={type:"spring",stiffness:500,damping:25,restSpeed:10},wM=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),bM={type:"keyframes",duration:.8},_M={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},xM=(e,{keyframes:t})=>t.length>2?bM:Va.has(e)?e.startsWith("scale")?wM(t[1]):vM:_M;function SM({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const bv=(e,t,n,r={},i,s)=>o=>{const a=av(r,e)||{},l=a.delay||r.delay||0;let{elapsed:u=0}=r;u=u-qr(l);const c={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-u,onUpdate:p=>{t.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:s?void 0:i};SM(a)||Object.assign(c,xM(e,c)),c.duration&&(c.duration=qr(c.duration)),c.repeatDelay&&(c.repeatDelay=qr(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let f=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(sg(c),c.delay===0&&(f=!0)),(wi.instantAnimations||wi.skipAnimations)&&(f=!0,sg(c),c.delay=0),c.allowFlatten=!a.type&&!a.ease,f&&!s&&t.get()!==void 0){const p=yM(c.keyframes,a);if(p!==void 0){bt.update(()=>{c.onUpdate(p),c.onComplete()});return}}return a.isSync?new sv(c):new VL(c)};function kM({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function FE(e,t,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=e.getDefaultTransition(),transitionEnd:o,...a}=t;r&&(s=r);const l=[],u=i&&e.animationState&&e.animationState.getState()[i];for(const c in a){const f=e.getValue(c,e.latestValues[c]??null),p=a[c];if(p===void 0||u&&kM(u,c))continue;const m={delay:n,...av(s||{},c)},w=f.get();if(w!==void 0&&!f.isAnimating&&!Array.isArray(p)&&p===w&&!m.velocity)continue;let v=!1;if(window.MotionHandoffAnimation){const g=ME(e);if(g){const y=window.MotionHandoffAnimation(g,c,bt);y!==null&&(m.startTime=y,v=!0)}}dg(e,c),f.start(bv(c,f,p,e.shouldReduceMotion&&sE.has(c)?{type:!1}:m,e,v));const x=f.animation;x&&l.push(x)}return o&&Promise.all(l).then(()=>{bt.update(()=>{o&&pM(e,o)})}),l}function BE(e,t,n,r=0,i=1){const s=Array.from(e).sort((u,c)=>u.sortNodePosition(c)).indexOf(t),o=e.size,a=(o-1)*r;return typeof n=="function"?n(s,o):i===1?s*r:a-s*r}function fg(e,t,n={}){var l;const r=ua(e,t,n.type==="exit"?(l=e.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(FE(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:f,staggerDirection:p}=i;return EM(e,t,u,c,f,p,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[u,c]=a==="beforeChildren"?[s,o]:[o,s];return u().then(()=>c())}else return Promise.all([s(),o(n.delay)])}function EM(e,t,n=0,r=0,i=0,s=1,o){const a=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),a.push(fg(l,t,{...o,delay:n+(typeof r=="function"?0:r)+BE(e.variantChildren,l,r,i,s)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(a)}function CM(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(s=>fg(e,s,n));r=Promise.all(i)}else if(typeof t=="string")r=fg(e,t,n);else{const i=typeof t=="function"?ua(e,t,n.custom):t;r=Promise.all(FE(e,i,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function UE(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const TM=hv.length;function zE(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?zE(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<TM;n++){const r=hv[n],i=e.props[r];(mu(i)||i===!1)&&(t[r]=i)}return t}const PM=[...fv].reverse(),AM=fv.length;function jM(e){return t=>Promise.all(t.map(({animation:n,options:r})=>CM(e,n,r)))}function OM(e){let t=jM(e),n=Wb(),r=!0;const i=l=>(u,c)=>{var p;const f=ua(e,c,l==="exit"?(p=e.presenceContext)==null?void 0:p.custom:void 0);if(f){const{transition:m,transitionEnd:w,...v}=f;u={...u,...v,...w}}return u};function s(l){t=l(e)}function o(l){const{props:u}=e,c=zE(e.parent)||{},f=[],p=new Set;let m={},w=1/0;for(let x=0;x<AM;x++){const g=PM[x],y=n[g],_=u[g]!==void 0?u[g]:c[g],T=mu(_),O=g===l?y.isActive:null;O===!1&&(w=x);let R=_===c[g]&&_!==u[g]&&T;if(R&&r&&e.manuallyAnimateOnMount&&(R=!1),y.protectedKeys={...m},!y.isActive&&O===null||!_&&!y.prevProp||Rf(_)||typeof _=="boolean")continue;const I=RM(y.prevProp,_);let $=I||g===l&&y.isActive&&!R&&T||x>w&&T,U=!1;const V=Array.isArray(_)?_:[_];let ge=V.reduce(i(g),{});O===!1&&(ge={});const{prevResolvedValues:M={}}=y,Y={...M,...ge},P=le=>{$=!0,p.has(le)&&(U=!0,p.delete(le)),y.needsAnimating[le]=!0;const ue=e.getValue(le);ue&&(ue.liveStyle=!1)};for(const le in Y){const ue=ge[le],L=M[le];if(m.hasOwnProperty(le))continue;let ie=!1;cg(ue)&&cg(L)?ie=!UE(ue,L):ie=ue!==L,ie?ue!=null?P(le):p.add(le):ue!==void 0&&p.has(le)?P(le):y.protectedKeys[le]=!0}y.prevProp=_,y.prevResolvedValues=ge,y.isActive&&(m={...m,...ge}),r&&e.blockInitialAnimation&&($=!1);const te=R&&I;$&&(!te||U)&&f.push(...V.map(le=>{const ue={type:g};if(typeof le=="string"&&r&&!te&&e.manuallyAnimateOnMount&&e.parent){const{parent:L}=e,ie=ua(L,le);if(L.enteringChildren&&ie){const{delayChildren:K}=ie.transition||{};ue.delay=BE(L.enteringChildren,e,K)}}return{animation:le,options:ue}}))}if(p.size){const x={};if(typeof u.initial!="boolean"){const g=ua(e,Array.isArray(u.initial)?u.initial[0]:u.initial);g&&g.transition&&(x.transition=g.transition)}p.forEach(g=>{const y=e.getBaseTarget(g),_=e.getValue(g);_&&(_.liveStyle=!0),x[g]=y??null}),f.push({animation:x})}let v=!!f.length;return r&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(v=!1),r=!1,v?t(f):Promise.resolve()}function a(l,u){var f;if(n[l].isActive===u)return Promise.resolve();(f=e.variantChildren)==null||f.forEach(p=>{var m;return(m=p.animationState)==null?void 0:m.setActive(l,u)}),n[l].isActive=u;const c=o(l);for(const p in n)n[p].protectedKeys={};return c}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=Wb(),r=!0}}}function RM(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!UE(t,e):!1}function Os(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Wb(){return{animate:Os(!0),whileInView:Os(),whileHover:Os(),whileTap:Os(),whileDrag:Os(),whileFocus:Os(),exit:Os()}}class _s{constructor(t){this.isMounted=!1,this.node=t}update(){}}class IM extends _s{constructor(t){super(t),t.animationState||(t.animationState=OM(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Rf(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let DM=0;class NM extends _s{constructor(){super(...arguments),this.id=DM++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t);n&&!t&&i.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const LM={animation:{Feature:IM},exit:{Feature:NM}};function yu(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function Uu(e){return{point:{x:e.pageX,y:e.pageY}}}const $M=e=>t=>cv(t)&&e(t,Uu(t));function Ml(e,t,n,r){return yu(e,t,$M(n),r)}const VE=1e-4,MM=1-VE,FM=1+VE,KE=.01,BM=0-KE,UM=0+KE;function wn(e){return e.max-e.min}function zM(e,t,n){return Math.abs(e-t)<=n}function Hb(e,t,n,r=.5){e.origin=r,e.originPoint=kt(t.min,t.max,e.origin),e.scale=wn(n)/wn(t),e.translate=kt(n.min,n.max,e.origin)-e.originPoint,(e.scale>=MM&&e.scale<=FM||isNaN(e.scale))&&(e.scale=1),(e.translate>=BM&&e.translate<=UM||isNaN(e.translate))&&(e.translate=0)}function Fl(e,t,n,r){Hb(e.x,t.x,n.x,r?r.originX:void 0),Hb(e.y,t.y,n.y,r?r.originY:void 0)}function qb(e,t,n){e.min=n.min+t.min,e.max=e.min+wn(t)}function VM(e,t,n){qb(e.x,t.x,n.x),qb(e.y,t.y,n.y)}function Gb(e,t,n){e.min=t.min-n.min,e.max=e.min+wn(t)}function Bl(e,t,n){Gb(e.x,t.x,n.x),Gb(e.y,t.y,n.y)}function Zn(e){return[e("x"),e("y")]}const WE=({current:e})=>e?e.ownerDocument.defaultView:null,Qb=(e,t)=>Math.abs(e-t);function KM(e,t){const n=Qb(e.x,t.x),r=Qb(e.y,t.y);return Math.sqrt(n**2+r**2)}class HE{constructor(t,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=pp(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,w=KM(p.offset,{x:0,y:0})>=this.distanceThreshold;if(!m&&!w)return;const{point:v}=p,{timestamp:x}=Xt;this.history.push({...v,timestamp:x});const{onStart:g,onMove:y}=this.handlers;m||(g&&g(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,p)},this.handlePointerMove=(p,m)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=hp(m,this.transformPagePoint),bt.update(this.updatePoint,!0)},this.handlePointerUp=(p,m)=>{this.end();const{onEnd:w,onSessionEnd:v,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=pp(p.type==="pointercancel"?this.lastMoveEventInfo:hp(m,this.transformPagePoint),this.history);this.startEvent&&w&&w(p,g),v&&v(p,g)},!cv(t))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const a=Uu(t),l=hp(a,this.transformPagePoint),{point:u}=l,{timestamp:c}=Xt;this.history=[{...u,timestamp:c}];const{onSessionStart:f}=n;f&&f(t,pp(l,this.history)),this.removeListeners=Mu(Ml(this.contextWindow,"pointermove",this.handlePointerMove),Ml(this.contextWindow,"pointerup",this.handlePointerUp),Ml(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),ps(this.updatePoint)}}function hp(e,t){return t?{point:t(e.point)}:e}function Yb(e,t){return{x:e.x-t.x,y:e.y-t.y}}function pp({point:e},t){return{point:e,delta:Yb(e,qE(t)),offset:Yb(e,WM(t)),velocity:HM(t,.1)}}function WM(e){return e[0]}function qE(e){return e[e.length-1]}function HM(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=qE(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>qr(t)));)n--;if(!r)return{x:0,y:0};const s=or(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function qM(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?kt(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?kt(n,e,r.max):Math.min(e,n)),e}function Jb(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function GM(e,{top:t,left:n,bottom:r,right:i}){return{x:Jb(e.x,n,i),y:Jb(e.y,t,r)}}function Zb(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function QM(e,t){return{x:Zb(e.x,t.x),y:Zb(e.y,t.y)}}function YM(e,t){let n=.5;const r=wn(e),i=wn(t);return i>r?n=fu(t.min,t.max-r,e.min):r>i&&(n=fu(e.min,e.max-i,t.min)),vi(0,1,n)}function JM(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const hg=.35;function ZM(e=hg){return e===!1?e=0:e===!0&&(e=hg),{x:Xb(e,"left","right"),y:Xb(e,"top","bottom")}}function Xb(e,t,n){return{min:e_(e,t),max:e_(e,n)}}function e_(e,t){return typeof e=="number"?e:e[t]||0}const XM=new WeakMap;class e3{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Dt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=f=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Uu(f).point)},o=(f,p)=>{const{drag:m,dragPropagation:w,onDragStart:v}=this.getProps();if(m&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=s$(m),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=p,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Zn(g=>{let y=this.getAxisMotionValue(g).get()||0;if(Gr.test(y)){const{projection:_}=this.visualElement;if(_&&_.layout){const T=_.layout.layoutBox[g];T&&(y=wn(T)*(parseFloat(y)/100))}}this.originPoint[g]=y}),v&&bt.postRender(()=>v(f,p)),dg(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},a=(f,p)=>{this.latestPointerEvent=f,this.latestPanInfo=p;const{dragPropagation:m,dragDirectionLock:w,onDirectionLock:v,onDrag:x}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:g}=p;if(w&&this.currentDirection===null){this.currentDirection=t3(g),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",p.point,g),this.updateAxis("y",p.point,g),this.visualElement.render(),x&&x(f,p)},l=(f,p)=>{this.latestPointerEvent=f,this.latestPanInfo=p,this.stop(f,p),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>Zn(f=>{var p;return this.getAnimationState(f)==="paused"&&((p=this.getAxisMotionValue(f).animation)==null?void 0:p.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new HE(t,{onSessionStart:s,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,distanceThreshold:r,contextWindow:WE(this.visualElement)})}stop(t,n){const r=t||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&bt.postRender(()=>a(r,i))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:i}=this.getProps();if(!r||!zc(t,i,this.currentDirection))return;const s=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=qM(o,this.constraints[t],this.elastic[t])),s.set(o)}resolveConstraints(){var s;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;t&&Zo(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=GM(r.layoutBox,t):this.constraints=!1,this.elastic=ZM(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Zn(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=JM(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Zo(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=nM(r,i.root,this.visualElement.getTransformPagePoint());let o=QM(i.layout.layoutBox,s);if(n){const a=n(X$(o));this.hasMutatedConstraints=!!a,a&&(o=jE(a))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=Zn(c=>{if(!zc(c,n,this.currentDirection))return;let f=l&&l[c]||{};o&&(f={min:0,max:0});const p=i?200:1e6,m=i?40:1e7,w={type:"inertia",velocity:r?t[c]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(c,w)});return Promise.all(u).then(a)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return dg(this.visualElement,t),r.start(bv(t,r,0,n,this.visualElement,!1))}stopAnimation(){Zn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Zn(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Zn(n=>{const{drag:r}=this.getProps();if(!zc(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(t[n]-kt(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Zo(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Zn(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=YM({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Zn(o=>{if(!zc(o,t,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(kt(l,u,i[o]))})}addListeners(){if(!this.visualElement.current)return;XM.set(this.visualElement,this);const t=this.visualElement.current,n=Ml(t,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Zo(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),bt.read(r);const o=yu(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(Zn(c=>{const f=this.getAxisMotionValue(c);f&&(this.originPoint[c]+=l[c].translate,f.set(f.get()+l[c].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=hg,dragMomentum:a=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function zc(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function t3(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class n3 extends _s{constructor(t){super(t),this.removeGroupControls=lr,this.removeListeners=lr,this.controls=new e3(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||lr}unmount(){this.removeGroupControls(),this.removeListeners()}}const t_=e=>(t,n)=>{e&&bt.postRender(()=>e(t,n))};class r3 extends _s{constructor(){super(...arguments),this.removePointerDownListener=lr}onPointerDown(t){this.session=new HE(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:WE(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:t_(t),onStart:t_(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&bt.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=Ml(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const dd={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function n_(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const cl={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(qe.test(e))e=parseFloat(e);else return e;const n=n_(e,t.target.x),r=n_(e,t.target.y);return`${n}% ${r}%`}},i3={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,i=ms.parse(e);if(i.length>5)return r;const s=ms.createTransformer(e),o=typeof i[0]!="number"?1:0,a=n.x.scale*t.x,l=n.y.scale*t.y;i[0+o]/=a,i[1+o]/=l;const u=kt(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=u),typeof i[3+o]=="number"&&(i[3+o]/=u),s(i)}};let mp=!1;class s3 extends E.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=t;T$(o3),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),mp&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),dd.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,mp=!0,i||t.layoutDependency!==n||n===void 0||t.isPresent!==s?o.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?o.promote():o.relegate()||bt.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),uv.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=t;mp=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function GE(e){const[t,n]=gE(),r=E.useContext(Uy);return k.jsx(s3,{...e,layoutGroup:r,switchLayoutGroup:E.useContext(PE),isPresent:t,safeToRemove:n})}const o3={borderRadius:{...cl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:cl,borderTopRightRadius:cl,borderBottomLeftRadius:cl,borderBottomRightRadius:cl,boxShadow:i3};function a3(e,t,n){const r=fn(e)?e:ja(e);return r.start(bv("",r,t,n)),r.animation}const l3=(e,t)=>e.depth-t.depth;class u3{constructor(){this.children=[],this.isDirty=!1}add(t){Ky(this.children,t),this.isDirty=!0}remove(t){Wy(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(l3),this.isDirty=!1,this.children.forEach(t)}}function c3(e,t){const n=On.now(),r=({timestamp:i})=>{const s=i-n;s>=t&&(ps(r),e(s-t))};return bt.setup(r,!0),()=>ps(r)}const QE=["TopLeft","TopRight","BottomLeft","BottomRight"],d3=QE.length,r_=e=>typeof e=="string"?parseFloat(e):e,i_=e=>typeof e=="number"||qe.test(e);function f3(e,t,n,r,i,s){i?(e.opacity=kt(0,n.opacity??1,h3(r)),e.opacityExit=kt(t.opacity??1,0,p3(r))):s&&(e.opacity=kt(t.opacity??1,n.opacity??1,r));for(let o=0;o<d3;o++){const a=`border${QE[o]}Radius`;let l=s_(t,a),u=s_(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||i_(l)===i_(u)?(e[a]=Math.max(kt(r_(l),r_(u),r),0),(Gr.test(u)||Gr.test(l))&&(e[a]+="%")):e[a]=u}(t.rotate||n.rotate)&&(e.rotate=kt(t.rotate||0,n.rotate||0,r))}function s_(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const h3=YE(0,.5,Lk),p3=YE(.5,.95,lr);function YE(e,t,n){return r=>r<e?0:r>t?1:n(fu(e,t,r))}function o_(e,t){e.min=t.min,e.max=t.max}function Yn(e,t){o_(e.x,t.x),o_(e.y,t.y)}function a_(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function l_(e,t,n,r,i){return e-=t,e=Jd(e,1/n,r),i!==void 0&&(e=Jd(e,1/i,r)),e}function m3(e,t=0,n=1,r=.5,i,s=e,o=e){if(Gr.test(t)&&(t=parseFloat(t),t=kt(o.min,o.max,t/100)-o.min),typeof t!="number")return;let a=kt(s.min,s.max,r);e===s&&(a-=t),e.min=l_(e.min,t,n,a,i),e.max=l_(e.max,t,n,a,i)}function u_(e,t,[n,r,i],s,o){m3(e,t[n],t[r],t[i],t.scale,s,o)}const g3=["x","scaleX","originX"],y3=["y","scaleY","originY"];function c_(e,t,n,r){u_(e.x,t,g3,n?n.x:void 0,r?r.x:void 0),u_(e.y,t,y3,n?n.y:void 0,r?r.y:void 0)}function d_(e){return e.translate===0&&e.scale===1}function JE(e){return d_(e.x)&&d_(e.y)}function f_(e,t){return e.min===t.min&&e.max===t.max}function v3(e,t){return f_(e.x,t.x)&&f_(e.y,t.y)}function h_(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function ZE(e,t){return h_(e.x,t.x)&&h_(e.y,t.y)}function p_(e){return wn(e.x)/wn(e.y)}function m_(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class w3{constructor(){this.members=[]}add(t){Ky(this.members,t),t.scheduleRender()}remove(t){if(Wy(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function b3(e,t,n){let r="";const i=e.x.translate/t.x,s=e.y.translate/t.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:u,rotate:c,rotateX:f,rotateY:p,skewX:m,skewY:w}=n;u&&(r=`perspective(${u}px) ${r}`),c&&(r+=`rotate(${c}deg) `),f&&(r+=`rotateX(${f}deg) `),p&&(r+=`rotateY(${p}deg) `),m&&(r+=`skewX(${m}deg) `),w&&(r+=`skewY(${w}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const gp=["","X","Y","Z"],_3=1e3;let x3=0;function yp(e,t,n,r){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function XE(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=ME(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",bt,!(i||s))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&XE(r)}function eC({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=t==null?void 0:t()){this.id=x3++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(E3),this.nodes.forEach(A3),this.nodes.forEach(j3),this.nodes.forEach(C3)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new u3)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Gy),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=mE(o)&&!d$(o),this.instance=o;const{layoutId:a,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),e){let c,f=0;const p=()=>this.root.updateBlockedByResize=!1;bt.read(()=>{f=window.innerWidth}),e(o,()=>{const m=window.innerWidth;m!==f&&(f=m,this.root.updateBlockedByResize=!0,c&&c(),c=c3(p,250),dd.hasAnimatedSinceResize&&(dd.hasAnimatedSinceResize=!1,this.nodes.forEach(v_)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&u&&(a||l)&&this.addEventListener("didUpdate",({delta:c,hasLayoutChanged:f,hasRelativeLayoutChanged:p,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||u.getDefaultTransition()||N3,{onLayoutAnimationStart:v,onLayoutAnimationComplete:x}=u.getProps(),g=!this.targetLayout||!ZE(this.targetLayout,m),y=!f&&p;if(this.options.layoutRoot||this.resumeFrom||y||f&&(g||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const _={...av(w,"layout"),onPlay:v,onComplete:x};(u.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_),this.setAnimationOrigin(c,y)}else f||v_(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ps(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(O3),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&XE(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const f=this.path[c];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(g_);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(y_);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(P3),this.nodes.forEach(S3),this.nodes.forEach(k3)):this.nodes.forEach(y_),this.clearAllSnapshots();const a=On.now();Xt.delta=vi(0,1e3/60,a-Xt.timestamp),Xt.timestamp=a,Xt.isProcessing=!0,sp.update.process(Xt),sp.preRender.process(Xt),sp.render.process(Xt),Xt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,uv.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(T3),this.sharedNodes.forEach(R3)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,bt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){bt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!wn(this.snapshot.measuredBox.x)&&!wn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Dt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!JE(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;o&&this.instance&&(a||Ns(this.latestValues)||c)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),L3(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:o}=this.options;if(!o)return Dt();const a=o.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some($3))){const{scroll:c}=this.root;c&&(Xo(a.x,c.offset.x),Xo(a.y,c.offset.y))}return a}removeElementScroll(o){var l;const a=Dt();if(Yn(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:f,options:p}=c;c!==this.root&&f&&p.layoutScroll&&(f.wasRoot&&Yn(a,o),Xo(a.x,f.offset.x),Xo(a.y,f.offset.y))}return a}applyTransform(o,a=!1){const l=Dt();Yn(l,o);for(let u=0;u<this.path.length;u++){const c=this.path[u];!a&&c.options.layoutScroll&&c.scroll&&c!==c.root&&ea(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),Ns(c.latestValues)&&ea(l,c.latestValues)}return Ns(this.latestValues)&&ea(l,this.latestValues),l}removeTransform(o){const a=Dt();Yn(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Ns(u.latestValues))continue;ag(u.latestValues)&&u.updateSnapshot();const c=Dt(),f=u.measurePageBox();Yn(c,f),c_(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return Ns(this.latestValues)&&c_(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Xt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var p;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:c,layoutId:f}=this.options;if(!(!this.layout||!(c||f))){if(this.resolvedRelativeTargetAt=Xt.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Dt(),this.relativeTargetOrigin=Dt(),Bl(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Yn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Dt(),this.targetWithTransforms=Dt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),VM(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Yn(this.target,this.layout.layoutBox),RE(this.target,this.targetDelta)):Yn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Dt(),this.relativeTargetOrigin=Dt(),Bl(this.relativeTargetOrigin,this.target,m.target),Yn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||ag(this.parent.latestValues)||OE(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var w;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(w=this.parent)!=null&&w.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Xt.timestamp&&(l=!1),l)return;const{layout:u,layoutId:c}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||c))return;Yn(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,p=this.treeScale.y;tM(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Dt());const{target:m}=o;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(a_(this.prevProjectionDelta.x,this.projectionDelta.x),a_(this.prevProjectionDelta.y,this.projectionDelta.y)),Fl(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==p||!m_(this.projectionDelta.x,this.prevProjectionDelta.x)||!m_(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ta(),this.projectionDelta=ta(),this.projectionDeltaWithTransform=ta()}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},f=ta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=Dt(),m=l?l.source:void 0,w=this.layout?this.layout.source:void 0,v=m!==w,x=this.getStack(),g=!x||x.members.length<=1,y=!!(v&&!g&&this.options.crossfade===!0&&!this.path.some(D3));this.animationProgress=0;let _;this.mixTargetDelta=T=>{const O=T/1e3;w_(f.x,o.x,O),w_(f.y,o.y,O),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Bl(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),I3(this.relativeTarget,this.relativeTargetOrigin,p,O),_&&v3(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=Dt()),Yn(_,this.relativeTarget)),v&&(this.animationValues=c,f3(c,u,this.latestValues,O,y,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=O},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,u;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(u=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||u.stop(),this.pendingAnimation&&(ps(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=bt.update(()=>{dd.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ja(0)),this.currentAnimation=a3(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),o.onUpdate&&o.onUpdate(c)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(_3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:c}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&tC(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Dt();const f=wn(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+f;const p=wn(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}Yn(a,l),ea(a,c),Fl(this.projectionDeltaWithTransform,this.layoutCorrected,a,c)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new w3),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const u={};l.z&&yp("z",o,u,this.animationValues);for(let c=0;c<gp.length;c++)yp(`rotate${gp[c]}`,o,u,this.animationValues),yp(`skew${gp[c]}`,o,u,this.animationValues);o.render();for(const c in u)o.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=cd(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=cd(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Ns(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const c=u.animationValues||u.latestValues;this.applyTransformsToTarget();let f=b3(this.projectionDeltaWithTransform,this.treeScale,c);l&&(f=l(c,f)),o.transform=f;const{x:p,y:m}=this.projectionDelta;o.transformOrigin=`${p.origin*100}% ${m.origin*100}% 0`,u.animationValues?o.opacity=u===this?c.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:c.opacityExit:o.opacity=u===this?c.opacity!==void 0?c.opacity:"":c.opacityExit!==void 0?c.opacityExit:0;for(const w in gu){if(c[w]===void 0)continue;const{correct:v,applyTo:x,isCSSVariable:g}=gu[w],y=f==="none"?c[w]:v(c[w],u);if(x){const _=x.length;for(let T=0;T<_;T++)o[x[T]]=y}else g?this.options.visualElement.renderState.vars[w]=y:o[w]=y}this.options.layoutId&&(o.pointerEvents=u===this?cd(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(g_),this.root.sharedNodes.clear()}}}function S3(e){e.updateLayout()}function k3(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=e.layout,{animationType:s}=e.options,o=t.source!==e.layout.source;s==="size"?Zn(f=>{const p=o?t.measuredBox[f]:t.layoutBox[f],m=wn(p);p.min=r[f].min,p.max=p.min+m}):tC(s,t.layoutBox,r)&&Zn(f=>{const p=o?t.measuredBox[f]:t.layoutBox[f],m=wn(r[f]);p.max=p.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[f].max=e.relativeTarget[f].min+m)});const a=ta();Fl(a,r,t.layoutBox);const l=ta();o?Fl(l,e.applyTransform(i,!0),t.measuredBox):Fl(l,r,t.layoutBox);const u=!JE(a);let c=!1;if(!e.resumeFrom){const f=e.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:p,layout:m}=f;if(p&&m){const w=Dt();Bl(w,t.layoutBox,p.layoutBox);const v=Dt();Bl(v,r,m.layoutBox),ZE(w,v)||(c=!0),f.options.layoutRoot&&(e.relativeTarget=v,e.relativeTargetOrigin=w,e.relativeParent=f)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeLayoutChanged:c})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function E3(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function C3(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function T3(e){e.clearSnapshot()}function g_(e){e.clearMeasurements()}function y_(e){e.isLayoutDirty=!1}function P3(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function v_(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function A3(e){e.resolveTargetDelta()}function j3(e){e.calcProjection()}function O3(e){e.resetSkewAndRotation()}function R3(e){e.removeLeadSnapshot()}function w_(e,t,n){e.translate=kt(t.translate,0,n),e.scale=kt(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function b_(e,t,n,r){e.min=kt(t.min,n.min,r),e.max=kt(t.max,n.max,r)}function I3(e,t,n,r){b_(e.x,t.x,n.x,r),b_(e.y,t.y,n.y,r)}function D3(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const N3={duration:.45,ease:[.4,0,.1,1]},__=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),x_=__("applewebkit/")&&!__("chrome/")?Math.round:lr;function S_(e){e.min=x_(e.min),e.max=x_(e.max)}function L3(e){S_(e.x),S_(e.y)}function tC(e,t,n){return e==="position"||e==="preserve-aspect"&&!zM(p_(t),p_(n),.2)}function $3(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const M3=eC({attachResizeListener:(e,t)=>yu(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),vp={current:void 0},nC=eC({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!vp.current){const e=new M3({});e.mount(window),e.setOptions({layoutScroll:!0}),vp.current=e}return vp.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),F3={pan:{Feature:r3},drag:{Feature:n3,ProjectionNode:nC,MeasureLayout:GE}};function k_(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&bt.postRender(()=>s(t,Uu(t)))}class B3 extends _s{mount(){const{current:t}=this.node;t&&(this.unmount=o$(t,(n,r)=>(k_(this.node,r,"Start"),i=>k_(this.node,i,"End"))))}unmount(){}}class U3 extends _s{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Mu(yu(this.node.current,"focus",()=>this.onFocus()),yu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function E_(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&bt.postRender(()=>s(t,Uu(t)))}class z3 extends _s{mount(){const{current:t}=this.node;t&&(this.unmount=c$(t,(n,r)=>(E_(this.node,r,"Start"),(i,{success:s})=>E_(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const pg=new WeakMap,wp=new WeakMap,V3=e=>{const t=pg.get(e.target);t&&t(e)},K3=e=>{e.forEach(V3)};function W3({root:e,...t}){const n=e||document;wp.has(n)||wp.set(n,{});const r=wp.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(K3,{root:e,...t})),r[i]}function H3(e,t,n){const r=W3(t);return pg.set(e,n),r.observe(e),()=>{pg.delete(e),r.unobserve(e)}}const q3={some:0,all:1};class G3 extends _s{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:q3[i]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:f}=this.node.getProps(),p=u?c:f;p&&p(l)};return H3(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(Q3(t,n))&&this.startObserver()}unmount(){}}function Q3({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const Y3={inView:{Feature:G3},tap:{Feature:z3},focus:{Feature:U3},hover:{Feature:B3}},J3={layout:{ProjectionNode:nC,MeasureLayout:GE}},Z3={...LM,...Y3,...F3,...J3},X3=Z$(Z3,dM);let eF={data:""},tF=e=>{if(typeof window=="object"){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||eF},nF=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,rF=/\/\*[^]*?\*\/|  +/g,C_=/\n+/g,zi=(e,t)=>{let n="",r="",i="";for(let s in e){let o=e[s];s[0]=="@"?s[1]=="i"?n=s+" "+o+";":r+=s[1]=="f"?zi(o,s):s+"{"+zi(o,s[1]=="k"?"":t)+"}":typeof o=="object"?r+=zi(o,t?t.replace(/([^,])+/g,a=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):s):o!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=zi.p?zi.p(s,o):s+":"+o+";")}return n+(t&&i?t+"{"+i+"}":i)+r},ei={},rC=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+rC(e[n]);return t}return e},iF=(e,t,n,r,i)=>{let s=rC(e),o=ei[s]||(ei[s]=(l=>{let u=0,c=11;for(;u<l.length;)c=101*c+l.charCodeAt(u++)>>>0;return"go"+c})(s));if(!ei[o]){let l=s!==e?e:(u=>{let c,f,p=[{}];for(;c=nF.exec(u.replace(rF,""));)c[4]?p.shift():c[3]?(f=c[3].replace(C_," ").trim(),p.unshift(p[0][f]=p[0][f]||{})):p[0][c[1]]=c[2].replace(C_," ").trim();return p[0]})(e);ei[o]=zi(i?{["@keyframes "+o]:l}:l,n?"":"."+o)}let a=n&&ei.g?ei.g:null;return n&&(ei.g=ei[o]),((l,u,c,f)=>{f?u.data=u.data.replace(f,l):u.data.indexOf(l)===-1&&(u.data=c?l+u.data:u.data+l)})(ei[o],t,r,a),o},sF=(e,t,n)=>e.reduce((r,i,s)=>{let o=t[s];if(o&&o.call){let a=o(n),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=l?"."+l:a&&typeof a=="object"?a.props?"":zi(a,""):a===!1?"":a}return r+i+(o??"")},"");function Df(e){let t=this||{},n=e.call?e(t.p):e;return iF(n.unshift?n.raw?sF(n,[].slice.call(arguments,1),t.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(t.p):i),{}):n,tF(t.target),t.g,t.o,t.k)}let iC,mg,gg;Df.bind({g:1});let bi=Df.bind({k:1});function oF(e,t,n,r){zi.p=t,iC=e,mg=n,gg=r}function xs(e,t){let n=this||{};return function(){let r=arguments;function i(s,o){let a=Object.assign({},s),l=a.className||i.className;n.p=Object.assign({theme:mg&&mg()},a),n.o=/ *go\d+/.test(l),a.className=Df.apply(n,r)+(l?" "+l:"");let u=e;return e[0]&&(u=a.as||e,delete a.as),gg&&u[0]&&gg(a),iC(u,a)}return i}}var aF=e=>typeof e=="function",Zd=(e,t)=>aF(e)?e(t):e,lF=(()=>{let e=0;return()=>(++e).toString()})(),sC=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),uF=20,_v="default",oC=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,n)};case 1:return{...e,toasts:e.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:r}=t;return oC(e,{type:e.toasts.find(o=>o.id===r.id)?1:0,toast:r});case 3:let{toastId:i}=t;return{...e,toasts:e.toasts.map(o=>o.id===i||i===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let s=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+s}))}}},fd=[],aC={toasts:[],pausedAt:void 0,settings:{toastLimit:uF}},Kr={},lC=(e,t=_v)=>{Kr[t]=oC(Kr[t]||aC,e),fd.forEach(([n,r])=>{n===t&&r(Kr[t])})},uC=e=>Object.keys(Kr).forEach(t=>lC(e,t)),cF=e=>Object.keys(Kr).find(t=>Kr[t].toasts.some(n=>n.id===e)),Nf=(e=_v)=>t=>{lC(t,e)},dF={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},fF=(e={},t=_v)=>{let[n,r]=E.useState(Kr[t]||aC),i=E.useRef(Kr[t]);E.useEffect(()=>(i.current!==Kr[t]&&r(Kr[t]),fd.push([t,r]),()=>{let o=fd.findIndex(([a])=>a===t);o>-1&&fd.splice(o,1)}),[t]);let s=n.toasts.map(o=>{var a,l,u;return{...e,...e[o.type],...o,removeDelay:o.removeDelay||((a=e[o.type])==null?void 0:a.removeDelay)||(e==null?void 0:e.removeDelay),duration:o.duration||((l=e[o.type])==null?void 0:l.duration)||(e==null?void 0:e.duration)||dF[o.type],style:{...e.style,...(u=e[o.type])==null?void 0:u.style,...o.style}}});return{...n,toasts:s}},hF=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(n==null?void 0:n.id)||lF()}),zu=e=>(t,n)=>{let r=hF(t,e,n);return Nf(r.toasterId||cF(r.id))({type:2,toast:r}),r.id},Vt=(e,t)=>zu("blank")(e,t);Vt.error=zu("error");Vt.success=zu("success");Vt.loading=zu("loading");Vt.custom=zu("custom");Vt.dismiss=(e,t)=>{let n={type:3,toastId:e};t?Nf(t)(n):uC(n)};Vt.dismissAll=e=>Vt.dismiss(void 0,e);Vt.remove=(e,t)=>{let n={type:4,toastId:e};t?Nf(t)(n):uC(n)};Vt.removeAll=e=>Vt.remove(void 0,e);Vt.promise=(e,t,n)=>{let r=Vt.loading(t.loading,{...n,...n==null?void 0:n.loading});return typeof e=="function"&&(e=e()),e.then(i=>{let s=t.success?Zd(t.success,i):void 0;return s?Vt.success(s,{id:r,...n,...n==null?void 0:n.success}):Vt.dismiss(r),i}).catch(i=>{let s=t.error?Zd(t.error,i):void 0;s?Vt.error(s,{id:r,...n,...n==null?void 0:n.error}):Vt.dismiss(r)}),e};var pF=1e3,mF=(e,t="default")=>{let{toasts:n,pausedAt:r}=fF(e,t),i=E.useRef(new Map).current,s=E.useCallback((f,p=pF)=>{if(i.has(f))return;let m=setTimeout(()=>{i.delete(f),o({type:4,toastId:f})},p);i.set(f,m)},[]);E.useEffect(()=>{if(r)return;let f=Date.now(),p=n.map(m=>{if(m.duration===1/0)return;let w=(m.duration||0)+m.pauseDuration-(f-m.createdAt);if(w<0){m.visible&&Vt.dismiss(m.id);return}return setTimeout(()=>Vt.dismiss(m.id,t),w)});return()=>{p.forEach(m=>m&&clearTimeout(m))}},[n,r,t]);let o=E.useCallback(Nf(t),[t]),a=E.useCallback(()=>{o({type:5,time:Date.now()})},[o]),l=E.useCallback((f,p)=>{o({type:1,toast:{id:f,height:p}})},[o]),u=E.useCallback(()=>{r&&o({type:6,time:Date.now()})},[r,o]),c=E.useCallback((f,p)=>{let{reverseOrder:m=!1,gutter:w=8,defaultPosition:v}=p||{},x=n.filter(_=>(_.position||v)===(f.position||v)&&_.height),g=x.findIndex(_=>_.id===f.id),y=x.filter((_,T)=>T<g&&_.visible).length;return x.filter(_=>_.visible).slice(...m?[y+1]:[0,y]).reduce((_,T)=>_+(T.height||0)+w,0)},[n]);return E.useEffect(()=>{n.forEach(f=>{if(f.dismissed)s(f.id,f.removeDelay);else{let p=i.get(f.id);p&&(clearTimeout(p),i.delete(f.id))}})},[n,s]),{toasts:n,handlers:{updateHeight:l,startPause:a,endPause:u,calculateOffset:c}}},gF=bi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,yF=bi`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,vF=bi`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,wF=xs("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${gF} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${yF} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${vF} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,bF=bi`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,_F=xs("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${bF} 1s linear infinite;
`,xF=bi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,SF=bi`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,kF=xs("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${xF} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${SF} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,EF=xs("div")`
  position: absolute;
`,CF=xs("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,TF=bi`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,PF=xs("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${TF} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,AF=({toast:e})=>{let{icon:t,type:n,iconTheme:r}=e;return t!==void 0?typeof t=="string"?E.createElement(PF,null,t):t:n==="blank"?null:E.createElement(CF,null,E.createElement(_F,{...r}),n!=="loading"&&E.createElement(EF,null,n==="error"?E.createElement(wF,{...r}):E.createElement(kF,{...r})))},jF=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,OF=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,RF="0%{opacity:0;} 100%{opacity:1;}",IF="0%{opacity:1;} 100%{opacity:0;}",DF=xs("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,NF=xs("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,LF=(e,t)=>{let n=e.includes("top")?1:-1,[r,i]=sC()?[RF,IF]:[jF(n),OF(n)];return{animation:t?`${bi(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${bi(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},$F=E.memo(({toast:e,position:t,style:n,children:r})=>{let i=e.height?LF(e.position||t||"top-center",e.visible):{opacity:0},s=E.createElement(AF,{toast:e}),o=E.createElement(NF,{...e.ariaProps},Zd(e.message,e));return E.createElement(DF,{className:e.className,style:{...i,...n,...e.style}},typeof r=="function"?r({icon:s,message:o}):E.createElement(E.Fragment,null,s,o))});oF(E.createElement);var MF=({id:e,className:t,style:n,onHeightUpdate:r,children:i})=>{let s=E.useCallback(o=>{if(o){let a=()=>{let l=o.getBoundingClientRect().height;r(e,l)};a(),new MutationObserver(a).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,r]);return E.createElement("div",{ref:s,className:t,style:n},i)},FF=(e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},i=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:sC()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...r,...i}},BF=Df`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Vc=16,UF=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:r,children:i,toasterId:s,containerStyle:o,containerClassName:a})=>{let{toasts:l,handlers:u}=mF(n,s);return E.createElement("div",{"data-rht-toaster":s||"",style:{position:"fixed",zIndex:9999,top:Vc,left:Vc,right:Vc,bottom:Vc,pointerEvents:"none",...o},className:a,onMouseEnter:u.startPause,onMouseLeave:u.endPause},l.map(c=>{let f=c.position||t,p=u.calculateOffset(c,{reverseOrder:e,gutter:r,defaultPosition:t}),m=FF(f,p);return E.createElement(MF,{id:c.id,key:c.id,onHeightUpdate:u.updateHeight,className:c.visible?BF:"",style:m},c.type==="custom"?Zd(c.message,c):i?i(c):E.createElement($F,{toast:c,position:f}))}))},Ii=Vt;const cC=[{code:"devanagari",name:"Devanagari"},{code:"tamil_superscripted",name:"Tamil"},{code:"malayalam",name:"Malayalam"},{code:"telugu",name:"Telugu"},{code:"kannada",name:"Kannada"},{code:"gujarati",name:"Gujarati"},{code:"gurmukhi",name:"Gurmukhi"},{code:"iast",name:"IAST"}];function zF(){const{preferredLanguage:e,setPreferredLanguage:t}=Ba(),[n,r]=E.useState(e);E.useEffect(()=>{localStorage.setItem("preferredLanguage",n),t(n)},[n,t]);const i=s=>{r(s.target.value)};return k.jsxs("div",{children:[k.jsx("h2",{children:"Language Preferences"}),k.jsx("p",{children:"Choose the language for transliteration:"}),k.jsx("select",{value:n,onChange:i,children:cC.map(s=>k.jsx("option",{value:s.code,children:s.name},s.code))})]})}const VF={position:"fixed",top:"0",left:"0",width:"100%",height:"100%",display:"flex",justifyContent:"flex-start",alignItems:"flex-start",padding:"10px",zIndex:9999},dl={marginRight:"10px"},fl={opacity:.5,cursor:"not-allowed",color:"#888"},KF=async function(e){try{return await Qt.from("sankeertan").upsert({id:1,content:e,scroll_position:0}),!0}catch(t){return console.error(t),!1}},WF=async e=>{const t=e.queryKey,n=t[1],r=t[2],i=t[3],s=t[4];if(!n||!r||!s)throw new Error("Missing query parameters for fetching song details.");const o=await HI(n,s);if(o&&o.songData&&o.sourceLanguage)return console.log("Using song details from IndexedDB cache."),[o.songData,o.metadata,o.sourceLanguage];console.log("Cache miss. Fetching song details from network.");const a=await hk({bookId:n,sourceRow:r,songTitle:s,sessionuser:i});if(a&&a.length===3){const[l,u,c,f]=a;await uk({bookId:n,songTitle:s,sourceRow:r.toString(),indexPosition:f,songData:l,metadata:u,sourceLanguage:c}),console.log(`Successfully cached song: ${s}`)}else console.warn("Network data structure was unexpected. Skipping cache save.");return a};function HF(){var Je,Ot,qn;const{categoryId:e,bookId:t,sourceRow:n,songTitle:r}=Au(),i=dr(),s=jr(),{session:o}=bs(),a=(Je=o==null?void 0:o.user)==null?void 0:Je.email,l=(Ot=i.state)==null?void 0:Ot.filteredSongIndices,u=(qn=i.state)==null?void 0:qn.index,c=Du(),f=E.useMemo(()=>decodeURIComponent(r||""),[r]),p=["songDetails",t,n,a,f],{preferredLanguage:m,setPreferredLanguage:w}=Ba(),v=E.useMemo(()=>l&&u>0?l[u-1]:null,[l,u]),x=E.useMemo(()=>l&&u<l.length-1?l[u+1]:null,[l,u]),g=E.useCallback(async(Ie,ze)=>{if(!Ie||!Ie.bookId||!Ie.songTitle){ze(!1);return}const Xe=await Pf(Ie.bookId,Ie.songTitle);ze(Xe)},[]),[y,_]=E.useState(!1),[T,O]=E.useState(!1);E.useEffect(()=>{g(v,_),g(x,O)},[v,x,g]);const{isLoading:R,isFetching:I,error:$,data:U}=Tf({queryKey:p,queryFn:WF,staleTime:1/0,gcTime:0,refetchOnMount:!1});yN(({swipe:[Ie]})=>{Ie===1?(console.log("going to prev"),be()):Ie===-1&&(console.log("going to next"),Fe())},{axis:"x",filterTaps:!0});const[V,ge]=E.useState(!1),[M,Y]=E.useState({x:0,y:0}),[P,te]=E.useState(!1),Ce=E.useRef(null),[le,ue]=E.useState(""),[L,ie]=E.useState(null),K=E.useRef(null),W=Ie=>{Ie.preventDefault();const ze=window.getSelection(),Xe=(ze==null?void 0:ze.toString().trim())??"";ze&&ze.rangeCount>0&&!ze.getRangeAt(0).collapsed?(ue(Xe),ie(ze.getRangeAt(0)),te(!0)):(ue(""),ie(null),te(!1)),Y({x:Ie.clientX,y:Ie.clientY}),te(!!le),ge(!0)};E.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[i]),E.useEffect(()=>{const Ie=ze=>{Ce.current&&!Ce.current.contains(ze.target)&&ge(!1)};return V?window.addEventListener("mousedown",Ie):window.removeEventListener("mousedown",Ie),()=>{window.removeEventListener("mousedown",Ie)}},[V]),E.useEffect(()=>{i.state||window.location.pathname.startsWith("/sankeertan")},[i,t]),E.useEffect(()=>{const Ie=ze=>{Ce.current&&!Ce.current.contains(ze.target)&&ge(!1)};return V&&document.addEventListener("mousedown",Ie),()=>{document.removeEventListener("mousedown",Ie)}},[V]);const me=()=>{const Ie=window.location.href;navigator.clipboard.writeText(Ie).then(()=>{console.log("URL copied to clipboard:",Ie),Ii.success("URL copied to clipboard!")}).catch(ze=>{console.error("Failed to copy URL: ",ze)})},ce=E.useRef(null);function de(Ie){const Sn=new DOMParser().parseFromString(Ie,"text/html").querySelectorAll("tr");let pn="";return Sn.forEach(De=>{const Or=De.querySelectorAll("td, th"),Gn=[];Or.forEach(ki=>{var hr;let Te=ki.innerHTML;Te=Te.replace(/<\/p>\s*<p>/gi,`
`),Te=Te.replace(/<p>|<\/p>/gi,""),Te=Te.replace(/<br\s*\/?>/gi,`
`);const Jr=document.createElement("div");Jr.innerHTML=Te;const Rr=((hr=Jr.textContent)==null?void 0:hr.trim())||"";Gn.push(Rr)}),pn+=Gn.join(" | ")+`

`}),pn.trim()}const Be=()=>{if(!L||L.collapsed){console.warn("No valid selection range to highlight.");return}const Ie=document.createElement("span");Ie.className="highlighted-text";try{L.surroundContents(Ie),console.log("Text highlighted successfully!")}catch(ze){console.error("Failed to highlight text:",ze)}ie(null)},We=(Ie=!1)=>{if(ce.current){const ze=ce.current.innerHTML;let Xe="radhekrishna!!";Ie?Xe=ze:ze.includes("<table")?Xe=de(ze):Xe=ce.current.textContent||"radhekrishna!!",navigator.clipboard.writeText(Xe).then(()=>{console.log("Song content copied to clipboard:"),Ii.success("Song content copied to clipboard!")}).catch(Sn=>{console.error("Failed to copy song: ",Sn)})}},Fe=()=>{if(l&&u!==void 0&&u<l.length-1){const Ie=u+1,ze=l[Ie];sessionStorage.setItem("lastClickedSongIndex",Ie.toString()),s(`/details/book/${e}/${t}/${ze.sourceRow}/${encodeURIComponent(ze.songTitle)}`,{state:{filteredSongIndices:l,index:Ie},replace:!0})}},be=()=>{if(l&&u!==void 0&&u>0){const Ie=u-1,ze=l[Ie];sessionStorage.setItem("lastClickedSongIndex",Ie.toString()),s(`/details/book/${e}/${t}/${ze.sourceRow}/${encodeURIComponent(ze.songTitle)}`,{state:{filteredSongIndices:l,index:Ie},replace:!0})}},lt=u===0,rt=u===(l==null?void 0:l.length)-1,He=l&&l.length>0,Bt=async Ie=>{if(le){const ze=await fetch(`${vo}?mode=api&apiname=reportmistakeinsongtext&book=${t}&sourcerow=${n}&songtitle=${r}&text=${le}&sessionuser=${Ie}`);if(!ze.ok){const Sn=await ze.json();throw new Error(`Failed to fetch song details for book ${t}+row ${n}: ${ze.status} - ${JSON.stringify(Sn)}`)}const Xe=await ze.json();Ii.success(`Issue/Mistake is reported as ${Xe[1]}!!`)}else console.log("No text was selected.")},A=async()=>{t&&r?(await qI(t,f),console.log("IndexedDB cache cleared. Data will be reloaded from the server."),c.invalidateQueries({queryKey:p})):console.warn("Cannot reload song: bookId or songTitle is missing.")},pe=async Ie=>{switch(ge(!1),Ie){case"broadcast":r&&_e();break;case"copyPageUrl":me();break;case"CopySongAsHtml":We(!0);break;case"CopySongAsText":We(!1);break;case"ReportMistake":Bt(a);break;case"Copy":if(le)try{await navigator.clipboard.writeText(le),Ii.success("Text copied!")}catch(ze){console.error("Failed to copy text: ",ze),Ii.error("Failed to copy text.")}break;case"Highlight":Be();break}},fe=E.useMemo(()=>k.jsx(X3.div,{ref:Ce,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.1},style:{position:"fixed",top:M.y,left:M.x,backgroundColor:"white",border:"1px solid #ccc",borderRadius:"4px",padding:"8px",boxShadow:"0 2px 5px rgba(0, 0, 0, 0.2)",zIndex:10,minWidth:"150px"},onClick:Ie=>Ie.stopPropagation(),children:k.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:P?k.jsxs(k.Fragment,{children:[k.jsx("li",{style:{padding:"6px 12px",cursor:"pointer"},onClick:()=>pe("Copy"),children:"Copy Selected"}),k.jsx("li",{style:{padding:"6px 12px",cursor:"pointer"},onClick:()=>pe("ReportMistake"),children:"Report Mistake"})]}):k.jsx(k.Fragment,{children:k.jsxs("div",{style:{borderTop:"1px solid #eee",marginTop:"8px",paddingTop:"8px"},children:[k.jsx("li",{style:{padding:"6px 12px",color:"#666"},children:"**Change Language**"}),cC.map(Ie=>k.jsx("li",{style:{padding:"6px 12px",cursor:"pointer",fontWeight:Ie.code===m?"bold":"normal",backgroundColor:Ie.code===m?"#f0f0f0":"transparent"},onClick:()=>Re(Ie),children:Ie.name},Ie.code))]})})})},"context-menu"),[P,M,m]),[F,N]=E.useState(!1),[ee,ye]=E.useState(null),[ve,oe]=E.useState(!0),_e=E.useCallback(async()=>{if(F){console.warn("isBroadcasting already");return}if(!ve){Ii.error("Cannot do repeat Broadcast... Pls check if song has changed");return}if(ce.current){N(!0),ye("broadcasting");try{const Ie=ce.current.innerHTML,ze=await KF(Ie);N(!1),ye("success"),Ii.success("Broadcast was successful!"),oe(!1),setTimeout(()=>ye(null),2e3)}catch(Ie){console.error("Broadcast failed:",Ie),Ii.error("Broadcast had errors!"),N(!1),ye("error"),setTimeout(()=>ye(null),3e3)}}else console.warn("broadcastContentRef.current is null. Cannot broadcast content."),ye("failed"),N(!1)},[ce,F,ve]);E.useEffect(()=>{oe(!0)},[U]),E.useEffect(()=>{U&&U.length>=3&&t&&f&&n&&(g(v,_),g(x,O))},[U,t,f,n,v,x,g]);const Re=Ie=>{w(Ie.code),ge(!1)},xe={backgroundColor:"green",color:"white"},Me={backgroundColor:"brown",color:"white"};if(R&&!U)return k.jsx("div",{style:VF,children:k.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"20px",minHeight:"200px"},children:[k.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[k.jsx("circle",{cx:"20",cy:"20",r:"18",stroke:"#E2E8F0",strokeWidth:"4"}),k.jsx("path",{d:"M20 2C10.0588 2 2 10.0588 2 20",stroke:"#09F",strokeWidth:"4",strokeLinecap:"round"}),k.jsx("animateTransform",{attributeName:"transform",type:"rotate",from:"0 20 20",to:"360 20 20",dur:"1s",repeatCount:"indefinite"})]}),k.jsx("p",{style:{marginLeft:"10px"},children:"Loading song text..."})]})});if($)return k.jsxs("div",{children:["Error loading song details: ",$.message]});if(!U)return k.jsx("div",{children:"No song details available. Please try reloading."});const tt=document.getElementById("context-menu-root");return k.jsxs(k.Fragment,{children:[k.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},ref:K,children:[k.jsx(By,{}),k.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"20px"},children:[k.jsx("button",{onClick:be,disabled:lt||!He,style:{...dl,...lt||!He?fl:{},...y?xe:Me},children:" Prev"}),k.jsx("button",{onClick:Fe,disabled:rt||!He,style:{...dl,...rt||!He?fl:{},...T?xe:Me,marginRight:0},children:"Next "})]})]}),k.jsxs("div",{className:"song-details-container select-text",style:{paddingBottom:"60px",paddingLeft:"20px",cursor:"pointer",userSelect:"auto"},onContextMenu:W,children:[k.jsx("div",{ref:ce,children:U&&k.jsx(kD,{data:U[0],className:"my-4",highlightColor:"bg-blue-50",striped:!0,hoverEffect:!1,wrapColumns:[1,2,3],maxWidth:"max-w-6xl",preferredLanguage:m,sourceLanguage:U[2]})}),k.jsxs("div",{style:{position:"fixed",bottom:0,left:0,width:"100%",backgroundColor:"#fff",borderTop:"1px solid #ccc",padding:"10px 20px",display:"flex",justifyContent:"space-between",alignItems:"center",boxSizing:"border-box",zIndex:1e3},children:[k.jsxs("div",{children:[k.jsx("button",{onClick:be,disabled:lt||!He,style:{...dl,...lt||!He?fl:{},...y?xe:Me},children:" Prev"}),k.jsx("button",{onClick:Fe,disabled:rt||!He,style:{...dl,...rt||!He?fl:{},...T?xe:Me,marginRight:0},children:"Next "})]}),k.jsxs("div",{children:[k.jsx("button",{onClick:A,style:{marginRight:"10px"},title:"Reload from Server",children:""}),k.jsx("button",{onClick:me,style:{marginRight:"10px"},title:"Copy URL",children:""}),k.jsx("button",{onClick:()=>We(!1),style:{marginRight:"10px"},title:"Copy Content",children:""}),k.jsx("button",{onClick:_e,disabled:!ve,style:{...dl,...ve?{}:fl},title:"Broadcast",children:""})]})]}),k.jsx("style",{children:`
          .highlighted-text {
            background-color: #ffeb3b; /* Yellow background */
            padding: 2px 4px;
            border-radius: 4px;
          }
        `}),V&&tt&&V2.createPortal(k.jsx(b$,{children:fe}),tt)]})]})}const qF=({broadcastId:e,session:t,shouldSyncScroll:n,onContentUpdated:r,onScrollPositionUpdated:i,onConnectionStatusChange:s})=>{const o=E.useRef(null);return E.useEffect(()=>{if(!(t!=null&&t.access_token)||!e){console.log("No access token or broadcast ID, not subscribing to sankeertan updates."),o.current&&(o.current.unsubscribe(),o.current=null);return}return o.current=Qt.channel(`broadcast:${e}`),o.current.on("postgres_changes",{event:"UPDATE",schema:"public",table:"sankeertan",filter:`id=eq.${e}`},a=>{a.new&&"content"in a.new&&r(a.new.content),a.new&&"scroll_position"in a.new&&a.new.scroll_position!==null&&n&&i(a.new.scroll_position)}).subscribe((a,l)=>{switch(a){case"SUBSCRIBED":s("CONNECTED"),console.log(`Successfully subscribed to broadcast: ${e}`);break;case"CHANNEL_ERROR":s("ERROR"),console.error(`Channel Error for broadcast ${e}:`,l||a);break;case"TIMED_OUT":s("ERROR"),console.warn(`Subscription timed out for broadcast ${e}:`,a);break;case"CLOSED":s("DISCONNECTED"),console.warn(`Subscription closed for broadcast ${e}:`,a);break;case"CONNECTING":s("CONNECTING"),console.log(`Attempting to connect to broadcast ${e}...`);break;default:console.log(`Unknown subscription status for broadcast ${e}:`,a)}}),()=>{o.current&&(o.current.unsubscribe(),o.current=null)}},[e,t==null?void 0:t.access_token,n,r,i,s]),null},GF=({broadcastId:e})=>{const[t,n]=E.useState(null),[r,i]=E.useState(null),s=E.useRef(null),[o,a]=E.useState(null),[l,u]=E.useState(!1),[c,f]=E.useState(!0),[p,m]=E.useState(null),[w,v]=E.useState("none"),[x,g]=E.useState(!1),[y,_]=E.useState("CONNECTING"),{preferredLanguage:T}=Ba(),O=E.useCallback(P=>{_(P),console.log(`Realtime Connection Status Updated: ${P}`)},[]);E.useEffect(()=>{Qt.auth.getSession().then(({data:{session:P}})=>{a(P)}),Qt.auth.onAuthStateChange((P,te)=>{a(te)})},[]);const R=E.useCallback(async()=>{f(!0),m(null);try{const{data:P,error:te}=await Qt.from("sankeertan").select("content, scroll_position, is_broadcasting_scroll").eq("id",e).single();if(te)console.error("Error fetching broadcast data:",te),m(te.message);else if(P){const Ce=P.content??"";let le=Wd(Ce,"devanagari",T);n(le),g(P.is_broadcasting_scroll??!1)}}finally{f(!1)}},[e,T]);E.useEffect(()=>{o&&e&&R()},[o,e,R]),E.useEffect(()=>{if(r&&s.current){const P=r,te=s.current.querySelector(`#${P}`);te&&te.scrollIntoView({block:"start",behavior:"smooth"}),i(null)}},[r,s]);const I=P=>{P=Wd(P??"","devanagari",T),n(P)},$=P=>{l&&P!==null&&i(`trRowAsAnchor-${P}`)},U=E.useCallback(async P=>{if(w==="leader"&&x){const{error:te}=await Qt.from("sankeertan").update({scroll_position:P}).eq("id",e);te&&console.error("Error broadcasting scroll position:",te)}},[w,x,e]),V=E.useCallback(()=>{if(w!=="leader"||!s.current||!x)return;const P=s.current,te=P.getBoundingClientRect().top;let Ce=null,le=1/0;P.querySelectorAll("tr").forEach(ue=>{const L=ue.id.split("-").pop(),ie=L?parseInt(L):null;if(ie!==null&&ue.id.startsWith("trRowAsAnchor-")){const W=ue.getBoundingClientRect().top-te;W>=0&&W<le?(le=W,Ce=ie):W<0&&Math.abs(W)<Math.abs(le)&&le===1/0&&(Ce=ie,le=W)}}),Ce!==null&&U(Ce)},[w,x,U]);E.useEffect(()=>{const P=s.current;return w==="leader"&&x&&P?(P.addEventListener("scroll",V),()=>P.removeEventListener("scroll",V)):()=>{P&&P.removeEventListener("scroll",V)}},[w,x,V]);const ge=async()=>{const P=!x,{error:te}=await Qt.from("sankeertan").update({is_broadcasting_scroll:P}).eq("id",e);te?console.error("Failed to update broadcast scroll status:",te):g(P)},M=P=>{P==="none"&&(g(!1),u(!1)),v(P),P==="follower"&&u(!0)},Y=P=>{switch(P){case"CONNECTED":return"green";case"DISCONNECTED":case"ERROR":return"red";case"CONNECTING":return"yellow";default:return"gray"}};return k.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100vh"},children:[k.jsxs("div",{style:{flexGrow:1,overflowY:"auto",paddingBottom:"70px",padding:"10px"},ref:s,children:[k.jsxs("h2",{style:{display:"flex",alignItems:"center"},children:["Sankeertan Content",k.jsx("span",{style:{height:"12px",width:"12px",borderRadius:"50%",backgroundColor:Y(y),marginLeft:"10px",display:"inline-block",border:"1px solid #333"},title:`Realtime Status: ${y}`}),k.jsxs("span",{style:{marginLeft:"5px",fontSize:"0.8em",color:"#666"},children:["(",y,")"]})]}),c?k.jsx("p",{children:"Loading content..."}):p?k.jsxs("p",{style:{color:"red"},children:["Error loading data: ",p]}):t&&k.jsx("div",{dangerouslySetInnerHTML:{__html:t}})]}),o&&w==="follower"&&k.jsx(qF,{broadcastId:e,session:o,shouldSyncScroll:l,onContentUpdated:I,onScrollPositionUpdated:$,onConnectionStatusChange:O}),k.jsxs("div",{style:{position:"fixed",bottom:0,left:0,right:0,height:"60px",backgroundColor:"#f8f8f8",borderTop:"1px solid #eee",display:"flex",justifyContent:"space-around",alignItems:"center",padding:"0 10px",boxShadow:"0 -2px 5px rgba(0,0,0,0.1)",zIndex:100},children:[k.jsx("button",{onClick:()=>M(w==="leader"?"none":"leader"),style:{backgroundColor:w==="leader"?"#FF5733":"#4CAF50",color:"white",padding:"10px 15px",border:"none",borderRadius:"5px",fontWeight:"bold"},children:w==="leader"?"Disengage (Leader)":"Become a Leader"}),w==="none"&&k.jsx("div",{style:{color:"#666",fontWeight:"bold",textAlign:"center"},children:"Choose a Role to Participate"}),w==="leader"&&k.jsx("button",{onClick:ge,style:{backgroundColor:x?"#FF9800":"#f44336",color:"white",padding:"10px 15px",border:"none",borderRadius:"5px",fontWeight:"bold"},children:x?"Pause Scroll Broadcast":"Start Scroll Broadcast"}),k.jsx("button",{onClick:()=>M(w==="follower"?"none":"follower"),style:{backgroundColor:w==="follower"?"#FF5733":"#2196F3",color:"white",padding:"10px 15px",border:"none",borderRadius:"5px",fontWeight:"bold"},children:w==="follower"?"Disengage (Follower)":"Become a Follower"})]})]})};async function QF(){var s,o;const e=await xt.songIndices.toArray();let t=await xt.categories.toArray();t.length===0&&(console.warn("Categories table empty on first read. Waiting 500ms and retrying..."),await new Promise(a=>setTimeout(a,500)),t=await xt.categories.toArray(),t.length===0&&console.error("Categories table STILL empty after retry. Data seeding failed."));const n=new Map,r=new Map;for(const a of t){const l=(s=a.id)==null?void 0:s.trim();if(l&&r.set(l,a),Array.isArray(a.books))for(const u of a.books){const c=(o=u.bookId)==null?void 0:o.trim();if(c){const f={...u,bookId:c,bookName:u.bookName||"Unknown Book",categoryId:l,author:u.author||a.author,language:u.language||a.language,type:u.type||a.type};n.set(c,f)}}}return console.log("Book Map Keys (Flattened):",Array.from(n.keys())),console.log("Category Map Keys:",Array.from(r.keys())),e.map((a,l)=>{var y;const u=(y=a.bookId)==null?void 0:y.trim(),c=n.get(u),f=c?r.get((c.categoryId??"").trim()):void 0;c||console.error(`[FATAL MISMATCH] Book lookup failed for Song: ${a.songTitle} | Index Book ID: '${u}'`);const p=(c==null?void 0:c.bookName)||"Unknown Book",m=(f==null?void 0:f.name)||"Unknown Category",w=a.author||(c==null?void 0:c.author)||(f==null?void 0:f.author)||"Unknown Author",v=a.sourceLanguage||(c==null?void 0:c.language)||(f==null?void 0:f.language)||"Unknown Language",x=a.type||(c==null?void 0:c.type)||(f==null?void 0:f.type)||"Unknown Type";return{uniqueSongId:`${a.bookId}-${a.songTitle}`,indexPositionForNavigation:l,isAvailable:!0,bookId:a.bookId,categoryId:(f==null?void 0:f.id)||"unknown-category",title:a.songTitle,sourceRow:a.sourceRow,tags:a.tags||null,verseCount:a.verseCount||null,category:m,book:p,author:w,language:v,type:x}})}const YF=["searchIndex","allSongs"],JF=()=>Tf({queryKey:YF,queryFn:async()=>{console.log("TanStack Query: Starting load of search index from Dexie...");const e=await QF();return console.log(`TanStack Query: Successfully loaded ${e.length} songs.`),e},staleTime:1/0,refetchOnMount:!0,gcTime:1e3*60*60*4,refetchOnWindowFocus:!1}),ZF=(e,t)=>{if(Object.keys(t).length===0)return e;let n=e;return Object.keys(t).forEach(r=>{const i=t[r];if(i&&i.length>0){const s=i.map(o=>o.value.toLowerCase());n=n.filter(o=>{var l;const a=(l=o[r])==null?void 0:l.toLowerCase();return s.includes(a)})}}),n},XF=(e,t)=>{const n=t.trim().toLowerCase();return n?e.filter(r=>r.title.toLowerCase().includes(n)||r.author.toLowerCase().includes(n)||r.book.toLowerCase().includes(n)||r.category.toLowerCase().includes(n)):e},hl=(e,t)=>{const n=new Set;return e.forEach(r=>{const i=r[t];Array.isArray(i)?i.forEach(s=>{typeof s=="string"&&n.add(s)}):typeof i=="string"&&n.add(i)}),Array.from(n).sort()},e4=()=>{const[e,t]=E.useState(""),[n,r]=E.useState({}),[i,s]=E.useState([]),[o,a]=E.useState([]),[l,u]=E.useState("cards"),[c,f]=E.useState([]),[p,m]=E.useState(!1),w=jr(),[v,x]=E.useState({category:!0,book:!0,title:!0,author:!0,language:!0,type:!0}),{data:g,isLoading:y,isError:_,error:T}=JF(),O=E.useMemo(()=>g||[],[g]);E.useEffect(()=>{if(!i||i.length===0)return;console.log("Final filteredSongs count:",i.length);const L=new Set,ie=[];i.forEach((K,W)=>{const me=`${K.bookId}-${K.title}-${K.sourceRow}`;L.has(me)?ie.push({key:me,song:K,position:W}):L.add(me)}),ie.length>0?(console.error(" DUPLICATE KEY FOUND IN filteredSongs ARRAY:",ie),console.log("Total unique keys:",L.size)):console.log(" Current filteredSongs array is free of key collisions.")},[i]),E.useEffect(()=>{if(O.length===0){s([]);return}let L=ZF(O,n),ie=XF(L,e);s(ie)},[O,n,e]),E.useEffect(()=>{(()=>{let ie=O;if(e){const W=e.toLowerCase();ie=ie.filter(me=>Object.values(me).filter(de=>de!==void 0).map(de=>Array.isArray(de)?de.join(" "):String(de)).join(" ").toLowerCase().includes(W))}Object.entries(n).forEach(([W,me])=>{me&&me.length>0&&(ie=ie.filter(ce=>{const de=ce[W],We=Array.isArray(de)?de.map(Fe=>String(Fe).toLowerCase()):[String(de).toLowerCase()];return me.every(Fe=>{const be=Fe.value.toLowerCase(),lt=We.includes(be);return Fe.isNot?!lt:lt})}))}),s(ie);const K=ie.map(W=>({indexPositionForNavigation:W.indexPositionForNavigation,sourceRow:W.sourceRow,songTitle:Array.isArray(W.title)?W.title.join(", "):W.title}));a(K)})()},[e,n,O]);const R=(L,ie)=>{r(K=>{const W=K[L]||[],me=W.find(ce=>ce.value===ie);if(me)if(me.isNot){const ce=W.filter(de=>de.value!==ie);if(ce.length===0){const de={...K};return delete de[L],de}return{...K,[L]:ce}}else return{...K,[L]:W.map(ce=>ce.value===ie?{...ce,isNot:!0}:ce)};else return{...K,[L]:[...W,{value:ie,isNot:!1}]}})},I=()=>{r({})},$=(L,ie)=>{const K=Array.isArray(L.title)?L.title.join(", "):L.title;w(`/details/book/${L.category}/${L.bookId}/${L.sourceRow}/${encodeURIComponent(K)}`,{state:{filteredSongIndices:o,index:ie}})},U=L=>{x(ie=>({...ie,[L]:!ie[L]}))},V=hl(i,"author"),ge=hl(i,"language"),M=hl(i,"type"),Y=hl(i,"book"),P=hl(i,"category"),te={category:new Set,book:new Set,title:new Set,author:new Set,language:new Set,type:new Set};e.length>0&&O.forEach(L=>{Object.entries(L).forEach(([ie,K])=>{var W;Array.isArray(K)?K.forEach(me=>{var ce;typeof me=="string"&&me.toLowerCase().includes(e.toLowerCase())&&((ce=te[ie])==null||ce.add(me))}):typeof K=="string"&&K.toLowerCase().includes(e.toLowerCase())&&((W=te[ie])==null||W.add(K))})});const Ce=(L,ie)=>i.filter(K=>{const W=K[L];return Array.isArray(W)?W.includes(ie):W===ie}).length,le=(L,ie)=>{var W;const K=(W=n[L])==null?void 0:W.find(me=>me.value===ie);return K?K.isNot?"bg-red-500 text-white":"bg-teal-500 text-white":"hover:bg-gray-600"};if(y)return k.jsx("div",{className:"flex justify-center items-center h-screen text-lg text-gray-500",children:"Loading search index from Dexie... This may take a moment."});if(_)return k.jsxs("div",{className:"text-center p-4 text-red-600 border border-red-300 bg-red-50",children:["Error loading search index: ",(T==null?void 0:T.message)||"Unknown error.",k.jsx("div",{className:"text-sm text-red-400 mt-2",children:"Falling back to no search capability."})]});const ue=L=>`${L.bookId}-${L.title}`;return k.jsx("div",{className:"min-h-screen bg-gray-900 text-white p-4 font-sans flex flex-col items-center",children:k.jsxs("div",{className:"w-full max-w-4xl bg-gray-800 rounded-2xl shadow-xl p-6 md:p-8",children:[k.jsx("h2",{className:"text-3xl md:text-4xl font-extrabold text-center mb-2 text-transparent bg-clip-text bg-gradient-to-r from-teal-400 to-sky-500",children:"Progressive Search"}),k.jsx("div",{className:"mb-6 text-center",children:k.jsx("button",{onClick:()=>m(!p),className:"px-5 py-2 rounded-full font-semibold bg-gray-700 text-gray-400 hover:bg-gray-600 transition-colors text-sm",children:p?"Hide Debug Panel":"Show Debug Panel"})}),p&&k.jsxs("div",{className:"bg-gray-700 p-4 rounded-xl mb-6",children:[k.jsx("h2",{className:"text-xl font-bold text-gray-300 mb-2",children:"Debug Log (Local Storage)"}),k.jsx("ul",{className:"text-sm text-gray-400 list-disc list-inside",children:c.map((L,ie)=>k.jsx("li",{className:"mb-1",children:L},ie))})]}),k.jsxs("div",{className:"relative mb-6",children:[k.jsx("input",{type:"text",placeholder:"Search by title, author, book, language...",className:"w-full px-5 py-3 rounded-xl bg-gray-700 text-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-teal-500 transition-all",value:e,onChange:L=>t(L.target.value)}),e&&Object.values(te).some(L=>L.size>0)&&k.jsx("div",{className:"absolute z-10 w-full mt-2 bg-gray-700 rounded-xl shadow-lg border border-gray-600 max-h-64 overflow-y-auto",children:Object.entries(te).map(([L,ie])=>ie&&ie.size>0&&k.jsxs("div",{className:"p-3",children:[k.jsx("h3",{className:"text-sm font-semibold text-gray-400 uppercase mb-1",children:L}),Array.from(ie).map((K,W)=>k.jsx("button",{className:"w-full text-left px-3 py-2 text-sm rounded-lg hover:bg-teal-500 hover:text-white transition-colors",onClick:()=>{t(""),R(L,K)},children:K},W))]},L))})]}),Object.keys(n).some(L=>{const ie=n[L];return ie&&ie.length>0})&&k.jsxs("div",{className:"mb-4 flex flex-wrap items-center gap-2",children:[k.jsx("span",{className:"text-sm text-gray-400 mr-2",children:"Filters:"}),Object.entries(n).map(([L,ie])=>ie==null?void 0:ie.map((K,W)=>k.jsxs("span",{className:`${K.isNot?"bg-red-500":"bg-teal-500"} text-white text-sm px-3 py-1 rounded-full flex items-center gap-1`,children:[k.jsxs("span",{className:"font-semibold",children:[L,":"]})," ",K.value,k.jsx("button",{onClick:()=>R(L,K.value),className:"ml-1 text-white hover:text-gray-200 transition-colors",children:""})]},`${L}-${W}`))),k.jsx("button",{onClick:I,className:"text-sm text-gray-400 hover:text-white transition-colors ml-auto",children:"Clear All Filters"})]}),y?k.jsx("div",{className:"text-center py-8",children:k.jsx("p",{className:"text-gray-400",children:"Loading songs from local storage..."})}):k.jsxs(k.Fragment,{children:[k.jsxs("div",{className:"grid gap-4 mb-8 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5",children:[k.jsxs("div",{className:"bg-gray-700 rounded-xl",children:[k.jsxs("button",{onClick:()=>U("category"),className:"w-full text-left px-4 py-3 text-md font-semibold flex justify-between items-center hover:bg-gray-600 transition-colors rounded-t-xl",children:["Category",k.jsx("span",{className:`transform transition-transform duration-300 ${v.category?"":"rotate-180"}`,children:""})]}),k.jsx("div",{className:`overflow-hidden transition-all duration-300 ${v.category?"max-h-0":"max-h-96"}`,children:k.jsx("div",{className:"p-4 pt-0",children:P.map(L=>k.jsxs("button",{onClick:()=>R("category",L),className:`w-full text-left py-2 px-3 rounded-lg flex justify-between items-center transition-colors ${le("category",L)}`,children:[k.jsx("span",{children:L}),k.jsx("span",{className:"text-xs font-medium text-gray-400 ml-2",children:Ce("category",L)})]},L))})})]}),k.jsxs("div",{className:"bg-gray-700 rounded-xl",children:[k.jsxs("button",{onClick:()=>U("book"),className:"w-full text-left px-4 py-3 text-md font-semibold flex justify-between items-center hover:bg-gray-600 transition-colors rounded-t-xl",children:["Book",k.jsx("span",{className:`transform transition-transform duration-300 ${v.book?"":"rotate-180"}`,children:""})]}),k.jsx("div",{className:`overflow-hidden transition-all duration-300 ${v.book?"max-h-0":"max-h-96"}`,children:k.jsx("div",{className:"p-4 pt-0",children:Y.map(L=>k.jsxs("button",{onClick:()=>R("book",L),className:`w-full text-left py-2 px-3 rounded-lg flex justify-between items-center transition-colors ${le("book",L)}`,children:[k.jsx("span",{children:L}),k.jsx("span",{className:"text-xs font-medium text-gray-400 ml-2",children:Ce("book",L)})]},L))})})]}),k.jsxs("div",{className:"bg-gray-700 rounded-xl",children:[k.jsxs("button",{onClick:()=>U("author"),className:"w-full text-left px-4 py-3 text-md font-semibold flex justify-between items-center hover:bg-gray-600 transition-colors rounded-t-xl",children:["Author",k.jsx("span",{className:`transform transition-transform duration-300 ${v.author?"":"rotate-180"}`,children:""})]}),k.jsx("div",{className:`overflow-hidden transition-all duration-300 ${v.author?"max-h-0":"max-h-96"}`,children:k.jsx("div",{className:"p-4 pt-0",children:V.map(L=>k.jsxs("button",{onClick:()=>R("author",L),className:`w-full text-left py-2 px-3 rounded-lg flex justify-between items-center transition-colors ${le("author",L)}`,children:[k.jsx("span",{children:L}),k.jsx("span",{className:"text-xs font-medium text-gray-400 ml-2",children:Ce("author",L)})]},L))})})]}),k.jsxs("div",{className:"bg-gray-700 rounded-xl",children:[k.jsxs("button",{onClick:()=>U("language"),className:"w-full text-left px-4 py-3 text-md font-semibold flex justify-between items-center hover:bg-gray-600 transition-colors rounded-t-xl",children:["Language",k.jsx("span",{className:`transform transition-transform duration-300 ${v.language?"":"rotate-180"}`,children:""})]}),k.jsx("div",{className:`overflow-hidden transition-all duration-300 ${v.language?"max-h-0":"max-h-96"}`,children:k.jsx("div",{className:"p-4 pt-0",children:ge.map(L=>k.jsxs("button",{onClick:()=>R("language",L),className:`w-full text-left py-2 px-3 rounded-lg flex justify-between items-center transition-colors ${le("language",L)}`,children:[k.jsx("span",{children:L}),k.jsx("span",{className:"text-xs font-medium text-gray-400 ml-2",children:Ce("language",L)})]},L))})})]}),k.jsxs("div",{className:"bg-gray-700 rounded-xl",children:[k.jsxs("button",{onClick:()=>U("type"),className:"w-full text-left px-4 py-3 text-md font-semibold flex justify-between items-center hover:bg-gray-600 transition-colors rounded-t-xl",children:["Type",k.jsx("span",{className:`transform transition-transform duration-300 ${v.type?"":"rotate-180"}`,children:""})]}),k.jsx("div",{className:`overflow-hidden transition-all duration-300 ${v.type?"max-h-0":"max-h-96"}`,children:k.jsx("div",{className:"p-4 pt-0",children:M.map(L=>k.jsxs("button",{onClick:()=>R("type",L),className:`w-full text-left py-2 px-3 rounded-lg flex justify-between items-center transition-colors ${le("type",L)}`,children:[k.jsx("span",{children:L}),k.jsx("span",{className:"text-xs font-medium text-gray-400 ml-2",children:Ce("type",L)})]},L))})})]})]}),k.jsxs("div",{className:"mt-4",children:[k.jsxs("div",{className:"flex justify-between items-center mb-4",children:[k.jsxs("h2",{className:"text-xl font-bold",children:["Results (",i.length,")"]}),k.jsxs("div",{className:"flex gap-2 text-sm",children:[k.jsx("button",{onClick:()=>u("cards"),className:`px-3 py-1 rounded-full font-semibold transition-colors ${l==="cards"?"bg-sky-500 text-white":"bg-gray-700 text-gray-400 hover:bg-gray-600"}`,children:"Cards"}),k.jsx("button",{onClick:()=>u("grid"),className:`px-3 py-1 rounded-full font-semibold transition-colors ${l==="grid"?"bg-sky-500 text-white":"bg-gray-700 text-gray-400 hover:bg-gray-600"}`,children:"Table"})]})]}),i.length===0?k.jsx("p",{className:"text-gray-400 text-center py-8",children:"No songs match your search and filter criteria."}):k.jsx(k.Fragment,{children:l==="cards"?k.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:i.map((L,ie)=>{const K=ue(L);return k.jsxs("div",{onClick:()=>$(L,ie),className:`bg-gray-700 p-4 rounded-xl shadow-md transition-transform hover:scale-105 cursor-pointer border-2 ${L.isAvailable?"border-teal-500":"border-red-500"}`,children:[k.jsx("h3",{className:"text-lg font-bold text-teal-400",children:L.title}),k.jsxs("p",{className:"text-sm text-gray-300",children:[k.jsx("span",{className:"font-semibold",children:"Author:"}),L.author]}),k.jsxs("p",{className:"text-sm text-gray-300",children:[k.jsx("span",{className:"font-semibold",children:"Book:"}),L.book]}),k.jsxs("p",{className:"text-sm text-gray-300",children:[k.jsx("span",{className:"font-semibold",children:"Category:"}),L.category]}),k.jsxs("p",{className:"text-sm text-gray-300",children:[k.jsx("span",{className:"font-semibold",children:"Language:"}),L.language]}),k.jsxs("p",{className:"text-sm text-gray-300",children:[k.jsx("span",{className:"font-semibold",children:"Type:"}),L.type]})]},K)})}):k.jsx("div",{className:"overflow-x-auto rounded-xl",children:k.jsxs("div",{className:"min-w-full",children:[k.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-2 p-4 text-sm font-semibold text-gray-400 uppercase tracking-wider bg-gray-700 border-b border-gray-600 rounded-t-xl",children:[k.jsx("span",{children:"Title"}),k.jsx("span",{className:"hidden md:block",children:"Author"}),k.jsx("span",{className:"hidden md:block",children:"Book"}),k.jsx("span",{className:"hidden md:block",children:"Category"}),k.jsx("span",{className:"hidden md:block",children:"Language"}),k.jsx("span",{className:"hidden md:block",children:"Type"})]}),k.jsx("div",{className:"bg-gray-700",children:i.map((L,ie)=>{const K=ue(L);return k.jsxs("div",{onClick:()=>$(L,ie),className:`grid grid-cols-2 md:grid-cols-6 gap-2 p-4 text-sm border-b transition-colors cursor-pointer hover:bg-gray-600 ${L.isAvailable?"border-teal-500":"border-gray-500"}`,children:[k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsx("span",{className:"font-bold text-gray-400 md:hidden",children:"Title:"}),k.jsx("span",{children:L.title})]}),k.jsxs("div",{className:"hidden md:flex flex-col",children:[k.jsx("span",{className:"font-bold text-gray-400 md:hidden",children:"Author:"}),k.jsx("span",{children:L.author})]}),k.jsxs("div",{className:"hidden md:flex flex-col",children:[k.jsx("span",{className:"font-bold text-gray-400 md:hidden",children:"Book:"}),k.jsx("span",{children:L.book})]}),k.jsxs("div",{className:"hidden md:flex flex-col",children:[k.jsx("span",{className:"font-bold text-gray-400 md:hidden",children:"Category:"}),k.jsx("span",{children:L.category})]}),k.jsxs("div",{className:"hidden md:flex flex-col",children:[k.jsx("span",{className:"font-bold text-gray-400 md:hidden",children:"Language:"}),k.jsx("span",{children:L.language})]}),k.jsxs("div",{className:"hidden md:flex flex-col",children:[k.jsx("span",{className:"font-bold text-gray-400 md:hidden",children:"Type:"}),k.jsx("span",{children:L.type})]})]},K)})})]})})})]})]})]})})},t4="thodaya-mangalam",n4=()=>{const[e,t]=E.useState(""),n=async()=>{t("Exporting...");try{const r=await YI(t4);if(!r){t("No data found for this book or download failed.");return}const i=r.songDetails.map(u=>u),s=r.songIndices.map(u=>{const{indexId:c,timestamp:f,...p}=u;return p}),o=r.songDetails.map(u=>{const{cacheId:c,timestamp:f,...p}=u;return p}),a={bookId:r.bookId,songIndices:s,songDetails:o},l=JSON.stringify(a,null,2);t(l)}catch(r){t(`Export failed: ${r.message}`)}};return k.jsxs("div",{style:{padding:"20px",border:"1px solid #ccc",margin:"20px"},children:[k.jsx("div",{style:{marginTop:"20px"},children:k.jsx("button",{onClick:n,style:{padding:"10px 20px",backgroundColor:"#58a",color:"white",border:"none",cursor:"pointer",marginRight:"10px"},children:"Export Book JSON (Debug)"})}),e&&k.jsxs("div",{style:{marginTop:"15px"},children:[k.jsx("h4",{children:"Exported JSON Structure:"}),k.jsx("pre",{style:{backgroundColor:"#f4f4f4",padding:"10px",maxHeight:"300px",overflow:"auto",fontSize:"small"},children:e})]})]})},r4=[{bookId:"ashtapadi",bookName:"ashtapadi"},{bookId:"thodaya-mangalam",bookName:"thodaya-mangalam"},{bookId:"guru-traya-dhyanam",bookName:"guru-traya-dhyanam"}],i4=({book:e,userEmail:t})=>{const{status:n,downloadedCount:r,error:i,isDownloading:s,startBulkDownload:o}=gk(e.bookId,t),a=()=>s?"Downloading... ":n==="success"?`Complete! ${r} songs stored. `:n==="error"?`Failed! ${i} `:"Ready to Download";return k.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"10px",borderBottom:"1px solid #eee"},children:[k.jsx("div",{style:{fontWeight:"bold"},children:e.bookName}),k.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[k.jsx("span",{style:{marginRight:"15px",fontSize:"small",color:s?"orange":n==="success"?"green":"gray"},children:a()}),k.jsx("button",{onClick:o,disabled:s,style:{padding:"5px 10px",backgroundColor:s?"#aaa":"#007bff",color:"white",border:"none",cursor:"pointer"},children:s?"Processing":"Bulk Download"})]})]})},s4=()=>{const e="test@example.com";return k.jsxs("div",{style:{padding:"20px",maxWidth:"800px",margin:"0 auto"},children:[k.jsx("h2",{children:"Offline Content Manager"}),k.jsx("p",{children:"Manage and download full book content directly to local storage (Dexie)."}),k.jsx("div",{style:{border:"1px solid #ccc",borderRadius:"5px",marginTop:"15px"},children:r4.map(t=>k.jsx(i4,{book:t,userEmail:e},t.bookId))})]})};function Kc(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var dC={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(u,c){if(!i[u]){if(!r[u]){var f=typeof Kc=="function"&&Kc;if(!c&&f)return f(u,!0);if(a)return a(u,!0);var p=new Error("Cannot find module '"+u+"'");throw p.code="MODULE_NOT_FOUND",p}var m=i[u]={exports:{}};r[u][0].call(m.exports,function(w){var v=r[u][1][w];return o(v||w)},m,m.exports,n,r,i,s)}return i[u].exports}for(var a=typeof Kc=="function"&&Kc,l=0;l<s.length;l++)o(s[l]);return o}({1:[function(n,r,i){var s=n("./utils"),o=n("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(l){for(var u,c,f,p,m,w,v,x=[],g=0,y=l.length,_=y,T=s.getTypeOf(l)!=="string";g<l.length;)_=y-g,f=T?(u=l[g++],c=g<y?l[g++]:0,g<y?l[g++]:0):(u=l.charCodeAt(g++),c=g<y?l.charCodeAt(g++):0,g<y?l.charCodeAt(g++):0),p=u>>2,m=(3&u)<<4|c>>4,w=1<_?(15&c)<<2|f>>6:64,v=2<_?63&f:64,x.push(a.charAt(p)+a.charAt(m)+a.charAt(w)+a.charAt(v));return x.join("")},i.decode=function(l){var u,c,f,p,m,w,v=0,x=0,g="data:";if(l.substr(0,g.length)===g)throw new Error("Invalid base64 input, it looks like a data url.");var y,_=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===a.charAt(64)&&_--,l.charAt(l.length-2)===a.charAt(64)&&_--,_%1!=0)throw new Error("Invalid base64 input, bad content length.");for(y=o.uint8array?new Uint8Array(0|_):new Array(0|_);v<l.length;)u=a.indexOf(l.charAt(v++))<<2|(p=a.indexOf(l.charAt(v++)))>>4,c=(15&p)<<4|(m=a.indexOf(l.charAt(v++)))>>2,f=(3&m)<<6|(w=a.indexOf(l.charAt(v++))),y[x++]=u,m!==64&&(y[x++]=c),w!==64&&(y[x++]=f);return y}},{"./support":30,"./utils":32}],2:[function(n,r,i){var s=n("./external"),o=n("./stream/DataWorker"),a=n("./stream/Crc32Probe"),l=n("./stream/DataLengthProbe");function u(c,f,p,m,w){this.compressedSize=c,this.uncompressedSize=f,this.crc32=p,this.compression=m,this.compressedContent=w}u.prototype={getContentWorker:function(){var c=new o(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),f=this;return c.on("end",function(){if(this.streamInfo.data_length!==f.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),c},getCompressedWorker:function(){return new o(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(c,f,p){return c.pipe(new a).pipe(new l("uncompressedSize")).pipe(f.compressWorker(p)).pipe(new l("compressedSize")).withStreamInfo("compression",f)},r.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,i){var s=n("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,i){var s=n("./utils"),o=function(){for(var a,l=[],u=0;u<256;u++){a=u;for(var c=0;c<8;c++)a=1&a?3988292384^a>>>1:a>>>1;l[u]=a}return l}();r.exports=function(a,l){return a!==void 0&&a.length?s.getTypeOf(a)!=="string"?function(u,c,f,p){var m=o,w=p+f;u^=-1;for(var v=p;v<w;v++)u=u>>>8^m[255&(u^c[v])];return-1^u}(0|l,a,a.length,0):function(u,c,f,p){var m=o,w=p+f;u^=-1;for(var v=p;v<w;v++)u=u>>>8^m[255&(u^c.charCodeAt(v))];return-1^u}(0|l,a,a.length,0):0}},{"./utils":32}],5:[function(n,r,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(n,r,i){var s=null;s=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:s}},{lie:37}],7:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),a=n("./utils"),l=n("./stream/GenericWorker"),u=s?"uint8array":"array";function c(f,p){l.call(this,"FlateWorker/"+f),this._pako=null,this._pakoAction=f,this._pakoOptions=p,this.meta={}}i.magic="\b\0",a.inherits(c,l),c.prototype.processChunk=function(f){this.meta=f.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(u,f.data),!1)},c.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},c.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},c.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var f=this;this._pako.onData=function(p){f.push({data:p,meta:f.meta})}},i.compressWorker=function(f){return new c("Deflate",f)},i.uncompressWorker=function(){return new c("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,i){function s(m,w){var v,x="";for(v=0;v<w;v++)x+=String.fromCharCode(255&m),m>>>=8;return x}function o(m,w,v,x,g,y){var _,T,O=m.file,R=m.compression,I=y!==u.utf8encode,$=a.transformTo("string",y(O.name)),U=a.transformTo("string",u.utf8encode(O.name)),V=O.comment,ge=a.transformTo("string",y(V)),M=a.transformTo("string",u.utf8encode(V)),Y=U.length!==O.name.length,P=M.length!==V.length,te="",Ce="",le="",ue=O.dir,L=O.date,ie={crc32:0,compressedSize:0,uncompressedSize:0};w&&!v||(ie.crc32=m.crc32,ie.compressedSize=m.compressedSize,ie.uncompressedSize=m.uncompressedSize);var K=0;w&&(K|=8),I||!Y&&!P||(K|=2048);var W=0,me=0;ue&&(W|=16),g==="UNIX"?(me=798,W|=function(de,Be){var We=de;return de||(We=Be?16893:33204),(65535&We)<<16}(O.unixPermissions,ue)):(me=20,W|=function(de){return 63&(de||0)}(O.dosPermissions)),_=L.getUTCHours(),_<<=6,_|=L.getUTCMinutes(),_<<=5,_|=L.getUTCSeconds()/2,T=L.getUTCFullYear()-1980,T<<=4,T|=L.getUTCMonth()+1,T<<=5,T|=L.getUTCDate(),Y&&(Ce=s(1,1)+s(c($),4)+U,te+="up"+s(Ce.length,2)+Ce),P&&(le=s(1,1)+s(c(ge),4)+M,te+="uc"+s(le.length,2)+le);var ce="";return ce+=`
\0`,ce+=s(K,2),ce+=R.magic,ce+=s(_,2),ce+=s(T,2),ce+=s(ie.crc32,4),ce+=s(ie.compressedSize,4),ce+=s(ie.uncompressedSize,4),ce+=s($.length,2),ce+=s(te.length,2),{fileRecord:f.LOCAL_FILE_HEADER+ce+$+te,dirRecord:f.CENTRAL_FILE_HEADER+s(me,2)+ce+s(ge.length,2)+"\0\0\0\0"+s(W,4)+s(x,4)+$+te+ge}}var a=n("../utils"),l=n("../stream/GenericWorker"),u=n("../utf8"),c=n("../crc32"),f=n("../signature");function p(m,w,v,x){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=w,this.zipPlatform=v,this.encodeFileName=x,this.streamFiles=m,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(p,l),p.prototype.push=function(m){var w=m.meta.percent||0,v=this.entriesCount,x=this._sources.length;this.accumulate?this.contentBuffer.push(m):(this.bytesWritten+=m.data.length,l.prototype.push.call(this,{data:m.data,meta:{currentFile:this.currentFile,percent:v?(w+100*(v-x-1))/v:100}}))},p.prototype.openedSource=function(m){this.currentSourceOffset=this.bytesWritten,this.currentFile=m.file.name;var w=this.streamFiles&&!m.file.dir;if(w){var v=o(m,w,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:v.fileRecord,meta:{percent:0}})}else this.accumulate=!0},p.prototype.closedSource=function(m){this.accumulate=!1;var w=this.streamFiles&&!m.file.dir,v=o(m,w,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(v.dirRecord),w)this.push({data:function(x){return f.DATA_DESCRIPTOR+s(x.crc32,4)+s(x.compressedSize,4)+s(x.uncompressedSize,4)}(m),meta:{percent:100}});else for(this.push({data:v.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},p.prototype.flush=function(){for(var m=this.bytesWritten,w=0;w<this.dirRecords.length;w++)this.push({data:this.dirRecords[w],meta:{percent:100}});var v=this.bytesWritten-m,x=function(g,y,_,T,O){var R=a.transformTo("string",O(T));return f.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(g,2)+s(g,2)+s(y,4)+s(_,4)+s(R.length,2)+R}(this.dirRecords.length,v,m,this.zipComment,this.encodeFileName);this.push({data:x,meta:{percent:100}})},p.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},p.prototype.registerPrevious=function(m){this._sources.push(m);var w=this;return m.on("data",function(v){w.processChunk(v)}),m.on("end",function(){w.closedSource(w.previous.streamInfo),w._sources.length?w.prepareNextSource():w.end()}),m.on("error",function(v){w.error(v)}),this},p.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},p.prototype.error=function(m){var w=this._sources;if(!l.prototype.error.call(this,m))return!1;for(var v=0;v<w.length;v++)try{w[v].error(m)}catch{}return!0},p.prototype.lock=function(){l.prototype.lock.call(this);for(var m=this._sources,w=0;w<m.length;w++)m[w].lock()},r.exports=p},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,i){var s=n("../compressions"),o=n("./ZipFileWorker");i.generateWorker=function(a,l,u){var c=new o(l.streamFiles,u,l.platform,l.encodeFileName),f=0;try{a.forEach(function(p,m){f++;var w=function(y,_){var T=y||_,O=s[T];if(!O)throw new Error(T+" is not a valid compression method !");return O}(m.options.compression,l.compression),v=m.options.compressionOptions||l.compressionOptions||{},x=m.dir,g=m.date;m._compressWorker(w,v).withStreamInfo("file",{name:p,dir:x,date:g,comment:m.comment||"",unixPermissions:m.unixPermissions,dosPermissions:m.dosPermissions}).pipe(c)}),c.entriesCount=f}catch(p){c.error(p)}return c}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new s;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(s.prototype=n("./object")).loadAsync=n("./load"),s.support=n("./support"),s.defaults=n("./defaults"),s.version="3.10.1",s.loadAsync=function(o,a){return new s().loadAsync(o,a)},s.external=n("./external"),r.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,i){var s=n("./utils"),o=n("./external"),a=n("./utf8"),l=n("./zipEntries"),u=n("./stream/Crc32Probe"),c=n("./nodejsUtils");function f(p){return new o.Promise(function(m,w){var v=p.decompressed.getContentWorker().pipe(new u);v.on("error",function(x){w(x)}).on("end",function(){v.streamInfo.crc32!==p.decompressed.crc32?w(new Error("Corrupted zip : CRC32 mismatch")):m()}).resume()})}r.exports=function(p,m){var w=this;return m=s.extend(m||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),c.isNode&&c.isStream(p)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",p,!0,m.optimizedBinaryString,m.base64).then(function(v){var x=new l(m);return x.load(v),x}).then(function(v){var x=[o.Promise.resolve(v)],g=v.files;if(m.checkCRC32)for(var y=0;y<g.length;y++)x.push(f(g[y]));return o.Promise.all(x)}).then(function(v){for(var x=v.shift(),g=x.files,y=0;y<g.length;y++){var _=g[y],T=_.fileNameStr,O=s.resolve(_.fileNameStr);w.file(O,_.decompressed,{binary:!0,optimizedBinaryString:!0,date:_.date,dir:_.dir,comment:_.fileCommentStr.length?_.fileCommentStr:null,unixPermissions:_.unixPermissions,dosPermissions:_.dosPermissions,createFolders:m.createFolders}),_.dir||(w.file(O).unsafeOriginalName=T)}return x.zipComment.length&&(w.comment=x.zipComment),w})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,i){var s=n("../utils"),o=n("../stream/GenericWorker");function a(l,u){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(u)}s.inherits(a,o),a.prototype._bindStream=function(l){var u=this;(this._stream=l).pause(),l.on("data",function(c){u.push({data:c,meta:{percent:0}})}).on("error",function(c){u.isPaused?this.generatedError=c:u.error(c)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,i){var s=n("readable-stream").Readable;function o(a,l,u){s.call(this,l),this._helper=a;var c=this;a.on("data",function(f,p){c.push(f)||c._helper.pause(),u&&u(p)}).on("error",function(f){c.emit("error",f)}).on("end",function(){c.push(null)})}n("../utils").inherits(o,s),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,r,i){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,o);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,o)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var o=new Buffer(s);return o.fill(0),o},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(n,r,i){function s(O,R,I){var $,U=a.getTypeOf(R),V=a.extend(I||{},c);V.date=V.date||new Date,V.compression!==null&&(V.compression=V.compression.toUpperCase()),typeof V.unixPermissions=="string"&&(V.unixPermissions=parseInt(V.unixPermissions,8)),V.unixPermissions&&16384&V.unixPermissions&&(V.dir=!0),V.dosPermissions&&16&V.dosPermissions&&(V.dir=!0),V.dir&&(O=g(O)),V.createFolders&&($=x(O))&&y.call(this,$,!0);var ge=U==="string"&&V.binary===!1&&V.base64===!1;I&&I.binary!==void 0||(V.binary=!ge),(R instanceof f&&R.uncompressedSize===0||V.dir||!R||R.length===0)&&(V.base64=!1,V.binary=!0,R="",V.compression="STORE",U="string");var M=null;M=R instanceof f||R instanceof l?R:w.isNode&&w.isStream(R)?new v(O,R):a.prepareContent(O,R,V.binary,V.optimizedBinaryString,V.base64);var Y=new p(O,M,V);this.files[O]=Y}var o=n("./utf8"),a=n("./utils"),l=n("./stream/GenericWorker"),u=n("./stream/StreamHelper"),c=n("./defaults"),f=n("./compressedObject"),p=n("./zipObject"),m=n("./generate"),w=n("./nodejsUtils"),v=n("./nodejs/NodejsStreamInputAdapter"),x=function(O){O.slice(-1)==="/"&&(O=O.substring(0,O.length-1));var R=O.lastIndexOf("/");return 0<R?O.substring(0,R):""},g=function(O){return O.slice(-1)!=="/"&&(O+="/"),O},y=function(O,R){return R=R!==void 0?R:c.createFolders,O=g(O),this.files[O]||s.call(this,O,null,{dir:!0,createFolders:R}),this.files[O]};function _(O){return Object.prototype.toString.call(O)==="[object RegExp]"}var T={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(O){var R,I,$;for(R in this.files)$=this.files[R],(I=R.slice(this.root.length,R.length))&&R.slice(0,this.root.length)===this.root&&O(I,$)},filter:function(O){var R=[];return this.forEach(function(I,$){O(I,$)&&R.push($)}),R},file:function(O,R,I){if(arguments.length!==1)return O=this.root+O,s.call(this,O,R,I),this;if(_(O)){var $=O;return this.filter(function(V,ge){return!ge.dir&&$.test(V)})}var U=this.files[this.root+O];return U&&!U.dir?U:null},folder:function(O){if(!O)return this;if(_(O))return this.filter(function(U,V){return V.dir&&O.test(U)});var R=this.root+O,I=y.call(this,R),$=this.clone();return $.root=I.name,$},remove:function(O){O=this.root+O;var R=this.files[O];if(R||(O.slice(-1)!=="/"&&(O+="/"),R=this.files[O]),R&&!R.dir)delete this.files[O];else for(var I=this.filter(function(U,V){return V.name.slice(0,O.length)===O}),$=0;$<I.length;$++)delete this.files[I[$].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(O){var R,I={};try{if((I=a.extend(O||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=I.type.toLowerCase(),I.compression=I.compression.toUpperCase(),I.type==="binarystring"&&(I.type="string"),!I.type)throw new Error("No output type specified.");a.checkSupport(I.type),I.platform!=="darwin"&&I.platform!=="freebsd"&&I.platform!=="linux"&&I.platform!=="sunos"||(I.platform="UNIX"),I.platform==="win32"&&(I.platform="DOS");var $=I.comment||this.comment||"";R=m.generateWorker(this,I,$)}catch(U){(R=new l("error")).error(U)}return new u(R,I.type||"string",I.mimeType)},generateAsync:function(O,R){return this.generateInternalStream(O).accumulate(R)},generateNodeStream:function(O,R){return(O=O||{}).type||(O.type="nodebuffer"),this.generateInternalStream(O).toNodejsStream(R)}};r.exports=T},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,i){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,i){var s=n("./DataReader");function o(a){s.call(this,a);for(var l=0;l<this.data.length;l++)a[l]=255&a[l]}n("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var l=a.charCodeAt(0),u=a.charCodeAt(1),c=a.charCodeAt(2),f=a.charCodeAt(3),p=this.length-4;0<=p;--p)if(this.data[p]===l&&this.data[p+1]===u&&this.data[p+2]===c&&this.data[p+3]===f)return p-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var l=a.charCodeAt(0),u=a.charCodeAt(1),c=a.charCodeAt(2),f=a.charCodeAt(3),p=this.readData(4);return l===p[0]&&u===p[1]&&c===p[2]&&f===p[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,r,i){var s=n("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var l,u=0;for(this.checkOffset(a),l=this.index+a-1;l>=this.index;l--)u=(u<<8)+this.byteAt(l);return this.index+=a,u},readString:function(a){return s.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},r.exports=o},{"../utils":32}],19:[function(n,r,i){var s=n("./Uint8ArrayReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,i){var s=n("./DataReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,r,i){var s=n("./ArrayReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,i){var s=n("../utils"),o=n("../support"),a=n("./ArrayReader"),l=n("./StringReader"),u=n("./NodeBufferReader"),c=n("./Uint8ArrayReader");r.exports=function(f){var p=s.getTypeOf(f);return s.checkSupport(p),p!=="string"||o.uint8array?p==="nodebuffer"?new u(f):o.uint8array?new c(s.transformTo("uint8array",f)):new a(s.transformTo("array",f)):new l(f)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,i){var s=n("./GenericWorker"),o=n("../utils");function a(l){s.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(a,s),a.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},r.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,i){var s=n("./GenericWorker"),o=n("../crc32");function a(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(a,s),a.prototype.processChunk=function(l){this.streamInfo.crc32=o(l.data,this.streamInfo.crc32||0),this.push(l)},r.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,i){var s=n("../utils"),o=n("./GenericWorker");function a(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}s.inherits(a,o),a.prototype.processChunk=function(l){if(l){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+l.data.length}o.prototype.processChunk.call(this,l)},r.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,i){var s=n("../utils"),o=n("./GenericWorker");function a(l){o.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(c){u.dataIsReady=!0,u.data=c,u.max=c&&c.length||0,u.type=s.getTypeOf(c),u.isPaused||u._tickAndRepeat()},function(c){u.error(c)})}s.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,u);break;case"uint8array":l=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":l=this.data.slice(this.index,u)}return this.index=u,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,i){function s(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(l){a.processChunk(l)}),o.on("end",function(){a.end()}),o.on("error",function(l){a.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=s},{}],29:[function(n,r,i){var s=n("../utils"),o=n("./ConvertWorker"),a=n("./GenericWorker"),l=n("../base64"),u=n("../support"),c=n("../external"),f=null;if(u.nodestream)try{f=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function p(w,v){return new c.Promise(function(x,g){var y=[],_=w._internalType,T=w._outputType,O=w._mimeType;w.on("data",function(R,I){y.push(R),v&&v(I)}).on("error",function(R){y=[],g(R)}).on("end",function(){try{var R=function(I,$,U){switch(I){case"blob":return s.newBlob(s.transformTo("arraybuffer",$),U);case"base64":return l.encode($);default:return s.transformTo(I,$)}}(T,function(I,$){var U,V=0,ge=null,M=0;for(U=0;U<$.length;U++)M+=$[U].length;switch(I){case"string":return $.join("");case"array":return Array.prototype.concat.apply([],$);case"uint8array":for(ge=new Uint8Array(M),U=0;U<$.length;U++)ge.set($[U],V),V+=$[U].length;return ge;case"nodebuffer":return Buffer.concat($);default:throw new Error("concat : unsupported type '"+I+"'")}}(_,y),O);x(R)}catch(I){g(I)}y=[]}).resume()})}function m(w,v,x){var g=v;switch(v){case"blob":case"arraybuffer":g="uint8array";break;case"base64":g="string"}try{this._internalType=g,this._outputType=v,this._mimeType=x,s.checkSupport(g),this._worker=w.pipe(new o(g)),w.lock()}catch(y){this._worker=new a("error"),this._worker.error(y)}}m.prototype={accumulate:function(w){return p(this,w)},on:function(w,v){var x=this;return w==="data"?this._worker.on(w,function(g){v.call(x,g.data,g.meta)}):this._worker.on(w,function(){s.delay(v,arguments,x)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(w){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new f(this,{objectMode:this._outputType!=="nodebuffer"},w)}},r.exports=m},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(s),i.blob=o.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!n("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,i){for(var s=n("./utils"),o=n("./support"),a=n("./nodejsUtils"),l=n("./stream/GenericWorker"),u=new Array(256),c=0;c<256;c++)u[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;u[254]=u[254]=1;function f(){l.call(this,"utf-8 decode"),this.leftOver=null}function p(){l.call(this,"utf-8 encode")}i.utf8encode=function(m){return o.nodebuffer?a.newBufferFrom(m,"utf-8"):function(w){var v,x,g,y,_,T=w.length,O=0;for(y=0;y<T;y++)(64512&(x=w.charCodeAt(y)))==55296&&y+1<T&&(64512&(g=w.charCodeAt(y+1)))==56320&&(x=65536+(x-55296<<10)+(g-56320),y++),O+=x<128?1:x<2048?2:x<65536?3:4;for(v=o.uint8array?new Uint8Array(O):new Array(O),y=_=0;_<O;y++)(64512&(x=w.charCodeAt(y)))==55296&&y+1<T&&(64512&(g=w.charCodeAt(y+1)))==56320&&(x=65536+(x-55296<<10)+(g-56320),y++),x<128?v[_++]=x:(x<2048?v[_++]=192|x>>>6:(x<65536?v[_++]=224|x>>>12:(v[_++]=240|x>>>18,v[_++]=128|x>>>12&63),v[_++]=128|x>>>6&63),v[_++]=128|63&x);return v}(m)},i.utf8decode=function(m){return o.nodebuffer?s.transformTo("nodebuffer",m).toString("utf-8"):function(w){var v,x,g,y,_=w.length,T=new Array(2*_);for(v=x=0;v<_;)if((g=w[v++])<128)T[x++]=g;else if(4<(y=u[g]))T[x++]=65533,v+=y-1;else{for(g&=y===2?31:y===3?15:7;1<y&&v<_;)g=g<<6|63&w[v++],y--;1<y?T[x++]=65533:g<65536?T[x++]=g:(g-=65536,T[x++]=55296|g>>10&1023,T[x++]=56320|1023&g)}return T.length!==x&&(T.subarray?T=T.subarray(0,x):T.length=x),s.applyFromCharCode(T)}(m=s.transformTo(o.uint8array?"uint8array":"array",m))},s.inherits(f,l),f.prototype.processChunk=function(m){var w=s.transformTo(o.uint8array?"uint8array":"array",m.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var v=w;(w=new Uint8Array(v.length+this.leftOver.length)).set(this.leftOver,0),w.set(v,this.leftOver.length)}else w=this.leftOver.concat(w);this.leftOver=null}var x=function(y,_){var T;for((_=_||y.length)>y.length&&(_=y.length),T=_-1;0<=T&&(192&y[T])==128;)T--;return T<0||T===0?_:T+u[y[T]]>_?T:_}(w),g=w;x!==w.length&&(o.uint8array?(g=w.subarray(0,x),this.leftOver=w.subarray(x,w.length)):(g=w.slice(0,x),this.leftOver=w.slice(x,w.length))),this.push({data:i.utf8decode(g),meta:m.meta})},f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=f,s.inherits(p,l),p.prototype.processChunk=function(m){this.push({data:i.utf8encode(m.data),meta:m.meta})},i.Utf8EncodeWorker=p},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,i){var s=n("./support"),o=n("./base64"),a=n("./nodejsUtils"),l=n("./external");function u(v){return v}function c(v,x){for(var g=0;g<v.length;++g)x[g]=255&v.charCodeAt(g);return x}n("setimmediate"),i.newBlob=function(v,x){i.checkSupport("blob");try{return new Blob([v],{type:x})}catch{try{var g=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return g.append(v),g.getBlob(x)}catch{throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(v,x,g){var y=[],_=0,T=v.length;if(T<=g)return String.fromCharCode.apply(null,v);for(;_<T;)x==="array"||x==="nodebuffer"?y.push(String.fromCharCode.apply(null,v.slice(_,Math.min(_+g,T)))):y.push(String.fromCharCode.apply(null,v.subarray(_,Math.min(_+g,T)))),_+=g;return y.join("")},stringifyByChar:function(v){for(var x="",g=0;g<v.length;g++)x+=String.fromCharCode(v[g]);return x},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function p(v){var x=65536,g=i.getTypeOf(v),y=!0;if(g==="uint8array"?y=f.applyCanBeUsed.uint8array:g==="nodebuffer"&&(y=f.applyCanBeUsed.nodebuffer),y)for(;1<x;)try{return f.stringifyByChunk(v,g,x)}catch{x=Math.floor(x/2)}return f.stringifyByChar(v)}function m(v,x){for(var g=0;g<v.length;g++)x[g]=v[g];return x}i.applyFromCharCode=p;var w={};w.string={string:u,array:function(v){return c(v,new Array(v.length))},arraybuffer:function(v){return w.string.uint8array(v).buffer},uint8array:function(v){return c(v,new Uint8Array(v.length))},nodebuffer:function(v){return c(v,a.allocBuffer(v.length))}},w.array={string:p,array:u,arraybuffer:function(v){return new Uint8Array(v).buffer},uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return a.newBufferFrom(v)}},w.arraybuffer={string:function(v){return p(new Uint8Array(v))},array:function(v){return m(new Uint8Array(v),new Array(v.byteLength))},arraybuffer:u,uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return a.newBufferFrom(new Uint8Array(v))}},w.uint8array={string:p,array:function(v){return m(v,new Array(v.length))},arraybuffer:function(v){return v.buffer},uint8array:u,nodebuffer:function(v){return a.newBufferFrom(v)}},w.nodebuffer={string:p,array:function(v){return m(v,new Array(v.length))},arraybuffer:function(v){return w.nodebuffer.uint8array(v).buffer},uint8array:function(v){return m(v,new Uint8Array(v.length))},nodebuffer:u},i.transformTo=function(v,x){if(x=x||"",!v)return x;i.checkSupport(v);var g=i.getTypeOf(x);return w[g][v](x)},i.resolve=function(v){for(var x=v.split("/"),g=[],y=0;y<x.length;y++){var _=x[y];_==="."||_===""&&y!==0&&y!==x.length-1||(_===".."?g.pop():g.push(_))}return g.join("/")},i.getTypeOf=function(v){return typeof v=="string"?"string":Object.prototype.toString.call(v)==="[object Array]"?"array":s.nodebuffer&&a.isBuffer(v)?"nodebuffer":s.uint8array&&v instanceof Uint8Array?"uint8array":s.arraybuffer&&v instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(v){if(!s[v.toLowerCase()])throw new Error(v+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(v){var x,g,y="";for(g=0;g<(v||"").length;g++)y+="\\x"+((x=v.charCodeAt(g))<16?"0":"")+x.toString(16).toUpperCase();return y},i.delay=function(v,x,g){setImmediate(function(){v.apply(g||null,x||[])})},i.inherits=function(v,x){function g(){}g.prototype=x.prototype,v.prototype=new g},i.extend=function(){var v,x,g={};for(v=0;v<arguments.length;v++)for(x in arguments[v])Object.prototype.hasOwnProperty.call(arguments[v],x)&&g[x]===void 0&&(g[x]=arguments[v][x]);return g},i.prepareContent=function(v,x,g,y,_){return l.Promise.resolve(x).then(function(T){return s.blob&&(T instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(T))!==-1)&&typeof FileReader<"u"?new l.Promise(function(O,R){var I=new FileReader;I.onload=function($){O($.target.result)},I.onerror=function($){R($.target.error)},I.readAsArrayBuffer(T)}):T}).then(function(T){var O=i.getTypeOf(T);return O?(O==="arraybuffer"?T=i.transformTo("uint8array",T):O==="string"&&(_?T=o.decode(T):g&&y!==!0&&(T=function(R){return c(R,s.uint8array?new Uint8Array(R.length):new Array(R.length))}(T))),T):l.Promise.reject(new Error("Can't read the data of '"+v+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,i){var s=n("./reader/readerFor"),o=n("./utils"),a=n("./signature"),l=n("./zipEntry"),u=n("./support");function c(f){this.files=[],this.loadOptions=f}c.prototype={checkSignature:function(f){if(!this.reader.readAndCheckSignature(f)){this.reader.index-=4;var p=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(p)+", expected "+o.pretty(f)+")")}},isSignature:function(f,p){var m=this.reader.index;this.reader.setIndex(f);var w=this.reader.readString(4)===p;return this.reader.setIndex(m),w},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var f=this.reader.readData(this.zipCommentLength),p=u.uint8array?"uint8array":"array",m=o.transformTo(p,f);this.zipComment=this.loadOptions.decodeFileName(m)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var f,p,m,w=this.zip64EndOfCentralSize-44;0<w;)f=this.reader.readInt(2),p=this.reader.readInt(4),m=this.reader.readData(p),this.zip64ExtensibleData[f]={id:f,length:p,value:m}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var f,p;for(f=0;f<this.files.length;f++)p=this.files[f],this.reader.setIndex(p.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),p.readLocalPart(this.reader),p.handleUTF8(),p.processAttributes()},readCentralDir:function(){var f;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(f=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(f);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var f=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(f<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(f);var p=f;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(f=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(f),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var m=this.centralDirOffset+this.centralDirSize;this.zip64&&(m+=20,m+=12+this.zip64EndOfCentralSize);var w=p-m;if(0<w)this.isSignature(p,a.CENTRAL_FILE_HEADER)||(this.reader.zero=w);else if(w<0)throw new Error("Corrupted zip: missing "+Math.abs(w)+" bytes.")},prepareReader:function(f){this.reader=s(f)},load:function(f){this.prepareReader(f),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=c},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,i){var s=n("./reader/readerFor"),o=n("./utils"),a=n("./compressedObject"),l=n("./crc32"),u=n("./utf8"),c=n("./compressions"),f=n("./support");function p(m,w){this.options=m,this.loadOptions=w}p.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(m){var w,v;if(m.skip(22),this.fileNameLength=m.readInt(2),v=m.readInt(2),this.fileName=m.readData(this.fileNameLength),m.skip(v),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((w=function(x){for(var g in c)if(Object.prototype.hasOwnProperty.call(c,g)&&c[g].magic===x)return c[g];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,w,m.readData(this.compressedSize))},readCentralPart:function(m){this.versionMadeBy=m.readInt(2),m.skip(2),this.bitFlag=m.readInt(2),this.compressionMethod=m.readString(2),this.date=m.readDate(),this.crc32=m.readInt(4),this.compressedSize=m.readInt(4),this.uncompressedSize=m.readInt(4);var w=m.readInt(2);if(this.extraFieldsLength=m.readInt(2),this.fileCommentLength=m.readInt(2),this.diskNumberStart=m.readInt(2),this.internalFileAttributes=m.readInt(2),this.externalFileAttributes=m.readInt(4),this.localHeaderOffset=m.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");m.skip(w),this.readExtraFields(m),this.parseZIP64ExtraField(m),this.fileComment=m.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var m=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),m==0&&(this.dosPermissions=63&this.externalFileAttributes),m==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var m=s(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=m.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=m.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=m.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=m.readInt(4))}},readExtraFields:function(m){var w,v,x,g=m.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});m.index+4<g;)w=m.readInt(2),v=m.readInt(2),x=m.readData(v),this.extraFields[w]={id:w,length:v,value:x};m.setIndex(g)},handleUTF8:function(){var m=f.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var w=this.findExtraFieldUnicodePath();if(w!==null)this.fileNameStr=w;else{var v=o.transformTo(m,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(v)}var x=this.findExtraFieldUnicodeComment();if(x!==null)this.fileCommentStr=x;else{var g=o.transformTo(m,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(g)}}},findExtraFieldUnicodePath:function(){var m=this.extraFields[28789];if(m){var w=s(m.value);return w.readInt(1)!==1||l(this.fileName)!==w.readInt(4)?null:u.utf8decode(w.readData(m.length-5))}return null},findExtraFieldUnicodeComment:function(){var m=this.extraFields[25461];if(m){var w=s(m.value);return w.readInt(1)!==1||l(this.fileComment)!==w.readInt(4)?null:u.utf8decode(w.readData(m.length-5))}return null}},r.exports=p},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,i){function s(w,v,x){this.name=w,this.dir=x.dir,this.date=x.date,this.comment=x.comment,this.unixPermissions=x.unixPermissions,this.dosPermissions=x.dosPermissions,this._data=v,this._dataBinary=x.binary,this.options={compression:x.compression,compressionOptions:x.compressionOptions}}var o=n("./stream/StreamHelper"),a=n("./stream/DataWorker"),l=n("./utf8"),u=n("./compressedObject"),c=n("./stream/GenericWorker");s.prototype={internalStream:function(w){var v=null,x="string";try{if(!w)throw new Error("No output type specified.");var g=(x=w.toLowerCase())==="string"||x==="text";x!=="binarystring"&&x!=="text"||(x="string"),v=this._decompressWorker();var y=!this._dataBinary;y&&!g&&(v=v.pipe(new l.Utf8EncodeWorker)),!y&&g&&(v=v.pipe(new l.Utf8DecodeWorker))}catch(_){(v=new c("error")).error(_)}return new o(v,x,"")},async:function(w,v){return this.internalStream(w).accumulate(v)},nodeStream:function(w,v){return this.internalStream(w||"nodebuffer").toNodejsStream(v)},_compressWorker:function(w,v){if(this._data instanceof u&&this._data.compression.magic===w.magic)return this._data.getCompressedWorker();var x=this._decompressWorker();return this._dataBinary||(x=x.pipe(new l.Utf8EncodeWorker)),u.createWorkerFrom(x,w,v)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof c?this._data:new a(this._data)}};for(var f=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],p=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},m=0;m<f.length;m++)s.prototype[f[m]]=p;r.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,i){(function(s){var o,a,l=s.MutationObserver||s.WebKitMutationObserver;if(l){var u=0,c=new l(w),f=s.document.createTextNode("");c.observe(f,{characterData:!0}),o=function(){f.data=u=++u%2}}else if(s.setImmediate||s.MessageChannel===void 0)o="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var v=s.document.createElement("script");v.onreadystatechange=function(){w(),v.onreadystatechange=null,v.parentNode.removeChild(v),v=null},s.document.documentElement.appendChild(v)}:function(){setTimeout(w,0)};else{var p=new s.MessageChannel;p.port1.onmessage=w,o=function(){p.port2.postMessage(0)}}var m=[];function w(){var v,x;a=!0;for(var g=m.length;g;){for(x=m,m=[],v=-1;++v<g;)x[v]();g=m.length}a=!1}r.exports=function(v){m.push(v)!==1||a||o()}}).call(this,typeof Yt<"u"?Yt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,i){var s=n("immediate");function o(){}var a={},l=["REJECTED"],u=["FULFILLED"],c=["PENDING"];function f(g){if(typeof g!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,g!==o&&v(this,g)}function p(g,y,_){this.promise=g,typeof y=="function"&&(this.onFulfilled=y,this.callFulfilled=this.otherCallFulfilled),typeof _=="function"&&(this.onRejected=_,this.callRejected=this.otherCallRejected)}function m(g,y,_){s(function(){var T;try{T=y(_)}catch(O){return a.reject(g,O)}T===g?a.reject(g,new TypeError("Cannot resolve promise with itself")):a.resolve(g,T)})}function w(g){var y=g&&g.then;if(g&&(typeof g=="object"||typeof g=="function")&&typeof y=="function")return function(){y.apply(g,arguments)}}function v(g,y){var _=!1;function T(I){_||(_=!0,a.reject(g,I))}function O(I){_||(_=!0,a.resolve(g,I))}var R=x(function(){y(O,T)});R.status==="error"&&T(R.value)}function x(g,y){var _={};try{_.value=g(y),_.status="success"}catch(T){_.status="error",_.value=T}return _}(r.exports=f).prototype.finally=function(g){if(typeof g!="function")return this;var y=this.constructor;return this.then(function(_){return y.resolve(g()).then(function(){return _})},function(_){return y.resolve(g()).then(function(){throw _})})},f.prototype.catch=function(g){return this.then(null,g)},f.prototype.then=function(g,y){if(typeof g!="function"&&this.state===u||typeof y!="function"&&this.state===l)return this;var _=new this.constructor(o);return this.state!==c?m(_,this.state===u?g:y,this.outcome):this.queue.push(new p(_,g,y)),_},p.prototype.callFulfilled=function(g){a.resolve(this.promise,g)},p.prototype.otherCallFulfilled=function(g){m(this.promise,this.onFulfilled,g)},p.prototype.callRejected=function(g){a.reject(this.promise,g)},p.prototype.otherCallRejected=function(g){m(this.promise,this.onRejected,g)},a.resolve=function(g,y){var _=x(w,y);if(_.status==="error")return a.reject(g,_.value);var T=_.value;if(T)v(g,T);else{g.state=u,g.outcome=y;for(var O=-1,R=g.queue.length;++O<R;)g.queue[O].callFulfilled(y)}return g},a.reject=function(g,y){g.state=l,g.outcome=y;for(var _=-1,T=g.queue.length;++_<T;)g.queue[_].callRejected(y);return g},f.resolve=function(g){return g instanceof this?g:a.resolve(new this(o),g)},f.reject=function(g){var y=new this(o);return a.reject(y,g)},f.all=function(g){var y=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=g.length,T=!1;if(!_)return this.resolve([]);for(var O=new Array(_),R=0,I=-1,$=new this(o);++I<_;)U(g[I],I);return $;function U(V,ge){y.resolve(V).then(function(M){O[ge]=M,++R!==_||T||(T=!0,a.resolve($,O))},function(M){T||(T=!0,a.reject($,M))})}},f.race=function(g){var y=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=g.length,T=!1;if(!_)return this.resolve([]);for(var O=-1,R=new this(o);++O<_;)I=g[O],y.resolve(I).then(function($){T||(T=!0,a.resolve(R,$))},function($){T||(T=!0,a.reject(R,$))});var I;return R}},{immediate:36}],38:[function(n,r,i){var s={};(0,n("./lib/utils/common").assign)(s,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,i){var s=n("./zlib/deflate"),o=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/messages"),u=n("./zlib/zstream"),c=Object.prototype.toString,f=0,p=-1,m=0,w=8;function v(g){if(!(this instanceof v))return new v(g);this.options=o.assign({level:p,method:w,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},g||{});var y=this.options;y.raw&&0<y.windowBits?y.windowBits=-y.windowBits:y.gzip&&0<y.windowBits&&y.windowBits<16&&(y.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var _=s.deflateInit2(this.strm,y.level,y.method,y.windowBits,y.memLevel,y.strategy);if(_!==f)throw new Error(l[_]);if(y.header&&s.deflateSetHeader(this.strm,y.header),y.dictionary){var T;if(T=typeof y.dictionary=="string"?a.string2buf(y.dictionary):c.call(y.dictionary)==="[object ArrayBuffer]"?new Uint8Array(y.dictionary):y.dictionary,(_=s.deflateSetDictionary(this.strm,T))!==f)throw new Error(l[_]);this._dict_set=!0}}function x(g,y){var _=new v(y);if(_.push(g,!0),_.err)throw _.msg||l[_.err];return _.result}v.prototype.push=function(g,y){var _,T,O=this.strm,R=this.options.chunkSize;if(this.ended)return!1;T=y===~~y?y:y===!0?4:0,typeof g=="string"?O.input=a.string2buf(g):c.call(g)==="[object ArrayBuffer]"?O.input=new Uint8Array(g):O.input=g,O.next_in=0,O.avail_in=O.input.length;do{if(O.avail_out===0&&(O.output=new o.Buf8(R),O.next_out=0,O.avail_out=R),(_=s.deflate(O,T))!==1&&_!==f)return this.onEnd(_),!(this.ended=!0);O.avail_out!==0&&(O.avail_in!==0||T!==4&&T!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(O.output,O.next_out))):this.onData(o.shrinkBuf(O.output,O.next_out)))}while((0<O.avail_in||O.avail_out===0)&&_!==1);return T===4?(_=s.deflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===f):T!==2||(this.onEnd(f),!(O.avail_out=0))},v.prototype.onData=function(g){this.chunks.push(g)},v.prototype.onEnd=function(g){g===f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},i.Deflate=v,i.deflate=x,i.deflateRaw=function(g,y){return(y=y||{}).raw=!0,x(g,y)},i.gzip=function(g,y){return(y=y||{}).gzip=!0,x(g,y)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,i){var s=n("./zlib/inflate"),o=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/constants"),u=n("./zlib/messages"),c=n("./zlib/zstream"),f=n("./zlib/gzheader"),p=Object.prototype.toString;function m(v){if(!(this instanceof m))return new m(v);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},v||{});var x=this.options;x.raw&&0<=x.windowBits&&x.windowBits<16&&(x.windowBits=-x.windowBits,x.windowBits===0&&(x.windowBits=-15)),!(0<=x.windowBits&&x.windowBits<16)||v&&v.windowBits||(x.windowBits+=32),15<x.windowBits&&x.windowBits<48&&!(15&x.windowBits)&&(x.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var g=s.inflateInit2(this.strm,x.windowBits);if(g!==l.Z_OK)throw new Error(u[g]);this.header=new f,s.inflateGetHeader(this.strm,this.header)}function w(v,x){var g=new m(x);if(g.push(v,!0),g.err)throw g.msg||u[g.err];return g.result}m.prototype.push=function(v,x){var g,y,_,T,O,R,I=this.strm,$=this.options.chunkSize,U=this.options.dictionary,V=!1;if(this.ended)return!1;y=x===~~x?x:x===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof v=="string"?I.input=a.binstring2buf(v):p.call(v)==="[object ArrayBuffer]"?I.input=new Uint8Array(v):I.input=v,I.next_in=0,I.avail_in=I.input.length;do{if(I.avail_out===0&&(I.output=new o.Buf8($),I.next_out=0,I.avail_out=$),(g=s.inflate(I,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&U&&(R=typeof U=="string"?a.string2buf(U):p.call(U)==="[object ArrayBuffer]"?new Uint8Array(U):U,g=s.inflateSetDictionary(this.strm,R)),g===l.Z_BUF_ERROR&&V===!0&&(g=l.Z_OK,V=!1),g!==l.Z_STREAM_END&&g!==l.Z_OK)return this.onEnd(g),!(this.ended=!0);I.next_out&&(I.avail_out!==0&&g!==l.Z_STREAM_END&&(I.avail_in!==0||y!==l.Z_FINISH&&y!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(_=a.utf8border(I.output,I.next_out),T=I.next_out-_,O=a.buf2string(I.output,_),I.next_out=T,I.avail_out=$-T,T&&o.arraySet(I.output,I.output,_,T,0),this.onData(O)):this.onData(o.shrinkBuf(I.output,I.next_out)))),I.avail_in===0&&I.avail_out===0&&(V=!0)}while((0<I.avail_in||I.avail_out===0)&&g!==l.Z_STREAM_END);return g===l.Z_STREAM_END&&(y=l.Z_FINISH),y===l.Z_FINISH?(g=s.inflateEnd(this.strm),this.onEnd(g),this.ended=!0,g===l.Z_OK):y!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(I.avail_out=0))},m.prototype.onData=function(v){this.chunks.push(v)},m.prototype.onEnd=function(v){v===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},i.Inflate=m,i.inflate=w,i.inflateRaw=function(v,x){return(x=x||{}).raw=!0,w(v,x)},i.ungzip=w},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(l){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var c=u.shift();if(c){if(typeof c!="object")throw new TypeError(c+"must be non-object");for(var f in c)c.hasOwnProperty(f)&&(l[f]=c[f])}}return l},i.shrinkBuf=function(l,u){return l.length===u?l:l.subarray?l.subarray(0,u):(l.length=u,l)};var o={arraySet:function(l,u,c,f,p){if(u.subarray&&l.subarray)l.set(u.subarray(c,c+f),p);else for(var m=0;m<f;m++)l[p+m]=u[c+m]},flattenChunks:function(l){var u,c,f,p,m,w;for(u=f=0,c=l.length;u<c;u++)f+=l[u].length;for(w=new Uint8Array(f),u=p=0,c=l.length;u<c;u++)m=l[u],w.set(m,p),p+=m.length;return w}},a={arraySet:function(l,u,c,f,p){for(var m=0;m<f;m++)l[p+m]=u[c+m]},flattenChunks:function(l){return[].concat.apply([],l)}};i.setTyped=function(l){l?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,o)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,a))},i.setTyped(s)},{}],42:[function(n,r,i){var s=n("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var l=new s.Buf8(256),u=0;u<256;u++)l[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function c(f,p){if(p<65537&&(f.subarray&&a||!f.subarray&&o))return String.fromCharCode.apply(null,s.shrinkBuf(f,p));for(var m="",w=0;w<p;w++)m+=String.fromCharCode(f[w]);return m}l[254]=l[254]=1,i.string2buf=function(f){var p,m,w,v,x,g=f.length,y=0;for(v=0;v<g;v++)(64512&(m=f.charCodeAt(v)))==55296&&v+1<g&&(64512&(w=f.charCodeAt(v+1)))==56320&&(m=65536+(m-55296<<10)+(w-56320),v++),y+=m<128?1:m<2048?2:m<65536?3:4;for(p=new s.Buf8(y),v=x=0;x<y;v++)(64512&(m=f.charCodeAt(v)))==55296&&v+1<g&&(64512&(w=f.charCodeAt(v+1)))==56320&&(m=65536+(m-55296<<10)+(w-56320),v++),m<128?p[x++]=m:(m<2048?p[x++]=192|m>>>6:(m<65536?p[x++]=224|m>>>12:(p[x++]=240|m>>>18,p[x++]=128|m>>>12&63),p[x++]=128|m>>>6&63),p[x++]=128|63&m);return p},i.buf2binstring=function(f){return c(f,f.length)},i.binstring2buf=function(f){for(var p=new s.Buf8(f.length),m=0,w=p.length;m<w;m++)p[m]=f.charCodeAt(m);return p},i.buf2string=function(f,p){var m,w,v,x,g=p||f.length,y=new Array(2*g);for(m=w=0;m<g;)if((v=f[m++])<128)y[w++]=v;else if(4<(x=l[v]))y[w++]=65533,m+=x-1;else{for(v&=x===2?31:x===3?15:7;1<x&&m<g;)v=v<<6|63&f[m++],x--;1<x?y[w++]=65533:v<65536?y[w++]=v:(v-=65536,y[w++]=55296|v>>10&1023,y[w++]=56320|1023&v)}return c(y,w)},i.utf8border=function(f,p){var m;for((p=p||f.length)>f.length&&(p=f.length),m=p-1;0<=m&&(192&f[m])==128;)m--;return m<0||m===0?p:m+l[f[m]]>p?m:p}},{"./common":41}],43:[function(n,r,i){r.exports=function(s,o,a,l){for(var u=65535&s|0,c=s>>>16&65535|0,f=0;a!==0;){for(a-=f=2e3<a?2e3:a;c=c+(u=u+o[l++]|0)|0,--f;);u%=65521,c%=65521}return u|c<<16|0}},{}],44:[function(n,r,i){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,i){var s=function(){for(var o,a=[],l=0;l<256;l++){o=l;for(var u=0;u<8;u++)o=1&o?3988292384^o>>>1:o>>>1;a[l]=o}return a}();r.exports=function(o,a,l,u){var c=s,f=u+l;o^=-1;for(var p=u;p<f;p++)o=o>>>8^c[255&(o^a[p])];return-1^o}},{}],46:[function(n,r,i){var s,o=n("../utils/common"),a=n("./trees"),l=n("./adler32"),u=n("./crc32"),c=n("./messages"),f=0,p=4,m=0,w=-2,v=-1,x=4,g=2,y=8,_=9,T=286,O=30,R=19,I=2*T+1,$=15,U=3,V=258,ge=V+U+1,M=42,Y=113,P=1,te=2,Ce=3,le=4;function ue(A,pe){return A.msg=c[pe],pe}function L(A){return(A<<1)-(4<A?9:0)}function ie(A){for(var pe=A.length;0<=--pe;)A[pe]=0}function K(A){var pe=A.state,fe=pe.pending;fe>A.avail_out&&(fe=A.avail_out),fe!==0&&(o.arraySet(A.output,pe.pending_buf,pe.pending_out,fe,A.next_out),A.next_out+=fe,pe.pending_out+=fe,A.total_out+=fe,A.avail_out-=fe,pe.pending-=fe,pe.pending===0&&(pe.pending_out=0))}function W(A,pe){a._tr_flush_block(A,0<=A.block_start?A.block_start:-1,A.strstart-A.block_start,pe),A.block_start=A.strstart,K(A.strm)}function me(A,pe){A.pending_buf[A.pending++]=pe}function ce(A,pe){A.pending_buf[A.pending++]=pe>>>8&255,A.pending_buf[A.pending++]=255&pe}function de(A,pe){var fe,F,N=A.max_chain_length,ee=A.strstart,ye=A.prev_length,ve=A.nice_match,oe=A.strstart>A.w_size-ge?A.strstart-(A.w_size-ge):0,_e=A.window,Re=A.w_mask,xe=A.prev,Me=A.strstart+V,tt=_e[ee+ye-1],Je=_e[ee+ye];A.prev_length>=A.good_match&&(N>>=2),ve>A.lookahead&&(ve=A.lookahead);do if(_e[(fe=pe)+ye]===Je&&_e[fe+ye-1]===tt&&_e[fe]===_e[ee]&&_e[++fe]===_e[ee+1]){ee+=2,fe++;do;while(_e[++ee]===_e[++fe]&&_e[++ee]===_e[++fe]&&_e[++ee]===_e[++fe]&&_e[++ee]===_e[++fe]&&_e[++ee]===_e[++fe]&&_e[++ee]===_e[++fe]&&_e[++ee]===_e[++fe]&&_e[++ee]===_e[++fe]&&ee<Me);if(F=V-(Me-ee),ee=Me-V,ye<F){if(A.match_start=pe,ve<=(ye=F))break;tt=_e[ee+ye-1],Je=_e[ee+ye]}}while((pe=xe[pe&Re])>oe&&--N!=0);return ye<=A.lookahead?ye:A.lookahead}function Be(A){var pe,fe,F,N,ee,ye,ve,oe,_e,Re,xe=A.w_size;do{if(N=A.window_size-A.lookahead-A.strstart,A.strstart>=xe+(xe-ge)){for(o.arraySet(A.window,A.window,xe,xe,0),A.match_start-=xe,A.strstart-=xe,A.block_start-=xe,pe=fe=A.hash_size;F=A.head[--pe],A.head[pe]=xe<=F?F-xe:0,--fe;);for(pe=fe=xe;F=A.prev[--pe],A.prev[pe]=xe<=F?F-xe:0,--fe;);N+=xe}if(A.strm.avail_in===0)break;if(ye=A.strm,ve=A.window,oe=A.strstart+A.lookahead,_e=N,Re=void 0,Re=ye.avail_in,_e<Re&&(Re=_e),fe=Re===0?0:(ye.avail_in-=Re,o.arraySet(ve,ye.input,ye.next_in,Re,oe),ye.state.wrap===1?ye.adler=l(ye.adler,ve,Re,oe):ye.state.wrap===2&&(ye.adler=u(ye.adler,ve,Re,oe)),ye.next_in+=Re,ye.total_in+=Re,Re),A.lookahead+=fe,A.lookahead+A.insert>=U)for(ee=A.strstart-A.insert,A.ins_h=A.window[ee],A.ins_h=(A.ins_h<<A.hash_shift^A.window[ee+1])&A.hash_mask;A.insert&&(A.ins_h=(A.ins_h<<A.hash_shift^A.window[ee+U-1])&A.hash_mask,A.prev[ee&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=ee,ee++,A.insert--,!(A.lookahead+A.insert<U)););}while(A.lookahead<ge&&A.strm.avail_in!==0)}function We(A,pe){for(var fe,F;;){if(A.lookahead<ge){if(Be(A),A.lookahead<ge&&pe===f)return P;if(A.lookahead===0)break}if(fe=0,A.lookahead>=U&&(A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+U-1])&A.hash_mask,fe=A.prev[A.strstart&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=A.strstart),fe!==0&&A.strstart-fe<=A.w_size-ge&&(A.match_length=de(A,fe)),A.match_length>=U)if(F=a._tr_tally(A,A.strstart-A.match_start,A.match_length-U),A.lookahead-=A.match_length,A.match_length<=A.max_lazy_match&&A.lookahead>=U){for(A.match_length--;A.strstart++,A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+U-1])&A.hash_mask,fe=A.prev[A.strstart&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=A.strstart,--A.match_length!=0;);A.strstart++}else A.strstart+=A.match_length,A.match_length=0,A.ins_h=A.window[A.strstart],A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+1])&A.hash_mask;else F=a._tr_tally(A,0,A.window[A.strstart]),A.lookahead--,A.strstart++;if(F&&(W(A,!1),A.strm.avail_out===0))return P}return A.insert=A.strstart<U-1?A.strstart:U-1,pe===p?(W(A,!0),A.strm.avail_out===0?Ce:le):A.last_lit&&(W(A,!1),A.strm.avail_out===0)?P:te}function Fe(A,pe){for(var fe,F,N;;){if(A.lookahead<ge){if(Be(A),A.lookahead<ge&&pe===f)return P;if(A.lookahead===0)break}if(fe=0,A.lookahead>=U&&(A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+U-1])&A.hash_mask,fe=A.prev[A.strstart&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=A.strstart),A.prev_length=A.match_length,A.prev_match=A.match_start,A.match_length=U-1,fe!==0&&A.prev_length<A.max_lazy_match&&A.strstart-fe<=A.w_size-ge&&(A.match_length=de(A,fe),A.match_length<=5&&(A.strategy===1||A.match_length===U&&4096<A.strstart-A.match_start)&&(A.match_length=U-1)),A.prev_length>=U&&A.match_length<=A.prev_length){for(N=A.strstart+A.lookahead-U,F=a._tr_tally(A,A.strstart-1-A.prev_match,A.prev_length-U),A.lookahead-=A.prev_length-1,A.prev_length-=2;++A.strstart<=N&&(A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+U-1])&A.hash_mask,fe=A.prev[A.strstart&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=A.strstart),--A.prev_length!=0;);if(A.match_available=0,A.match_length=U-1,A.strstart++,F&&(W(A,!1),A.strm.avail_out===0))return P}else if(A.match_available){if((F=a._tr_tally(A,0,A.window[A.strstart-1]))&&W(A,!1),A.strstart++,A.lookahead--,A.strm.avail_out===0)return P}else A.match_available=1,A.strstart++,A.lookahead--}return A.match_available&&(F=a._tr_tally(A,0,A.window[A.strstart-1]),A.match_available=0),A.insert=A.strstart<U-1?A.strstart:U-1,pe===p?(W(A,!0),A.strm.avail_out===0?Ce:le):A.last_lit&&(W(A,!1),A.strm.avail_out===0)?P:te}function be(A,pe,fe,F,N){this.good_length=A,this.max_lazy=pe,this.nice_length=fe,this.max_chain=F,this.func=N}function lt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*I),this.dyn_dtree=new o.Buf16(2*(2*O+1)),this.bl_tree=new o.Buf16(2*(2*R+1)),ie(this.dyn_ltree),ie(this.dyn_dtree),ie(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16($+1),this.heap=new o.Buf16(2*T+1),ie(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*T+1),ie(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function rt(A){var pe;return A&&A.state?(A.total_in=A.total_out=0,A.data_type=g,(pe=A.state).pending=0,pe.pending_out=0,pe.wrap<0&&(pe.wrap=-pe.wrap),pe.status=pe.wrap?M:Y,A.adler=pe.wrap===2?0:1,pe.last_flush=f,a._tr_init(pe),m):ue(A,w)}function He(A){var pe=rt(A);return pe===m&&function(fe){fe.window_size=2*fe.w_size,ie(fe.head),fe.max_lazy_match=s[fe.level].max_lazy,fe.good_match=s[fe.level].good_length,fe.nice_match=s[fe.level].nice_length,fe.max_chain_length=s[fe.level].max_chain,fe.strstart=0,fe.block_start=0,fe.lookahead=0,fe.insert=0,fe.match_length=fe.prev_length=U-1,fe.match_available=0,fe.ins_h=0}(A.state),pe}function Bt(A,pe,fe,F,N,ee){if(!A)return w;var ye=1;if(pe===v&&(pe=6),F<0?(ye=0,F=-F):15<F&&(ye=2,F-=16),N<1||_<N||fe!==y||F<8||15<F||pe<0||9<pe||ee<0||x<ee)return ue(A,w);F===8&&(F=9);var ve=new lt;return(A.state=ve).strm=A,ve.wrap=ye,ve.gzhead=null,ve.w_bits=F,ve.w_size=1<<ve.w_bits,ve.w_mask=ve.w_size-1,ve.hash_bits=N+7,ve.hash_size=1<<ve.hash_bits,ve.hash_mask=ve.hash_size-1,ve.hash_shift=~~((ve.hash_bits+U-1)/U),ve.window=new o.Buf8(2*ve.w_size),ve.head=new o.Buf16(ve.hash_size),ve.prev=new o.Buf16(ve.w_size),ve.lit_bufsize=1<<N+6,ve.pending_buf_size=4*ve.lit_bufsize,ve.pending_buf=new o.Buf8(ve.pending_buf_size),ve.d_buf=1*ve.lit_bufsize,ve.l_buf=3*ve.lit_bufsize,ve.level=pe,ve.strategy=ee,ve.method=fe,He(A)}s=[new be(0,0,0,0,function(A,pe){var fe=65535;for(fe>A.pending_buf_size-5&&(fe=A.pending_buf_size-5);;){if(A.lookahead<=1){if(Be(A),A.lookahead===0&&pe===f)return P;if(A.lookahead===0)break}A.strstart+=A.lookahead,A.lookahead=0;var F=A.block_start+fe;if((A.strstart===0||A.strstart>=F)&&(A.lookahead=A.strstart-F,A.strstart=F,W(A,!1),A.strm.avail_out===0)||A.strstart-A.block_start>=A.w_size-ge&&(W(A,!1),A.strm.avail_out===0))return P}return A.insert=0,pe===p?(W(A,!0),A.strm.avail_out===0?Ce:le):(A.strstart>A.block_start&&(W(A,!1),A.strm.avail_out),P)}),new be(4,4,8,4,We),new be(4,5,16,8,We),new be(4,6,32,32,We),new be(4,4,16,16,Fe),new be(8,16,32,32,Fe),new be(8,16,128,128,Fe),new be(8,32,128,256,Fe),new be(32,128,258,1024,Fe),new be(32,258,258,4096,Fe)],i.deflateInit=function(A,pe){return Bt(A,pe,y,15,8,0)},i.deflateInit2=Bt,i.deflateReset=He,i.deflateResetKeep=rt,i.deflateSetHeader=function(A,pe){return A&&A.state?A.state.wrap!==2?w:(A.state.gzhead=pe,m):w},i.deflate=function(A,pe){var fe,F,N,ee;if(!A||!A.state||5<pe||pe<0)return A?ue(A,w):w;if(F=A.state,!A.output||!A.input&&A.avail_in!==0||F.status===666&&pe!==p)return ue(A,A.avail_out===0?-5:w);if(F.strm=A,fe=F.last_flush,F.last_flush=pe,F.status===M)if(F.wrap===2)A.adler=0,me(F,31),me(F,139),me(F,8),F.gzhead?(me(F,(F.gzhead.text?1:0)+(F.gzhead.hcrc?2:0)+(F.gzhead.extra?4:0)+(F.gzhead.name?8:0)+(F.gzhead.comment?16:0)),me(F,255&F.gzhead.time),me(F,F.gzhead.time>>8&255),me(F,F.gzhead.time>>16&255),me(F,F.gzhead.time>>24&255),me(F,F.level===9?2:2<=F.strategy||F.level<2?4:0),me(F,255&F.gzhead.os),F.gzhead.extra&&F.gzhead.extra.length&&(me(F,255&F.gzhead.extra.length),me(F,F.gzhead.extra.length>>8&255)),F.gzhead.hcrc&&(A.adler=u(A.adler,F.pending_buf,F.pending,0)),F.gzindex=0,F.status=69):(me(F,0),me(F,0),me(F,0),me(F,0),me(F,0),me(F,F.level===9?2:2<=F.strategy||F.level<2?4:0),me(F,3),F.status=Y);else{var ye=y+(F.w_bits-8<<4)<<8;ye|=(2<=F.strategy||F.level<2?0:F.level<6?1:F.level===6?2:3)<<6,F.strstart!==0&&(ye|=32),ye+=31-ye%31,F.status=Y,ce(F,ye),F.strstart!==0&&(ce(F,A.adler>>>16),ce(F,65535&A.adler)),A.adler=1}if(F.status===69)if(F.gzhead.extra){for(N=F.pending;F.gzindex<(65535&F.gzhead.extra.length)&&(F.pending!==F.pending_buf_size||(F.gzhead.hcrc&&F.pending>N&&(A.adler=u(A.adler,F.pending_buf,F.pending-N,N)),K(A),N=F.pending,F.pending!==F.pending_buf_size));)me(F,255&F.gzhead.extra[F.gzindex]),F.gzindex++;F.gzhead.hcrc&&F.pending>N&&(A.adler=u(A.adler,F.pending_buf,F.pending-N,N)),F.gzindex===F.gzhead.extra.length&&(F.gzindex=0,F.status=73)}else F.status=73;if(F.status===73)if(F.gzhead.name){N=F.pending;do{if(F.pending===F.pending_buf_size&&(F.gzhead.hcrc&&F.pending>N&&(A.adler=u(A.adler,F.pending_buf,F.pending-N,N)),K(A),N=F.pending,F.pending===F.pending_buf_size)){ee=1;break}ee=F.gzindex<F.gzhead.name.length?255&F.gzhead.name.charCodeAt(F.gzindex++):0,me(F,ee)}while(ee!==0);F.gzhead.hcrc&&F.pending>N&&(A.adler=u(A.adler,F.pending_buf,F.pending-N,N)),ee===0&&(F.gzindex=0,F.status=91)}else F.status=91;if(F.status===91)if(F.gzhead.comment){N=F.pending;do{if(F.pending===F.pending_buf_size&&(F.gzhead.hcrc&&F.pending>N&&(A.adler=u(A.adler,F.pending_buf,F.pending-N,N)),K(A),N=F.pending,F.pending===F.pending_buf_size)){ee=1;break}ee=F.gzindex<F.gzhead.comment.length?255&F.gzhead.comment.charCodeAt(F.gzindex++):0,me(F,ee)}while(ee!==0);F.gzhead.hcrc&&F.pending>N&&(A.adler=u(A.adler,F.pending_buf,F.pending-N,N)),ee===0&&(F.status=103)}else F.status=103;if(F.status===103&&(F.gzhead.hcrc?(F.pending+2>F.pending_buf_size&&K(A),F.pending+2<=F.pending_buf_size&&(me(F,255&A.adler),me(F,A.adler>>8&255),A.adler=0,F.status=Y)):F.status=Y),F.pending!==0){if(K(A),A.avail_out===0)return F.last_flush=-1,m}else if(A.avail_in===0&&L(pe)<=L(fe)&&pe!==p)return ue(A,-5);if(F.status===666&&A.avail_in!==0)return ue(A,-5);if(A.avail_in!==0||F.lookahead!==0||pe!==f&&F.status!==666){var ve=F.strategy===2?function(oe,_e){for(var Re;;){if(oe.lookahead===0&&(Be(oe),oe.lookahead===0)){if(_e===f)return P;break}if(oe.match_length=0,Re=a._tr_tally(oe,0,oe.window[oe.strstart]),oe.lookahead--,oe.strstart++,Re&&(W(oe,!1),oe.strm.avail_out===0))return P}return oe.insert=0,_e===p?(W(oe,!0),oe.strm.avail_out===0?Ce:le):oe.last_lit&&(W(oe,!1),oe.strm.avail_out===0)?P:te}(F,pe):F.strategy===3?function(oe,_e){for(var Re,xe,Me,tt,Je=oe.window;;){if(oe.lookahead<=V){if(Be(oe),oe.lookahead<=V&&_e===f)return P;if(oe.lookahead===0)break}if(oe.match_length=0,oe.lookahead>=U&&0<oe.strstart&&(xe=Je[Me=oe.strstart-1])===Je[++Me]&&xe===Je[++Me]&&xe===Je[++Me]){tt=oe.strstart+V;do;while(xe===Je[++Me]&&xe===Je[++Me]&&xe===Je[++Me]&&xe===Je[++Me]&&xe===Je[++Me]&&xe===Je[++Me]&&xe===Je[++Me]&&xe===Je[++Me]&&Me<tt);oe.match_length=V-(tt-Me),oe.match_length>oe.lookahead&&(oe.match_length=oe.lookahead)}if(oe.match_length>=U?(Re=a._tr_tally(oe,1,oe.match_length-U),oe.lookahead-=oe.match_length,oe.strstart+=oe.match_length,oe.match_length=0):(Re=a._tr_tally(oe,0,oe.window[oe.strstart]),oe.lookahead--,oe.strstart++),Re&&(W(oe,!1),oe.strm.avail_out===0))return P}return oe.insert=0,_e===p?(W(oe,!0),oe.strm.avail_out===0?Ce:le):oe.last_lit&&(W(oe,!1),oe.strm.avail_out===0)?P:te}(F,pe):s[F.level].func(F,pe);if(ve!==Ce&&ve!==le||(F.status=666),ve===P||ve===Ce)return A.avail_out===0&&(F.last_flush=-1),m;if(ve===te&&(pe===1?a._tr_align(F):pe!==5&&(a._tr_stored_block(F,0,0,!1),pe===3&&(ie(F.head),F.lookahead===0&&(F.strstart=0,F.block_start=0,F.insert=0))),K(A),A.avail_out===0))return F.last_flush=-1,m}return pe!==p?m:F.wrap<=0?1:(F.wrap===2?(me(F,255&A.adler),me(F,A.adler>>8&255),me(F,A.adler>>16&255),me(F,A.adler>>24&255),me(F,255&A.total_in),me(F,A.total_in>>8&255),me(F,A.total_in>>16&255),me(F,A.total_in>>24&255)):(ce(F,A.adler>>>16),ce(F,65535&A.adler)),K(A),0<F.wrap&&(F.wrap=-F.wrap),F.pending!==0?m:1)},i.deflateEnd=function(A){var pe;return A&&A.state?(pe=A.state.status)!==M&&pe!==69&&pe!==73&&pe!==91&&pe!==103&&pe!==Y&&pe!==666?ue(A,w):(A.state=null,pe===Y?ue(A,-3):m):w},i.deflateSetDictionary=function(A,pe){var fe,F,N,ee,ye,ve,oe,_e,Re=pe.length;if(!A||!A.state||(ee=(fe=A.state).wrap)===2||ee===1&&fe.status!==M||fe.lookahead)return w;for(ee===1&&(A.adler=l(A.adler,pe,Re,0)),fe.wrap=0,Re>=fe.w_size&&(ee===0&&(ie(fe.head),fe.strstart=0,fe.block_start=0,fe.insert=0),_e=new o.Buf8(fe.w_size),o.arraySet(_e,pe,Re-fe.w_size,fe.w_size,0),pe=_e,Re=fe.w_size),ye=A.avail_in,ve=A.next_in,oe=A.input,A.avail_in=Re,A.next_in=0,A.input=pe,Be(fe);fe.lookahead>=U;){for(F=fe.strstart,N=fe.lookahead-(U-1);fe.ins_h=(fe.ins_h<<fe.hash_shift^fe.window[F+U-1])&fe.hash_mask,fe.prev[F&fe.w_mask]=fe.head[fe.ins_h],fe.head[fe.ins_h]=F,F++,--N;);fe.strstart=F,fe.lookahead=U-1,Be(fe)}return fe.strstart+=fe.lookahead,fe.block_start=fe.strstart,fe.insert=fe.lookahead,fe.lookahead=0,fe.match_length=fe.prev_length=U-1,fe.match_available=0,A.next_in=ve,A.input=oe,A.avail_in=ye,fe.wrap=ee,m},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,i){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,i){r.exports=function(s,o){var a,l,u,c,f,p,m,w,v,x,g,y,_,T,O,R,I,$,U,V,ge,M,Y,P,te;a=s.state,l=s.next_in,P=s.input,u=l+(s.avail_in-5),c=s.next_out,te=s.output,f=c-(o-s.avail_out),p=c+(s.avail_out-257),m=a.dmax,w=a.wsize,v=a.whave,x=a.wnext,g=a.window,y=a.hold,_=a.bits,T=a.lencode,O=a.distcode,R=(1<<a.lenbits)-1,I=(1<<a.distbits)-1;e:do{_<15&&(y+=P[l++]<<_,_+=8,y+=P[l++]<<_,_+=8),$=T[y&R];t:for(;;){if(y>>>=U=$>>>24,_-=U,(U=$>>>16&255)===0)te[c++]=65535&$;else{if(!(16&U)){if(!(64&U)){$=T[(65535&$)+(y&(1<<U)-1)];continue t}if(32&U){a.mode=12;break e}s.msg="invalid literal/length code",a.mode=30;break e}V=65535&$,(U&=15)&&(_<U&&(y+=P[l++]<<_,_+=8),V+=y&(1<<U)-1,y>>>=U,_-=U),_<15&&(y+=P[l++]<<_,_+=8,y+=P[l++]<<_,_+=8),$=O[y&I];n:for(;;){if(y>>>=U=$>>>24,_-=U,!(16&(U=$>>>16&255))){if(!(64&U)){$=O[(65535&$)+(y&(1<<U)-1)];continue n}s.msg="invalid distance code",a.mode=30;break e}if(ge=65535&$,_<(U&=15)&&(y+=P[l++]<<_,(_+=8)<U&&(y+=P[l++]<<_,_+=8)),m<(ge+=y&(1<<U)-1)){s.msg="invalid distance too far back",a.mode=30;break e}if(y>>>=U,_-=U,(U=c-f)<ge){if(v<(U=ge-U)&&a.sane){s.msg="invalid distance too far back",a.mode=30;break e}if(Y=g,(M=0)===x){if(M+=w-U,U<V){for(V-=U;te[c++]=g[M++],--U;);M=c-ge,Y=te}}else if(x<U){if(M+=w+x-U,(U-=x)<V){for(V-=U;te[c++]=g[M++],--U;);if(M=0,x<V){for(V-=U=x;te[c++]=g[M++],--U;);M=c-ge,Y=te}}}else if(M+=x-U,U<V){for(V-=U;te[c++]=g[M++],--U;);M=c-ge,Y=te}for(;2<V;)te[c++]=Y[M++],te[c++]=Y[M++],te[c++]=Y[M++],V-=3;V&&(te[c++]=Y[M++],1<V&&(te[c++]=Y[M++]))}else{for(M=c-ge;te[c++]=te[M++],te[c++]=te[M++],te[c++]=te[M++],2<(V-=3););V&&(te[c++]=te[M++],1<V&&(te[c++]=te[M++]))}break}}break}}while(l<u&&c<p);l-=V=_>>3,y&=(1<<(_-=V<<3))-1,s.next_in=l,s.next_out=c,s.avail_in=l<u?u-l+5:5-(l-u),s.avail_out=c<p?p-c+257:257-(c-p),a.hold=y,a.bits=_}},{}],49:[function(n,r,i){var s=n("../utils/common"),o=n("./adler32"),a=n("./crc32"),l=n("./inffast"),u=n("./inftrees"),c=1,f=2,p=0,m=-2,w=1,v=852,x=592;function g(M){return(M>>>24&255)+(M>>>8&65280)+((65280&M)<<8)+((255&M)<<24)}function y(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function _(M){var Y;return M&&M.state?(Y=M.state,M.total_in=M.total_out=Y.total=0,M.msg="",Y.wrap&&(M.adler=1&Y.wrap),Y.mode=w,Y.last=0,Y.havedict=0,Y.dmax=32768,Y.head=null,Y.hold=0,Y.bits=0,Y.lencode=Y.lendyn=new s.Buf32(v),Y.distcode=Y.distdyn=new s.Buf32(x),Y.sane=1,Y.back=-1,p):m}function T(M){var Y;return M&&M.state?((Y=M.state).wsize=0,Y.whave=0,Y.wnext=0,_(M)):m}function O(M,Y){var P,te;return M&&M.state?(te=M.state,Y<0?(P=0,Y=-Y):(P=1+(Y>>4),Y<48&&(Y&=15)),Y&&(Y<8||15<Y)?m:(te.window!==null&&te.wbits!==Y&&(te.window=null),te.wrap=P,te.wbits=Y,T(M))):m}function R(M,Y){var P,te;return M?(te=new y,(M.state=te).window=null,(P=O(M,Y))!==p&&(M.state=null),P):m}var I,$,U=!0;function V(M){if(U){var Y;for(I=new s.Buf32(512),$=new s.Buf32(32),Y=0;Y<144;)M.lens[Y++]=8;for(;Y<256;)M.lens[Y++]=9;for(;Y<280;)M.lens[Y++]=7;for(;Y<288;)M.lens[Y++]=8;for(u(c,M.lens,0,288,I,0,M.work,{bits:9}),Y=0;Y<32;)M.lens[Y++]=5;u(f,M.lens,0,32,$,0,M.work,{bits:5}),U=!1}M.lencode=I,M.lenbits=9,M.distcode=$,M.distbits=5}function ge(M,Y,P,te){var Ce,le=M.state;return le.window===null&&(le.wsize=1<<le.wbits,le.wnext=0,le.whave=0,le.window=new s.Buf8(le.wsize)),te>=le.wsize?(s.arraySet(le.window,Y,P-le.wsize,le.wsize,0),le.wnext=0,le.whave=le.wsize):(te<(Ce=le.wsize-le.wnext)&&(Ce=te),s.arraySet(le.window,Y,P-te,Ce,le.wnext),(te-=Ce)?(s.arraySet(le.window,Y,P-te,te,0),le.wnext=te,le.whave=le.wsize):(le.wnext+=Ce,le.wnext===le.wsize&&(le.wnext=0),le.whave<le.wsize&&(le.whave+=Ce))),0}i.inflateReset=T,i.inflateReset2=O,i.inflateResetKeep=_,i.inflateInit=function(M){return R(M,15)},i.inflateInit2=R,i.inflate=function(M,Y){var P,te,Ce,le,ue,L,ie,K,W,me,ce,de,Be,We,Fe,be,lt,rt,He,Bt,A,pe,fe,F,N=0,ee=new s.Buf8(4),ye=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!M||!M.state||!M.output||!M.input&&M.avail_in!==0)return m;(P=M.state).mode===12&&(P.mode=13),ue=M.next_out,Ce=M.output,ie=M.avail_out,le=M.next_in,te=M.input,L=M.avail_in,K=P.hold,W=P.bits,me=L,ce=ie,pe=p;e:for(;;)switch(P.mode){case w:if(P.wrap===0){P.mode=13;break}for(;W<16;){if(L===0)break e;L--,K+=te[le++]<<W,W+=8}if(2&P.wrap&&K===35615){ee[P.check=0]=255&K,ee[1]=K>>>8&255,P.check=a(P.check,ee,2,0),W=K=0,P.mode=2;break}if(P.flags=0,P.head&&(P.head.done=!1),!(1&P.wrap)||(((255&K)<<8)+(K>>8))%31){M.msg="incorrect header check",P.mode=30;break}if((15&K)!=8){M.msg="unknown compression method",P.mode=30;break}if(W-=4,A=8+(15&(K>>>=4)),P.wbits===0)P.wbits=A;else if(A>P.wbits){M.msg="invalid window size",P.mode=30;break}P.dmax=1<<A,M.adler=P.check=1,P.mode=512&K?10:12,W=K=0;break;case 2:for(;W<16;){if(L===0)break e;L--,K+=te[le++]<<W,W+=8}if(P.flags=K,(255&P.flags)!=8){M.msg="unknown compression method",P.mode=30;break}if(57344&P.flags){M.msg="unknown header flags set",P.mode=30;break}P.head&&(P.head.text=K>>8&1),512&P.flags&&(ee[0]=255&K,ee[1]=K>>>8&255,P.check=a(P.check,ee,2,0)),W=K=0,P.mode=3;case 3:for(;W<32;){if(L===0)break e;L--,K+=te[le++]<<W,W+=8}P.head&&(P.head.time=K),512&P.flags&&(ee[0]=255&K,ee[1]=K>>>8&255,ee[2]=K>>>16&255,ee[3]=K>>>24&255,P.check=a(P.check,ee,4,0)),W=K=0,P.mode=4;case 4:for(;W<16;){if(L===0)break e;L--,K+=te[le++]<<W,W+=8}P.head&&(P.head.xflags=255&K,P.head.os=K>>8),512&P.flags&&(ee[0]=255&K,ee[1]=K>>>8&255,P.check=a(P.check,ee,2,0)),W=K=0,P.mode=5;case 5:if(1024&P.flags){for(;W<16;){if(L===0)break e;L--,K+=te[le++]<<W,W+=8}P.length=K,P.head&&(P.head.extra_len=K),512&P.flags&&(ee[0]=255&K,ee[1]=K>>>8&255,P.check=a(P.check,ee,2,0)),W=K=0}else P.head&&(P.head.extra=null);P.mode=6;case 6:if(1024&P.flags&&(L<(de=P.length)&&(de=L),de&&(P.head&&(A=P.head.extra_len-P.length,P.head.extra||(P.head.extra=new Array(P.head.extra_len)),s.arraySet(P.head.extra,te,le,de,A)),512&P.flags&&(P.check=a(P.check,te,de,le)),L-=de,le+=de,P.length-=de),P.length))break e;P.length=0,P.mode=7;case 7:if(2048&P.flags){if(L===0)break e;for(de=0;A=te[le+de++],P.head&&A&&P.length<65536&&(P.head.name+=String.fromCharCode(A)),A&&de<L;);if(512&P.flags&&(P.check=a(P.check,te,de,le)),L-=de,le+=de,A)break e}else P.head&&(P.head.name=null);P.length=0,P.mode=8;case 8:if(4096&P.flags){if(L===0)break e;for(de=0;A=te[le+de++],P.head&&A&&P.length<65536&&(P.head.comment+=String.fromCharCode(A)),A&&de<L;);if(512&P.flags&&(P.check=a(P.check,te,de,le)),L-=de,le+=de,A)break e}else P.head&&(P.head.comment=null);P.mode=9;case 9:if(512&P.flags){for(;W<16;){if(L===0)break e;L--,K+=te[le++]<<W,W+=8}if(K!==(65535&P.check)){M.msg="header crc mismatch",P.mode=30;break}W=K=0}P.head&&(P.head.hcrc=P.flags>>9&1,P.head.done=!0),M.adler=P.check=0,P.mode=12;break;case 10:for(;W<32;){if(L===0)break e;L--,K+=te[le++]<<W,W+=8}M.adler=P.check=g(K),W=K=0,P.mode=11;case 11:if(P.havedict===0)return M.next_out=ue,M.avail_out=ie,M.next_in=le,M.avail_in=L,P.hold=K,P.bits=W,2;M.adler=P.check=1,P.mode=12;case 12:if(Y===5||Y===6)break e;case 13:if(P.last){K>>>=7&W,W-=7&W,P.mode=27;break}for(;W<3;){if(L===0)break e;L--,K+=te[le++]<<W,W+=8}switch(P.last=1&K,W-=1,3&(K>>>=1)){case 0:P.mode=14;break;case 1:if(V(P),P.mode=20,Y!==6)break;K>>>=2,W-=2;break e;case 2:P.mode=17;break;case 3:M.msg="invalid block type",P.mode=30}K>>>=2,W-=2;break;case 14:for(K>>>=7&W,W-=7&W;W<32;){if(L===0)break e;L--,K+=te[le++]<<W,W+=8}if((65535&K)!=(K>>>16^65535)){M.msg="invalid stored block lengths",P.mode=30;break}if(P.length=65535&K,W=K=0,P.mode=15,Y===6)break e;case 15:P.mode=16;case 16:if(de=P.length){if(L<de&&(de=L),ie<de&&(de=ie),de===0)break e;s.arraySet(Ce,te,le,de,ue),L-=de,le+=de,ie-=de,ue+=de,P.length-=de;break}P.mode=12;break;case 17:for(;W<14;){if(L===0)break e;L--,K+=te[le++]<<W,W+=8}if(P.nlen=257+(31&K),K>>>=5,W-=5,P.ndist=1+(31&K),K>>>=5,W-=5,P.ncode=4+(15&K),K>>>=4,W-=4,286<P.nlen||30<P.ndist){M.msg="too many length or distance symbols",P.mode=30;break}P.have=0,P.mode=18;case 18:for(;P.have<P.ncode;){for(;W<3;){if(L===0)break e;L--,K+=te[le++]<<W,W+=8}P.lens[ye[P.have++]]=7&K,K>>>=3,W-=3}for(;P.have<19;)P.lens[ye[P.have++]]=0;if(P.lencode=P.lendyn,P.lenbits=7,fe={bits:P.lenbits},pe=u(0,P.lens,0,19,P.lencode,0,P.work,fe),P.lenbits=fe.bits,pe){M.msg="invalid code lengths set",P.mode=30;break}P.have=0,P.mode=19;case 19:for(;P.have<P.nlen+P.ndist;){for(;be=(N=P.lencode[K&(1<<P.lenbits)-1])>>>16&255,lt=65535&N,!((Fe=N>>>24)<=W);){if(L===0)break e;L--,K+=te[le++]<<W,W+=8}if(lt<16)K>>>=Fe,W-=Fe,P.lens[P.have++]=lt;else{if(lt===16){for(F=Fe+2;W<F;){if(L===0)break e;L--,K+=te[le++]<<W,W+=8}if(K>>>=Fe,W-=Fe,P.have===0){M.msg="invalid bit length repeat",P.mode=30;break}A=P.lens[P.have-1],de=3+(3&K),K>>>=2,W-=2}else if(lt===17){for(F=Fe+3;W<F;){if(L===0)break e;L--,K+=te[le++]<<W,W+=8}W-=Fe,A=0,de=3+(7&(K>>>=Fe)),K>>>=3,W-=3}else{for(F=Fe+7;W<F;){if(L===0)break e;L--,K+=te[le++]<<W,W+=8}W-=Fe,A=0,de=11+(127&(K>>>=Fe)),K>>>=7,W-=7}if(P.have+de>P.nlen+P.ndist){M.msg="invalid bit length repeat",P.mode=30;break}for(;de--;)P.lens[P.have++]=A}}if(P.mode===30)break;if(P.lens[256]===0){M.msg="invalid code -- missing end-of-block",P.mode=30;break}if(P.lenbits=9,fe={bits:P.lenbits},pe=u(c,P.lens,0,P.nlen,P.lencode,0,P.work,fe),P.lenbits=fe.bits,pe){M.msg="invalid literal/lengths set",P.mode=30;break}if(P.distbits=6,P.distcode=P.distdyn,fe={bits:P.distbits},pe=u(f,P.lens,P.nlen,P.ndist,P.distcode,0,P.work,fe),P.distbits=fe.bits,pe){M.msg="invalid distances set",P.mode=30;break}if(P.mode=20,Y===6)break e;case 20:P.mode=21;case 21:if(6<=L&&258<=ie){M.next_out=ue,M.avail_out=ie,M.next_in=le,M.avail_in=L,P.hold=K,P.bits=W,l(M,ce),ue=M.next_out,Ce=M.output,ie=M.avail_out,le=M.next_in,te=M.input,L=M.avail_in,K=P.hold,W=P.bits,P.mode===12&&(P.back=-1);break}for(P.back=0;be=(N=P.lencode[K&(1<<P.lenbits)-1])>>>16&255,lt=65535&N,!((Fe=N>>>24)<=W);){if(L===0)break e;L--,K+=te[le++]<<W,W+=8}if(be&&!(240&be)){for(rt=Fe,He=be,Bt=lt;be=(N=P.lencode[Bt+((K&(1<<rt+He)-1)>>rt)])>>>16&255,lt=65535&N,!(rt+(Fe=N>>>24)<=W);){if(L===0)break e;L--,K+=te[le++]<<W,W+=8}K>>>=rt,W-=rt,P.back+=rt}if(K>>>=Fe,W-=Fe,P.back+=Fe,P.length=lt,be===0){P.mode=26;break}if(32&be){P.back=-1,P.mode=12;break}if(64&be){M.msg="invalid literal/length code",P.mode=30;break}P.extra=15&be,P.mode=22;case 22:if(P.extra){for(F=P.extra;W<F;){if(L===0)break e;L--,K+=te[le++]<<W,W+=8}P.length+=K&(1<<P.extra)-1,K>>>=P.extra,W-=P.extra,P.back+=P.extra}P.was=P.length,P.mode=23;case 23:for(;be=(N=P.distcode[K&(1<<P.distbits)-1])>>>16&255,lt=65535&N,!((Fe=N>>>24)<=W);){if(L===0)break e;L--,K+=te[le++]<<W,W+=8}if(!(240&be)){for(rt=Fe,He=be,Bt=lt;be=(N=P.distcode[Bt+((K&(1<<rt+He)-1)>>rt)])>>>16&255,lt=65535&N,!(rt+(Fe=N>>>24)<=W);){if(L===0)break e;L--,K+=te[le++]<<W,W+=8}K>>>=rt,W-=rt,P.back+=rt}if(K>>>=Fe,W-=Fe,P.back+=Fe,64&be){M.msg="invalid distance code",P.mode=30;break}P.offset=lt,P.extra=15&be,P.mode=24;case 24:if(P.extra){for(F=P.extra;W<F;){if(L===0)break e;L--,K+=te[le++]<<W,W+=8}P.offset+=K&(1<<P.extra)-1,K>>>=P.extra,W-=P.extra,P.back+=P.extra}if(P.offset>P.dmax){M.msg="invalid distance too far back",P.mode=30;break}P.mode=25;case 25:if(ie===0)break e;if(de=ce-ie,P.offset>de){if((de=P.offset-de)>P.whave&&P.sane){M.msg="invalid distance too far back",P.mode=30;break}Be=de>P.wnext?(de-=P.wnext,P.wsize-de):P.wnext-de,de>P.length&&(de=P.length),We=P.window}else We=Ce,Be=ue-P.offset,de=P.length;for(ie<de&&(de=ie),ie-=de,P.length-=de;Ce[ue++]=We[Be++],--de;);P.length===0&&(P.mode=21);break;case 26:if(ie===0)break e;Ce[ue++]=P.length,ie--,P.mode=21;break;case 27:if(P.wrap){for(;W<32;){if(L===0)break e;L--,K|=te[le++]<<W,W+=8}if(ce-=ie,M.total_out+=ce,P.total+=ce,ce&&(M.adler=P.check=P.flags?a(P.check,Ce,ce,ue-ce):o(P.check,Ce,ce,ue-ce)),ce=ie,(P.flags?K:g(K))!==P.check){M.msg="incorrect data check",P.mode=30;break}W=K=0}P.mode=28;case 28:if(P.wrap&&P.flags){for(;W<32;){if(L===0)break e;L--,K+=te[le++]<<W,W+=8}if(K!==(4294967295&P.total)){M.msg="incorrect length check",P.mode=30;break}W=K=0}P.mode=29;case 29:pe=1;break e;case 30:pe=-3;break e;case 31:return-4;case 32:default:return m}return M.next_out=ue,M.avail_out=ie,M.next_in=le,M.avail_in=L,P.hold=K,P.bits=W,(P.wsize||ce!==M.avail_out&&P.mode<30&&(P.mode<27||Y!==4))&&ge(M,M.output,M.next_out,ce-M.avail_out)?(P.mode=31,-4):(me-=M.avail_in,ce-=M.avail_out,M.total_in+=me,M.total_out+=ce,P.total+=ce,P.wrap&&ce&&(M.adler=P.check=P.flags?a(P.check,Ce,ce,M.next_out-ce):o(P.check,Ce,ce,M.next_out-ce)),M.data_type=P.bits+(P.last?64:0)+(P.mode===12?128:0)+(P.mode===20||P.mode===15?256:0),(me==0&&ce===0||Y===4)&&pe===p&&(pe=-5),pe)},i.inflateEnd=function(M){if(!M||!M.state)return m;var Y=M.state;return Y.window&&(Y.window=null),M.state=null,p},i.inflateGetHeader=function(M,Y){var P;return M&&M.state&&2&(P=M.state).wrap?((P.head=Y).done=!1,p):m},i.inflateSetDictionary=function(M,Y){var P,te=Y.length;return M&&M.state?(P=M.state).wrap!==0&&P.mode!==11?m:P.mode===11&&o(1,Y,te,0)!==P.check?-3:ge(M,Y,te,te)?(P.mode=31,-4):(P.havedict=1,p):m},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,i){var s=n("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(c,f,p,m,w,v,x,g){var y,_,T,O,R,I,$,U,V,ge=g.bits,M=0,Y=0,P=0,te=0,Ce=0,le=0,ue=0,L=0,ie=0,K=0,W=null,me=0,ce=new s.Buf16(16),de=new s.Buf16(16),Be=null,We=0;for(M=0;M<=15;M++)ce[M]=0;for(Y=0;Y<m;Y++)ce[f[p+Y]]++;for(Ce=ge,te=15;1<=te&&ce[te]===0;te--);if(te<Ce&&(Ce=te),te===0)return w[v++]=20971520,w[v++]=20971520,g.bits=1,0;for(P=1;P<te&&ce[P]===0;P++);for(Ce<P&&(Ce=P),M=L=1;M<=15;M++)if(L<<=1,(L-=ce[M])<0)return-1;if(0<L&&(c===0||te!==1))return-1;for(de[1]=0,M=1;M<15;M++)de[M+1]=de[M]+ce[M];for(Y=0;Y<m;Y++)f[p+Y]!==0&&(x[de[f[p+Y]]++]=Y);if(I=c===0?(W=Be=x,19):c===1?(W=o,me-=257,Be=a,We-=257,256):(W=l,Be=u,-1),M=P,R=v,ue=Y=K=0,T=-1,O=(ie=1<<(le=Ce))-1,c===1&&852<ie||c===2&&592<ie)return 1;for(;;){for($=M-ue,V=x[Y]<I?(U=0,x[Y]):x[Y]>I?(U=Be[We+x[Y]],W[me+x[Y]]):(U=96,0),y=1<<M-ue,P=_=1<<le;w[R+(K>>ue)+(_-=y)]=$<<24|U<<16|V|0,_!==0;);for(y=1<<M-1;K&y;)y>>=1;if(y!==0?(K&=y-1,K+=y):K=0,Y++,--ce[M]==0){if(M===te)break;M=f[p+x[Y]]}if(Ce<M&&(K&O)!==T){for(ue===0&&(ue=Ce),R+=P,L=1<<(le=M-ue);le+ue<te&&!((L-=ce[le+ue])<=0);)le++,L<<=1;if(ie+=1<<le,c===1&&852<ie||c===2&&592<ie)return 1;w[T=K&O]=Ce<<24|le<<16|R-v|0}}return K!==0&&(w[R+K]=M-ue<<24|64<<16|0),g.bits=Ce,0}},{"../utils/common":41}],51:[function(n,r,i){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,i){var s=n("../utils/common"),o=0,a=1;function l(N){for(var ee=N.length;0<=--ee;)N[ee]=0}var u=0,c=29,f=256,p=f+1+c,m=30,w=19,v=2*p+1,x=15,g=16,y=7,_=256,T=16,O=17,R=18,I=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],$=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],U=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],V=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ge=new Array(2*(p+2));l(ge);var M=new Array(2*m);l(M);var Y=new Array(512);l(Y);var P=new Array(256);l(P);var te=new Array(c);l(te);var Ce,le,ue,L=new Array(m);function ie(N,ee,ye,ve,oe){this.static_tree=N,this.extra_bits=ee,this.extra_base=ye,this.elems=ve,this.max_length=oe,this.has_stree=N&&N.length}function K(N,ee){this.dyn_tree=N,this.max_code=0,this.stat_desc=ee}function W(N){return N<256?Y[N]:Y[256+(N>>>7)]}function me(N,ee){N.pending_buf[N.pending++]=255&ee,N.pending_buf[N.pending++]=ee>>>8&255}function ce(N,ee,ye){N.bi_valid>g-ye?(N.bi_buf|=ee<<N.bi_valid&65535,me(N,N.bi_buf),N.bi_buf=ee>>g-N.bi_valid,N.bi_valid+=ye-g):(N.bi_buf|=ee<<N.bi_valid&65535,N.bi_valid+=ye)}function de(N,ee,ye){ce(N,ye[2*ee],ye[2*ee+1])}function Be(N,ee){for(var ye=0;ye|=1&N,N>>>=1,ye<<=1,0<--ee;);return ye>>>1}function We(N,ee,ye){var ve,oe,_e=new Array(x+1),Re=0;for(ve=1;ve<=x;ve++)_e[ve]=Re=Re+ye[ve-1]<<1;for(oe=0;oe<=ee;oe++){var xe=N[2*oe+1];xe!==0&&(N[2*oe]=Be(_e[xe]++,xe))}}function Fe(N){var ee;for(ee=0;ee<p;ee++)N.dyn_ltree[2*ee]=0;for(ee=0;ee<m;ee++)N.dyn_dtree[2*ee]=0;for(ee=0;ee<w;ee++)N.bl_tree[2*ee]=0;N.dyn_ltree[2*_]=1,N.opt_len=N.static_len=0,N.last_lit=N.matches=0}function be(N){8<N.bi_valid?me(N,N.bi_buf):0<N.bi_valid&&(N.pending_buf[N.pending++]=N.bi_buf),N.bi_buf=0,N.bi_valid=0}function lt(N,ee,ye,ve){var oe=2*ee,_e=2*ye;return N[oe]<N[_e]||N[oe]===N[_e]&&ve[ee]<=ve[ye]}function rt(N,ee,ye){for(var ve=N.heap[ye],oe=ye<<1;oe<=N.heap_len&&(oe<N.heap_len&&lt(ee,N.heap[oe+1],N.heap[oe],N.depth)&&oe++,!lt(ee,ve,N.heap[oe],N.depth));)N.heap[ye]=N.heap[oe],ye=oe,oe<<=1;N.heap[ye]=ve}function He(N,ee,ye){var ve,oe,_e,Re,xe=0;if(N.last_lit!==0)for(;ve=N.pending_buf[N.d_buf+2*xe]<<8|N.pending_buf[N.d_buf+2*xe+1],oe=N.pending_buf[N.l_buf+xe],xe++,ve===0?de(N,oe,ee):(de(N,(_e=P[oe])+f+1,ee),(Re=I[_e])!==0&&ce(N,oe-=te[_e],Re),de(N,_e=W(--ve),ye),(Re=$[_e])!==0&&ce(N,ve-=L[_e],Re)),xe<N.last_lit;);de(N,_,ee)}function Bt(N,ee){var ye,ve,oe,_e=ee.dyn_tree,Re=ee.stat_desc.static_tree,xe=ee.stat_desc.has_stree,Me=ee.stat_desc.elems,tt=-1;for(N.heap_len=0,N.heap_max=v,ye=0;ye<Me;ye++)_e[2*ye]!==0?(N.heap[++N.heap_len]=tt=ye,N.depth[ye]=0):_e[2*ye+1]=0;for(;N.heap_len<2;)_e[2*(oe=N.heap[++N.heap_len]=tt<2?++tt:0)]=1,N.depth[oe]=0,N.opt_len--,xe&&(N.static_len-=Re[2*oe+1]);for(ee.max_code=tt,ye=N.heap_len>>1;1<=ye;ye--)rt(N,_e,ye);for(oe=Me;ye=N.heap[1],N.heap[1]=N.heap[N.heap_len--],rt(N,_e,1),ve=N.heap[1],N.heap[--N.heap_max]=ye,N.heap[--N.heap_max]=ve,_e[2*oe]=_e[2*ye]+_e[2*ve],N.depth[oe]=(N.depth[ye]>=N.depth[ve]?N.depth[ye]:N.depth[ve])+1,_e[2*ye+1]=_e[2*ve+1]=oe,N.heap[1]=oe++,rt(N,_e,1),2<=N.heap_len;);N.heap[--N.heap_max]=N.heap[1],function(Je,Ot){var qn,Ie,ze,Xe,Sn,pn,De=Ot.dyn_tree,Or=Ot.max_code,Gn=Ot.stat_desc.static_tree,ki=Ot.stat_desc.has_stree,Te=Ot.stat_desc.extra_bits,Jr=Ot.stat_desc.extra_base,Rr=Ot.stat_desc.max_length,hr=0;for(Xe=0;Xe<=x;Xe++)Je.bl_count[Xe]=0;for(De[2*Je.heap[Je.heap_max]+1]=0,qn=Je.heap_max+1;qn<v;qn++)Rr<(Xe=De[2*De[2*(Ie=Je.heap[qn])+1]+1]+1)&&(Xe=Rr,hr++),De[2*Ie+1]=Xe,Or<Ie||(Je.bl_count[Xe]++,Sn=0,Jr<=Ie&&(Sn=Te[Ie-Jr]),pn=De[2*Ie],Je.opt_len+=pn*(Xe+Sn),ki&&(Je.static_len+=pn*(Gn[2*Ie+1]+Sn)));if(hr!==0){do{for(Xe=Rr-1;Je.bl_count[Xe]===0;)Xe--;Je.bl_count[Xe]--,Je.bl_count[Xe+1]+=2,Je.bl_count[Rr]--,hr-=2}while(0<hr);for(Xe=Rr;Xe!==0;Xe--)for(Ie=Je.bl_count[Xe];Ie!==0;)Or<(ze=Je.heap[--qn])||(De[2*ze+1]!==Xe&&(Je.opt_len+=(Xe-De[2*ze+1])*De[2*ze],De[2*ze+1]=Xe),Ie--)}}(N,ee),We(_e,tt,N.bl_count)}function A(N,ee,ye){var ve,oe,_e=-1,Re=ee[1],xe=0,Me=7,tt=4;for(Re===0&&(Me=138,tt=3),ee[2*(ye+1)+1]=65535,ve=0;ve<=ye;ve++)oe=Re,Re=ee[2*(ve+1)+1],++xe<Me&&oe===Re||(xe<tt?N.bl_tree[2*oe]+=xe:oe!==0?(oe!==_e&&N.bl_tree[2*oe]++,N.bl_tree[2*T]++):xe<=10?N.bl_tree[2*O]++:N.bl_tree[2*R]++,_e=oe,tt=(xe=0)===Re?(Me=138,3):oe===Re?(Me=6,3):(Me=7,4))}function pe(N,ee,ye){var ve,oe,_e=-1,Re=ee[1],xe=0,Me=7,tt=4;for(Re===0&&(Me=138,tt=3),ve=0;ve<=ye;ve++)if(oe=Re,Re=ee[2*(ve+1)+1],!(++xe<Me&&oe===Re)){if(xe<tt)for(;de(N,oe,N.bl_tree),--xe!=0;);else oe!==0?(oe!==_e&&(de(N,oe,N.bl_tree),xe--),de(N,T,N.bl_tree),ce(N,xe-3,2)):xe<=10?(de(N,O,N.bl_tree),ce(N,xe-3,3)):(de(N,R,N.bl_tree),ce(N,xe-11,7));_e=oe,tt=(xe=0)===Re?(Me=138,3):oe===Re?(Me=6,3):(Me=7,4)}}l(L);var fe=!1;function F(N,ee,ye,ve){ce(N,(u<<1)+(ve?1:0),3),function(oe,_e,Re,xe){be(oe),me(oe,Re),me(oe,~Re),s.arraySet(oe.pending_buf,oe.window,_e,Re,oe.pending),oe.pending+=Re}(N,ee,ye)}i._tr_init=function(N){fe||(function(){var ee,ye,ve,oe,_e,Re=new Array(x+1);for(oe=ve=0;oe<c-1;oe++)for(te[oe]=ve,ee=0;ee<1<<I[oe];ee++)P[ve++]=oe;for(P[ve-1]=oe,oe=_e=0;oe<16;oe++)for(L[oe]=_e,ee=0;ee<1<<$[oe];ee++)Y[_e++]=oe;for(_e>>=7;oe<m;oe++)for(L[oe]=_e<<7,ee=0;ee<1<<$[oe]-7;ee++)Y[256+_e++]=oe;for(ye=0;ye<=x;ye++)Re[ye]=0;for(ee=0;ee<=143;)ge[2*ee+1]=8,ee++,Re[8]++;for(;ee<=255;)ge[2*ee+1]=9,ee++,Re[9]++;for(;ee<=279;)ge[2*ee+1]=7,ee++,Re[7]++;for(;ee<=287;)ge[2*ee+1]=8,ee++,Re[8]++;for(We(ge,p+1,Re),ee=0;ee<m;ee++)M[2*ee+1]=5,M[2*ee]=Be(ee,5);Ce=new ie(ge,I,f+1,p,x),le=new ie(M,$,0,m,x),ue=new ie(new Array(0),U,0,w,y)}(),fe=!0),N.l_desc=new K(N.dyn_ltree,Ce),N.d_desc=new K(N.dyn_dtree,le),N.bl_desc=new K(N.bl_tree,ue),N.bi_buf=0,N.bi_valid=0,Fe(N)},i._tr_stored_block=F,i._tr_flush_block=function(N,ee,ye,ve){var oe,_e,Re=0;0<N.level?(N.strm.data_type===2&&(N.strm.data_type=function(xe){var Me,tt=4093624447;for(Me=0;Me<=31;Me++,tt>>>=1)if(1&tt&&xe.dyn_ltree[2*Me]!==0)return o;if(xe.dyn_ltree[18]!==0||xe.dyn_ltree[20]!==0||xe.dyn_ltree[26]!==0)return a;for(Me=32;Me<f;Me++)if(xe.dyn_ltree[2*Me]!==0)return a;return o}(N)),Bt(N,N.l_desc),Bt(N,N.d_desc),Re=function(xe){var Me;for(A(xe,xe.dyn_ltree,xe.l_desc.max_code),A(xe,xe.dyn_dtree,xe.d_desc.max_code),Bt(xe,xe.bl_desc),Me=w-1;3<=Me&&xe.bl_tree[2*V[Me]+1]===0;Me--);return xe.opt_len+=3*(Me+1)+5+5+4,Me}(N),oe=N.opt_len+3+7>>>3,(_e=N.static_len+3+7>>>3)<=oe&&(oe=_e)):oe=_e=ye+5,ye+4<=oe&&ee!==-1?F(N,ee,ye,ve):N.strategy===4||_e===oe?(ce(N,2+(ve?1:0),3),He(N,ge,M)):(ce(N,4+(ve?1:0),3),function(xe,Me,tt,Je){var Ot;for(ce(xe,Me-257,5),ce(xe,tt-1,5),ce(xe,Je-4,4),Ot=0;Ot<Je;Ot++)ce(xe,xe.bl_tree[2*V[Ot]+1],3);pe(xe,xe.dyn_ltree,Me-1),pe(xe,xe.dyn_dtree,tt-1)}(N,N.l_desc.max_code+1,N.d_desc.max_code+1,Re+1),He(N,N.dyn_ltree,N.dyn_dtree)),Fe(N),ve&&be(N)},i._tr_tally=function(N,ee,ye){return N.pending_buf[N.d_buf+2*N.last_lit]=ee>>>8&255,N.pending_buf[N.d_buf+2*N.last_lit+1]=255&ee,N.pending_buf[N.l_buf+N.last_lit]=255&ye,N.last_lit++,ee===0?N.dyn_ltree[2*ye]++:(N.matches++,ee--,N.dyn_ltree[2*(P[ye]+f+1)]++,N.dyn_dtree[2*W(ee)]++),N.last_lit===N.lit_bufsize-1},i._tr_align=function(N){ce(N,2,3),de(N,_,ge),function(ee){ee.bi_valid===16?(me(ee,ee.bi_buf),ee.bi_buf=0,ee.bi_valid=0):8<=ee.bi_valid&&(ee.pending_buf[ee.pending++]=255&ee.bi_buf,ee.bi_buf>>=8,ee.bi_valid-=8)}(N)}},{"../utils/common":41}],53:[function(n,r,i){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,i){(function(s){(function(o,a){if(!o.setImmediate){var l,u,c,f,p=1,m={},w=!1,v=o.document,x=Object.getPrototypeOf&&Object.getPrototypeOf(o);x=x&&x.setTimeout?x:o,l={}.toString.call(o.process)==="[object process]"?function(T){process.nextTick(function(){y(T)})}:function(){if(o.postMessage&&!o.importScripts){var T=!0,O=o.onmessage;return o.onmessage=function(){T=!1},o.postMessage("","*"),o.onmessage=O,T}}()?(f="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",_,!1):o.attachEvent("onmessage",_),function(T){o.postMessage(f+T,"*")}):o.MessageChannel?((c=new MessageChannel).port1.onmessage=function(T){y(T.data)},function(T){c.port2.postMessage(T)}):v&&"onreadystatechange"in v.createElement("script")?(u=v.documentElement,function(T){var O=v.createElement("script");O.onreadystatechange=function(){y(T),O.onreadystatechange=null,u.removeChild(O),O=null},u.appendChild(O)}):function(T){setTimeout(y,0,T)},x.setImmediate=function(T){typeof T!="function"&&(T=new Function(""+T));for(var O=new Array(arguments.length-1),R=0;R<O.length;R++)O[R]=arguments[R+1];var I={callback:T,args:O};return m[p]=I,l(p),p++},x.clearImmediate=g}function g(T){delete m[T]}function y(T){if(w)setTimeout(y,0,T);else{var O=m[T];if(O){w=!0;try{(function(R){var I=R.callback,$=R.args;switch($.length){case 0:I();break;case 1:I($[0]);break;case 2:I($[0],$[1]);break;case 3:I($[0],$[1],$[2]);break;default:I.apply(a,$)}})(O)}finally{g(T),w=!1}}}}function _(T){T.source===o&&typeof T.data=="string"&&T.data.indexOf(f)===0&&y(+T.data.slice(f.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof Yt<"u"?Yt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(dC);var o4=dC.exports;const T_=nf(o4),a4=()=>{const[e,t]=E.useState(!1),[n,r]=E.useState([]),i=E.useRef(null),s=E.useCallback(async u=>{if(!u||u.length===0){r(f=>[...f,{success:!1,message:"No files selected."}]);return}t(!0);const c=[];try{for(let f=0;f<u.length;f++){const p=u[f];if(p.type==="application/zip"||p.name.endsWith(".zip"))try{const m=await T_.loadAsync(p),w=Object.values(m.files);for(const v of w)if(!v.dir&&v.name.endsWith(".json"))try{const x=await v.async("string"),g=JSON.parse(x),y=v.name.split("/").pop()||"unknown.json",_=y.replace(/\.json$/,"");localStorage.setItem(_,JSON.stringify(g)),c.push({success:!0,message:`Successfully extracted and stored "${y}" with key "${_}" from ZIP.`})}catch(x){const g=x instanceof Error?x.message:"Unknown error";c.push({success:!1,message:`Error processing file "${v.name}" from ZIP: ${g}`})}else v.dir||c.push({success:!1,message:`Skipped non-JSON file "${v.name}" from ZIP.`})}catch(m){const w=m instanceof Error?m.message:"Invalid ZIP file";c.push({success:!1,message:`Error processing ZIP file "${p.name}": ${w}`})}else if(p.type==="application/json"||p.name.endsWith(".json"))try{const m=new FileReader,w=await new Promise((y,_)=>{m.onload=()=>y(m.result),m.onerror=_,m.readAsText(p)}),v=JSON.parse(w),g=p.name.replace(/\.json$/,"");localStorage.setItem(g,JSON.stringify(v)),c.push({success:!0,message:`Successfully stored "${p.name}" with key "${g}".`})}catch(m){const w=m instanceof Error?m.message:"Unknown error";c.push({success:!1,message:`Error processing file "${p.name}": ${w}`})}else c.push({success:!1,message:`File "${p.name}" is not a JSON or ZIP file. Skipped.`})}}finally{r(f=>[...f,...c]),t(!1)}},[]),o=u=>{s(u.target.files),i.current&&(i.current.value="")},a=()=>{r([])},l=E.useCallback(async()=>{t(!0);try{debugger;const u=new T_;let c=!1,f=null;const p=localStorage.getItem("sankeertan_categories_data");if(p)try{f=JSON.parse(p),u.file("sankeertan_categories_data.json",p),c=!0}catch{console.warn("sankeertan_categories_data.json is not valid JSON, skipping."),f=null}else console.warn("sankeertan_categories_data.json not found in localStorage.");const m={};for(let g=0;g<localStorage.length;g++){debugger;const y=localStorage.key(g);if(console.log(y),y!=="sb-"+kS+"-auth-token"&&y&&y!=="sankeertan_categories_data"){const _=localStorage.getItem(y);if(_)try{JSON.parse(_);let T=u;if(f&&Array.isArray(f.data))for(const O of f.data)for(const R of O.books){const I=R.bookId,$=`sankeertan_song_details-${I.toLowerCase().replace(/ /g,"-")}`,U=`sankeertan_song_indices-${I.toLowerCase().replace(/ /g,"-")}`;if(y.startsWith($)||y.startsWith(U)){if(!m[I]){const V=u.folder(I);V?m[I]=V:m[I]=u}T=m[I]||u;break}}T.file(`${y}.json`,_),c=!0}catch{console.warn(`Skipping key "${y}" as value is not valid JSON`)}}}if(!c){r(g=>[...g,{success:!1,message:"No valid JSON data found in localStorage to export."}]),t(!1);return}const w=await u.generateAsync({type:"blob",mimeType:"application/zip",compression:"DEFLATE"}),v=URL.createObjectURL(w),x=document.createElement("a");x.href=v,x.download="sankeertan_localStorage_backup.zip",document.body.appendChild(x),x.click(),document.body.removeChild(x),URL.revokeObjectURL(v),r(g=>[...g,{success:!0,message:"Successfully exported localStorage to ZIP file with folder structure."}])}catch(u){const c=u instanceof Error?u.message:"Unknown error during export";r(f=>[...f,{success:!1,message:`Error exporting localStorage: ${c}`}])}finally{t(!1)}},[]);return k.jsxs("div",{className:"p-4",children:[k.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Local Storage Sync"}),k.jsxs("div",{className:"mb-4",children:[k.jsx("input",{type:"file",accept:".json,.zip",onChange:o,disabled:e,"aria-label":"Upload JSON or ZIP Files",multiple:!0,ref:i}),k.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Upload JSON files or a ZIP file containing JSON files.  Filename will be used as the key."})]}),k.jsx("div",{className:"mb-4",children:k.jsx("button",{onClick:l,disabled:e,className:"px-4 py-2 border rounded-md bg-blue-500 text-white",children:e?"Exporting...":"Export to ZIP"})}),e&&k.jsx("div",{className:"mb-4 flex items-center gap-2",children:k.jsx("span",{children:e?"Processing...":"Exporting..."})}),n.length>0&&k.jsxs("div",{className:"mb-4",children:[k.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Upload Results:"}),n.map((u,c)=>k.jsxs("div",{className:`mb-2 p-3 border rounded-md ${u.success?"border-green-500 bg-green-100 text-green-800":"border-red-500 bg-red-100 text-red-800"}`,children:[u.success?k.jsx("span",{style:{color:"green"},children:""}):k.jsx("span",{style:{color:"red"},children:""}),k.jsx("strong",{className:"mr-1",children:u.success?"Success":"Error"}),k.jsx("span",{children:u.message})]},c)),k.jsx("button",{onClick:a,className:"mt-2 px-4 py-2 border rounded-md",children:"Clear Results"})]}),k.jsxs("div",{className:"mt-8 p-4 border rounded-md bg-gray-50",children:[k.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Important Notes:"}),k.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"ZIP File Handling:"}),"  This page now supports uploading a single ZIP file.  The application will extract JSON files from the ZIP and store them in localStorage."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"Key Derivation:"})," The filename of each JSON file is used as the key for storing its content in localStorage."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"File Overwriting:"})," If a key already exists in localStorage, it will be overwritten with the new content."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"ZIP Structure:"})," The ZIP file can contain JSON files in subfolders.  The filename of the file within the ZIP will be used as the localStorage key."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"Non-JSON Files in ZIP:"})," Any non-JSON files within the ZIP will be skipped."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"Error Handling:"})," The application attempts to provide informative error messages for file processing issues, including problems with individual files within a ZIP archive."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"Export Feature:"}),`  A new "Export to ZIP" button has been added.  Clicking this will create a ZIP file containing all key-value pairs from your browser's localStorage (where the values are valid JSON), and prompt you to download it.  The keys will be used as the filenames in the ZIP.`]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"Exported Data Format:"})," The exported ZIP file will now contain a folder structure."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"Book Folders:"}),"  Data is organized into folders based on the book names found in  `sankeertan_categories_data.json`."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"Root Folder:"})," Any keys that do not match the book naming convention will be placed in the root of the ZIP file."]}),k.jsxs("li",{children:[k.jsx("span",{className:"font-semibold",children:"sankeertan_categories_data.json:"}),"  This file is included in the root of the ZIP."]})]})]})]})},Lr=({children:e,session:t})=>{const n=dr();return t?k.jsx(k.Fragment,{children:e}):(sessionStorage.setItem("redirect_path",n.pathname),k.jsx(vS,{to:"/login",replace:!0}))};function l4(){const{session:e}=bs(),{categories:t,isLoading:n}=$y(),r=(t==null?void 0:t.flatMap(i=>i.books))||[];return n?k.jsx("div",{children:"Checking authentication..."}):k.jsx(mk,{children:k.jsx(rD,{books:r,children:k.jsxs(IA,{children:[k.jsx(un,{path:"/login",element:k.jsx(ZR,{})}),k.jsx(un,{path:"/signup",element:k.jsx(XR,{})}),k.jsx(un,{path:"/change-password",element:k.jsx(eI,{})}),k.jsx(un,{path:"/auth/callback",element:k.jsx(nI,{})}),k.jsx(un,{path:"/settings",element:k.jsx(Lr,{session:e,children:k.jsx(zF,{})})}),k.jsx(un,{path:"/categories",element:k.jsx(Lr,{session:e,children:k.jsx(tD,{})})}),k.jsx(un,{path:"/books/:categoryId",element:k.jsx(Lr,{session:e,children:k.jsx(cD,{})})}),k.jsx(un,{path:"/book/:categoryId/:bookId",element:k.jsx(Lr,{session:e,children:k.jsx(SD,{})})}),k.jsx(un,{path:"/details/book/:categoryId/:bookId/:sourceRow/:songTitle",element:k.jsx(Lr,{session:e,children:k.jsx(HF,{})})}),k.jsx(un,{path:"/sankeertan/:broadcastId",element:k.jsx(Lr,{session:e,children:k.jsx(GF,{broadcastId:1})})}),k.jsx(un,{path:"/localstoragesync",element:k.jsx(Lr,{session:e,children:k.jsx(a4,{})})}),k.jsx(un,{path:"/bulkDownloadTester",element:k.jsx(Lr,{session:e,children:k.jsx(n4,{})})}),k.jsx(un,{path:"/offlineContentManager",element:k.jsx(Lr,{session:e,children:k.jsx(s4,{})})}),k.jsx(un,{path:"/search",element:k.jsx(Lr,{session:e,children:k.jsx(e4,{})})}),k.jsx(un,{path:"/",element:e?k.jsx(vS,{to:"/categories",replace:!0}):k.jsx("div",{children:"Welcome!"})})]})})})}const u4=E.createContext({books:[],categories:[],currentBook:null,loadBook:async()=>{},loading:!1,error:null}),c4=({children:e})=>{const[t,n]=E.useState([{id:"book1",name:"The Great Book A",categoryIds:["cat1","cat2"]},{id:"book2",name:"Another Fine Book B",categoryIds:["cat2","cat3"]},{id:"book3",name:"Wonderful Book C",categoryIds:["cat1"]}]),[r,i]=E.useState([{id:"cat1",name:"Fiction"},{id:"cat2",name:"Mystery"},{id:"cat3",name:"Science Fiction"}]),[s,o]=E.useState(null),[a,l]=E.useState(!1),[u,c]=E.useState(null),{bookId:f}=Au(),p=E.useCallback(async w=>{l(!0),c(null),o(null),await new Promise(x=>setTimeout(x,500));const v=t.find(x=>x.id===w);o(v||null),l(!1)},[t,l,c,o]);E.useEffect(()=>{f&&p(f)},[f,p]);const m={books:t,categories:r,currentBook:s,loadBook:p,loading:a,error:u};return k.jsx(u4.Provider,{value:m,children:e})},d4=({toggleDropdown:e,isDropdownOpen:t,openLanguageSettings:n})=>{var u;const[r,i]=E.useState(null),s=jr();E.useEffect(()=>{Qt.auth.getSession().then(({data:{session:c}})=>{i(c)}),Qt.auth.onAuthStateChange((c,f)=>{i(f)})},[]);const o=async()=>{const{error:c}=await Qt.auth.signOut();c?(console.error("Error signing out:",c),alert("Error signing out. Please try again.")):s("/login")},{isOfflineMode:a,setIsOfflineMode:l}=My();return k.jsx("div",{className:"relative inline-block text-left",children:r?k.jsxs("div",{children:[k.jsxs("button",{type:"button",className:"inline-flex w-full justify-center gap-x-1.5 rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50",onClick:e,"aria-expanded":t,"aria-haspopup":"true",children:[((u=r.user)==null?void 0:u.email)||"User",k.jsx("svg",{className:"-mr-1 h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:k.jsx("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z",clipRule:"evenodd"})})]}),t&&k.jsx("div",{className:"absolute right-0 z-[1000] mt-2 w-40 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",role:"menu","aria-orientation":"vertical","aria-labelledby":"user-menu-button",children:k.jsxs("div",{className:"py-1",children:[k.jsx("div",{className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitemcheckbox",children:k.jsxs("label",{className:"flex items-center",children:[k.jsx("input",{type:"checkbox",className:"mr-2 form-checkbox h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded",checked:a,onChange:c=>l(c.target.checked)}),k.jsx("span",{children:"Offline Mode"})]})}),k.jsx(rr,{to:"/sankeertan/1",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",onClick:e,children:"Chanting Together"}),k.jsx(rr,{to:"/categories",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",onClick:e,children:"Categories & Books"}),k.jsx(rr,{to:"/search",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",onClick:e,children:"Search"}),k.jsx(rr,{to:"/settings",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",onClick:e,children:"Settings (Language)"}),k.jsx(rr,{to:"/change-password",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",onClick:e,children:"Change Password"}),k.jsx("button",{onClick:o,className:"block w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",children:"Sign Out"})]})})]}):k.jsx(rr,{to:"/login",className:"text-blue-500 hover:underline px-3 py-2 inline-block",children:"Login"})})};var f4=Object.defineProperty,h4=(e,t,n)=>t in e?f4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bp=(e,t,n)=>(h4(e,typeof t!="symbol"?t+"":t,n),n);let p4=class{constructor(){bp(this,"current",this.detect()),bp(this,"handoffState","pending"),bp(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Qr=new p4;function Vu(e){var t;return Qr.isServer?null:e==null?document:(t=e==null?void 0:e.ownerDocument)!=null?t:document}function yg(e){var t,n;return Qr.isServer?null:e==null?document:(n=(t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))!=null?n:document}function fC(e){var t,n;return(n=(t=yg(e))==null?void 0:t.activeElement)!=null?n:null}function m4(e){return fC(e)===e}function Lf(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function Si(){let e=[],t={addEventListener(n,r,i,s){return n.addEventListener(r,i,s),t.add(()=>n.removeEventListener(r,i,s))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return t.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return Lf(()=>{r.current&&n[0]()}),t.add(()=>{r.current=!1})},style(n,r,i){let s=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:i}),this.add(()=>{Object.assign(n.style,{[r]:s})})},group(n){let r=Si();return n(r),this.add(()=>r.dispose())},add(n){return e.includes(n)||e.push(n),()=>{let r=e.indexOf(n);if(r>=0)for(let i of e.splice(r,1))i()}},dispose(){for(let n of e.splice(0))n()}};return t}function $f(){let[e]=E.useState(Si);return E.useEffect(()=>()=>e.dispose(),[e]),e}let Nn=(e,t)=>{Qr.isServer?E.useEffect(e,t):E.useLayoutEffect(e,t)};function bo(e){let t=E.useRef(e);return Nn(()=>{t.current=e},[e]),t}let ft=function(e){let t=bo(e);return Ke.useCallback((...n)=>t.current(...n),[t])};function Ku(e){return E.useMemo(()=>e,Object.values(e))}let g4=E.createContext(void 0);function y4(){return E.useContext(g4)}function vg(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function _i(e,t,...n){if(e in t){let i=t[e];return typeof i=="function"?i(...n):i}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(i=>`"${i}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,_i),r}var Xd=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Xd||{}),es=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(es||{});function fr(){let e=w4();return E.useCallback(t=>v4({mergeRefs:e,...t}),[e])}function v4({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:i,visible:s=!0,name:o,mergeRefs:a}){a=a??b4;let l=hC(t,e);if(s)return Wc(l,n,r,o,a);let u=i??0;if(u&2){let{static:c=!1,...f}=l;if(c)return Wc(f,n,r,o,a)}if(u&1){let{unmount:c=!0,...f}=l;return _i(c?0:1,{0(){return null},1(){return Wc({...f,hidden:!0,style:{display:"none"}},n,r,o,a)}})}return Wc(l,n,r,o,a)}function Wc(e,t={},n,r,i){let{as:s=n,children:o,refName:a="ref",...l}=_p(e,["unmount","static"]),u=e.ref!==void 0?{[a]:e.ref}:{},c=typeof o=="function"?o(t):o;"className"in l&&l.className&&typeof l.className=="function"&&(l.className=l.className(t)),l["aria-labelledby"]&&l["aria-labelledby"]===l.id&&(l["aria-labelledby"]=void 0);let f={};if(t){let p=!1,m=[];for(let[w,v]of Object.entries(t))typeof v=="boolean"&&(p=!0),v===!0&&m.push(w.replace(/([A-Z])/g,x=>`-${x.toLowerCase()}`));if(p){f["data-headlessui-state"]=m.join(" ");for(let w of m)f[`data-${w}`]=""}}if(Ul(s)&&(Object.keys(Ls(l)).length>0||Object.keys(Ls(f)).length>0))if(!E.isValidElement(c)||Array.isArray(c)&&c.length>1||x4(c)){if(Object.keys(Ls(l)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(Ls(l)).concat(Object.keys(Ls(f))).map(p=>`  - ${p}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(p=>`  - ${p}`).join(`
`)].join(`
`))}else{let p=c.props,m=p==null?void 0:p.className,w=typeof m=="function"?(...g)=>vg(m(...g),l.className):vg(m,l.className),v=w?{className:w}:{},x=hC(c.props,Ls(_p(l,["ref"])));for(let g in f)g in x&&delete f[g];return E.cloneElement(c,Object.assign({},x,f,u,{ref:i(_4(c),u.ref)},v))}return E.createElement(s,Object.assign({},_p(l,["ref"]),!Ul(s)&&u,!Ul(s)&&f),c)}function w4(){let e=E.useRef([]),t=E.useCallback(n=>{for(let r of e.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return e.current=n,t}}function b4(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function hC(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let i in r)i.startsWith("on")&&typeof r[i]=="function"?(n[i]!=null||(n[i]=[]),n[i].push(r[i])):t[i]=r[i];if(t.disabled||t["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[i=>{var s;return(s=i==null?void 0:i.preventDefault)==null?void 0:s.call(i)}]);for(let r in n)Object.assign(t,{[r](i,...s){let o=n[r];for(let a of o){if((i instanceof Event||(i==null?void 0:i.nativeEvent)instanceof Event)&&i.defaultPrevented)return;a(i,...s)}}});return t}function Ln(e){var t;return Object.assign(E.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function Ls(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function _p(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}function _4(e){return Ke.version.split(".")[0]>="19"?e.props.ref:e.ref}function Ul(e){return e===E.Fragment||e===Symbol.for("react.fragment")}function x4(e){return Ul(e.type)}let S4="span";var ef=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(ef||{});function k4(e,t){var n;let{features:r=1,...i}=e,s={ref:t,"aria-hidden":(r&2)===2?!0:(n=i["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return fr()({ourProps:s,theirProps:i,slot:{},defaultTag:S4,name:"Hidden"})}let wg=Ln(k4);function E4(e){return typeof e!="object"||e===null?!1:"nodeType"in e}function ds(e){return E4(e)&&"tagName"in e}function po(e){return ds(e)&&"accessKey"in e}function ts(e){return ds(e)&&"tabIndex"in e}function C4(e){return ds(e)&&"style"in e}function T4(e){return po(e)&&e.nodeName==="IFRAME"}function P4(e){return po(e)&&e.nodeName==="INPUT"}let pC=Symbol();function A4(e,t=!0){return Object.assign(e,{[pC]:t})}function Yr(...e){let t=E.useRef(e);E.useEffect(()=>{t.current=e},[e]);let n=ft(r=>{for(let i of t.current)i!=null&&(typeof i=="function"?i(r):i.current=r)});return e.every(r=>r==null||(r==null?void 0:r[pC]))?void 0:n}let xv=E.createContext(null);xv.displayName="DescriptionContext";function mC(){let e=E.useContext(xv);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,mC),t}return e}function j4(){let[e,t]=E.useState([]);return[e.length>0?e.join(" "):void 0,E.useMemo(()=>function(n){let r=ft(s=>(t(o=>[...o,s]),()=>t(o=>{let a=o.slice(),l=a.indexOf(s);return l!==-1&&a.splice(l,1),a}))),i=E.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props,value:n.value}),[r,n.slot,n.name,n.props,n.value]);return Ke.createElement(xv.Provider,{value:i},n.children)},[t])]}let O4="p";function R4(e,t){let n=E.useId(),r=y4(),{id:i=`headlessui-description-${n}`,...s}=e,o=mC(),a=Yr(t);Nn(()=>o.register(i),[i,o.register]);let l=Ku({...o.slot,disabled:r||!1}),u={ref:a,...o.props,id:i};return fr()({ourProps:u,theirProps:s,slot:l,defaultTag:O4,name:o.name||"Description"})}let I4=Ln(R4),D4=Object.assign(I4,{});var gC=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(gC||{});let N4=E.createContext(()=>{});function L4({value:e,children:t}){return Ke.createElement(N4.Provider,{value:e},t)}let yC=class extends Map{constructor(t){super(),this.factory=t}get(t){let n=super.get(t);return n===void 0&&(n=this.factory(t),this.set(t,n)),n}};var $4=Object.defineProperty,M4=(e,t,n)=>t in e?$4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,F4=(e,t,n)=>(M4(e,t+"",n),n),vC=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Jn=(e,t,n)=>(vC(e,t,"read from private field"),n?n.call(e):t.get(e)),xp=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},P_=(e,t,n,r)=>(vC(e,t,"write to private field"),t.set(e,n),n),$r,_l,xl;let B4=class{constructor(t){xp(this,$r,{}),xp(this,_l,new yC(()=>new Set)),xp(this,xl,new Set),F4(this,"disposables",Si()),P_(this,$r,t),Qr.isServer&&this.disposables.microTask(()=>{this.dispose()})}dispose(){this.disposables.dispose()}get state(){return Jn(this,$r)}subscribe(t,n){if(Qr.isServer)return()=>{};let r={selector:t,callback:n,current:t(Jn(this,$r))};return Jn(this,xl).add(r),this.disposables.add(()=>{Jn(this,xl).delete(r)})}on(t,n){return Qr.isServer?()=>{}:(Jn(this,_l).get(t).add(n),this.disposables.add(()=>{Jn(this,_l).get(t).delete(n)}))}send(t){let n=this.reduce(Jn(this,$r),t);if(n!==Jn(this,$r)){P_(this,$r,n);for(let r of Jn(this,xl)){let i=r.selector(Jn(this,$r));wC(r.current,i)||(r.current=i,r.callback(i))}for(let r of Jn(this,_l).get(t.type))r(Jn(this,$r),t)}}};$r=new WeakMap,_l=new WeakMap,xl=new WeakMap;function wC(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:Array.isArray(e)&&Array.isArray(t)?e.length!==t.length?!1:Sp(e[Symbol.iterator](),t[Symbol.iterator]()):e instanceof Map&&t instanceof Map||e instanceof Set&&t instanceof Set?e.size!==t.size?!1:Sp(e.entries(),t.entries()):A_(e)&&A_(t)?Sp(Object.entries(e)[Symbol.iterator](),Object.entries(t)[Symbol.iterator]()):!1}function Sp(e,t){do{let n=e.next(),r=t.next();if(n.done&&r.done)return!0;if(n.done||r.done||!Object.is(n.value,r.value))return!1}while(!0)}function A_(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);return t===null||Object.getPrototypeOf(t)===null}var U4=Object.defineProperty,z4=(e,t,n)=>t in e?U4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,j_=(e,t,n)=>(z4(e,typeof t!="symbol"?t+"":t,n),n),V4=(e=>(e[e.Push=0]="Push",e[e.Pop=1]="Pop",e))(V4||{});let K4={0(e,t){let n=t.id,r=e.stack,i=e.stack.indexOf(n);if(i!==-1){let s=e.stack.slice();return s.splice(i,1),s.push(n),r=s,{...e,stack:r}}return{...e,stack:[...e.stack,n]}},1(e,t){let n=t.id,r=e.stack.indexOf(n);if(r===-1)return e;let i=e.stack.slice();return i.splice(r,1),{...e,stack:i}}},W4=class bC extends B4{constructor(){super(...arguments),j_(this,"actions",{push:t=>this.send({type:0,id:t}),pop:t=>this.send({type:1,id:t})}),j_(this,"selectors",{isTop:(t,n)=>t.stack[t.stack.length-1]===n,inStack:(t,n)=>t.stack.includes(n)})}static new(){return new bC({stack:[]})}reduce(t,n){return _i(n.type,K4,t,n)}};const _C=new yC(()=>W4.new());var xC={exports:{}},SC={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wu=E;function H4(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var q4=typeof Object.is=="function"?Object.is:H4,G4=Wu.useSyncExternalStore,Q4=Wu.useRef,Y4=Wu.useEffect,J4=Wu.useMemo,Z4=Wu.useDebugValue;SC.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=Q4(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=J4(function(){function l(m){if(!u){if(u=!0,c=m,m=r(m),i!==void 0&&o.hasValue){var w=o.value;if(i(w,m))return f=w}return f=m}if(w=f,q4(c,m))return w;var v=r(m);return i!==void 0&&i(w,v)?(c=m,w):(c=m,f=v)}var u=!1,c,f,p=n===void 0?null:n;return[function(){return l(t())},p===null?void 0:function(){return l(p())}]},[t,n,r,i]);var a=G4(e,s[0],s[1]);return Y4(function(){o.hasValue=!0,o.value=a},[a]),Z4(a),a};xC.exports=SC;var X4=xC.exports;function kC(e,t,n=wC){return X4.useSyncExternalStoreWithSelector(ft(r=>e.subscribe(eB,r)),ft(()=>e.state),ft(()=>e.state),ft(t),n)}function eB(e){return e}function Hu(e,t){let n=E.useId(),r=_C.get(t),[i,s]=kC(r,E.useCallback(o=>[r.selectors.isTop(o,n),r.selectors.inStack(o,n)],[r,n]));return Nn(()=>{if(e)return r.actions.push(n),()=>r.actions.pop(n)},[r,e,n]),e?s?i:!0:!1}let bg=new Map,zl=new Map;function O_(e){var t;let n=(t=zl.get(e))!=null?t:0;return zl.set(e,n+1),n!==0?()=>R_(e):(bg.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>R_(e))}function R_(e){var t;let n=(t=zl.get(e))!=null?t:1;if(n===1?zl.delete(e):zl.set(e,n-1),n!==1)return;let r=bg.get(e);r&&(r["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",r["aria-hidden"]),e.inert=r.inert,bg.delete(e))}function tB(e,{allowed:t,disallowed:n}={}){let r=Hu(e,"inert-others");Nn(()=>{var i,s;if(!r)return;let o=Si();for(let l of(i=n==null?void 0:n())!=null?i:[])l&&o.add(O_(l));let a=(s=t==null?void 0:t())!=null?s:[];for(let l of a){if(!l)continue;let u=Vu(l);if(!u)continue;let c=l.parentElement;for(;c&&c!==u.body;){for(let f of c.children)a.some(p=>f.contains(p))||o.add(O_(f));c=c.parentElement}}return o.dispose},[r,t,n])}function nB(e,t,n){let r=bo(i=>{let s=i.getBoundingClientRect();s.x===0&&s.y===0&&s.width===0&&s.height===0&&n()});E.useEffect(()=>{if(!e)return;let i=t===null?null:po(t)?t:t.current;if(!i)return;let s=Si();if(typeof ResizeObserver<"u"){let o=new ResizeObserver(()=>r.current(i));o.observe(i),s.add(()=>o.disconnect())}if(typeof IntersectionObserver<"u"){let o=new IntersectionObserver(()=>r.current(i));o.observe(i),s.add(()=>o.disconnect())}return()=>s.dispose()},[t,r,e])}let tf=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","details>summary","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),rB=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var ai=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(ai||{}),_g=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(_g||{}),iB=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(iB||{});function sB(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(tf)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function oB(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(rB)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var EC=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(EC||{});function aB(e,t=0){var n;return e===((n=Vu(e))==null?void 0:n.body)?!1:_i(t,{0(){return e.matches(tf)},1(){let r=e;for(;r!==null;){if(r.matches(tf))return!0;r=r.parentElement}return!1}})}var lB=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(lB||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function fi(e){e==null||e.focus({preventScroll:!0})}let uB=["textarea","input"].join(",");function cB(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,uB))!=null?n:!1}function dB(e,t=n=>n){return e.slice().sort((n,r)=>{let i=t(n),s=t(r);if(i===null||s===null)return 0;let o=i.compareDocumentPosition(s);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Vl(e,t,{sorted:n=!0,relativeTo:r=null,skipElements:i=[]}={}){let s=Array.isArray(e)?e.length>0?yg(e[0]):document:yg(e),o=Array.isArray(e)?n?dB(e):e:t&64?oB(e):sB(e);i.length>0&&o.length>1&&(o=o.filter(m=>!i.some(w=>w!=null&&"current"in w?(w==null?void 0:w.current)===m:w===m))),r=r??(s==null?void 0:s.activeElement);let a=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),l=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,o.indexOf(r))-1;if(t&4)return Math.max(0,o.indexOf(r))+1;if(t&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=t&32?{preventScroll:!0}:{},c=0,f=o.length,p;do{if(c>=f||c+f<=0)return 0;let m=l+c;if(t&16)m=(m+f)%f;else{if(m<0)return 3;if(m>=f)return 1}p=o[m],p==null||p.focus(u),c+=a}while(p!==fC(p));return t&6&&cB(p)&&p.select(),2}function CC(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function fB(){return/Android/gi.test(window.navigator.userAgent)}function I_(){return CC()||fB()}function Hc(e,t,n,r){let i=bo(n);E.useEffect(()=>{if(!e)return;function s(o){i.current(o)}return document.addEventListener(t,s,r),()=>document.removeEventListener(t,s,r)},[e,t,r])}function TC(e,t,n,r){let i=bo(n);E.useEffect(()=>{if(!e)return;function s(o){i.current(o)}return window.addEventListener(t,s,r),()=>window.removeEventListener(t,s,r)},[e,t,r])}const D_=30;function hB(e,t,n){let r=bo(n),i=E.useCallback(function(a,l){if(a.defaultPrevented)return;let u=l(a);if(u===null||!u.getRootNode().contains(u)||!u.isConnected)return;let c=function f(p){return typeof p=="function"?f(p()):Array.isArray(p)||p instanceof Set?p:[p]}(t);for(let f of c)if(f!==null&&(f.contains(u)||a.composed&&a.composedPath().includes(f)))return;return!aB(u,EC.Loose)&&u.tabIndex!==-1&&a.preventDefault(),r.current(a,u)},[r,t]),s=E.useRef(null);Hc(e,"pointerdown",a=>{var l,u;I_()||(s.current=((u=(l=a.composedPath)==null?void 0:l.call(a))==null?void 0:u[0])||a.target)},!0),Hc(e,"pointerup",a=>{if(I_()||!s.current)return;let l=s.current;return s.current=null,i(a,()=>l)},!0);let o=E.useRef({x:0,y:0});Hc(e,"touchstart",a=>{o.current.x=a.touches[0].clientX,o.current.y=a.touches[0].clientY},!0),Hc(e,"touchend",a=>{let l={x:a.changedTouches[0].clientX,y:a.changedTouches[0].clientY};if(!(Math.abs(l.x-o.current.x)>=D_||Math.abs(l.y-o.current.y)>=D_))return i(a,()=>ts(a.target)?a.target:null)},!0),TC(e,"blur",a=>i(a,()=>T4(window.document.activeElement)?window.document.activeElement:null),!0)}function Sv(...e){return E.useMemo(()=>Vu(...e),[...e])}function PC(e,t,n,r){let i=bo(n);E.useEffect(()=>{e=e??window;function s(o){i.current(o)}return e.addEventListener(t,s,r),()=>e.removeEventListener(t,s,r)},[e,t,r])}function pB(e){return E.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}function mB(e,t){let n=e(),r=new Set;return{getSnapshot(){return n},subscribe(i){return r.add(i),()=>r.delete(i)},dispatch(i,...s){let o=t[i].call(n,...s);o&&(n=o,r.forEach(a=>a()))}}}function gB(){let e;return{before({doc:t}){var n;let r=t.documentElement,i=(n=t.defaultView)!=null?n:window;e=Math.max(0,i.innerWidth-r.clientWidth)},after({doc:t,d:n}){let r=t.documentElement,i=Math.max(0,r.clientWidth-r.offsetWidth),s=Math.max(0,e-i);n.style(r,"paddingRight",`${s}px`)}}}function yB(){return CC()?{before({doc:e,d:t,meta:n}){function r(i){for(let s of n().containers)for(let o of s())if(o.contains(i))return!0;return!1}t.microTask(()=>{var i;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let a=Si();a.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>a.dispose()))}let s=(i=window.scrollY)!=null?i:window.pageYOffset,o=null;t.addEventListener(e,"click",a=>{if(ts(a.target))try{let l=a.target.closest("a");if(!l)return;let{hash:u}=new URL(l.href),c=e.querySelector(u);ts(c)&&!r(c)&&(o=c)}catch{}},!0),t.group(a=>{t.addEventListener(e,"touchstart",l=>{if(a.dispose(),ts(l.target)&&C4(l.target))if(r(l.target)){let u=l.target;for(;u.parentElement&&r(u.parentElement);)u=u.parentElement;a.style(u,"overscrollBehavior","contain")}else a.style(l.target,"touchAction","none")})}),t.addEventListener(e,"touchmove",a=>{if(ts(a.target)){if(P4(a.target))return;if(r(a.target)){let l=a.target;for(;l.parentElement&&l.dataset.headlessuiPortal!==""&&!(l.scrollHeight>l.clientHeight||l.scrollWidth>l.clientWidth);)l=l.parentElement;l.dataset.headlessuiPortal===""&&a.preventDefault()}else a.preventDefault()}},{passive:!1}),t.add(()=>{var a;let l=(a=window.scrollY)!=null?a:window.pageYOffset;s!==l&&window.scrollTo(0,s),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})})}}:{}}function vB(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function N_(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let qs=mB(()=>new Map,{PUSH(e,t){var n;let r=(n=this.get(e))!=null?n:{doc:e,count:0,d:Si(),meta:new Set,computedMeta:{}};return r.count++,r.meta.add(t),r.computedMeta=N_(r.meta),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t),n.computedMeta=N_(n.meta)),this},SCROLL_PREVENT(e){let t={doc:e.doc,d:e.d,meta(){return e.computedMeta}},n=[yB(),gB(),vB()];n.forEach(({before:r})=>r==null?void 0:r(t)),n.forEach(({after:r})=>r==null?void 0:r(t))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});qs.subscribe(()=>{let e=qs.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let r=t.get(n.doc)==="hidden",i=n.count!==0;(i&&!r||!i&&r)&&qs.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&qs.dispatch("TEARDOWN",n)}});function wB(e,t,n=()=>({containers:[]})){let r=pB(qs),i=t?r.get(t):void 0,s=i?i.count>0:!1;return Nn(()=>{if(!(!t||!e))return qs.dispatch("PUSH",t,n),()=>qs.dispatch("POP",t,n)},[e,t]),s}function bB(e,t,n=()=>[document.body]){let r=Hu(e,"scroll-lock");wB(r,t,i=>{var s;return{containers:[...(s=i.containers)!=null?s:[],n]}})}function _B(e=0){let[t,n]=E.useState(e),r=E.useCallback(l=>n(l),[]),i=E.useCallback(l=>n(u=>u|l),[]),s=E.useCallback(l=>(t&l)===l,[t]),o=E.useCallback(l=>n(u=>u&~l),[]),a=E.useCallback(l=>n(u=>u^l),[]);return{flags:t,setFlag:r,addFlag:i,hasFlag:s,removeFlag:o,toggleFlag:a}}var xB={},L_,$_;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((L_=process==null?void 0:xB)==null?void 0:L_.NODE_ENV)==="test"&&typeof(($_=Element==null?void 0:Element.prototype)==null?void 0:$_.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var SB=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(SB||{});function kB(e){let t={};for(let n in e)e[n]===!0&&(t[`data-${n}`]="");return t}function EB(e,t,n,r){let[i,s]=E.useState(n),{hasFlag:o,addFlag:a,removeFlag:l}=_B(e&&i?3:0),u=E.useRef(!1),c=E.useRef(!1),f=$f();return Nn(()=>{var p;if(e){if(n&&s(!0),!t){n&&a(3);return}return(p=r==null?void 0:r.start)==null||p.call(r,n),CB(t,{inFlight:u,prepare(){c.current?c.current=!1:c.current=u.current,u.current=!0,!c.current&&(n?(a(3),l(4)):(a(4),l(2)))},run(){c.current?n?(l(3),a(4)):(l(4),a(3)):n?l(1):a(1)},done(){var m;c.current&&AB(t)||(u.current=!1,l(7),n||s(!1),(m=r==null?void 0:r.end)==null||m.call(r,n))}})}},[e,n,t,f]),e?[i,{closed:o(1),enter:o(2),leave:o(4),transition:o(2)||o(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function CB(e,{prepare:t,run:n,done:r,inFlight:i}){let s=Si();return PB(e,{prepare:t,inFlight:i}),s.nextFrame(()=>{n(),s.requestAnimationFrame(()=>{s.add(TB(e,r))})}),s.dispose}function TB(e,t){var n,r;let i=Si();if(!e)return i.dispose;let s=!1;i.add(()=>{s=!0});let o=(r=(n=e.getAnimations)==null?void 0:n.call(e).filter(a=>a instanceof CSSTransition))!=null?r:[];return o.length===0?(t(),i.dispose):(Promise.allSettled(o.map(a=>a.finished)).then(()=>{s||t()}),i.dispose)}function PB(e,{inFlight:t,prepare:n}){if(t!=null&&t.current){n();return}let r=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=r}function AB(e){var t,n;return((n=(t=e.getAnimations)==null?void 0:t.call(e))!=null?n:[]).some(r=>r instanceof CSSTransition&&r.playState!=="finished")}function kv(e,t){let n=E.useRef([]),r=ft(e);E.useEffect(()=>{let i=[...n.current];for(let[s,o]of t.entries())if(n.current[s]!==o){let a=r(t,i);return n.current=t,a}},[r,...t])}let Mf=E.createContext(null);Mf.displayName="OpenClosedContext";var kr=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(kr||{});function Ff(){return E.useContext(Mf)}function jB({value:e,children:t}){return Ke.createElement(Mf.Provider,{value:e},t)}function OB({children:e}){return Ke.createElement(Mf.Provider,{value:null},e)}function RB(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Vi=[];RB(()=>{function e(t){if(!ts(t.target)||t.target===document.body||Vi[0]===t.target)return;let n=t.target;n=n.closest(tf),Vi.unshift(n??t.target),Vi=Vi.filter(r=>r!=null&&r.isConnected),Vi.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function AC(e){let t=ft(e),n=E.useRef(!1);E.useEffect(()=>(n.current=!1,()=>{n.current=!0,Lf(()=>{n.current&&t()})}),[t])}let jC=E.createContext(!1);function IB(){return E.useContext(jC)}function M_(e){return Ke.createElement(jC.Provider,{value:e.force},e.children)}function DB(e){let t=IB(),n=E.useContext(RC),[r,i]=E.useState(()=>{var s;if(!t&&n!==null)return(s=n.current)!=null?s:null;if(Qr.isServer)return null;let o=e==null?void 0:e.getElementById("headlessui-portal-root");if(o)return o;if(e===null)return null;let a=e.createElement("div");return a.setAttribute("id","headlessui-portal-root"),e.body.appendChild(a)});return E.useEffect(()=>{r!==null&&(e!=null&&e.body.contains(r)||e==null||e.body.appendChild(r))},[r,e]),E.useEffect(()=>{t||n!==null&&i(n.current)},[n,i,t]),r}let OC=E.Fragment,NB=Ln(function(e,t){let{ownerDocument:n=null,...r}=e,i=E.useRef(null),s=Yr(A4(p=>{i.current=p}),t),o=Sv(i.current),a=n??o,l=DB(a),u=E.useContext(xg),c=$f(),f=fr();return AC(()=>{var p;l&&l.childNodes.length<=0&&((p=l.parentElement)==null||p.removeChild(l))}),l?wy.createPortal(Ke.createElement("div",{"data-headlessui-portal":"",ref:p=>{c.dispose(),u&&p&&c.add(u.register(p))}},f({ourProps:{ref:s},theirProps:r,slot:{},defaultTag:OC,name:"Portal"})),l):null});function LB(e,t){let n=Yr(t),{enabled:r=!0,ownerDocument:i,...s}=e,o=fr();return r?Ke.createElement(NB,{...s,ownerDocument:i,ref:n}):o({ourProps:{ref:n},theirProps:s,slot:{},defaultTag:OC,name:"Portal"})}let $B=E.Fragment,RC=E.createContext(null);function MB(e,t){let{target:n,...r}=e,i={ref:Yr(t)},s=fr();return Ke.createElement(RC.Provider,{value:n},s({ourProps:i,theirProps:r,defaultTag:$B,name:"Popover.Group"}))}let xg=E.createContext(null);function FB(){let e=E.useContext(xg),t=E.useRef([]),n=ft(s=>(t.current.push(s),e&&e.register(s),()=>r(s))),r=ft(s=>{let o=t.current.indexOf(s);o!==-1&&t.current.splice(o,1),e&&e.unregister(s)}),i=E.useMemo(()=>({register:n,unregister:r,portals:t}),[n,r,t]);return[t,E.useMemo(()=>function({children:s}){return Ke.createElement(xg.Provider,{value:i},s)},[i])]}let BB=Ln(LB),IC=Ln(MB),UB=Object.assign(BB,{Group:IC});function zB(e,t=typeof document<"u"?document.defaultView:null,n){let r=Hu(e,"escape");PC(t,"keydown",i=>{r&&(i.defaultPrevented||i.key===gC.Escape&&n(i))})}function VB(){var e;let[t]=E.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,r]=E.useState((e=t==null?void 0:t.matches)!=null?e:!1);return Nn(()=>{if(!t)return;function i(s){r(s.matches)}return t.addEventListener("change",i),()=>t.removeEventListener("change",i)},[t]),n}function KB({defaultContainers:e=[],portals:t,mainTreeNode:n}={}){let r=ft(()=>{var i,s;let o=Vu(n),a=[];for(let l of e)l!==null&&(ds(l)?a.push(l):"current"in l&&ds(l.current)&&a.push(l.current));if(t!=null&&t.current)for(let l of t.current)a.push(l);for(let l of(i=o==null?void 0:o.querySelectorAll("html > *, body > *"))!=null?i:[])l!==document.body&&l!==document.head&&ds(l)&&l.id!=="headlessui-portal-root"&&(n&&(l.contains(n)||l.contains((s=n==null?void 0:n.getRootNode())==null?void 0:s.host))||a.some(u=>l.contains(u))||a.push(l));return a});return{resolveContainers:r,contains:ft(i=>r().some(s=>s.contains(i)))}}let DC=E.createContext(null);function F_({children:e,node:t}){let[n,r]=E.useState(null),i=NC(t??n);return Ke.createElement(DC.Provider,{value:i},e,i===null&&Ke.createElement(wg,{features:ef.Hidden,ref:s=>{var o,a;if(s){for(let l of(a=(o=Vu(s))==null?void 0:o.querySelectorAll("html > *, body > *"))!=null?a:[])if(l!==document.body&&l!==document.head&&ds(l)&&l!=null&&l.contains(s)){r(l);break}}}}))}function NC(e=null){var t;return(t=E.useContext(DC))!=null?t:e}function WB(){let e=typeof document>"u";return"useSyncExternalStore"in c0?(t=>t.useSyncExternalStore)(c0)(()=>()=>{},()=>!1,()=>!e):!1}function Bf(){let e=WB(),[t,n]=E.useState(Qr.isHandoffComplete);return t&&Qr.isHandoffComplete===!1&&n(!1),E.useEffect(()=>{t!==!0&&n(!0)},[t]),E.useEffect(()=>Qr.handoff(),[]),e?!1:t}function Ev(){let e=E.useRef(!1);return Nn(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var Sl=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Sl||{});function HB(){let e=E.useRef(0);return TC(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function LC(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)ds(n.current)&&t.add(n.current);return t}let qB="div";var Fs=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(Fs||{});function GB(e,t){let n=E.useRef(null),r=Yr(n,t),{initialFocus:i,initialFocusFallback:s,containers:o,features:a=15,...l}=e;Bf()||(a=0);let u=Sv(n.current);ZB(a,{ownerDocument:u});let c=XB(a,{ownerDocument:u,container:n,initialFocus:i,initialFocusFallback:s});e5(a,{ownerDocument:u,container:n,containers:o,previousActiveElement:c});let f=HB(),p=ft(y=>{if(!po(n.current))return;let _=n.current;(T=>T())(()=>{_i(f.current,{[Sl.Forwards]:()=>{Vl(_,ai.First,{skipElements:[y.relatedTarget,s]})},[Sl.Backwards]:()=>{Vl(_,ai.Last,{skipElements:[y.relatedTarget,s]})}})})}),m=Hu(!!(a&2),"focus-trap#tab-lock"),w=$f(),v=E.useRef(!1),x={ref:r,onKeyDown(y){y.key=="Tab"&&(v.current=!0,w.requestAnimationFrame(()=>{v.current=!1}))},onBlur(y){if(!(a&4))return;let _=LC(o);po(n.current)&&_.add(n.current);let T=y.relatedTarget;ts(T)&&T.dataset.headlessuiFocusGuard!=="true"&&($C(_,T)||(v.current?Vl(n.current,_i(f.current,{[Sl.Forwards]:()=>ai.Next,[Sl.Backwards]:()=>ai.Previous})|ai.WrapAround,{relativeTo:y.target}):ts(y.target)&&fi(y.target)))}},g=fr();return Ke.createElement(Ke.Fragment,null,m&&Ke.createElement(wg,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:ef.Focusable}),g({ourProps:x,theirProps:l,defaultTag:qB,name:"FocusTrap"}),m&&Ke.createElement(wg,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:ef.Focusable}))}let QB=Ln(GB),YB=Object.assign(QB,{features:Fs});function JB(e=!0){let t=E.useRef(Vi.slice());return kv(([n],[r])=>{r===!0&&n===!1&&Lf(()=>{t.current.splice(0)}),r===!1&&n===!0&&(t.current=Vi.slice())},[e,Vi,t]),ft(()=>{var n;return(n=t.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function ZB(e,{ownerDocument:t}){let n=!!(e&8),r=JB(n);kv(()=>{n||m4(t==null?void 0:t.body)&&fi(r())},[n]),AC(()=>{n&&fi(r())})}function XB(e,{ownerDocument:t,container:n,initialFocus:r,initialFocusFallback:i}){let s=E.useRef(null),o=Hu(!!(e&1),"focus-trap#initial-focus"),a=Ev();return kv(()=>{if(e===0)return;if(!o){i!=null&&i.current&&fi(i.current);return}let l=n.current;l&&Lf(()=>{if(!a.current)return;let u=t==null?void 0:t.activeElement;if(r!=null&&r.current){if((r==null?void 0:r.current)===u){s.current=u;return}}else if(l.contains(u)){s.current=u;return}if(r!=null&&r.current)fi(r.current);else{if(e&16){if(Vl(l,ai.First|ai.AutoFocus)!==_g.Error)return}else if(Vl(l,ai.First)!==_g.Error)return;if(i!=null&&i.current&&(fi(i.current),(t==null?void 0:t.activeElement)===i.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}s.current=t==null?void 0:t.activeElement})},[i,o,e]),s}function e5(e,{ownerDocument:t,container:n,containers:r,previousActiveElement:i}){let s=Ev(),o=!!(e&4);PC(t==null?void 0:t.defaultView,"focus",a=>{if(!o||!s.current)return;let l=LC(r);po(n.current)&&l.add(n.current);let u=i.current;if(!u)return;let c=a.target;po(c)?$C(l,c)?(i.current=c,fi(c)):(a.preventDefault(),a.stopPropagation(),fi(u)):fi(i.current)},!0)}function $C(e,t){for(let n of e)if(n.contains(t))return!0;return!1}function MC(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||!Ul((t=e.as)!=null?t:BC)||Ke.Children.count(e.children)===1}let Uf=E.createContext(null);Uf.displayName="TransitionContext";var t5=(e=>(e.Visible="visible",e.Hidden="hidden",e))(t5||{});function n5(){let e=E.useContext(Uf);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function r5(){let e=E.useContext(zf);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let zf=E.createContext(null);zf.displayName="NestingContext";function Vf(e){return"children"in e?Vf(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function FC(e,t){let n=bo(e),r=E.useRef([]),i=Ev(),s=$f(),o=ft((m,w=es.Hidden)=>{let v=r.current.findIndex(({el:x})=>x===m);v!==-1&&(_i(w,{[es.Unmount](){r.current.splice(v,1)},[es.Hidden](){r.current[v].state="hidden"}}),s.microTask(()=>{var x;!Vf(r)&&i.current&&((x=n.current)==null||x.call(n))}))}),a=ft(m=>{let w=r.current.find(({el:v})=>v===m);return w?w.state!=="visible"&&(w.state="visible"):r.current.push({el:m,state:"visible"}),()=>o(m,es.Unmount)}),l=E.useRef([]),u=E.useRef(Promise.resolve()),c=E.useRef({enter:[],leave:[]}),f=ft((m,w,v)=>{l.current.splice(0),t&&(t.chains.current[w]=t.chains.current[w].filter(([x])=>x!==m)),t==null||t.chains.current[w].push([m,new Promise(x=>{l.current.push(x)})]),t==null||t.chains.current[w].push([m,new Promise(x=>{Promise.all(c.current[w].map(([g,y])=>y)).then(()=>x())})]),w==="enter"?u.current=u.current.then(()=>t==null?void 0:t.wait.current).then(()=>v(w)):v(w)}),p=ft((m,w,v)=>{Promise.all(c.current[w].splice(0).map(([x,g])=>g)).then(()=>{var x;(x=l.current.shift())==null||x()}).then(()=>v(w))});return E.useMemo(()=>({children:r,register:a,unregister:o,onStart:f,onStop:p,wait:u,chains:c}),[a,o,r,f,p,c,u])}let BC=E.Fragment,UC=Xd.RenderStrategy;function i5(e,t){var n,r;let{transition:i=!0,beforeEnter:s,afterEnter:o,beforeLeave:a,afterLeave:l,enter:u,enterFrom:c,enterTo:f,entered:p,leave:m,leaveFrom:w,leaveTo:v,...x}=e,[g,y]=E.useState(null),_=E.useRef(null),T=MC(e),O=Yr(...T?[_,t,y]:t===null?[]:[t]),R=(n=x.unmount)==null||n?es.Unmount:es.Hidden,{show:I,appear:$,initial:U}=n5(),[V,ge]=E.useState(I?"visible":"hidden"),M=r5(),{register:Y,unregister:P}=M;Nn(()=>Y(_),[Y,_]),Nn(()=>{if(R===es.Hidden&&_.current){if(I&&V!=="visible"){ge("visible");return}return _i(V,{hidden:()=>P(_),visible:()=>Y(_)})}},[V,_,Y,P,I,R]);let te=Bf();Nn(()=>{if(T&&te&&V==="visible"&&_.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[_,V,te,T]);let Ce=U&&!$,le=$&&I&&U,ue=E.useRef(!1),L=FC(()=>{ue.current||(ge("hidden"),P(_))},M),ie=ft(We=>{ue.current=!0;let Fe=We?"enter":"leave";L.onStart(_,Fe,be=>{be==="enter"?s==null||s():be==="leave"&&(a==null||a())})}),K=ft(We=>{let Fe=We?"enter":"leave";ue.current=!1,L.onStop(_,Fe,be=>{be==="enter"?o==null||o():be==="leave"&&(l==null||l())}),Fe==="leave"&&!Vf(L)&&(ge("hidden"),P(_))});E.useEffect(()=>{T&&i||(ie(I),K(I))},[I,T,i]);let W=!(!i||!T||!te||Ce),[,me]=EB(W,g,I,{start:ie,end:K}),ce=Ls({ref:O,className:((r=vg(x.className,le&&u,le&&c,me.enter&&u,me.enter&&me.closed&&c,me.enter&&!me.closed&&f,me.leave&&m,me.leave&&!me.closed&&w,me.leave&&me.closed&&v,!me.transition&&I&&p))==null?void 0:r.trim())||void 0,...kB(me)}),de=0;V==="visible"&&(de|=kr.Open),V==="hidden"&&(de|=kr.Closed),I&&V==="hidden"&&(de|=kr.Opening),!I&&V==="visible"&&(de|=kr.Closing);let Be=fr();return Ke.createElement(zf.Provider,{value:L},Ke.createElement(jB,{value:de},Be({ourProps:ce,theirProps:x,defaultTag:BC,features:UC,visible:V==="visible",name:"Transition.Child"})))}function s5(e,t){let{show:n,appear:r=!1,unmount:i=!0,...s}=e,o=E.useRef(null),a=MC(e),l=Yr(...a?[o,t]:t===null?[]:[t]);Bf();let u=Ff();if(n===void 0&&u!==null&&(n=(u&kr.Open)===kr.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[c,f]=E.useState(n?"visible":"hidden"),p=FC(()=>{n||f("hidden")}),[m,w]=E.useState(!0),v=E.useRef([n]);Nn(()=>{m!==!1&&v.current[v.current.length-1]!==n&&(v.current.push(n),w(!1))},[v,n]);let x=E.useMemo(()=>({show:n,appear:r,initial:m}),[n,r,m]);Nn(()=>{n?f("visible"):!Vf(p)&&o.current!==null&&f("hidden")},[n,p]);let g={unmount:i},y=ft(()=>{var O;m&&w(!1),(O=e.beforeEnter)==null||O.call(e)}),_=ft(()=>{var O;m&&w(!1),(O=e.beforeLeave)==null||O.call(e)}),T=fr();return Ke.createElement(zf.Provider,{value:p},Ke.createElement(Uf.Provider,{value:x},T({ourProps:{...g,as:E.Fragment,children:Ke.createElement(zC,{ref:l,...g,...s,beforeEnter:y,beforeLeave:_})},theirProps:{},defaultTag:E.Fragment,features:UC,visible:c==="visible",name:"Transition"})))}function o5(e,t){let n=E.useContext(Uf)!==null,r=Ff()!==null;return Ke.createElement(Ke.Fragment,null,!n&&r?Ke.createElement(Sg,{ref:t,...e}):Ke.createElement(zC,{ref:t,...e}))}let Sg=Ln(s5),zC=Ln(i5),Cv=Ln(o5),hd=Object.assign(Sg,{Child:Cv,Root:Sg});var a5=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(a5||{}),l5=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(l5||{});let u5={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},Tv=E.createContext(null);Tv.displayName="DialogContext";function Kf(e){let t=E.useContext(Tv);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Kf),n}return t}function c5(e,t){return _i(t.type,u5,e,t)}let B_=Ln(function(e,t){let n=E.useId(),{id:r=`headlessui-dialog-${n}`,open:i,onClose:s,initialFocus:o,role:a="dialog",autoFocus:l=!0,__demoMode:u=!1,unmount:c=!1,...f}=e,p=E.useRef(!1);a=function(){return a==="dialog"||a==="alertdialog"?a:(p.current||(p.current=!0,console.warn(`Invalid role [${a}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let m=Ff();i===void 0&&m!==null&&(i=(m&kr.Open)===kr.Open);let w=E.useRef(null),v=Yr(w,t),x=Sv(w.current),g=i?0:1,[y,_]=E.useReducer(c5,{titleId:null,descriptionId:null,panelRef:E.createRef()}),T=ft(()=>s(!1)),O=ft(me=>_({type:0,id:me})),R=Bf()?g===0:!1,[I,$]=FB(),U={get current(){var me;return(me=y.panelRef.current)!=null?me:w.current}},V=NC(),{resolveContainers:ge}=KB({mainTreeNode:V,portals:I,defaultContainers:[U]}),M=m!==null?(m&kr.Closing)===kr.Closing:!1;tB(u||M?!1:R,{allowed:ft(()=>{var me,ce;return[(ce=(me=w.current)==null?void 0:me.closest("[data-headlessui-portal]"))!=null?ce:null]}),disallowed:ft(()=>{var me;return[(me=V==null?void 0:V.closest("body > *:not(#headlessui-portal-root)"))!=null?me:null]})});let Y=_C.get(null);Nn(()=>{if(R)return Y.actions.push(r),()=>Y.actions.pop(r)},[Y,r,R]);let P=kC(Y,E.useCallback(me=>Y.selectors.isTop(me,r),[Y,r]));hB(P,ge,me=>{me.preventDefault(),T()}),zB(P,x==null?void 0:x.defaultView,me=>{me.preventDefault(),me.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),T()}),bB(u||M?!1:R,x,ge),nB(R,w,T);let[te,Ce]=j4(),le=E.useMemo(()=>[{dialogState:g,close:T,setTitleId:O,unmount:c},y],[g,T,O,c,y]),ue=Ku({open:g===0}),L={ref:v,id:r,role:a,tabIndex:-1,"aria-modal":u?void 0:g===0?!0:void 0,"aria-labelledby":y.titleId,"aria-describedby":te,unmount:c},ie=!VB(),K=Fs.None;R&&!u&&(K|=Fs.RestoreFocus,K|=Fs.TabLock,l&&(K|=Fs.AutoFocus),ie&&(K|=Fs.InitialFocus));let W=fr();return Ke.createElement(OB,null,Ke.createElement(M_,{force:!0},Ke.createElement(UB,null,Ke.createElement(Tv.Provider,{value:le},Ke.createElement(IC,{target:w},Ke.createElement(M_,{force:!1},Ke.createElement(Ce,{slot:ue},Ke.createElement($,null,Ke.createElement(YB,{initialFocus:o,initialFocusFallback:w,containers:ge,features:K},Ke.createElement(L4,{value:T},W({ourProps:L,theirProps:f,slot:ue,defaultTag:d5,features:f5,visible:g===0,name:"Dialog"})))))))))))}),d5="div",f5=Xd.RenderStrategy|Xd.Static;function h5(e,t){let{transition:n=!1,open:r,...i}=e,s=Ff(),o=e.hasOwnProperty("open")||s!==null,a=e.hasOwnProperty("onClose");if(!o&&!a)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!o)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!a)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!s&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(r!==void 0||n)&&!i.static?Ke.createElement(F_,null,Ke.createElement(hd,{show:r,transition:n,unmount:i.unmount},Ke.createElement(B_,{ref:t,...i}))):Ke.createElement(F_,null,Ke.createElement(B_,{ref:t,open:r,...i}))}let p5="div";function m5(e,t){let n=E.useId(),{id:r=`headlessui-dialog-panel-${n}`,transition:i=!1,...s}=e,[{dialogState:o,unmount:a},l]=Kf("Dialog.Panel"),u=Yr(t,l.panelRef),c=Ku({open:o===0}),f=ft(x=>{x.stopPropagation()}),p={ref:u,id:r,onClick:f},m=i?Cv:E.Fragment,w=i?{unmount:a}:{},v=fr();return Ke.createElement(m,{...w},v({ourProps:p,theirProps:s,slot:c,defaultTag:p5,name:"Dialog.Panel"}))}let g5="div";function y5(e,t){let{transition:n=!1,...r}=e,[{dialogState:i,unmount:s}]=Kf("Dialog.Backdrop"),o=Ku({open:i===0}),a={ref:t,"aria-hidden":!0},l=n?Cv:E.Fragment,u=n?{unmount:s}:{},c=fr();return Ke.createElement(l,{...u},c({ourProps:a,theirProps:r,slot:o,defaultTag:g5,name:"Dialog.Backdrop"}))}let v5="h2";function w5(e,t){let n=E.useId(),{id:r=`headlessui-dialog-title-${n}`,...i}=e,[{dialogState:s,setTitleId:o}]=Kf("Dialog.Title"),a=Yr(t);E.useEffect(()=>(o(r),()=>o(null)),[r,o]);let l=Ku({open:s===0}),u={ref:a,id:r};return fr()({ourProps:u,theirProps:i,slot:l,defaultTag:v5,name:"Dialog.Title"})}let b5=Ln(h5),_5=Ln(m5);Ln(y5);let x5=Ln(w5),kp=Object.assign(b5,{Panel:_5,Title:x5,Description:D4});const S5=({isOpen:e,onClose:t,onLanguageSave:n,currentLanguage:r})=>{const[i,s]=E.useState(r),o=l=>{s(l.target.value)},a=()=>{n(i),t()};return k.jsx(hd,{appear:!0,show:e,as:E.Fragment,children:k.jsxs(kp,{as:"div",className:"relative z-10",onClose:t,children:[k.jsxs(hd.Child,{as:"div",enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:[k.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"})," "]}),k.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:k.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:k.jsx(hd.Child,{as:"div",enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:k.jsxs(kp.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all",children:[k.jsx(kp.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900",children:"Language Settings"}),k.jsxs("div",{className:"mt-2",children:[k.jsxs("label",{className:"block",children:[k.jsx("input",{type:"radio",name:"language",value:"iast",checked:i==="iast",onChange:o,className:"mr-2"}),"IAST"]}),k.jsx("br",{}),k.jsxs("label",{className:"block",children:[k.jsx("input",{type:"radio",name:"language",value:"tamil_superscripted",checked:i==="tamil_superscripted",onChange:o,className:"mr-2"}),"Tamil"]}),k.jsx("br",{}),k.jsxs("label",{className:"block",children:[k.jsx("input",{type:"radio",name:"language",value:"malayalam",checked:i==="malayalam",onChange:o,className:"mr-2"}),"Malayalam"]}),k.jsx("br",{}),k.jsxs("label",{className:"block",children:[k.jsx("input",{type:"radio",name:"language",value:"devanagari",checked:i==="devanagari",onChange:o,className:"mr-2"}),"Devanagari"]}),k.jsx("br",{}),k.jsxs("label",{className:"block",children:[k.jsx("input",{type:"radio",name:"language",value:"itrans",checked:i==="itrans",onChange:o,className:"mr-2"}),"ITrans"]}),k.jsx("br",{})]}),k.jsxs("div",{className:"mt-4",children:[k.jsx("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent bg-gray-200 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-300 focus:outline-none focus-visible:ring-2 focus-visible:ring-gray-500 focus-visible:ring-offset-2 mr-2",onClick:t,children:"Close"}),k.jsx("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent bg-blue-100 px-4 py-2 text-sm font-medium text-blue-900 hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",onClick:a,children:"Save"})]})]})})})})]})})},k5=()=>{const[e,t]=E.useState(navigator.onLine);E.useEffect(()=>{const p=()=>t(!0),m=()=>t(!1);return window.addEventListener("online",p),window.addEventListener("offline",m),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(w=>{console.log("Service Worker is active:",w.active)}),()=>{window.removeEventListener("online",p),window.removeEventListener("offline",m)}},[]);const{preferredLanguage:n,setPreferredLanguage:r}=Ba(),{session:i}=bs(),[s,o]=E.useState(!1),a=()=>o(!s),[l,u]=E.useState(!1),c=()=>u(!0),f=()=>u(!1);return E.useEffect(()=>{i&&o(!1)},[i]),k.jsx(nD,{children:k.jsx(JR,{children:k.jsxs("div",{className:"app-layout",children:[" ",k.jsx("div",{className:"flex justify-end p-4 bg-gray-100",children:k.jsx(d4,{toggleDropdown:a,isDropdownOpen:s,openLanguageSettings:c})}),k.jsx(S5,{isOpen:l,onClose:f,onLanguageSave:r,currentLanguage:n}),k.jsx(eD,{children:k.jsxs(c4,{children:[k.jsx(l4,{}),k.jsx(UF,{})]})})]})})})};function E5(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:s,onRegisterError:o}=e;let a,l;const u=async(f=!0)=>{await l};async function c(){if("serviceWorker"in navigator){if(a=await $a(async()=>{const{Workbox:f}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:f}},[]).then(({Workbox:f})=>new f("/new-sankeertan/sw.js",{scope:"/new-sankeertan/",type:"classic"})).catch(f=>{o==null||o(f)}),!a)return;a.addEventListener("activated",f=>{(f.isUpdate||f.isExternal)&&window.location.reload()}),a.addEventListener("installed",f=>{f.isUpdate||r==null||r()}),a.register({immediate:t}).then(f=>{s?s("/new-sankeertan/sw.js",f):i==null||i(f)}).catch(f=>{o==null||o(f)})}}return l=c(),u}E5();const C5=new CI({defaultOptions:{queries:{staleTime:1/0,gcTime:1/0}}}),T5=Ep.createRoot(document.getElementById("root"));T5.render(k.jsx(Ke.StrictMode,{children:k.jsx(TI,{client:C5,children:k.jsx(rj,{children:k.jsx(mk,{children:k.jsx(k5,{})})})})}));
